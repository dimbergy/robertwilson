!function(){var moduleFactory=function($){var module=this;$.require().script("mvc/lang.string").done(function(){var exports=function(){var initializing=false,makeArray=$.makeArray,isFunction=$.isFunction,isArray=$.isArray,extend=$.extend,getObject=$.String.getObject,concatArgs=function(arr,args){return arr.concat(makeArray(args))},fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,inheritProps=function(newProps,oldProps,addTo){addTo=addTo||newProps;for(var name in newProps){addTo[name]=isFunction(newProps[name])&&isFunction(oldProps[name])&&fnTest.test(newProps[name])?function(name,fn){return function(){var tmp=this._super,ret;this._super=oldProps[name];ret=fn.apply(this,arguments);this._super=tmp;return ret}}(name,newProps[name]):newProps[name]}},STR_PROTOTYPE="prototype";clss=$.Class=function(){if(arguments.length){clss.extend.apply(clss,arguments)}};extend(clss,{proxy:function(funcs){var args=makeArray(arguments),self;funcs=args.shift();if(!isArray(funcs)){funcs=[funcs]}self=this;return function class_cb(){var cur=concatArgs(args,arguments),isString,length=funcs.length,f=0,func;for(;f<length;f++){func=funcs[f];if(!func){continue}isString=typeof func=="string";if(isString&&self._set_called){self.called=func}cur=(isString?self[func]:func).apply(self,cur||[]);if(f<length-1){cur=!isArray(cur)||cur._use_call?[cur]:cur}}return cur}},newInstance:function(){var inst=this.rawInstance(),args;if(inst.setup){args=inst.setup.apply(inst,arguments)}if(inst.init){inst.init.apply(inst,isArray(args)?args:arguments)}return inst},setup:function(baseClass,fullName){this.defaults=extend(true,{},baseClass.defaults,this.defaults);return arguments},rawInstance:function(){initializing=true;var inst=new this;initializing=false;return inst},extend:function(fullName,klass,proto){if(typeof fullName!="string"){proto=klass;klass=fullName;fullName=null}if(!proto){proto=klass;klass=null}proto=proto||{};var _super_class=this,_super=this[STR_PROTOTYPE],name,shortName,namespace,prototype;initializing=true;prototype=new this;initializing=false;inheritProps(proto,_super,prototype);function Class(){if(initializing)return;if(this.constructor!==Class&&arguments.length){return arguments.callee.extend.apply(arguments.callee,arguments)}else{return this.Class.newInstance.apply(this.Class,arguments)}}for(name in this){if(this.hasOwnProperty(name)){Class[name]=this[name]}}inheritProps(klass,this,Class);if(fullName){var parts=fullName.split(/\./),shortName=parts.pop(),current=getObject(parts.join("."),window,true),namespace=current;extend(true,Class,current[shortName]);current[shortName]=Class}extend(Class,{prototype:prototype,namespace:namespace,shortName:shortName,constructor:Class,fullName:fullName});Class[STR_PROTOTYPE].Class=Class[STR_PROTOTYPE].constructor=Class;var args=Class.setup.apply(Class,concatArgs([_super_class],arguments));if(Class.init){Class.init.apply(Class,args||concatArgs([_super_class],arguments))}return Class}});clss.callback=clss[STR_PROTOTYPE].callback=clss[STR_PROTOTYPE].proxy=clss.proxy};exports();module.resolveWith(exports)})};dispatch("mvc/class").containing(moduleFactory).to("Foundry/2.1 Modules")}();