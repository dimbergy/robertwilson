!function(){var moduleFactory=function($){var module=this;$.require().script("mvc/model").done(function(){var exports=function(){var validate=function(attrNames,options,proc){if(!proc){proc=options;options={}}options=options||{};attrNames=$.makeArray(attrNames);if(options.testIf&&!options.testIf.call(this)){return}var self=this;$.each(attrNames,function(i,attrName){if(!self.validations[attrName]){self.validations[attrName]=[]}self.validations[attrName].push(function(){var res=proc.call(this,this[attrName]);return res===undefined?undefined:options.message||res})})};$.extend($.Model,{validate:validate,validationMessages:{format:"is invalid",inclusion:"is not a valid option (perhaps out of range)",lengthShort:"is too short",lengthLong:"is too long",presence:"can't be empty",range:"is out of range"},validateFormatOf:function(attrNames,regexp,options){validate.call(this,attrNames,options,function(value){if(typeof value!="undefined"&&value!=""&&String(value).match(regexp)==null){return this.Class.validationMessages.format}})},validateInclusionOf:function(attrNames,inArray,options){validate.call(this,attrNames,options,function(value){if(typeof value=="undefined")return;if($.grep(inArray,function(elm){return elm==value}).length==0)return this.Class.validationMessages.inclusion})},validateLengthOf:function(attrNames,min,max,options){validate.call(this,attrNames,options,function(value){if(typeof value=="undefined"&&min>0||value.length<min)return this.Class.validationMessages.lengthShort+" (min="+min+")";else if(typeof value!="undefined"&&value.length>max)return this.Class.validationMessages.lengthLong+" (max="+max+")"})},validatePresenceOf:function(attrNames,options){validate.call(this,attrNames,options,function(value){if(typeof value=="undefined"||value==""||value===null)return this.Class.validationMessages.presence})},validateRangeOf:function(attrNames,low,hi,options){validate.call(this,attrNames,options,function(value){if(typeof value!="undefined"&&value<low||value>hi)return this.Class.validationMessages.range+" ["+low+","+hi+"]"})}})};exports();module.resolveWith(exports)})};dispatch("mvc/model.validations").containing(moduleFactory).to("Foundry/2.1 Modules")}();