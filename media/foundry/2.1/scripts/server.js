!function(){var moduleFactory=function($){var module=this;var exports=function(){var self=$.server=function(options){var request=$.Deferred(),ajaxOptions=$.extend(true,{},self.defaultOptions,options,{success:function(){}});request.xhr=$.Ajax(ajaxOptions).done(function(commands){if(typeof commands==="string"){try{commands=$.parseJSON(commands)}catch(e){}}if(!$.isArray(commands)){request.rejectWith(request,["Invalid server response."])}else{$.each(commands,function(i,command){var type=command.type,parser=self.parsers[type]||options[type];if($.isFunction(parser)){parser.apply(request,command.data)}})}if(request.state()==="pending"){request.resolveWith(request)}}).fail(function(xhr,status,response){response=response||["Error retrieving data from server."];request.rejectWith(request,response)});return request};self.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},dataType:"json"};self.parsers={script:function(){var data=$.makeArray(arguments);if(typeof data[0]=="string"){try{eval(data[0])}catch(err){}return}var chain=window,chainBroken=false;$.each(data,function(i,chainer){if(chainer.property==="Foundry"){chainer.property=$.globalNamespace}if(chainer.method==="Foundry"){chainer.method=$.globalNamespace}try{switch(chainer.type){case"get":chain=chain[chainer.property];break;case"set":chain[chainer.property]=chainer.value;chainBroken=true;break;case"call":chain=chain[chainer.method].apply(chain,chainer.args);break}}catch(err){chainBroken=true}})},resolve:function(){this.resolveWith(this,arguments)},reject:function(args){this.rejectWith(this,arguments)}}};exports();module.resolveWith(exports)};dispatch("server").containing(moduleFactory).to("Foundry/2.1 Modules")}();