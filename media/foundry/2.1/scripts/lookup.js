!function(){var moduleFactory=function($){var module=this;var exports=function(){var defaultOptions={using:[],inside:{},within:[],exclude:[],match:function(data){},depth:1};var $match=function(value,keyword){if(typeof value=="string"||typeof value=="number")return value.toUpperCase().indexOf(keyword.toUpperCase())>=0;return false};$.lookup=function(options){if(typeof options=="string"){options={using:arguments[0],dataset:arguments[1]||{}}}options=$.extend({},defaultOptions,options);if($.isEmptyObject(options.inside))return{};if(typeof options.using=="string")options.using=$.trim(options.using).split(" ");if(options.using.length<1)return options.inside;if(typeof options.within=="string")options.within=$.trim(options.within).split(" ");var dataset=$.makeArray($.extend(true,{length:options.inside.length},options.inside));var result=[];$.each(options.using,function(i,keyword){result=result.concat($.grep(dataset,function(data){var match=false;if(data[".added"])return;$.each(options.exclude,function(i,pattern){for(key in pattern){match=$match(data[key],pattern[key]);return!match}});if(match)return false;if(options.within.length>0){$.each(options.within,function(i,key){match=$match(data[key],keyword);return!match})}else{for(key in data){match=$match(data[key],keyword);if(match)break}}if(match)data[".added"]=true;return match}))});return result}};exports();module.resolveWith(exports)};dispatch("lookup").containing(moduleFactory).to("Foundry/2.1 Modules")}();