/*
	Copyright (C) 2010 Stack Ideas Private Limited. All rights reserved.
 @license		GNU/GPL, see LICENSE.php.

 EasyDiscuss is free software. This version may have been modified pursuant
 to the GNU General Public License, and as distributed it includes or
 is derivative of works licensed under the GNU General Public License or
 other free or open source software licenses.
 See COPYRIGHT.php for copyright notices and details.
*/
FD31.installer("EasyDiscuss","definitions",function(r){r.module("easydiscuss/attachments easydiscuss/avatar easydiscuss/bbcode easydiscuss/captcha easydiscuss/categories easydiscuss/comments easydiscuss/composer easydiscuss/conversation easydiscuss/customfields easydiscuss/easydiscuss easydiscuss/layout/responsive easydiscuss/layout/lightbox easydiscuss/legacy easydiscuss/favourites easydiscuss/filterbar easydiscuss/likes easydiscuss/location easydiscuss/newpost easydiscuss/polls easydiscuss/posts easydiscuss/prism easydiscuss/profile easydiscuss/ranks easydiscuss/replies easydiscuss/votes easydiscuss/stylesheet easydiscuss/tag easydiscuss/toolbar".split(" "));
r.require.template.loader("easydiscuss/field.form.attachments.item easydiscuss/field.form.attachments.fileinput easydiscuss/conversation.read.item easydiscuss/field.form.polls.answer easydiscuss/comment.form easydiscuss/post.notification".split(" "));r.require.language.loader("COM_EASYDISCUSS_EXCEED_ATTACHMENT_LIMIT COM_EASYDISCUSS_TERMS_PLEASE_ACCEPT COM_EASYDISCUSS_COMMENT_SUCESSFULLY_ADDED COM_EASYDISCUSS_COMMENT_LOAD_MORE COM_EASYDISCUSS_COMMENT_LOADING_MORE_COMMENTS COM_EASYDISCUSS_COMMENT_LOAD_ERROR COM_EASYDISCUSS_CONVERSATION_EMPTY_CONTENT COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR COM_EASYDISCUSS_BBCODE_BOLD COM_EASYDISCUSS_BBCODE_ITALIC COM_EASYDISCUSS_BBCODE_UNDERLINE COM_EASYDISCUSS_BBCODE_URL COM_EASYDISCUSS_BBCODE_TITLE COM_EASYDISCUSS_BBCODE_PICTURE COM_EASYDISCUSS_BBCODE_VIDEO COM_EASYDISCUSS_BBCODE_BULLETED_LIST COM_EASYDISCUSS_BBCODE_NUMERIC_LIST COM_EASYDISCUSS_BBCODE_LIST_ITEM COM_EASYDISCUSS_BBCODE_QUOTES COM_EASYDISCUSS_BBCODE_CODE COM_EASYDISCUSS_BBCODE_HAPPY COM_EASYDISCUSS_BBCODE_SMILE COM_EASYDISCUSS_BBCODE_SURPRISED COM_EASYDISCUSS_BBCODE_TONGUE COM_EASYDISCUSS_BBCODE_UNHAPPY COM_EASYDISCUSS_BBCODE_WINK COM_EASYDISCUSS_FAVOURITE_BUTTON_UNFAVOURITE COM_EASYDISCUSS_FAVOURITE_BUTTON_FAVOURITE COM_EASYDISCUSS_UNLIKE_THIS_POST COM_EASYDISCUSS_LIKE_THIS_POST COM_EASYDISCUSS_UNLIKE COM_EASYDISCUSS_LIKES COM_EASYDISCUSS_NOTIFICATION_NEW_REPLIES COM_EASYDISCUSS_NOTIFICATION_NEW_COMMENTS COM_EASYDISCUSS_PLEASE_SELECT_CATEGORY_DESC COM_EASYDISCUSS_POST_TITLE_CANNOT_EMPTY COM_EASYDISCUSS_POST_CONTENT_IS_EMPTY COM_EASYDISCUSS_SUCCESS COM_EASYDISCUSS_FAIL COM_EASYDISCUSS_REPLY_LOADING_MORE_COMMENTS COM_EASYDISCUSS_REPLY_LOAD_ERROR".split(" "));
(function(){var b=r.stylesheet({content:""})?"resolve":"reject";r.each(["easydiscuss/fancybox/default"],function(d,a){r.require.stylesheet.loader(a)[b]()})})()});
FD31.installer("EasyDiscuss","scripts",function(r){EasyDiscuss.module("attachments",function(b){var d=this;EasyDiscuss.require().view("field.form.attachments.item").done(function(a){EasyDiscuss.Controller("Attachments",{defaultOptions:{view:{item:"field.form.attachments.item"},hasAttachmentLimit:!1,attachmentLimit:0,editable:!1,"{itemGroup}":"[data-attachment-itemgroup]","{item}":"[data-attachment-item]"}},function(a){return{init:function(){var b=a.options,f=a.element.attr("data-attachment-limit");
void 0!==f&&(b.hasAttachmentLimit=!0,b.attachmentLimit=parseInt(f)||0);0===b.attachmentLimit&&(b.hasAttachmentLimit=!1);b.editable=a.element.hasClass("editable");a.item().addController("EasyDiscuss.Controller.Attachments.Item")},setLayout:function(){var b=a.options,f=a.item(":not(.new)").length,d=b.hasAttachmentLimit&&f>=b.attachmentLimit;a.element.toggleClass("limit-exceeded",d).toggleClass("no-attachment",1>f);b.editable&&(a.item(".new").remove(),d||a.view.item().appendTo(a.itemGroup()).addController("EasyDiscuss.Controller.Attachments.Item"))},
"{item} itemAdded":function(){a.setLayout()},"{item} itemRemoved":function(){setTimeout(function(){a.setLayout()},1)}}});EasyDiscuss.Controller("Attachments.Item",{defaultOptions:{"{removeButton}":"[data-attachment-remove-button]","{file}":"[data-attachment-file]","{title}":"[data-attachment-title]"}},function(a){return{init:function(){a.file().prop("disabled",!1)},add:function(){var b=a.file().val();type=a.getType(b);item=a.element;b.match(/fakepath/)&&(b=b.replace(/C:\\fakepath\\/i,""));item.removeClass("new").addClass("attachment-type-"+
type);a.title().html(b);a.trigger("itemAdded")},remove:function(){var b=a.element.attr("id");b?(b=b.replace("attachment-",""),disjax.loadingDialog(),disjax.load("attachments","confirmDelete",b.toString())):(a.trigger("itemRemoved"),a.element.remove())},getType:function(a){var c="default";switch(a.substr(a.lastIndexOf(".")+1)){case "jpg":case "png":case "gif":c="image";break;case "zip":case "rar":c="archive";break;case "pdf":c="pdf"}return c},"{file} change":function(){a.add()},"{removeButton} click":function(){a.remove()}}});
a(document).on("click.ed.attachment.remove","[data-attachment-remove-button]",function(){var c=a(this),b=c.parents(".discuss-attachments");b.hasController("EasyDiscuss.Controller.Attachments")||(b.addController("EasyDiscuss.Controller.Attachments"),c.click())});d.resolve()})});EasyDiscuss.module("avatar",function(b){var d=this;EasyDiscuss.require().library("imgareaselect").done(function(a){EasyDiscuss.Controller("Avatar",{defaultOptions:{"{avatarContainer}":".avatarContainer","{avatar}":".avatarContainer img",
"{avatarPreviewContainer}":".avatarPreviewContainer","{avatarPreviewPlaceholder}":".avatarPreviewPlaceholder","{avatarPreview}":".avatarPreview","{startCropButton}":".startCropButton","{saveCropButton}":".saveCropButton","{stopCropButton}":".stopCropButton","{alertMessage}":".alertMessage",selection:{disable:!1,handles:!0,show:!0,minWidth:160,minHeight:160,x1:0,y1:0,x2:160,y2:160,previewWidth:160,previewHeight:160,aspectRatio:"1:1"}}},function(c){return{init:function(){c.avatarPreviewContainer().css({width:c.options.selection.previewWidth,
height:c.options.selection.previewHeight,position:"relative",overflow:"hidden"});c.avatarPreview().css({maxWidth:"none"})},start:function(){c.alertMessage().hide();c.element.addClass("cropping");var b=c.options.selection,f=c.avatar(),d=c.avatarPreview(),h=f.width(),p=f.height(),k,n;c.selector=f.imgAreaSelect(a.extend({},b,{parent:c.avatarContainer(),instance:!0,x1:k=h/2-b.minWidth/2,y1:n=p/2-b.minHeight/2,x2:k+b.minWidth,y2:n+b.minHeight,onSelectChange:function(a,c){var f=b.previewWidth/(c.width||
1),k=b.previewHeight/(c.height||1);d.css({width:Math.round(f*h)+"px",height:Math.round(k*p)+"px",marginLeft:"-"+Math.round(f*c.x1)+"px",marginTop:"-"+Math.round(k*c.y1)+"px"})}}));c.avatarPreviewPlaceholder().hide();c.avatarPreview().show()},stop:function(){c.alertMessage().remove();c.element.removeClass("cropping");c.avatarPreview().hide();c.avatarPreviewPlaceholder().show();c.avatar().imgAreaSelect({hide:!0,disable:!0});delete c.selector},save:function(){if(void 0==c.selector)c.stop();else{var b=
c.selector.getSelection();c.saveCropButton().addClass("btn-loading");EasyDiscuss.ajax("site.views.profile.cropphoto",b).done(function(b,e){c.stop();c.avatarPreviewPlaceholder().attr("src",b+"?"+a.uid());c.alert(e||"Avatar successfully cropped!","success")}).fail(function(a){c.alert(a||"Unable to crop avatar.","error")}).always(function(){c.saveCropButton().removeClass("btn-loading")})}},alert:function(b,f){void 0===f&&(f="info");c.alertMessage().remove();a('<div class="alert alertMessage"></div>').addClass("alert-"+
f).html(b).prependTo(c.element)},"{startCropButton} click":function(){c.start()},"{saveCropButton} click":function(){c.save()},"{stopCropButton} click":function(){c.stop()}}});d.resolve()})});EasyDiscuss.module("bbcode",function(b){window.insertVideoCode=function(d,a,c){if(0==d.length)return!1;c=b("textarea[name="+c+"]");d="[video]"+d+"[/video]";if(0==a)return b(c).val(d),disjax.closedlg(),!0;var e=b(c).val();b(c).val(e.substring(0,a)+d+e.substring(a,e.length));disjax.closedlg()};b.getEasyDiscussBBCodeSettings=
{onTab:{keepDefault:!1,replaceWith:"    "},previewParserVar:"data",markupSet:[{name:b.language("COM_EASYDISCUSS_BBCODE_BOLD"),key:"B",openWith:"[b]",closeWith:"[/b]",className:"markitup-bold"},{name:b.language("COM_EASYDISCUSS_BBCODE_ITALIC"),key:"I",openWith:"[i]",closeWith:"[/i]",className:"markitup-italic"},{name:b.language("COM_EASYDISCUSS_BBCODE_UNDERLINE"),key:"U",openWith:"[u]",closeWith:"[/u]",className:"markitup-underline"},{separator:"---------------"},{name:b.language("COM_EASYDISCUSS_BBCODE_URL"),
key:"L",openWith:"[url=[![Link:]!]]",closeWith:"[/url]",placeHolder:b.language("COM_EASYDISCUSS_BBCODE_TITLE"),beforeInsert:function(b){},className:"markitup-url"},{name:b.language("COM_EASYDISCUSS_BBCODE_PICTURE"),key:"P",replaceWith:"[img][![Url]!][/img]",className:"markitup-picture"},{name:b.language("COM_EASYDISCUSS_BBCODE_VIDEO"),replaceWith:function(d){disjax.loadingDialog();disjax.load("post","showVideoDialog",b(d.textarea).attr("name"),d.caretPosition.toString())},beforeInsert:function(b){},
afterInsert:function(b){},className:"markitup-video"},{separator:"---------------"},{name:b.language("COM_EASYDISCUSS_BBCODE_BULLETED_LIST"),openWith:"[list]\n",closeWith:"\n[/list]",className:"markitup-bullet"},{name:b.language("COM_EASYDISCUSS_BBCODE_NUMERIC_LIST"),openWith:"[list=[![Starting number]!]]\n",closeWith:"\n[/list]",className:"markitup-numeric"},{name:b.language("COM_EASYDISCUSS_BBCODE_LIST_ITEM"),openWith:"[*] ",className:"markitup-list"},{separator:"---------------"},{name:b.language("COM_EASYDISCUSS_BBCODE_QUOTES"),
openWith:"[quote]",closeWith:"[/quote]",className:"markitup-quote"},{name:b.language("COM_EASYDISCUSS_BBCODE_CODE"),openWith:'[code type="markup"]',closeWith:"[/code]",className:"markitup-code"},{separator:"---------------"},{name:b.language("COM_EASYDISCUSS_BBCODE_HAPPY"),openWith:":D ",className:"markitup-happy"},{name:b.language("COM_EASYDISCUSS_BBCODE_SMILE"),openWith:":) ",className:"markitup-smile"},{name:b.language("COM_EASYDISCUSS_BBCODE_SURPRISED"),openWith:":o ",className:"markitup-surprised"},
{name:b.language("COM_EASYDISCUSS_BBCODE_TONGUE"),openWith:":p ",className:"markitup-tongue"},{name:b.language("COM_EASYDISCUSS_BBCODE_UNHAPPY"),openWith:":( ",className:"markitup-unhappy"},{name:b.language("COM_EASYDISCUSS_BBCODE_WINK"),openWith:";) ",className:"markitup-wink"}]};b.getEasyDiscussDialogBBCodeSettings={onShiftEnter:{keepDefault:!1,replaceWith:"<br />\n"},onCtrlEnter:{keepDefault:!1,openWith:"\n<p>",closeWith:"</p>"},onTab:{keepDefault:!1,replaceWith:"    "},previewParserVar:"data",
markupSet:[{name:b.language("COM_EASYDISCUSS_BBCODE_BOLD"),key:"B",openWith:"[b]",closeWith:"[/b]",className:"markitup-bold"},{name:b.language("COM_EASYDISCUSS_BBCODE_ITALIC"),key:"I",openWith:"[i]",closeWith:"[/i]",className:"markitup-italic"},{name:b.language("COM_EASYDISCUSS_BBCODE_UNDERLINE"),key:"U",openWith:"[u]",closeWith:"[/u]",className:"markitup-underline"},{separator:"---------------"},{name:b.language("COM_EASYDISCUSS_BBCODE_URL"),key:"L",openWith:"[url=[![Link:!:http://]!]]",closeWith:"[/url]",
placeHolder:b.language("COM_EASYDISCUSS_BBCODE_TITLE"),className:"markitup-url"},{name:b.language("COM_EASYDISCUSS_BBCODE_PICTURE"),key:"P",replaceWith:"[img][![Url]!][/img]",className:"markitup-picture"},{separator:"---------------"},{name:b.language("COM_EASYDISCUSS_BBCODE_BULLETED_LIST"),openWith:"[list]\n",closeWith:"\n[/list]",className:"markitup-bullet"},{name:b.language("COM_EASYDISCUSS_BBCODE_NUMERIC_LIST"),openWith:"[list=[![Starting number]!]]\n",closeWith:"\n[/list]",className:"markitup-numeric"},
{name:b.language("COM_EASYDISCUSS_BBCODE_LIST_ITEM"),openWith:"[*] ",className:"markitup-list"},{separator:"---------------"},{name:b.language("COM_EASYDISCUSS_BBCODE_QUOTES"),openWith:"[quote]",closeWith:"[/quote]",className:"markitup-quote"},{name:b.language("COM_EASYDISCUSS_BBCODE_CODE"),openWith:'[code type="xml"]',closeWith:"[/code]",className:"markitup-code"},{separator:"---------------"},{name:b.language("COM_EASYDISCUSS_BBCODE_HAPPY"),openWith:":D ",className:"markitup-happy"},{name:b.language("COM_EASYDISCUSS_BBCODE_SMILE"),
openWith:":) ",className:"markitup-smile"},{name:b.language("COM_EASYDISCUSS_BBCODE_SURPRISED"),openWith:":o ",className:"markitup-surprised"},{name:b.language("COM_EASYDISCUSS_BBCODE_TONGUE"),openWith:":p ",className:"markitup-tongue"},{name:b.language("COM_EASYDISCUSS_BBCODE_UNHAPPY"),openWith:":( ",className:"markitup-unhappy"},{name:b.language("COM_EASYDISCUSS_BBCODE_WINK"),openWith:";) ",className:"markitup-wink"}]};this.resolve()});EasyDiscuss.module("captcha",function(b){var d=this;EasyDiscuss.require().done(function(a){EasyDiscuss.Controller("Post.Captcha",
{defaultOptions:{"{reloadImage}":".reloadImage","{captchaResponse}":"#captcha-response","{captchaId}":"#captcha-id","{captchaImage}":"#captcha-image"}},function(a){return{init:function(){console.log("Captcha init")},"{reloadImage} click":function(b){EasyDiscuss.ajax("site.views.ask.reloadCaptcha",{captchaId:a.captchaId().val()},{beforeSend:function(){}}).done(function(b,e){a.captchaImage().attr("src",e);a.captchaId().val(b);a.captchaResponse().val("")}).fail(function(a){}).always(function(){})}}});
d.resolve()})});EasyDiscuss.module("categories",function(b){var d=this;EasyDiscuss.require().done(function(a){EasyDiscuss.Controller("Toggle.Categories",{defaultOptions:{postId:null,"{showChild}":".showChild","{hideChild}":".hideChild","{item}":"[data-item]"}},function(c){return{init:function(){},"{showChild} click":function(a){var b=a.data("id");c.openChild(b);a.addClass("icon-sort-up hideChild");a.removeClass("icon-sort-down");a.removeClass("showChild")},openChild:function(b){b=c.item('[data-parent-id="'+
b+'"]');b.show();a.each(b,function(c,b){a(b).data("id")})},"{hideChild} click":function(a){var b=a.data("id");c.closeChild(b);a.addClass("icon-sort-down showChild");a.removeClass("icon-sort-up");a.removeClass("hideChild")},closeChild:function(b){b=c.item('[data-parent-id="'+b+'"]');b.hide();a.each(b,function(b,e){var d=a(e).data("id");c.closeChild(d)})}}});EasyDiscuss.Controller("Toggle.Module.Categories",{defaultOptions:{postId:null,"{showChild}":".showChild","{hideChild}":".hideChild","{item}":"[data-item]"}},
function(c){return{init:function(){},"{showChild} click":function(a){var b=a.data("id");c.openChild(b);a.addClass("icon-sort-up hideChild");a.removeClass("icon-sort-down");a.removeClass("showChild")},openChild:function(b){b=c.item('[data-parent-id="'+b+'"]');b.show();a.each(b,function(c,b){a(b).data("id")})},"{hideChild} click":function(a){var b=a.data("id");c.closeChild(b);a.addClass("icon-sort-down showChild");a.removeClass("icon-sort-up");a.removeClass("hideChild")},closeChild:function(b){b=c.item('[data-parent-id="'+
b+'"]');b.hide();a.each(b,function(b,e){var d=a(e).data("id");c.closeChild(d)})}}});d.resolve()})});EasyDiscuss.module("comments",function(b){var d=this;EasyDiscuss.require().language("COM_EASYDISCUSS_TERMS_PLEASE_ACCEPT","COM_EASYDISCUSS_COMMENT_SUCESSFULLY_ADDED","COM_EASYDISCUSS_COMMENT_LOAD_MORE","COM_EASYDISCUSS_COMMENT_LOADING_MORE_COMMENTS","COM_EASYDISCUSS_COMMENT_LOAD_ERROR").done(function(){EasyDiscuss.Controller("Comment.List",{defaultOptions:{"{commentItems}":".commentItem"}},function(a){return{init:function(){a.commentItems().implement(EasyDiscuss.Controller.Comment.List.Item)}}});
EasyDiscuss.Controller("Comment.List.Item",{defaultOptions:{id:null,postId:null,"{deleteCommentLink}":".deleteComment","{convertCommentLink}":"[data-comment-convert-link]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.postId=a.element.data("post-id")},"{deleteCommentLink} click":function(){disjax.loadingDialog();disjax.load("comment","confirmDelete",a.options.id+"")},"{convertCommentLink} click":function(){disjax.loadingDialog();disjax.load("comment","confirmConvert",
a.options.id+"",a.options.postId+"")}}});EasyDiscuss.Controller("Comment.LoadMore",{defaultOptions:{id:null,currentCount:0}},function(a){return{init:function(){a.options.id=a.element.data("postid");a.doneLoading=!1},"{self} click":function(c){c.enabled()&&(c.disabled(!0),a.element.addClass("btn-loading").html(b.language("COM_EASYDISCUSS_COMMENT_LOADING_MORE_COMMENTS")),EasyDiscuss.ajax("site.views.post.getComments",{id:a.options.id,start:a.list.commentItems().length}).done(function(e,f){var d=b(e).filter("li");
d.implement(EasyDiscuss.Controller.Comment.List.Item);a.list.element.append(d);f?a.element.html(b.language("COM_EASYDISCUSS_COMMENT_LOAD_MORE")):(a.doneLoading=!0,a.element.hide());c.enabled(!0)}).fail(function(){a.element.addClass("btn-danger").html(b.language("COM_EASYDISCUSS_COMMENT_LOAD_ERROR"))}).always(function(){a.element.removeClass("btn-loading")}))}}});EasyDiscuss.Controller("Comment.Form",{defaultOptions:{container:null,notification:null,commentsList:null,loadMore:null,termsCondition:null,
"{commentMessage}":".commentMessage","{postId}":".postId","{commentTnc}":".commentTnc","{saveButton}":".saveButton","{cancelButton}":".cancelButton","{termsLink}":".termsLink","{commentLoader}":".commentLoader"}},function(a){return{init:function(){},resetForm:function(){a.commentMessage().val("");a.commentTnc().prop("checked",!1)},"{termsLink} click":function(){disjax.load("comment","tnc")},"{cancelButton} click":function(){a.options.container.toggle()},"{saveButton} click":function(){if(!a.commentTnc().is(":checked")&&
a.options.termsCondition)return a.options.notification.html(b.language("COM_EASYDISCUSS_TERMS_PLEASE_ACCEPT")).addClass("alert alert-error"),!1;EasyDiscuss.ajax("site.views.comment.save",{comment:a.commentMessage().val(),id:a.postId().val(),tnc:"1"},{beforeSend:function(){a.commentLoader().show()}}).done(function(c){a.options.notification.html(b.language("COM_EASYDISCUSS_COMMENT_SUCESSFULLY_ADDED")).removeClass("alert alert-error").addClass("alert alert-success");a.resetForm();a.options.container.hide();
a.commentLoader().hide();EasyDiscuss.commentsCount=void 0===EasyDiscuss.commentsCount?1:EasyDiscuss.commentsCount+1;(1>a.options.loadMore.length||a.options.loadMore.controller().doneLoading)&&b(c).appendTo(a.options.commentsList).addController("EasyDiscuss.Controller.Comment.List.Item")}).fail(function(c){a.options.notification.html(c).addClass("alert alert-error");a.commentLoader().hide()})}}});d.resolve()})});EasyDiscuss.module("composer",function(b){EasyDiscuss.Controller("Composer",{defaultOptions:{editorType:null,
operation:null,"{editor}":"[name=dc_reply_content]","{tabs}":".formTabs [data-foundry-toggle=tab]","{form}":"form[name=dc_submit]","{attachments}":"input.fileInput","{submitButton}":".submit-reply","{cancelButton}":".cancel-reply","{notification}":".replyNotification","{loadingIndicator}":".reply-loading"}},function(b){return{init:function(){b.id=b.element.data("id");b.options.operation=b.element.data("operation");b.options.editorType=b.element.data("editortype");"bbcode"==b.options.editorType&&EasyDiscuss.require().library("markitup",
"expanding").script("bbcode").done(function(a){b.editor().markItUp(a.getEasyDiscussBBCodeSettings).expandingTextarea()});b.tabs(":first").tab("show");EasyDiscuss.module(b.id,function(){this.resolve(b)})},"{submitButton} click":function(){b.submit()},"{cancelButton} click":function(){b.trigger("cancel")},notify:function(a,c){b.notification().addClass("alert-"+a).html(c).show()},submit:function(){var a=b.form().serializeObject();a.content=a.dc_reply_content;a.files=b.attachments();EasyDiscuss.ajax("site.views.post.saveReply",
a,{type:"iframe",beforeSend:function(){b.submitButton().prop("disabled",!0);b.loadingIndicator().show()},notify:b.notify,reloadCaptcha:function(){Recaptcha.reload()},complete:function(){b._destroyed||(b.submitButton().removeAttr("disabled"),b.loadingIndicator().hide())}}).done(function(a){b.trigger("save",a)}).fail(b.notify)}}});this.resolve()});EasyDiscuss.module("conversation",function(b){var d=this;EasyDiscuss.require().language("COM_EASYDISCUSS_CONVERSATION_EMPTY_CONTENT").library("markitup").script("bbcode").view("conversation.read.item").done(function(a){EasyDiscuss.Controller("Conversation.Form",
{defaultOptions:{"{textEditor}":".replyMessage"}},function(a){return{init:function(){a.initBBCode()},initBBCode:function(){a.textEditor().markItUp({set:"bbcode_easydiscuss"})}}});EasyDiscuss.Controller("Conversation.Read",{defaultOptions:{"{replyList}":".replyList","{deleteMessage}":".deleteMessage","{unreadMessage}":".unreadMessage","{replyForm}":".replyForm","{replyButton}":".replyButton","{replyMessage}":".replyMessage",messageId:null,view:{reply:"conversation.read.item"}}},function(c){return{init:function(){c.replyForm().implement(EasyDiscuss.Controller.Conversation.Form,
{"{textEditor}":".replyMessage"});c.options.messageId=c.element.data("id")},"{deleteMessage} click":function(){disjax.loadingDialog();disjax.load("conversation","confirmDelete",c.options.messageId+"")},"{replyButton} click":function(){c.replyButton().addClass("disabled");EasyDiscuss.ajax("site.views.conversation.reply",{id:c.options.messageId,message:c.replyMessage().val()}).done(function(b){c.replyButton().removeClass("disabled");var f=c.view.reply({post:b});a(f).find(".discuss-message-content").html(b.message);
c.replyMessage().val("");c.replyList().append(f)}).fail(function(c){a(".conversationError").addClass(" alert alert-error").html(a.language("COM_EASYDISCUSS_CONVERSATION_EMPTY_CONTENT"))})}}});d.resolve()})});EasyDiscuss.module("customfields",function(b){var d=this;EasyDiscuss.require().language("COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR").done(function(a){EasyDiscuss.Controller("Administrator.CustomFields",{defaultOptions:{customId:null,defaultType:null,optionCount:".optionCount","{optionType}":"#type",
"{advanceOptions}":".customFieldAdvanceOption","{addButton}":'button[name="Add"]',"{removeButton}":'button[name="Remove"]',"{fieldLoader}":".fieldLoader","{addContainer}":".addContainer"}},function(c){return{init:function(){},"{optionType} change":function(a){c.getAdvanceOption(a.val())},"{addButton} click":function(a){c.addFieldOption(a.data("fieldtype"))},"{removeButton} click":function(a){c.removeFieldOption(a,a.attr("id"),a.data("removetype"))},getAdvanceOption:function(b){EasyDiscuss.ajax("admin.views.customfields.getAdvanceOption",
{activeType:b,customId:c.options.customId},{beforeSend:function(){a(".fieldLoader").show()}}).done(function(b,e,d){c.advanceOptions().html(e);a(".addContainer").html(b);a(".optionCount").attr("totalcount",d);a(".fieldLoader").hide()}).fail(function(b){c.advanceOptions().append(a.language("COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR"))}).always(function(){a(".fieldLoader").hide()})},addFieldOption:function(b){var f=a(".optionCount").attr("totalcount");EasyDiscuss.ajax("admin.views.customfields.addFieldOption",
{activeType:b,customId:c.options.customId,fieldCount:f},{beforeSend:function(){a(".fieldLoader").show()}}).done(function(b,e){c.advanceOptions().append(b);a(".optionCount").attr("totalcount",e);a(".fieldLoader").hide()}).fail(function(b){c.advanceOptions().append(a.language("COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR"))}).always(function(){a(".fieldLoader").hide()})},removeFieldOption:function(c,b,d){a("#"+d+"_"+b).remove();a(".remove"+d+"_"+b).remove();c.remove()}}});d.resolve()})});EasyDiscuss.require().library("markitup",
"expanding","placeholder","scrollTo").script("layout/responsive","layout/lightbox","legacy").language("COM_EASYDISCUSS_BBCODE_BOLD","COM_EASYDISCUSS_BBCODE_ITALIC","COM_EASYDISCUSS_BBCODE_UNDERLINE","COM_EASYDISCUSS_BBCODE_URL","COM_EASYDISCUSS_BBCODE_TITLE","COM_EASYDISCUSS_BBCODE_PICTURE","COM_EASYDISCUSS_BBCODE_VIDEO","COM_EASYDISCUSS_BBCODE_BULLETED_LIST","COM_EASYDISCUSS_BBCODE_NUMERIC_LIST","COM_EASYDISCUSS_BBCODE_LIST_ITEM","COM_EASYDISCUSS_BBCODE_QUOTES","COM_EASYDISCUSS_BBCODE_CODE","COM_EASYDISCUSS_BBCODE_HAPPY",
"COM_EASYDISCUSS_BBCODE_SMILE","COM_EASYDISCUSS_BBCODE_SURPRISED","COM_EASYDISCUSS_BBCODE_TONGUE","COM_EASYDISCUSS_BBCODE_UNHAPPY","COM_EASYDISCUSS_BBCODE_WINK").done(function(){EasyDiscuss.require().script("bbcode").done()});EasyDiscuss.module("layout/responsive",function(b){b(function(){b("#discuss-wrapper").responsive([{at:818,switchTo:"w768"},{at:600,switchTo:"w768 w600"},{at:500,switchTo:"w768 w600 w320"}]);b(".discuss-searchbar").responsive({at:600,switchTo:"narrow"})});this.resolve()});EasyDiscuss.module("layout/lightbox",
function(b){var d=this;EasyDiscuss.require().library("fancybox").stylesheet("fancybox/default").script("legacy").done(function(){discuss.attachments.initGallery({type:"image",helpers:{overlay:null}});d.resolve()})});EasyDiscuss.module("legacy",function(b){window.isSave=!1;var d=window.discuss={location:{remove:function(a){disjax.loadingDialog();disjax.load("location","removeLocation",a.toString())},removeHTML:function(a){b("#location-"+a).remove()}},reply:{clear:function(a){b("textarea[name=dc_reply_content]").val("");
if(window.CKEDITOR)try{window.CKEDITOR.instances.dc_reply_content.setData("")}catch(c){}d.attachments.clear();d.references.clear(form);b(form).find(".showCoords").removeClass("showCoords");b(form).find(".locationMap").remove();b(form).find("[name=latitude]").val("");b(form).find("[name=longitude]").val("");b(form).find(".polls-tab").controller()&&b(form).find(".polls-tab").controller().resetPollForm()},submit:function(a){var c=b(".easydiscuss-token").val();action_url=discuss_site+"&view=post&layout=ajaxSubmitReply&format=ajax&tmpl=component&"+
c+"=1";form=b("."+a).find("[name=dc_submit]")[0];var e=b("."+a).find(".replyNotification");a=document.createElement("iframe");a.setAttribute("id","upload_iframe");a.setAttribute("name","upload_iframe");a.setAttribute("width","0");a.setAttribute("height","0");a.setAttribute("border","0");a.setAttribute("style","width: 0; height: 0; border: none;");form.parentNode.appendChild(a);window.frames.upload_iframe.name="upload_iframe";var f=document.getElementById("upload_iframe");b(".submit-reply").prop("disabled",
!0);var g=function(){var a;f.detachEvent?f.detachEvent("onload",g):f.removeEventListener("load",g,!1);f.contentDocument?a=f.contentDocument:f.contentWindow?a=f.contentWindow.document:f.document&&(a=f.document);a=b(a).find("script#ajaxResponse").html();a=b.parseJSON(a);switch(a.type){case "success.captcha":Recaptcha.reload();case "success":d.spinner.hide("reply_loading");e.html(a.message).removeClass("alert-error").addClass("alert-success");b(".discussionReplies .empty").hide();var c=b(".replyCount").html(),
c=parseInt(c)+1;b(".replyCount").html(c);b(".discussionReplies").controller().addItem(a.html,!0);d.attachments.initGallery({type:"image",helpers:{overlay:null}});EasyDiscuss.main_syntax_highlighter&&Prism.highlightAll();"undefined"!=a.script&&eval(a.script);form.reset();d.reply.clear(form);break;case "error":d.spinner.hide("reply_loading");b(".submit-reply").removeAttr("disabled");e.html(a.message).removeClass("alert-success").addClass("alert-error");break;case "error.captcha":Recaptcha.reload(),
d.spinner.hide("reply_loading"),b(".submit-reply").removeAttr("disabled"),e.html(a.message).removeClass("alert-success").addClass("alert-error")}e.show();b(".submit-reply").removeAttr("disabled");setTimeout(function(){b(f).remove()},250)};b(f).load(g);form.setAttribute("target","upload_iframe");form.setAttribute("action",action_url);form.setAttribute("method","post");form.setAttribute("enctype","multipart/form-data");form.setAttribute("encoding","multipart/form-data");form.submit();EasyDiscuss.repliesCount=
void 0===EasyDiscuss.repliesCount?1:EasyDiscuss.repliesCount+1},verify:function(){b("#dc_notification .msg_in").html("");b("#dc_notification .msg_in").removeClass("dc_error dc_success dc_alert");disjax.loadingDialog();disjax.load("post","checklogin")},post:function(){b(".submit-reply").prop("disabled",!0);b("#dc_notification .msg_in").html("");b("#dc_notification .msg_in").removeClass("dc_error dc_success dc_alert");d.spinner.show("reply_loading");d.post.validate(!0,"reply")?disjax.load("post","ajaxSubmitReply",
disjax.getFormVal("#dc_submit")):(d.spinner.hide("reply_loading"),b(".submit-reply").removeAttr("disabled"))},minimize:function(a){b("#dc_reply_"+a).hide();b("#reply_minimize_msg_"+a).show()},maximize:function(a){b("#dc_reply_"+a).removeClass("is-minimized");b("#reply_minimize_msg_"+a).hide()},addURL:function(a){var c=b(a).siblings("ul.attach-list").children(":first").clone();b(".remove-url").clone().css("display","block");b(c).find("input").val("");b(c).find("a").show();b(a).siblings("ul.attach-list").append(c)},
removeURL:function(a){if(1==b("ul.attach-list").children().length)return!1;b(a).parents("li").remove()},accept:function(a){disjax.loadingDialog();disjax.load("post","confirmAccept",a)},reject:function(a){disjax.loadingDialog();disjax.load("post","confirmReject",a)}},composer:{init:function(a,c){EasyDiscuss.require().script("composer").done(function(){b(a).implement(EasyDiscuss.Controller.Composer,c)})}},filter:function(a,c){EasyDiscuss.ajax("site.views.index.filter",{args:[a,c]},{beforeSend:function(){d.spinner.show("index-loading");
b("#dc_list").hide();b("#dc_pagination").hide();b("#filter-links").children().removeClass("active")},success:function(a,c,d,h,p,k){a&&b("#dc_featured_list").show();b("#dc_list").html(c);b("#sort-wrapper").html();b("#pagination-filter").val(h);b("#pagination-start").val(p);b("#dc_pagination").html(k)},complete:function(){d.spinner.hide("index-loading");b("#dc_list").show();b("#dc_pagination").show();b("#filter-links").find("."+a).addClass("active")}})},sort:function(a,c,e){d.spinner.show("index-loading");
"2"==discuss_featured_style&&"allposts"!=c&&b("#dc_featured_list").hide();b("#dc_list").hide();b("#dc_pagination").hide();b("#sort-links").children().removeClass("active");b("#sort-links").find("."+a).addClass("active");disjax.load("index","sort",a,c,e)},references:{clear:function(a){a=b(a).find(".field-references ul.attach-list");var c=a.children(":first").clone();a.empty().append(c)}},attachments:{initGallery:function(a){b(".attachment-image-link").fancybox(a)},clear:function(){b(".uploadQueue").empty()}},
map:{render:function(a,c,b,f){c=new google.maps.LatLng(c,b);f=new google.maps.Map(document.getElementById(f),{zoom:12,center:c,mapTypeId:google.maps.MapTypeId.ROADMAP});new google.maps.Marker({position:c,center:c,title:a,map:f})}},widget:{init:function(){b(".widget-toggle").click(function(){b(this).parents(".discuss-widget").find(".widget-body").toggle();b(this).parents(".discuss-widget").toggleClass("is-hidden")})}},post:{move:function(a){disjax.loadingDialog();disjax.load("post","movePost",a)},
branch:function(a){disjax.loadingDialog();disjax.load("post","branchForm",a)},mergeForm:function(a){disjax.loadingDialog();disjax.load("post","mergeForm",a)},feature:function(a){disjax.loadingDialog();disjax.load("post","confirmFeature",a)},unfeature:function(a){disjax.loadingDialog();disjax.load("post","confirmUnfeature",a)},submit:function(){if("0"==b("#dc_submit #category_id").val())return disjax.loadingDialog(),disjax.load("index","getTemplate","ajax.selectcategory.php"),!1;b("#createpost").prop("disabled",
!0);document.dc_submit.submit()},qqSubmit:function(){if("0"==b("#category_id").val())return disjax.loadingDialog(),disjax.load("index","getTemplate","ajax.selectcategory.php"),!1;b("#createpost").prop("disabled",!0);document.mod_edqq.submit()},postTopicSubmit:function(){if("0"==b("#mod_post_topic_category_id").val())return disjax.loadingDialog(),disjax.load("index","getTemplate","ajax.selectcategory.php"),!1;b("#createpost").prop("disabled",!0);document.mod_post_topic.submit()},reply:function(){d.post.validate(!0,
"reply")&&(finalData=disjax.getFormVal("#dc_submit"),disjax.load("Post","ajaxSubmitReply",finalData));return!1},validate:function(a,c){return a||""!=b("#ez-title").val()&&b("#ez-title").val()!=langPostTitle?!0:("reply"==c?(b("#dc_notification .msg_in").html(langEmptyTitle),b("#dc_notification .msg_in").addClass("dc_error")):(b("#dc_post_notification .msg_in").html(langEmptyTitle),b("#dc_post_notification .msg_in").addClass("dc_error")),!1)},del:function(a,c,b){disjax.loadingDialog();disjax.load("post",
"deletePostForm",a,c,b)},vote:{add:function(a,c,b){disjax.load("Post","ajaxAddVote",a,c)},check:function(a){disjax.load("Post","ajaxSumVote",a)},view:function(a){disjax.load("Post","ajaxViewVote",a,"")}},lock:function(a){disjax.load("Post","ajaxLockPost",a)},unlock:function(a){disjax.load("Post","ajaxUnlockPost",a)},resolve:function(a){disjax.load("Post","resolve",a)},unresolve:function(a){disjax.load("Post","unresolve",a)},likes:function(a,c,b){disjax.load("Post","ajaxLikes",a,c,b)},replyLikes:function(a,
b,e){disjax.load("Post","ajaxReplyLikes",a,b,e)},onhold:function(a){disjax.load("Post","ajaxOnHoldPost",a)},accepted:function(a){disjax.load("Post","ajaxAcceptedPost",a)},workingon:function(a){disjax.load("Post","ajaxWorkingOnPost",a)},reject:function(a){disjax.load("Post","ajaxRejectPost",a)},nostatus:function(a){disjax.load("Post","ajaxNoStatusPost",a)},featured:function(a,b){disjax.load("Post","ajaxFeatured",a,b)},toggleTools:function(a,c,e){a?(b(".post_delete_link").show(),b(".likes").show(),
b(".comments").show(),b(".vote_up").show(),b(".vote_down").show(),b("#dc_main_reply_form").show()):(d.comment.cancel(),"1"==e?b(".post_delete_link").show():b(".post_delete_link").hide(),b(".likes").hide(),b(".comments").hide(),b(".vote_up").hide(),b(".vote_down").hide(),b("#dc_main_reply_form").hide())},attachment:{remove:function(a){b("#button-delete-att-"+a).prop("disabled",!0);disjax.load("post","deleteAttachment",a)}}},login:{verify:function(){if(d.post.validate(!1,"reply"))b("#submit").prop("disabled",
!0),disjax.loadingDialog(),disjax.load("post","checklogin");else return!1},token:"",showpane:function(a){b("#usertype_pane_right").children().hide();b("#usertype_pane_left").children();b("#usertype_member").removeClass("active");b("#usertype_guest").removeClass("active");b("#discuss_register").removeClass("active");b("#usertype_twitter").removeClass("active");b("#usertype_status .msg_in").html("");b("#usertype_status .msg_in").removeClass("dc_error");switch(a){case "guest":b("#usertype_guest").addClass("active");
b("#usertype_guest_pane_wrapper").show();break;case "register":b("#discuss_register").addClass("active");b("#discuss_register_pane_wrapper").show();break;case "twitter":b("#usertype_twitter").addClass("active");b("#usertype_twitter_pane_wrapper").show();break;default:b("#usertype_member").addClass("active"),b("#usertype_member_pane_wrapper").show()}},submit:{reply:function(a){switch(a){case "guest":b("#edialog-guest-reply").prop("disabled",!0);a=b("#discuss_usertype_guest_email").val();var c=b("#discuss_usertype_guest_name").val();
disjax.load("post","ajaxGuestReply",a,c);break;case "member":b("#edialog-member-reply").prop("disabled",!0);a=b("#discuss_usertype_member_username").val();c=b("#discuss_usertype_member_password").val();disjax.load("post","ajaxMemberReply",a,c,d.login.token);break;case "twitter":b("#edialog-twitter-reply").prop("disabled",!0),disjax.load("post","ajaxTwitterReply")}}},getGuestDefaultName:function(){var a=b("#discuss_usertype_guest_email").val();b("#discuss_usertype_guest_name").val(a.split("@",1))},
twitter:{signin:function(a,b){a?disjax.load("post","ajaxRefreshTwitter"):alert("failed")},signout:function(){disjax.load("post","ajaxSignOutTwitter")}}},files:{add:function(){jQuery("#file_contents div").before('<input type="file" name="filedata[]" id="filedata" size="50" />')}},pagination:{more:function(a){"questions"==a?disjax.load("index","ajaxReadmore",b("#pagination-start").val(),b("#pagination-sorting").val(),a,b("#discuss_parent").val(),b("#pagination-filter").val(),b("#pagination-category").val(),
b("#pagination-query").val()):disjax.load("index","ajaxReadmore",b("#pagination-start").val(),b("#pagination-sorting").val(),a,b("#discuss_parent").val(),b("#pagination-filter").val(),b("#pagination-category").val())},addButton:function(a,c){html='<a href="javascript:void(0);" onclick="discuss.pagination.more( \''+a+"' );\"><span>"+c+"</span></a>";1>b("#dc_pagination a").length&&b("#dc_pagination").prepend(html)}},comment:{save:function(a){d.spinner.show("discussSubmitWait");finalData=disjax.getFormVal("#frmComment"+
a);disjax.load("Post","ajaxSubmitComment",finalData)},add:function(a,c){b(c).toggleClass("active");b("#comment-action-container-"+a).toggle();b("#err-msg .msg_in").html("");b("#comment-notification-"+a+" .msg_in").html("");b("#comment-notification-"+a+" .msg_in").removeClass("alert alert-error success")},clearForm:function(a){b("#comment-err-msg .msg_in").html("");b("#comment-err-msg .msg_in").removeClass("alert alert-error success");b("#comment").val("");b("#comment-action-container-"+a).hide()},
cancel:function(a){b("#comment-err-msg .msg_in").html("");b("#comment-err-msg .msg_in").removeClass("dc_alert dc_error dc_success");b("#comment-notification-"+a+" .msg_in").html("");b("#comment-notification-"+a+" .msg_in").removeClass("alert alert-error success");b("#comment").val("");b("#comment-action-container-"+a).hide();b("#comments-button-"+a).show()},remove:function(a){if(window.confirm("Are you sure?"))disjax.load("Post","ajaxCommentDelete",a),EasyDiscuss.commentsCount=void 0===EasyDiscuss.commentsCount?
0:EasyDiscuss.commentsCount-1;else return!1},removeEntry:function(a){b("#comment-"+a).remove()}},reports:{add:function(a){disjax.loadingDialog();disjax.load("post","reportForm",a)},cancel:function(){disjax.closedlg()},submit:function(){disjax.load("post","ajaxSubmitReport",disjax.getFormVal("#frmReport"))},revertForm:function(a){effect.highlight("#post_content_layout_"+a);setTimeout(function(){d.reports.cancel()},4E3)}},element:{focus:function(a){ele="#"+a;b(ele).focus()}},spinner:{show:function(a){var c=
new Image;c.src=spinnerPath;c.name="discuss-loading";c.id="discuss-loading";b("#"+a).html(c);b("#"+a).show()},hide:function(a){b("#"+a).hide()}},system:{redirect:function(a){window.location=a},refresh:function(){window.location.reload()}},subscribe:{post:function(a){var c=b("#subscribe_email").val(),e=b("#subscribe_name").val();d.spinner.show("dialog_loading");disjax.load("post","ajaxAddSubscription","post",c,e,"instant",a+"")},site:function(){var a=b("#subscribe_email").val(),c=b("#subscribe_name").val(),
e=b("input:radio[name=subscription_interval]:checked").val();d.spinner.show("dialog_loading");disjax.load("index","ajaxAddSubscription","site",a,c,e,"0")},tag:function(a){var c=b("#subscribe_email").val(),e=b("#subscribe_name").val(),f=b("input:radio[name=subscription_interval]:checked").val();d.spinner.show("dialog_loading");disjax.load("index","ajaxAddSubscription","tag",c,e,f,a+"")},category:function(a){var c=b("#subscribe_email").val(),e=b("#subscribe_name").val(),f=b("input:radio[name=subscription_interval]:checked").val();
d.spinner.show("dialog_loading");disjax.load("index","ajaxAddSubscription","category",c,e,f,a+"")},user:function(a){var c=b("#subscribe_email").val(),e=b("#subscribe_name").val(),f=b("input:radio[name=subscription_interval]:checked").val();d.spinner.show("dialog_loading");disjax.load("index","ajaxAddSubscription","user",c,e,f,a+"")}},user:{tabs:{show:function(a,c,e){d.spinner.show("profile-loading");b(".user-tabs ul li").removeClass("active");b(a).parent().addClass("active");b("#dc_profile .tab-item").hide();
b("#dc_pagination").hide();a=b("#profile-id").val();e?disjax.load("profile","filter",c,a):b("#dc_profile ."+c).show()}},checkAlias:function(){var a=b("#profile-alias").val();""!=a&&disjax.load("profile","ajaxCheckAlias",a)}},tooltips:{init:function(){},execute:function(a,b){}},notifications:{interval:3E3,monitor:null,count:null,startMonitor:function(){var a=d.notifications;a.monitor=setTimeout(a.update,a.interval)},stopMonitor:function(){clearTimeout(d.notifications.monitor)},update:function(){var a=
d.notifications;a.stopMonitor();var c={};c[b(".easydiscuss-token").val()]=1;EasyDiscuss.ajax("site.views.notifications.count",c,{type:"jsonp",success:function(c){0==c&&(b("#notification-count").hide(),b("#mod-notification-count").hide());0!=c&&c&&(a.count!=c&&(b("#notification-count").html(c),b("#mod-notification-count").html(c)),0<c&&(b("#notification-count").show(),b("#mod-notification-count").show()),a.count=c)},complete:function(){a.startMonitor()}})}},conversation:{interval:3E3,monitor:null,
count:null,startMonitor:function(){var a=d.conversation;a.monitor=setTimeout(a.update,a.interval)},stopMonitor:function(){clearTimeout(d.conversation.monitor)},update:function(){var a=d.conversation;a.stopMonitor();var c={};c[b(".easydiscuss-token").val()]=1;EasyDiscuss.ajax("site.views.conversation.count",c,{type:"jsonp",success:function(c){0==c&&b("#conversation-count").hide();0!=c&&c&&(a.count!=c&&b("#conversation-count").html(c),0<c&&b("#conversation-count").show(),a.count=c)},complete:function(){a.startMonitor()}})},
reply:function(a){EasyDiscuss.ajax("site.views.conversation.reply",{id:a}).done(function(){})},write:function(a){disjax.load("conversation","write",a)},send:function(){var a=b("#conversationMessage").val(),c=b("#recipientId").val();if(!a)return b("#conversationEmptyMessage").show(),!1;EasyDiscuss.ajax("site.views.conversation.save",{contents:a,recipient:c}).done(function(a){disjax.dialog(a)})}},polls:{show:function(){b("#discuss-polls").toggle();b("#discuss-multiple-polls").toggle();b("#discuss-multiple-polls-title").toggle()},
vote:function(a){a=b(a).val();disjax.load("polls","vote",a)},unvote:function(a){disjax.load("polls","unvote",a)},showVoters:function(a){disjax.load("polls","getvoters",a)},lock:function(a){EasyDiscuss.ajax("site.views.polls.lockPolls",{postId:a}).done(function(a,e,f,d){e?b(".discussQuestion").addClass("is-poll-lock"):b("#dc_reply_"+f).addClass("is-poll-lock");e=d.length;for(var h=null,p=0;p<e;p++)h=d[p],b("#poll-count-"+h).attr("disabled","disabled"),b("#poll-count-"+h).prop("disabled","disabled");
b("#poll_notice_"+f).html(a);b("#poll_notice_"+f).show();b("#poll_notice_"+f).parent().addClass("alert")})},unlock:function(a){EasyDiscuss.ajax("site.views.polls.unlockPolls",{postId:a}).done(function(a,e,f){a?b(".discussQuestion").removeClass("is-poll-lock"):b("#dc_reply_"+e).removeClass("is-poll-lock");a=f.length;for(var d=null,h=0;h<a;h++)d=f[h],b("#poll-count-"+d).removeAttr("disabled","disabled"),b("#poll-count-"+d).removeProp("disabled","disabled");b("#poll_notice_"+e).html("");b("#poll_notice_"+
e).parent().removeClass("alert")})}},tabs:{show:function(a,c){b(".form-tab-item").hide();b(a).parent().siblings().removeClass("active");b(a).parent().addClass("active");b(".tab-"+c).show()}},toolbar:{login:function(){b("#dc_toolbar .to_login div.toolbar-note").toggle()}}};window.effect=effect={highlight:function(a){setTimeout(function(){b(a).animate({backgroundColor:"#ffff66"},300).animate({backgroundColor:"transparent"},1500)},500)}};disjax=window.disjax=disjax={http:!1,format:"text",callback:function(a){},
error:!1,btnArray:[],getHTTPObject:function(){var a=!1;if("undefined"!=typeof ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){a=!1}}else if(XMLHttpRequest)try{a=new XMLHttpRequest}catch(f){a=!1}this.http=a},load:function(a,c){var e={};"object"==typeof a&&(e=a.callback,a=a.view);url=discuss_site;url+="&tmpl=component";url+="&no_html=1";url+="&format=ajax";url+="&uid="+(new Date).getTime();var f="",f="&view="+a+"&layout="+c;if(2<
arguments.length)for(var d=2;d<arguments.length;d++){var h=arguments[d];if(b.isArray(h))for(var p=0;p<h.length;p++){var k=h[p];if("string"==typeof k){var n=/^\w+\(*\)$/;(n=n.exec(k))||(k=escape(k));f+="&value"+(d-2)+"[]="+encodeURIComponent(k)}}else k=h,"string"==typeof k&&(n=/^\w+\(*\)$/,(n=n.exec(k))||(k=escape(k)),f+="&value"+(d-2)+"="+encodeURIComponent(k))}d=b(".easydiscuss-token").val();f+="&"+d+"=1";this.getHTTPObject();if(this.http&&a&&c){var q=this;this.http.open("POST",url,!0);this.http.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");this.http.setRequestHeader("Content-length",f.length);this.http.setRequestHeader("Connection","close");this.http.onreadystatechange=function(){if(q){var a=q.http;if(4==a.readyState)if(200==a.status){var b="";a.responseText&&(b=a.responseText);b=b.replace(/[\n\r]/g,"");b=eval(b);q.process(b,e)}else q.error&&q.error(a.status)}};this.http.send(f)}},getFormVal:function(a){var c=[],e=null;b(":input",b(a)).each(function(){e=this.value.replace(/"/g,"&quot;");e=encodeURIComponent(e);
b(this).is(":checkbox")||b(this).is(":radio")?b(this).prop("checked")&&c.push(this.name+"="+escape(e)):c.push(this.name+"="+escape(e))});return c},process:function(a,c){if("function"==typeof c)return c.apply(this,a);for(var e=0;e<a.length;e++)switch(a[e][0]){case "script":eval(a[e][1]);break;case "after":var d=a[e][1],g=a[e][2];b("#"+d).after(g);break;case "append":d=a[e][1];g=a[e][2];b("#"+d).append(g);break;case "assign":d=a[e][1];g=a[e][2];b("#"+d).html(g);break;case "value":d=a[e][1];g=a[e][2];
b("#"+d).val(g);break;case "prepend":d=a[e][1];g=a[e][2];b("#"+d).prepend(g);break;case "destroy":d=a[e][1];b("#"+d).remove();break;case "dialog":disjax.dialog(a[e][1]);break;case "alert":disjax.alert(a[e][1],a[e][2],a[e][3])}delete a},loadingDialog:function(){disjax.dialog({title:b.language("COM_EASYDISCUSS_LOADING"),loading:!0})},dialog:function(a){disjax._showPopup(a)},closedlg:function(){var a=b("#discuss-dialog");b("#discuss-overlay").hide();a.unbind(".dialog").hide();b(document).off("click.ed.closedlg");
b(document).unbind("keyup",disjax._attachPopupShortcuts)},_showPopup:function(a){a=b.extend({},{width:"500",height:"auto",type:"dialog",loading:!1},a);var c=b("#discuss-dialog");1>c.length&&(dialogTemplate='<div id="discuss-dialog" class="modal"><div class="modal-header"><a href="javascript:void(0);" aria-hidden="true" onclick="disjax.closedlg();" class="close">x</a><h3 class="modal-title"></h3></div><div class="modal-body"></div><div class="modal-footer"></div>',c=b(dialogTemplate).appendTo("body"));
c.fadeOut(0);a.loading?c.addClass("modal-loading"):c.removeClass("modal-loading");var e=c.children(".modal-body");"string"===typeof a.title?c.find("h3.modal-title").html(a.title):c.find("h3.modal-title").html("&nbsp;");var d=c.find(".modal-footer");b.isArray(a.buttons)?(d.html("").show(),b.each(a.buttons,function(a,c){var e=c.className,k=c.title,n=c.action,q=c.form,e=b(document.createElement("a")).attr("href","javascript: void(0);").addClass("btn "+e).html(k);n&&e.attr("onclick",n);q&&e.bind("click",
function(){b(q).submit()});d.append(e)})):d.hide();e.html(a.content);c.css({width:"auto"==a.width?"auto":parseInt(a.width),height:"auto"==a.height?"auto":parseInt(a.height),margin:0,zIndex:99999}).show(0,function(){var a=function(){c.css({top:(b(window).height()-c.height())/2,left:(b(window).width()-c.width())/2})},e;b(window).bind("resize.dialog scroll.dialog",function(){clearTimeout(e);e=setTimeout(a,50)});a()});b(document).on("click.ed.closedlg","#edialog-cancel, #edialog-submit",function(){disjax.closedlg()});
b(document).bind("keyup",disjax._attachPopupShortcuts)},_attachPopupShortcuts:function(a){27==a.keyCode&&disjax.closedlg()}};b("[rel=ed-tooltip]").tooltip({animation:!1,container:"body",template:'<div class="tooltip tooltip-ed"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'});b(document).on("mouseover","[rel=ed-popover]",function(){b(this).popover({container:"body",delay:{show:100,hide:100},animation:!1,trigger:"hover"})});this.resolve()});EasyDiscuss.module("favourites",
function(b){var d=this;EasyDiscuss.require().language("COM_EASYDISCUSS_FAVOURITE_BUTTON_UNFAVOURITE","COM_EASYDISCUSS_FAVOURITE_BUTTON_FAVOURITE").done(function(a){EasyDiscuss.Controller("Post.Favourites",{defaultOptions:{postId:null,"{favButton}":".btnFav","{removeButton}":".btnRemove","{favLoader}":".favLoader","{favCount}":".favCount"}},function(b){return{init:function(){b.options.postId=b.element.data("postid")},"{favButton} click":function(e){EasyDiscuss.ajax("site.views.favourites.favourite",
{postid:b.options.postId},{beforeSend:function(){a(".favLoader").show();a(".favCount").empty()}}).done(function(b,c){b?(e.addClass("isfav"),a(e).html(a.language("COM_EASYDISCUSS_FAVOURITE_BUTTON_UNFAVOURITE"))):(e.removeClass("isfav btn-primary"),a(e).html(a.language("COM_EASYDISCUSS_FAVOURITE_BUTTON_FAVOURITE")));a(".favCount").html(c)}).fail(function(a){}).always(function(){a(".favLoader").hide()})},"{removeButton} click":function(e){EasyDiscuss.ajax("site.views.favourites.remove",{postid:b.options.postId}).done(function(){e.removeClass("isfav");
a(".discussItem"+b.options.postId).remove()}).fail(function(a){})}}});d.resolve()})});EasyDiscuss.module("filterbar",function(b){EasyDiscuss.Controller("DiscussFilterBar",{defaultOptions:{catId:null,"{allpostsButton}":".allpostsBtn","{featuredButton}":".featuredBtn","{newButton}":".newBtn","{unansweredButton}":".unansweredBtn"}},function(d){return{init:function(){},"{allpostsButton} click":function(){d.filter("allposts")},"{featuredButton} click":function(){d.filter("featured")},"{newButton} click":function(){d.filter("new")},
"{unansweredButton} click":function(){d.filter("unanswered")},filter:function(a){EasyDiscuss.ajax("site.views.index.filter",{args:[a,0==d.options.catId?null:d.options.catId]},{beforeSend:function(){discuss.spinner.show("index-loading");b("#dc_list").hide();b("#dc_pagination").hide();b("#filter-links").children().removeClass("active")},success:function(a,e,d,g,h,p){a&&b("#dc_featured_list").show();b("#dc_list").html(e);b("#sort-wrapper").html();b("#pagination-filter").val(g);b("#pagination-start").val(h);
b("#dc_pagination").html(p)},complete:function(){discuss.spinner.hide("index-loading");b("#dc_list").show();b("#dc_pagination").show();b("#filter-links").find("."+a).addClass("active")}})}}});this.resolve()});EasyDiscuss.module("likes",function(b){EasyDiscuss.require().language("COM_EASYDISCUSS_UNLIKE_THIS_POST","COM_EASYDISCUSS_LIKE_THIS_POST","COM_EASYDISCUSS_UNLIKE","COM_EASYDISCUSS_LIKES").done(function(b){EasyDiscuss.Controller("Likes",{defaultOptions:{postId:null,registeredUser:null,"{likeButton}":".btnLike",
"{unlikeButton}":".btnUnlike","{likeText}":".likeText","{likeCount}":".likeCount","{likeStatus}":".likeStatus"}},function(a){return{init:function(){a.options.postId=a.element.data("postid");a.element.data("like",!0)},getLikesData:function(){EasyDiscuss.ajax("site.views.likes.getData",{id:a.options.postId}).done(function(b){a.likeText().html(b)})},likeItem:function(){if(!a.options.registeredUser)return!1;EasyDiscuss.ajax("site.views.likes.like",{postid:a.options.postId}).done(function(b,e){a.likeText().html(b);
a.likeCount().html(e)})},"{likeButton} click":function(c){var e=a.likeButton();e.addClass("btnUnlike");e.attr("data-original-title",b.language("COM_EASYDISCUSS_UNLIKE_THIS_POST"));e.find("i").removeClass("icon-ed-love").addClass("icon-ed-remove");a.likeStatus().html(b.language("COM_EASYDISCUSS_UNLIKE"));e.removeClass("btnLike");a.likeItem(c)},"{unlikeButton} click":function(c){c=a.unlikeButton();c.addClass("btnLike");c.attr("data-original-title",b.language("COM_EASYDISCUSS_LIKE_THIS_POST"));c.find("i").removeClass("icon-ed-remove").addClass("icon-ed-love");
a.likeStatus().html(b.language("COM_EASYDISCUSS_LIKES"));c.removeClass("btnUnlike");a.likeItem()},"{unlikeButton} mouseover":function(a){},"{unlikeButton} mouseout":function(a){}}})});b(document).on("mouseover.discussLikes",".discussLikes",function(){var d=b(this);if(void 0==d.data("like")){var a="true"===d.attr("data-registered-user");d.implement(EasyDiscuss.Controller.Likes,{registeredUser:a})}});this.resolve()});EasyDiscuss.module("location",function(b){var d=this;EasyDiscuss.require().library("ui/autocomplete").done(function(){EasyDiscuss.Controller("Location.Form",
{defaultOptions:{language:"en",initialLocation:null,mapType:"ROADMAP",height:"250px",width:"100%","{locationInput}":".locationInput","{locationLatitude}":".locationLatitude","{locationLongitude}":".locationLongitude","{latitudeDisplay}":".latitudeDisplay","{longitudeDisplay}":".longitudeDisplay","{locationMap}":".locationMap","{autoDetectButton}":".autoDetectButton","{locationCoords}":".locationCoords","{removeLocationButton}":".removeLocationButton"}},function(a){return{init:function(){var c=b.uid("ext");
window[c]=function(){b.___GoogleMaps.resolve()};b.___GoogleMaps||(b.___GoogleMaps=b.Deferred(),EasyDiscuss.require().script({prefetch:!1},"https://maps.googleapis.com/maps/api/js?sensor=true&language="+a.options.language+"&callback="+c));b.___GoogleMaps.done(function(){a._init()})},_init:function(c,e){a.geocoder=new google.maps.Geocoder;a.hasGeolocation=void 0!==navigator.geolocation;a.hasGeolocation?a.autoDetectButton().show():a.autoDetectButton().remove();a.locationInput().autocomplete({delay:300,
minLength:0,source:a.retrieveSuggestions,select:function(b,c){a.locationInput().autocomplete("close");a.setLocation(c.item.location)}}).prop("disabled",!1);a.autocomplete=a.locationInput().autocomplete("widget");a.autocomplete.addClass("location-suggestion");var d=b.trim(a.options.initialLocation);d&&a.getLocationByAddress(d,function(b){a.setLocation(b[0])});a.busy(!1)},busy:function(b){a.locationInput().toggleClass("loading",b)},getUserLocations:function(b){a.getLocationAutomatically(function(e){a.userLocations=
a.buildDataset(e);b&&b(e)})},getLocationByAddress:function(b,e){a.geocoder.geocode({address:b},e)},getLocationByCoords:function(b,e,d){a.geocoder.geocode({location:new google.maps.LatLng(b,e)},d)},getLocationAutomatically:function(b,e){if(!navigator.geolocation)return e("ERRCODE","Browser does not support geolocation or do not have permission to retrieve location data.");navigator.geolocation.getCurrentPosition(function(e){a.getLocationByCoords(e.coords.latitude,e.coords.longitude,b)},e)},renderMap:function(b,
e){a.busy(!0);a.locationMap().css("width",a.options.width).css("height",a.options.height).show();var d=new google.maps.Map(a.locationMap()[0],{zoom:15,center:b.geometry.location,mapTypeId:google.maps.MapTypeId[a.options.mapType],disableDefaultUI:!0}),g=new google.maps.Marker({draggable:!0,position:b.geometry.location,center:b.geometry.location,title:b.formatted_address,map:d}),h=new google.maps.InfoWindow({content:e});google.maps.event.addListener(d,"tilesloaded",function(){h.open(d,g);a.busy(!1)});
google.maps.event.addListener(g,"dragend",function(b){a.getLocationByCoords(this.getPosition().lat(),this.getPosition().lng(),function(b){b=b[0].formatted_address;a.locationInput().val(b)});a.locationLatitude().val(this.getPosition().lat());a.locationLongitude().val(this.getPosition().lng());a.latitudeDisplay().html(this.getPosition().lat());a.longitudeDisplay().html(this.getPosition().lng());a.locationCoords().addClass("showCoords")})},setLocation:function(b){b&&(a.locationResolved=!0,a.lastResolvedLocation=
b,a.locationInput().val(b.formatted_address),a.locationLatitude().val(b.geometry.location.lat()),a.latitudeDisplay().html(b.geometry.location.lat()),a.longitudeDisplay().html(b.geometry.location.lng()),a.locationCoords().addClass("showCoords"),a.locationLongitude().val(b.geometry.location.lng()),a.renderMap(b,b.formatted_address))},removeLocation:function(){a.locationResolved=!1;a.locationInput().val("");a.locationLatitude().val("");a.latitudeDisplay().html("");a.longitudeDisplay().html("");a.locationCoords().removeClass("showCoords");
a.locationLongitude().val("");a.locationMap().hide()},buildDataset:function(a){return b.map(a,function(a){return{label:a.formatted_address,value:a.formatted_address,location:a}})},retrieveSuggestions:function(b,e){a.busy(!0);var d=b.term,g=function(b){e(b);a.busy(!1)};""==d?g(a.userLocations||[]):a.getLocationByAddress(d,function(b){g(a.buildDataset(b))})},suggestUserLocations:function(){a.hasGeolocation&&a.userLocations&&(a.removeLocation(),a.locationInput().autocomplete("search",""));a.busy(!1)},
"{locationInput} blur":function(){setTimeout(function(){var c=b.trim(a.locationInput().val());""==c?a.removeLocation():a.locationResolved?c!=a.lastResolvedLocation.formatted_address&&a.setLocation(a.lastResolvedLocation):a.removeLocation()},250)},"{autoDetectButton} click":function(){a.busy(!0);a.hasGeolocation&&!a.userLocations?a.getUserLocations(a.suggestUserLocations):a.suggestUserLocations()},"{removeLocationButton} click":function(){a.removeLocation()}}});EasyDiscuss.Controller("Location.Map",
{defaultOptions:{animation:"drop",language:"en",useStaticMap:!1,disableMapsUI:!0,zoom:5,fitBounds:null,minZoom:null,maxZoom:null,center:null,locations:[],mapType:"ROADMAP",width:500,height:400,"{locationMap}":".locationMap","{removeLocation}":".removeLocation"}},function(a){return{init:function(){a.mapLoaded=!1;var c=b.uid("ext");window[c]=function(){b.___GoogleMaps.resolve()};if(!0==a.options.useStaticMap){var e="&language="+String(a.options.language),d="&size="+String(a.options.width)+"x"+String(a.options.height),
c="&zoom="+String(a.options.zoom),g="&center="+String(parseFloat(a.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(a.options.locations[0].longitude).toFixed(6)),h="&maptype="+google.maps.MapTypeId[a.options.mapType],p="&markers=",e="https://maps.googleapis.com/maps/api/staticmap?sensor=false"+e+d;if(1==a.options.locations.length)p+=String(parseFloat(a.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(a.options.locations[0].longitude).toFixed(6)),e+=c+g+h+p;else{var k=
[];b.each(a.options.locations,function(a,b){k.push(String(parseFloat(b.latitude).toFixed(6))+","+String(parseFloat(b.longitude).toFixed(6)))});p+=k.join("|");e+=p+h}a.locationMap().show().html('<img src="'+e+'" />');a.busy(!1)}else c=b.uid("ext"),window[c]=function(){b.___GoogleMaps.resolve()},b.___GoogleMaps||(b.___GoogleMaps=b.Deferred(),EasyDiscuss.require().script({prefetch:!1},"https://maps.googleapis.com/maps/api/js?sensor=true&language="+a.options.language+"&callback="+c)),b.___GoogleMaps.done(function(){a._init()})},
_init:function(){null===a.options.fitBounds&&(a.options.fitBounds=1==a.options.locations.length?!1:!0);a.options.disableMapsUI=Boolean(a.options.disableMapsUI);a.locations=[];b.each(a.options.locations,function(b,e){"null"!=e.latitude&&"null"!=e.longitude&&a.locations.push(new google.maps.LatLng(e.latitude,e.longitude))});0<a.locations.length&&a.renderMap();a.busy(!1)},busy:function(b){a.locationMap().toggleClass("loading",b)},renderMap:function(){a.busy(!0);a.locationMap().show();var b;b=a.options.center?
new google.maps.LatLng(center.latitude,center.longitude):a.locations[0];a.map=new google.maps.Map(a.locationMap()[0],{zoom:parseInt(a.options.zoom),minZoom:parseInt(a.options.minZoom),maxZoom:parseInt(a.options.maxZoom),center:b,mapTypeId:google.maps.MapTypeId[a.options.mapType],disableDefaultUI:a.options.disableMapsUI});google.maps.event.addListener(a.map,"tilesloaded",function(){!1==a.mapLoaded&&(a.mapLoaded=!0,a.loadLocations())})},loadLocations:function(){a.bounds=new google.maps.LatLngBounds;
a.infoWindow=[];setTimeout(function(){b.each(a.locations,function(b,e){a.bounds.extend(e);setTimeout(function(){a.addMarker(e,a.options.locations[b])},100*(b+1))});a.options.fitBounds&&a.map.fitBounds(a.bounds)},500)},addMarker:function(b,e){if(b){var d=new google.maps.Marker({position:b,map:a.map});d.setAnimation(google.maps.Animation.DROP);a.addInfoWindow(d,e)}},addInfoWindow:function(c,e){var d=e.content;d||(d=e.address);var g=new google.maps.InfoWindow;g.setContent(d);a.infoWindow.push(g);1<a.options.locations.length?
google.maps.event.addListener(c,"click",function(){b.each(a.infoWindow,function(a,b){b.close()});g.open(a.map,c)}):(google.maps.event.addListener(c,"click",function(){g.open(a.map,c)}),g.open(a.map,c));e.ratingid&&google.maps.event.addListener(g,"domready",function(){b.each(e.ratingid,function(a,c){eblog.ratings.setup("ebpostmap_"+c+"-ratings",!0,"entry");b("#ebpostmap_"+c+"-ratings").removeClass("ui-state-disabled");b("#ebpostmap_"+c+"-ratings-form").find(".blog-rating-text").hide();b("#ebpostmap_"+
c+"-ratings .ratings-value").hide()})})},"{removeLocation} click":function(b){disjax.loadingDialog();disjax.load("location","confirmRemoveLocation",a.element.data("id").toString())}}});d.resolve()})});EasyDiscuss.module("newpost",function(b){EasyDiscuss.Controller("DiscussNewPost",{defaultOptions:{"{pollsCheckbox}":".pollsChkbox","{radioButton}":".radioBtn","{chkboxButton}":".chkboxBtn"}},function(d){return{init:function(){},"{pollsCheckbox} click":function(){d.show()},"{chkboxButton} click":function(a){a=
a.attr("id");d.vote(a)},show:function(){b("#discuss-polls").toggle();b("#discuss-multiple-polls").toggle();b("#discuss-multiple-polls-title").toggle()},vote:function(a){EasyDiscuss.ajax("site.views.polls.vote",{args:[a]},{success:function(){}})}}});this.resolve()});EasyDiscuss.module("polls",function(b){var d=this;EasyDiscuss.require().view("field.form.polls.answer").done(function(a){EasyDiscuss.Controller("Polls.Answers",{defaultOptions:{pollId:null,"{voteCount}":".voteCount","{votersAvatar}":".votersAvatar",
"{votePoll}":".votePoll","{unvotePoll}":".unvotePoll","{pollGraph}":".pollGraph"}},function(b){return{init:function(){b.options.pollId=b.element.data("id")},"{voteCount} click":function(){disjax.load("polls","getvoters",b.options.pollId.toString())},"{votePoll} change":function(){EasyDiscuss.ajax("site.views.polls.vote",{id:b.options.pollId}).done(function(b){a(b).each(function(b,c){a(".pollAnswerItem-"+c.id).find(".pollPercentage").html(c.percentage);a(".pollAnswerItem-"+c.id).find(".pollGraph").css("width",
c.percentage+"%");a(".pollAnswerItem-"+c.id).find(".voteCount").html(c.votes);a(".pollAnswerItem-"+c.id).find(".votersList").html(c.voters)})})}}});EasyDiscuss.Controller("Polls.Form",{defaultOptions:{"{pollAnswers}":".pollAnswers","{pollAnswersList}":".pollAnswersList","{insertPollAnswer}":".insertPollAnswer","{pollCheckbox}":".pollCheckbox","{pollForm}":".pollForm","{deletedPolls}":"#pollsremove",view:{answerItem:"field.form.polls.answer"}}},function(a){return{init:function(){a.pollAnswers().implement(EasyDiscuss.Controller.Polls.Form.Answer,
{pollController:a});0==a.pollAnswers().length&&a.insertNewPollAnswer()},resetPollForm:function(b){a.pollAnswers(":not(:first)").remove();a.pollForm().hide();a.pollCheckbox().prop("checked",!1)},insertNewPollAnswer:function(b){a.view.answerItem({showRemove:0<a.pollAnswers().length}).implement(EasyDiscuss.Controller.Polls.Form.Answer,{pollController:a,shiftFocus:b}).appendTo(a.pollAnswersList())},updateDeletedPoll:function(b){var d=a.deletedPolls().val();""!=d&&(d+=",");a.deletedPolls().val(d+b)},showPollForm:function(b){a.pollForm().show()},
"{insertPollAnswer} click":function(){a.insertNewPollAnswer(!0)},"{pollCheckbox} change":function(){a.pollForm().toggle()}}});EasyDiscuss.Controller("Polls.Form.Answer",{defaultOptions:{"{answerText}":".answerText","{removeItem}":".removeItem",pollController:null,shiftFocus:!1}},function(b){return{init:function(){b.options.shiftFocus&&b.answerText().focus()},"{removeItem} click":function(e){e=a(e).data("pollid");null!=e&&b.options.pollController.updateDeletedPoll(e);b.element.remove()},"{answerText} keyup":function(e,
d){d.keyCode==a.ui.keyCode.ENTER&&b.options.pollController.insertNewPollAnswer(!0)}}});d.resolve()})});EasyDiscuss.module("posts",function(b){var d=this;EasyDiscuss.require().view("comment.form","post.notification").script("comments","location").language("COM_EASYDISCUSS_NOTIFICATION_NEW_REPLIES","COM_EASYDISCUSS_NOTIFICATION_NEW_COMMENTS","COM_EASYDISCUSS_PLEASE_SELECT_CATEGORY_DESC","COM_EASYDISCUSS_POST_TITLE_CANNOT_EMPTY","COM_EASYDISCUSS_POST_CONTENT_IS_EMPTY").done(function(){EasyDiscuss.Controller("Post.Ask",
{defaultOptions:{"{submitDiscussion}":".submitDiscussion"}},function(a){return{init:function(){},"{submitDiscussion} click":function(){if(!b(this).attr("disabled")){var a="",e=!1,d=b(".discuss-form *[name=category_id]").val();if(0==d||0==d.length)e=b.language("COM_EASYDISCUSS_PLEASE_SELECT_CATEGORY_DESC"),a+="<li>"+e+"</li>",e=!0;""==b("#ez-title").val()&&""==b("#post-topic-title").val()&&(e=b.language("COM_EASYDISCUSS_POST_TITLE_CANNOT_EMPTY"),a+="<li>"+e+"</li>",e=!0);""==discuss.getContent()&&
(e=b.language("COM_EASYDISCUSS_POST_CONTENT_IS_EMPTY"),a+="<li>"+e+"</li>",e=!0);if(e)return a='<div class="alert alert-error"><ul class="unstyled">'+a+"</ul></div>",b(".ask-notification").html(""),b(".ask-notification").append(a),b(document).scrollTop(b(".ask-notification").offset().top),!1;b(this).prop("disabled",!0);b("#dc_submit").submit();return!1}}}});EasyDiscuss.Controller("Post.Moderator",{defaultOptions:{"{moderatorBtn}":".moderatorBtn","{postModeratorList}":".post-moderator-list","{moderatorList}":".moderatorList"}},
function(a){return{init:function(){a.moderatorBtn().parent(".dropdown_").hasClass("open")&&a.loadModeratorList()},loadModeratorList:function(){length=a.postModeratorList().size();0<length||(a.moderatorList().empty(),a.moderatorList().append('<li style="height:10px;"><div class="discuss-loader" style="margin-left:15px;"></div></li>'),EasyDiscuss.ajax("site.views.post.getModerators",{id:a.element.data("id"),category_id:a.element.data("category")},{success:function(b){a.moderatorList().empty();a.moderatorList().append(b)},
fail:function(){}}))},"{moderatorBtn} click":function(){a.loadModeratorList()},"{postModeratorList} click":function(a){var e=b(a).data("userid");a=b(a).data("postid");EasyDiscuss.ajax("site.views.post.ajaxModeratorAssign",{userId:e,postId:a},{success:function(a){b(".discuss-post-assign").html(a)},fail:function(a){b(".discuss-post-assign").html(a)}})}}});EasyDiscuss.Controller("Post.Question",{defaultOptions:{id:null,view:{commentForm:"comment.form"},"{addCommentButton}":".addComment","{commentFormContainer}":".commentFormContainer",
"{commentNotification}":".commentNotification","{commentsList}":".commentsList","{commentLoadMore}":".commentLoadMore","{postLocation}":".postLocation","{locationData}":".locationData"}},function(a){return{init:function(){a.commentsList().implement(EasyDiscuss.Controller.Comment.List);0<a.commentLoadMore().length&&a.commentLoadMore().implement(EasyDiscuss.Controller.Comment.LoadMore,{controller:{list:a.commentsList().controller()}});a.options.id=a.element.data("id");if(0<a.locationData().length){var c=
b.parseJSON(a.locationData().val());a.postLocation().implement("EasyDiscuss.Controller.Location.Map",c)}},"{addCommentButton} click":function(){var c=a.view.commentForm({id:a.options.id});b(c).implement(EasyDiscuss.Controller.Comment.Form,{container:a.commentFormContainer(),notification:a.commentNotification(),commentsList:a.commentsList(),loadMore:a.commentLoadMore(),termsCondition:a.options.termsCondition});a.commentFormContainer().html(c).toggle()}}});EasyDiscuss.Controller("PostItems",{defaultOptions:{activefiltertype:null,
"{allPostsFilter}":".allPostsFilter","{newPostsFilter}":".newPostsFilter","{unResolvedFilter}":".unResolvedFilter","{resolvedFilter}":".resolvedFilter","{unAnsweredFilter}":".unAnsweredFilter","{sortLatest}":".sortLatest","{sortPopular}":".sortPopular","{ulList}":"ul.normal","{loader}":".loader","{pagination}":".dc-pagination","{filterTab}":"[data-filter-tab]","{sortTab}":"[data-sort-tab]"}},function(a){return{init:function(){},doSort:function(b){a.sortTab().removeClass("active").filterBy("sortType",
b).addClass("active");filterType=a.options.activefiltertype;console.log(filterType);a.doFilter(filterType,b)},doFilter:function(b,e){a.filterTab().removeClass("active").filterBy("filterType",b).addClass("active");a.options.activefiltertype=b;void 0===e&&(e="latest");a.loader().show();a.ulList().children("li").remove();EasyDiscuss.ajax("site.views.index.filter",{filter:b,sort:e,id:a.element.data("id"),view:a.element.data("view")}).done(function(b,c){a.loader().hide();a.ulList().append(b);a.pagination().html(c)}).fail(function(){a.loader().hide()}).always(function(){})},
"{filterTab} click":function(b){b=b.data("filterType");a.doFilter(b)},"{sortTab} click":function(b){b=b.data("sortType");a.doSort(b)}}});EasyDiscuss.Controller("Post.CheckNewReplyComment",{defaultOptions:{id:null,interval:10,wrapper:{discuss:"#discuss-wrapper",notificationContainer:".notificationContainer",notification:".discussNotification",replyContainer:".replyContainer",commentContainer:".commentContainer",replyCount:".replyCount",commentCount:".commentCount",replyText:".replyText",commentText:".commentText"},
discusswrapper:"#discuss-wrapper",notificationwrapper:".discussNotification",view:{postNotification:"post.notification"}}},function(a){return{init:function(){a.options.id=a.element.data("id");a.getCount().done(function(b,e){EasyDiscuss.repliesCount=b;EasyDiscuss.commentsCount=e;a.autoCheck()});b(a.options.wrapper.discuss).append('<div class="notifications top-left notificationContainer"></div>')},autoCheck:function(){a.check=setTimeout(function(){a.checkCount().done(function(){a.autoCheck()})},1E3*
a.options.interval)},stopCheck:function(){clearTimeout(a.check)},getCount:function(){return EasyDiscuss.ajax("site.views.post.getUpdateCount",{id:a.options.id})},checkCount:function(){var c=b.Deferred(),e=!1,d=!1;a.getCount().done(function(b,h){e=b-EasyDiscuss.repliesCount;d=h-EasyDiscuss.commentsCount;a.newRepliesCount=b;a.newCommentsCount=h;(0<e||0<d)&&a.notify(e,d);c.resolve()});return c},notify:function(c,e){var d=b(a.options.wrapper.notification);if(1>d.length){var g=a.view.postNotification({newReply:c,
newComment:e});b(a.options.wrapper.notificationContainer).notify({message:{html:g.toHTML()},fadeOut:{enabled:!1},onClosed:function(){EasyDiscuss.repliesCount=a.newRepliesCount;EasyDiscuss.commentsCount=a.newCommentsCount}}).show()}else{var g=d.find(a.options.wrapper.replyContainer),h=d.find(a.options.wrapper.commentContainer),p=d.find(a.options.wrapper.replyCount),k=d.find(a.options.wrapper.commentCount),n=d.find(a.options.wrapper.replyText),d=d.find(a.options.wrapper.commentText);0<c&&0<g.length&&
p.text(c)&&g.is(":hidden")&&g.show();0<e&&0<h.length&&k.text(e)&&h.is(":hidden")&&h.show();1<c&&n.text(b.language("COM_EASYDISCUSS_NOTIFICATION_NEW_REPLIES"));1<e&&d.text(b.language("COM_EASYDISCUSS_NOTIFICATION_NEW_COMMENTS"))}}}});d.resolve()})});EasyDiscuss.module("prism",function(b){(function(){var a=/\blang(?:uage)?-(?!\*)(\w+)\b/i,b=self.Prism={util:{type:function(a){return Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1]},clone:function(a){switch(b.util.type(a)){case "Object":var c=
{},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=b.util.clone(a[d]));return c;case "Array":return a.slice()}return a}},languages:{extend:function(a,c){var d=b.util.clone(b.languages[a]),f;for(f in c)d[f]=c[f];return d},insertBefore:function(a,c,d,f){f=f||b.languages;var g=f[a],l={},m;for(m in g)if(g.hasOwnProperty(m)){if(m==c)for(var x in d)d.hasOwnProperty(x)&&(l[x]=d[x]);l[m]=g[m]}return f[a]=l},DFS:function(a,c){for(var d in a)c.call(a,d,a[d]),"Object"===b.util.type(a)&&b.languages.DFS(a[d],c)}},highlightAll:function(a,
c){for(var d=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),f=0,g;g=d[f++];)b.highlightElement(g,!0===a,c)},highlightElement:function(h,g,k){for(var n,q,l=h;l&&!a.test(l.className);)l=l.parentNode;l&&(n=(l.className.match(a)||[,""])[1],q=b.languages[n]);if(q&&(h.className=h.className.replace(a,"").replace(/\s+/g," ")+" language-"+n,l=h.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(a,"").replace(/\s+/g,
" ")+" language-"+n),l=h.textContent)){var l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," "),m={element:h,language:n,grammar:q,code:l};b.hooks.run("before-highlight",m);g&&self.Worker?(h=new Worker(b.filename),h.onmessage=function(a){m.highlightedCode=d.stringify(JSON.parse(a.data),n);b.hooks.run("before-insert",m);m.element.innerHTML=m.highlightedCode;k&&k.call(m.element);b.hooks.run("after-highlight",m)},h.postMessage(JSON.stringify({language:m.language,code:m.code}))):(m.highlightedCode=
b.highlight(m.code,m.grammar,m.language),b.hooks.run("before-insert",m),m.element.innerHTML=m.highlightedCode,k&&k.call(h),b.hooks.run("after-highlight",m))}},highlight:function(a,c,k){return d.stringify(b.tokenize(a,c),k)},tokenize:function(a,c,d){d=b.Token;var f=[a],g=c.rest;if(g){for(var l in g)c[l]=g[l];delete c.rest}a:for(l in c)if(c.hasOwnProperty(l)&&c[l])for(var g=c[l],m=g.inside,x=!!g.lookbehind,v=0,g=g.pattern||g,s=0;s<f.length;s++){var u=f[s];if(f.length>a.length)break a;if(!(u instanceof
d)){g.lastIndex=0;var t=g.exec(u);if(t){x&&(v=t[1].length);var r=t.index-1+v,t=t[0].slice(v),w=r+t.length,r=u.slice(0,r+1),u=u.slice(w+1),w=[s,1];r&&w.push(r);t=new d(l,m?b.tokenize(t,m):t);w.push(t);u&&w.push(u);Array.prototype.splice.apply(f,w)}}}return f},hooks:{all:{},add:function(a,c){var d=b.hooks.all;d[a]=d[a]||[];d[a].push(c)},run:function(a,c){var d=b.hooks.all[a];if(d&&d.length)for(var f=0,g;g=d[f++];)g(c)}}},d=b.Token=function(a,b){this.type=a;this.content=b};d.stringify=function(a,c,g){if("string"==
typeof a)return a;if("[object Array]"==Object.prototype.toString.call(a))return a.map(function(b){return d.stringify(b,c,a)}).join("");g={type:a.type,content:d.stringify(a.content,c,g),tag:"span",classes:["token",a.type],attributes:{},language:c,parent:g};"comment"==g.type&&(g.attributes.spellcheck="true");b.hooks.run("wrap",g);var n="",q;for(q in g.attributes)n+=q+'="'+(g.attributes[q]||"")+'"';return"<"+g.tag+' class="'+g.classes.join(" ")+'" '+n+">"+g.content+"</"+g.tag+">"};if(self.document){var g=
document.getElementsByTagName("script");if(g=g[g.length-1])b.filename=g.src,document.addEventListener&&!g.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",b.highlightAll)}else self.addEventListener("message",function(a){a=JSON.parse(a.data);self.postMessage(JSON.stringify(b.tokenize(a.code,b.languages[a.language])));self.close()},!1)})();Prism.languages.markup={comment:/&lt;!--[\w\W]*?--\x3e/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]\x3e/i,
tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))});
Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,
inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});Prism.languages.css.selector={pattern:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,inside:{"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/g,"pseudo-class":/:[-\w]+(?:\(.*\))?/g,"class":/\.[-:\.\w]+/g,id:/#[-:\.\w]+/g}};Prism.languages.insertBefore("css","ignore",{hexcode:/#[\da-f]{3,6}/gi,entity:/\\[\da-f]{1,8}/gi,number:/[\d%\.]+/g,"function":/(attr|calc|cross-fade|cycle|element|hsla?|image|lang|linear-gradient|matrix3d|matrix|perspective|radial-gradient|repeating-linear-gradient|repeating-radial-gradient|rgba?|rotatex|rotatey|rotatez|rotate3d|rotate|scalex|scaley|scalez|scale3d|scale|skewx|skewy|skew|steps|translatex|translatey|translatez|translate3d|translate|url|var)/ig});
Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/ig,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/ig,inside:{punctuation:/\(/}},
number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|throw|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g});Prism.languages.insertBefore("javascript","keyword",
{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});Prism.languages.java=Prism.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/g,
number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+[e]?[\d]*[df]\b|\W\d*\.?\d+\b/gi,operator:{pattern:/([^\.]|^)([-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\/|%|\^|(&lt;){2}|($gt;){2,3}|:|~)/g,lookbehind:!0}});Prism.languages.php=Prism.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|extends|private|protected|parent|static|throw|null|echo|print|trait|namespace|use|final|yield|goto|instanceof|finally|try|catch)\b/ig,
constant:/\b[A-Z0-9_]{2,}\b/g});Prism.languages.insertBefore("php","keyword",{delimiter:/(\?>|&lt;\?php|&lt;\?)/ig,variable:/(\$\w+)\b/ig,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/g,lookbehind:!0,inside:{punctuation:/\\/}}});Prism.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/g,lookbehind:!0}});Prism.languages.markup&&(Prism.hooks.add("before-highlight",function(a){"php"===a.language&&(a.tokenStack=[],a.code=a.code.replace(/(?:&lt;\?php|&lt;\?|<\?php|<\?)[\w\W]*?(?:\?&gt;|\?>)/ig,
function(b){a.tokenStack.push(b);return"{{{PHP"+a.tokenStack.length+"}}}"}))}),Prism.hooks.add("after-highlight",function(a){if("php"===a.language){for(var b=0,d;d=a.tokenStack[b];b++)a.highlightedCode=a.highlightedCode.replace("{{{PHP"+(b+1)+"}}}",Prism.highlight(d,a.grammar,"php"));a.element.innerHTML=a.highlightedCode}}),Prism.hooks.add("wrap",function(a){"php"===a.language&&"markup"===a.type&&(a.content=a.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),Prism.languages.insertBefore("php",
"comment",{markup:{pattern:/(&lt;|<)[^?]\/?(.*?)(>|&gt;)/g,inside:Prism.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/g}));Prism.languages.insertBefore("php","variable",{"this":/\$this/g,global:/\$_?(GLOBALS|SERVER|GET|POST|FILES|REQUEST|SESSION|ENV|COOKIE|HTTP_RAW_POST_DATA|argc|argv|php_errormsg|http_response_header)/g,scope:{pattern:/\b[\w\\]+::/g,inside:{keyword:/(static|self|parent)/,punctuation:/(::|\\)/}}});Prism.languages.coffeescript=Prism.languages.extend("javascript",{"block-comment":/([#]{3}\s*\r?\n(.*\s*\r*\n*)\s*?\r?\n[#]{3})/g,
comment:/(\s|^)([#]{1}[^#^\r^\n]{2,}?(\r?\n|$))/g,keyword:/\b(this|window|delete|class|extends|namespace|extend|ar|let|if|else|while|do|for|each|of|return|in|instanceof|new|with|typeof|try|catch|finally|null|undefined|break|continue)\b/g});Prism.languages.insertBefore("coffeescript","keyword",{"function":{pattern:/[a-z|A-z]+\s*[:|=]\s*(\([.|a-z\s|,|:|{|}|\"|\'|=]*\))?\s*-&gt;/gi,inside:{"function-name":/[_?a-z-|A-Z-]+(\s*[:|=])| @[_?$?a-z-|A-Z-]+(\s*)| /g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g}},
"attr-name":/[_?a-z-|A-Z-]+(\s*:)| @[_?$?a-z-|A-Z-]+(\s*)| /g});Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},atrule:/@[\w-]+(?=\s+(\(|\{|;))/gi,url:/([-a-z]+-)*url(?=\()/gi,selector:/([^@;\{\}\(\)]?([^@;\{\}\(\)]|&amp;|\#\{\$[-_\w]+\})+)(?=\s*\{(\}|\s|[^\}]+(:|\{)[^\}]+))/gm});Prism.languages.insertBefore("scss","atrule",{keyword:/@(if|else if|else|for|each|while|import|extend|debug|warn|mixin|include|function|return)|(?=@for\s+\$[-_\w]+\s)+from/i});
Prism.languages.insertBefore("scss","property",{variable:/((\$[-_\w]+)|(#\{\$[-_\w]+\}))/i});Prism.languages.insertBefore("scss","ignore",{placeholder:/%[-_\w]+/i,statement:/\B!(default|optional)\b/gi,"boolean":/\b(true|false)\b/g,"null":/\b(null)\b/g,operator:/\s+([-+]{1,2}|={1,2}|!=|\|?\||\?|\*|\/|\%)\s+/g});Prism.languages.bash=Prism.languages.extend("clike",{comment:{pattern:/(^|[^"{\\])(#.*?(\r?\n|$))/g,lookbehind:!0},string:{pattern:/("|')(\\?[\s\S])*?\1/g,inside:{property:/\$([a-zA-Z0-9_#\?\-\*!@]+|\{[^\}]+\})/g}},
keyword:/\b(if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)\b/g});Prism.languages.insertBefore("bash","keyword",{property:/\$([a-zA-Z0-9_#\?\-\*!@]+|\{[^}]+\})/g});Prism.languages.insertBefore("bash","comment",{important:/(^#!\s*\/bin\/bash)|(^#!\s*\/bin\/sh)/g});Prism.languages.c=Prism.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/g,
operator:/[-+]{1,2}|!=?|&lt;{1,2}=?|&gt;{1,2}=?|\-&gt;|={1,2}|\^|~|%|(&amp;){1,2}|\|?\||\?|\*|\//g});Prism.languages.insertBefore("c","keyword",{property:/#\s*[a-zA-Z]+/g});Prism.languages.cpp=Prism.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|delete\[\]|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|new\[\]|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/g,
operator:/[-+]{1,2}|!=?|&lt;{1,2}=?|&gt;{1,2}=?|\-&gt;|:{1,2}|={1,2}|\^|~|%|(&amp;){1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/g});Prism.languages.python={comment:{pattern:/(^|[^\\])#.*?(\r?\n|$)/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/g,"boolean":/\b(True|False)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,
operator:/[-+]{1,2}|=?&lt;|=?&gt;|!|={1,2}|(&){1,2}|(&amp;){1,2}|\|?\||\?|\*|\/|~|\^|%|\b(or|and|not)\b/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};Prism.languages.sql={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|((--)|(\/\/)).*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(ACTION|ADD|AFTER|ALGORITHM|ALTER|ANALYZE|APPLY|AS|ASC|AUTHORIZATION|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADE|CASCADED|CASE|CHAIN|CHAR VARYING|CHARACTER VARYING|CHECK|CHECKPOINT|CLOSE|CLUSTERED|COALESCE|COLUMN|COLUMNS|COMMENT|COMMIT|COMMITTED|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS|CONTAINSTABLE|CONTINUE|CONVERT|CREATE|CROSS|CURRENT|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP|CURRENT_USER|CURSOR|DATA|DATABASE|DATABASES|DATETIME|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DOUBLE PRECISION|DROP|DUMMY|DUMP|DUMPFILE|DUPLICATE KEY|ELSE|ENABLE|ENCLOSED BY|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPE|ESCAPED BY|EXCEPT|EXEC|EXECUTE|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR|FOR EACH ROW|FORCE|FOREIGN|FREETEXT|FREETEXTTABLE|FROM|FULL|FUNCTION|GEOMETRY|GEOMETRYCOLLECTION|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|IDENTITY|IDENTITY_INSERT|IDENTITYCOL|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTO|INVOKER|ISOLATION LEVEL|JOIN|KEY|KEYS|KILL|LANGUAGE SQL|LAST|LEFT|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONGBLOB|LONGTEXT|MATCH|MATCHED|MEDIUMBLOB|MEDIUMINT|MEDIUMTEXT|MERGE|MIDDLEINT|MODIFIES SQL DATA|MODIFY|MULTILINESTRING|MULTIPOINT|MULTIPOLYGON|NATIONAL|NATIONAL CHAR VARYING|NATIONAL CHARACTER|NATIONAL CHARACTER VARYING|NATIONAL VARCHAR|NATURAL|NCHAR|NCHAR VARCHAR|NEXT|NO|NO SQL|NOCHECK|NOCYCLE|NONCLUSTERED|NULLIF|NUMERIC|OF|OFF|OFFSETS|ON|OPEN|OPENDATASOURCE|OPENQUERY|OPENROWSET|OPTIMIZE|OPTION|OPTIONALLY|ORDER|OUT|OUTER|OUTFILE|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREV|PRIMARY|PRINT|PRIVILEGES|PROC|PROCEDURE|PUBLIC|PURGE|QUICK|RAISERROR|READ|READS SQL DATA|READTEXT|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEATABLE|REPLICATION|REQUIRE|RESTORE|RESTRICT|RETURN|RETURNS|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROWCOUNT|ROWGUIDCOL|ROWS?|RTREE|RULE|SAVE|SAVEPOINT|SCHEMA|SELECT|SERIAL|SERIALIZABLE|SESSION|SESSION_USER|SET|SETUSER|SHARE MODE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|START|STARTING BY|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLE|TABLES|TABLESPACE|TEMPORARY|TEMPTABLE|TERMINATED BY|TEXT|TEXTSIZE|THEN|TIMESTAMP|TINYBLOB|TINYINT|TINYTEXT|TO|TOP|TRAN|TRANSACTION|TRANSACTIONS|TRIGGER|TRUNCATE|TSEQUAL|TYPE|TYPES|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNPIVOT|UPDATE|UPDATETEXT|USAGE|USE|USER|USING|VALUE|VALUES|VARBINARY|VARCHAR|VARCHARACTER|VARYING|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH|WITH ROLLUP|WITHIN|WORK|WRITE|WRITETEXT)\b/gi,
"boolean":/\b(TRUE|FALSE|NULL)\b/gi,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/\b(ALL|AND|ANY|BETWEEN|EXISTS|IN|LIKE|NOT|OR|IS|UNIQUE|CHARACTER SET|COLLATE|DIV|OFFSET|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b|[-+]{1}|!|=?&lt;|=?&gt;|={1}|(&amp;){1,2}|\|?\||\?|\*|\//gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[;[\]()`,.]/g};Prism.languages.groovy=Prism.languages.extend("clike",{keyword:/\b(as|def|in|abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|native|new|package|private|protected|public|return|short|static|strictfp|super|switch|synchronized|this|throw|throws|transient|try|void|volatile|while)\b/g,
string:/("""|''')[\W\w]*?\1|("|'|\/)[\W\w]*?\2/g,number:/\b0b[01_]+\b|\b0x[\da-f_]+(\.[\da-f_p\-]+)?\b|\b[\d_]+(\.[\d_]+[e]?[\d]*)?[glidf]\b|[\d_]+(\.[\d_]+)?\b/gi,operator:/={0,2}~|\?\.|\*?\.@|\.&amp;|\.(?=\w)|\.{2}(&lt;)?(?=\w)|-&gt;|\?:|[-+]{1,2}|!|&lt;=&gt;|(&gt;){1,3}|(&lt;){1,2}|={1,2}|(&amp;){1,2}|\|{1,2}|\?|\*{1,2}|\/|\^|%/g,punctuation:/\.+|[{}[\];(),:$]/g,annotation:/@\w+/});Prism.languages.insertBefore("groovy","punctuation",{"spock-block":/\b(setup|given|when|then|and|cleanup|expect|where):/g});
Prism.hooks.add("wrap",function(a){if("groovy"===a.language&&"string"===a.type){var b=a.content[0];"'"!=b&&(a.content=Prism.highlight(a.content,{expression:{pattern:/([^\\])(\$(\{.*?\}|[\w\.]*))/,lookbehind:!0,inside:Prism.languages.groovy}}),a.classes.push("/"===b?"regex":"gstring"))}});Prism.languages.http={"request-line":{pattern:/^(POST|GET|PUT|DELETE|OPTIONS)\b\shttps?:\/\/\S+\sHTTP\/[0-9.]+/g,inside:{property:/^\b(POST|GET|PUT|DELETE|OPTIONS)\b/g,"attr-name":/:\w+/g}},"response-status":{pattern:/^HTTP\/1.[01] [0-9]+.*/g,
inside:{property:/[0-9]+[A-Z\s-]+$/g}},keyword:/^[\w-]+:(?=.+)/gm};b={"application/json":Prism.languages.javascript,"application/xml":Prism.languages.markup,"text/xml":Prism.languages.markup,"text/html":Prism.languages.markup};for(var d in b)if(b[d]){var a={};a[d]={pattern:RegExp("(content-type:\\s*"+d+"[\\w\\W]*?)\\n\\n[\\w\\W]*","gi"),lookbehind:!0,inside:{rest:b[d]}};Prism.languages.insertBefore("http","keyword",a)}Prism.languages.ruby=Prism.languages.extend("clike",{comment:/#[^\r\n]*(\r?\n|$)/g,
keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/g,builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,
constant:/\b[A-Z][a-zA-Z_0-9]*[?!]?\b/g});Prism.languages.insertBefore("ruby","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0},variable:/[@$&]+\b[a-zA-Z_][a-zA-Z_0-9]*[?!]?\b/g,symbol:/:\b[a-zA-Z_][a-zA-Z_0-9]*[?!]?\b/g});Prism.languages.gherkin={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|((#)|(\/\/)).*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,atrule:/\b(And|Given|When|Then|In order to|As an|I want to|As a)\b/g,keyword:/\b(Scenario Outline|Scenario|Feature|Background|Story)\b/g};
Prism.languages.csharp=Prism.languages.extend("clike",{keyword:/\b(abstract|as|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/g,
string:/@?("|')(\\?.)*?\1/g,preprocessor:/^\s*#.*/gm,number:/\b-?(0x)?\d*\.?\d+\b/g});Prism.hooks.add("after-highlight",function(a){var b=a.element.parentNode;if(b&&/pre/i.test(b.nodeName)&&-1!==b.className.indexOf("line-numbers")){var d=1+a.code.split("\n").length;lines=Array(d);lines=lines.join("<span></span>");d=document.createElement("span");d.className="line-numbers-rows";d.innerHTML=lines;b.hasAttribute("data-start")&&(b.style.counterReset="linenumber "+(parseInt(b.getAttribute("data-start"),
10)-1));a.element.appendChild(d)}});this.resolve()});EasyDiscuss.module("profile",function(b){var d=this;EasyDiscuss.require().done(function(){EasyDiscuss.Controller("Profile",{defaultOptions:{userid:null,defaultTab:null,"{tabs}":".profileTab","{tabContents}":".tabContents","{loader}":".loader"}},function(a){return{init:function(){a.options.userid=a.element.data("id");a.initializeTabs()},initializeTabs:function(){var c=a.options.defaultTab,d=b.uri(window.location).anchor();d&&(c=d.charAt(0).toUpperCase()+
d.slice(1));a.tabs(".tab"+c).click()},loadTabContents:function(b){EasyDiscuss.ajax("site.views.profile.tab",{type:b,id:a.options.userid},{beforeSend:function(){a.tabContents("#"+b).addClass("tab-pane-loading")},success:function(d,f){var g=d;null!=f&&(g+=f);a.tabContents("#"+b).removeClass("tab-pane-loading");a.tabContents("#"+b).html(g)},fail:function(){}})},"{tabs} click":function(b){var d=b.data("id"),d=a.tabContents("#"+d);d.removeClass("dynamic-tab-pane-control").find(".tab-row").remove();0>=
d.children().length&&a.loadTabContents(b.data("id"))}}});d.resolve()})});EasyDiscuss.module("ranks",function(b){var d=this;EasyDiscuss.require().language("COM_EASYDISCUSS_SUCCESS","COM_EASYDISCUSS_FAIL").done(function(a){EasyDiscuss.Controller("Administrator.Ranks",{defaultOptions:{userid:null,"{resetButton}":".resetButton"}},function(b){return{init:function(){},"{resetButton} click":function(d){a(".resetMessage").addClass("discuss-loader");EasyDiscuss.ajax("admin.views.ranks.ajaxResetRank",{userid:b.options.userid}).done(function(b,
c){a(".resetMessage").html(a.language("COM_EASYDISCUSS_SUCCESS"))}).fail(function(b){a(".resetMessage").html(a.language("COM_EASYDISCUSS_FAIL"))}).always(function(){a(".resetMessage").removeClass("discuss-loader")})}}});d.resolve()})});EasyDiscuss.module("replies",function(b){var d=this;EasyDiscuss.require().view("comment.form").script("comments","votes","location").language("COM_EASYDISCUSS_REPLY_LOADING_MORE_COMMENTS","COM_EASYDISCUSS_REPLY_LOAD_ERROR").done(function(){EasyDiscuss.Controller("Replies",
{defaultOptions:{termsCondition:null,sort:null,"{replyItem}":".discussReplyItem"}},function(a){return{init:function(){a.initItem(a.replyItem())},initItem:function(b,d){b.implement(EasyDiscuss.Controller.Reply.Item,{controller:{parent:a},reinit:d,termsCondition:a.options.termsCondition,enableMap:a.options.enableMap})},addItem:function(c,d){var f=b(c);"latest"==a.options.sort?f.prependTo(a.element):0==b(".replyLoadMore").length?f.appendTo(a.element):b(".replyLoadMore").controller().loadedAllReplies&&
f.appendTo(a.element);a.initItem(f,d)},replaceItem:function(c,d){var f=b(d);a.replyItem("[data-id="+c+"]").replaceWith(f);a.initItem(f)}}});EasyDiscuss.Controller("Reply.Item",{defaultOptions:{id:null,termsCondition:null,reinit:null,view:{commentForm:"comment.form"},"{addCommentButton}":".addComment","{commentFormContainer}":".commentFormContainer","{commentNotification}":".commentNotification","{commentsList}":".commentsList","{commentLoadMore}":".commentLoadMore","{editReplyButton}":".editReplyButton",
"{cancelReplyButton}":".cancel-reply","{composerContainer}":".discuss-editor","{composer}":".discuss-composer","{alertMessage}":".alertMessage","{postLocation}":".postLocation","{locationData}":".locationData"}},function(a){return{init:function(){a.options.id=a.element.data("id");if(0<a.locationData().length){var c=b.parseJSON(a.locationData().val());a.postLocation().implement("EasyDiscuss.Controller.Location.Map",c)}EasyDiscuss.main_syntax_highlighter&&Prism.highlightAll();a.commentsList().implement(EasyDiscuss.Controller.Comment.List);
0<a.commentLoadMore().length&&a.commentLoadMore().implement(EasyDiscuss.Controller.Comment.LoadMore,{controller:{list:a.commentsList().controller()}});if(a.options.reinit){var d=a.element.find(".postLocation");if(0<d.length){var f=b.parseJSON(d.find(".locationData").val());EasyDiscuss.require().script("location").done(function(a){d.implement("EasyDiscuss.Controller.Location.Map",f)})}a.find(".discuss-vote").implement(EasyDiscuss.Controller.Votes,{viewVotes:EasyDiscuss.view_votes});a.find(".attachmentsItem").implement(EasyDiscuss.Controller.Attachments.Item,
{})}},"{editReplyButton} click":function(){a.edit()},alert:function(c,d,f){void 0===d&&(d="info");a.removeAlert();b('<div class="alert alertMessage"></div>').addClass("alert-"+d).html(c).prependTo(a.composerContainer());f&&setTimeout(function(){a.alertMessage().fadeOut("slow",function(){a.removeAlert()})},f)},removeAlert:function(){a.alertMessage().remove()},edit:function(){a.editReplyButton().addClass("btn-loading");EasyDiscuss.ajax("site.views.post.editReply",{id:a.options.id}).done(function(b,
d){a.composer().remove();a.composerContainer().append(d);discuss.composer.init("."+b)}).fail(function(){a.alert("Unable to load composer.","error",3E3)}).always(function(){a.editReplyButton().removeClass("btn-loading")})},"{composer} save":function(c,d,f){c=b(f).filter(".discussReplyItem");0<c.length&&(a.parent.replaceItem(a.options.id,c),b(".discussionReplies").controller().initItem(c,!0))},"{composer} cancel":function(){a.composer().remove()},"{addCommentButton} click":function(){var c=a.view.commentForm({id:a.options.id});
b(c).implement(EasyDiscuss.Controller.Comment.Form,{container:a.commentFormContainer(),notification:a.commentNotification(),commentsList:a.commentsList(),loadMore:a.commentLoadMore(),termsCondition:a.options.termsCondition});a.commentFormContainer().html(c).toggle()}}});EasyDiscuss.Controller("Replies.LoadMore",{defaultOptions:{id:null,sort:null}},function(a){return{init:function(){a.loadedAllReplies=!1},"{self} click":function(c){c.enabled()&&(c.disabled(!0),c.addClass("btn-loading").html(b.language("COM_EASYDISCUSS_REPLY_LOADING_MORE_COMMENTS")),
EasyDiscuss.ajax("site.views.post.getReplies",{id:a.options.id,start:a.list.replyItem().length,sort:a.options.sort}).done(function(d,f){d=b(d);d.appendTo(a.list.element);d.filter("li").find(".discussReplyItem").implement(EasyDiscuss.Controller.Reply.Item,{controller:{parent:a.list},termsCondition:a.list.options.termsCondition,reinit:!0});f?c.enabled(!0):(c.hide(),a.loadedAllReplies=!0)}).fail(function(){c.addClass("btn-danger").html(b.language("COM_EASYDISCUSS_REPLY_LOAD_ERROR"))}).always(function(){c.removeClass("btn-loading")}))}}});
d.resolve()})});EasyDiscuss.module("votes",function(b){var d=this;EasyDiscuss.require().done(function(a){EasyDiscuss.Controller("Votes",{defaultOptions:{postId:null,"{voteUp}":".voteUp","{voteDown}":".voteDown","{votePoints}":".votePoints b","{voteText}":".voteText"}},function(a){return{init:function(){a.options.postId=a.element.data("postid")},vote:function(b){EasyDiscuss.ajax("site.views.votes.add",{id:a.options.postId,type:b}).done(function(b,d){a.votePoints().html(b)}).fail(function(a){console.log(a)})},
"{votePoints} click":function(){a.options.viewVotes&&(disjax.loadingDialog(),disjax.load("Votes","showVoters",a.options.postId.toString()))},"{voteUp} click":function(){a.vote("up")},"{voteDown} click":function(){a.vote("down")}}});d.resolve()})});EasyDiscuss.module("stylesheet",function(b){var d=this;EasyDiscuss.require().language("COM_EASYDISCUSS_SUCCESS","COM_EASYDISCUSS_FAIL").done(function(a){EasyDiscuss.Controller("Post.Stylesheet",{defaultOptions:{type:null,"{compileButton}":".compileButton",
"{compileType}":"#compileType","{compileResult}":".compileResult"}},function(b){return{init:function(){},"{compileButton} click":function(d){b.testCompile(a("#compileType").val());a(".compileButton").addClass("btn-loading")},testCompile:function(b){EasyDiscuss.ajax("site.views.compile.testCompile",{type:b}).done(function(b,c){try{console.log(b)}catch(d){}a(".compileResult").addClass("text-success");a(".compileResult").removeClass("text-error");a(".compileResult").html(a.language("COM_EASYDISCUSS_SUCCESS"))}).fail(function(b,
c){try{console.log(b)}catch(d){}a(".compileResult").addClass("text-error");a(".compileResult").removeClass("text-success");a(".compileResult").html(a.language("COM_EASYDISCUSS_FAIL"))}).always(function(){a(".compileButton").removeClass("btn-loading")})}}});d.resolve()})});EasyDiscuss.module("tag",function(b){EasyDiscuss.Controller("Tag.Form",{defaultOptions:{tags:[],tagSelections:[],tagSelectionLimit:25,"{tagList}":".discuss-tag-list.creation","{tagItems}":".discuss-tag-list.creation .tag-item","{tagItemRemoveButton}":".remove-tag",
"{tagSelection}":".discuss-tag-list.selection","{tagSelectionItems}":".discuss-tag-list.selection .tag-item","{tagSelectionMoreButton}":".discuss-tag-list.selection .more-tags","{totalTags}":".total-tags","{tagCreate}":".new-tag-item","{tagInput}":".tag-input","{tagCreateButton}":".tag-create",view:{tagItem:"tags.item"}}},function(d){return{init:function(){d.generateTagSelections(d.options.tagSelections);b.each(d.options.tags,function(a,b){d.tagMap[b.title]=b;d.createTag(b.title)})},tagItem:{},tagMap:{},
tagSelectionMap:{},sanitizeTitle:function(a){return b.trim(a).replace(/[,\'\"\#\<\>]/gi,"")},getTagItem:function(a){return d.tagItems(function(){return b(this).data("title")==a})},createTag:function(a){if(d.checkTagLimit()){a=d.sanitizeTitle(a);var c;Object.prototype.hasOwnProperty.call(d.tagMap,a)&&(c=d.tagMap[a]);c=c||{title:a};a=b(d.getTagItem(a)[0]||d.view("tagItem",c));a.data({title:c.title,title_filter:c.title.toUpperCase()}).css({opacity:0});if(0<d.tagItems().length){var e=d.tagItems(":last");
e[0]!=a[0]&&e.after(a)}else d.tagList().prepend(a);a.animate({opacity:1});d.useTagSelection(c.title);d.checkTagLimit();return a}},removeTag:function(a){d.getTagItem(a).remove();d.tagMap[a]&&d.createTagSelection(a);d.discardTagSelection(a);d.checkTagLimit()},checkTagLimit:function(){var a=d.tagItems().length;d.totalTags().text(a);if(0!=d.options.tagLimit){if(a>d.options.tagLimit)return!1;if(a==d.options.tagLimit)return d.tagCreate().hide(),!1;d.tagCreate().show();return!0}},generateTagSelections:function(a){var c=
d.options.tagSelectionLimit;a.length<=c&&d.tagSelectionMoreButton().remove();if(1>a.length)d.element.addClass("no-selection");else{d.options.tagSelections.reverse();var e=d.options.tagSelections.length;b.each(d.options.tagSelections,function(a,b){d.tagSelectionMap[b.title]=b;var h=d.createTagSelection(b.title);a==c+1&&d.tagSelectionMoreButton().show();e-a>c&&h.addClass("extras")})}},"{tagSelectionMoreButton} click":function(a){a.remove();d.tagSelectionItems(".extras").css({opacity:0}).removeClass("extras").animate({opacity:1})},
getTagSelectionItem:function(a){if(Object.prototype.hasOwnProperty.call(d.tagItem,a))return d.tagItem[a]},createTagSelection:function(a){var c=d.getTagSelectionItem(a);if(c)return c.show(),c;c=b("<li>").addClass("tag-item").data({title:a,title_filter:a.toUpperCase()}).html(a);d.tagItem[a]=c;d.tagSelection().prepend(c);return c},useTagSelection:function(a){(a=d.getTagSelectionItem(a))&&a.addClass("used").hide()},discardTagSelection:function(a){d.getTagSelectionItem(a)&&d.getTagSelectionItem(a).removeClass("used").show()},
createTagFromInput:function(){var a=d.sanitizeTitle(d.tagInput().val());""!=a&&(d.createTag(a),d.tagInput().val(""));d.filterTagSelectionItems("")},filterTagSelectionItems:function(a){a=d.sanitizeTitle(a).toUpperCase();""==a?(d.tagSelectionItems(":not(.used)").show(),d.element.removeClass("no-selection"),d.tagSelectionMoreButton().show()):(d.tagSelectionMoreButton().hide(),1>d.tagSelectionItems().filter(function(c,d){d=b(this);if(d.hasClass(".used")||0>d.data("title_filter").indexOf(a))return d.hide(),
!1;d.show();return!0}).length&&d.element.addClass("no-selection"))},"{tagInput} keydown":function(a,b){b.stopPropagation();d.realEnterKey=13==b.keyCode},"{tagInput} keypress":function(a,b){b.stopPropagation();d.realEnterKey=d.realEnterKey&&13==b.keyCode},"{tagInput} keyup":function(a,b){b.stopPropagation();switch(b.keyCode){case 27:a.val("");break;case 13:d.realEnterKey&&d.createTagFromInput()}d.filterTagSelectionItems(a.val())},"{tagCreateButton} click":function(){d.createTagFromInput()},"{tagItemRemoveButton} click":function(a){a=
a.parents(".tag-item").data("title");d.removeTag(a)},"{tagSelectionItems} click":function(a){d.createTag(a.data("title"))}}});this.resolve()});EasyDiscuss.module("toolbar",function(b){(function(){var a=b.event,c=function(a,b,c,d){var e,f,g,r,v,s,u,t;for(e=0;e<b.length;e++)for(f=b[e],r=0>f.indexOf("."),r||(g=f.split("."),f=g.shift(),u=RegExp("(^|\\.)"+g.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")),g=(a[f]||[]).slice(0),v=0;v<g.length;v++)s=g[v],(t=r||u.test(s.namespace))&&(d?s.selector===d&&c(f,
s.origHandler||s.handler):null===d?c(f,s.origHandler||s.handler,s.selector):s.selector||c(f,s.origHandler||s.handler))};a.find=function(a,d,e){a=(b._data(a)||{}).events;var f=[];if(!a)return f;c(a,d,function(a,b){f.push(b)},e);return f};a.findBySelector=function(a,d){var e=b._data(a).events,f={};if(!e)return f;c(e,d,function(a,b,c){c=c||"";c=f[c]||(f[c]={});(c[a]||(c[a]=[])).push(b)},null);return f};a.supportTouch="ontouchend"in document;b.fn.respondsTo=function(c){return this.length?0<a.find(this[0],
b.isArray(c)?c:[c]).length:!1};b.fn.triggerHandled=function(a,c){a="string"==typeof a?b.Event(a):a;this.trigger(a,c);return a.handled};a.setupHelper=function(c,d,e){e||(e=d,d=null);var f=function(f){var g=f.selector||"";g?(f=a.find(this,c,g),f.length||b(this).delegate(g,d,e)):a.find(this,c,g).length||a.add(this,d,e,{selector:g,delegate:this})},g=function(f){var g=f.selector||"";g?(f=a.find(this,c,g),f.length||b(this).undelegate(g,d,e)):a.find(this,c,g).length||a.remove(this,d,e,{selector:g,delegate:this})};
b.each(c,function(){a.special[this]={add:f,remove:g,setup:function(){},teardown:function(){}}})};var d="ontouchend"in document,f=d?"touchend":"mouseup",g=function(a){var c=a.originalEvent.touches?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:a;return{time:(new Date).getTime(),coords:[c.pageX,c.pageY],origin:b(a.target)}};b.event.setupHelper(["tap"],d?"touchstart":"mousedown",function(a){function c(f){e=g(f);(10>Math.abs(d.coords[0]-e.coords[0])||10>Math.abs(d.coords[1]-e.coords[1]))&&
b.each(b.event.find(q,["tap"],l),function(){this.call(m,a,{start:d,end:e})})}var d=g(a),e,q=a.delegateTarget||a.currentTarget,l=a.handleObj.selector,m=this;setTimeout(function(){b(q).unbind(f,c)},500);b(q).one(f,c)})})();var d=this;EasyDiscuss.require().done(function(a){EasyDiscuss.Controller("Toolbar",{defaultOptions:{"{items}":".toolbarItem","{dropdowns}":".dropdown-menu","{notificationLink}":".notificationLink","{notificationDropDown}":".notificationDropDown","{notificationResult}":".notificationResult",
"{notificationItems}":".notificationItem","{notificationLoader}":".notificationLoader","{messageLink}":".messageLink","{messageDropDown}":".messageDropDown","{messageResult}":".messageResult","{messageLoader}":".messageLoader","{messageItems}":".messageItem","{logoutForm}":"#logoutForm","{logoutButton}":".logoutButton","{loginLink}":".loginLink","{loginDropDown}":".loginDropDown","{profileLink}":".profileLink","{profileDropDown}":".profileDropDown"}},function(b){return{init:function(){a.responsive(b.element,
{elementWidth:function(){return b.element.outerWidth(!0)-15},conditions:{at:function(){var d=0;b.items().each(function(b,c){d+=a(c).outerWidth(!0)});return d}(),alsoSwitch:{".dc_toolbar-wrapper":"narrow",".dc-button":"show","#dc_toolbar":"hidden-height"}}})},"{logoutButton} click":function(){b.logoutForm().submit()},"{loginLink} click":function(){b.messageDropDown().hide();b.notificationDropDown().hide();b.loginDropDown().toggle()},"{profileLink} tap":function(){b.messageDropDown().hide();b.notificationDropDown().hide();
b.profileDropDown().toggle()},"{messageLink} tap":function(){b.profileDropDown().hide();b.notificationDropDown().hide();if("none"==b.messageDropDown().css("display")){var d={};d[a(".easydiscuss-token").val()]=1;EasyDiscuss.ajax("site.views.conversation.load",d,{beforeSend:function(){b.messageLoader().show();b.messageItems().remove()},success:function(a){b.messageLoader().hide();b.messageResult().append(a)}})}b.messageDropDown().toggle()},"{notificationLink} tap":function(){b.messageDropDown().hide();
b.profileDropDown().hide();if("none"==b.notificationDropDown().css("display")){var d={};d[a(".easydiscuss-token").val()]=1;EasyDiscuss.ajax("site.views.notifications.load",d,{beforeSend:function(){b.notificationLoader().show();b.notificationItems().remove()},success:function(a){b.notificationLoader().hide();b.notificationResult().append(a)}})}b.notificationDropDown().toggle()}}});EasyDiscuss.Controller("mod_notifications",{defaultOptions:{"{items}":".toolbarItem","{dropdowns}":".dropdown-menu","{notificationLink}":".notificationLink",
"{notificationDropDown}":".notificationDropDown","{notificationResult}":".notificationResult","{notificationItems}":".notificationItem","{notificationLoader}":".notificationLoader","{messageLink}":".messageLink","{messageDropDown}":".messageDropDown","{messageResult}":".messageResult","{messageLoader}":".messageLoader","{messageItems}":".messageItem","{logoutForm}":"#logoutForm","{logoutButton}":".logoutButton","{loginLink}":".loginLink","{loginDropDown}":".loginDropDown","{profileLink}":".profileLink",
"{profileDropDown}":".profileDropDown"}},function(b){return{init:function(){a.responsive(b.element,{elementWidth:function(){return b.element.outerWidth(!0)-15},conditions:{at:function(){var d=0;b.items().each(function(b,c){d+=a(c).outerWidth(!0)});return d}(),alsoSwitch:{".dc_toolbar-wrapper":"narrow",".dc-button":"show","#dc_toolbar":"hidden-height"}}})},"{logoutButton} click":function(){b.logoutForm().submit()},"{loginLink} click":function(){b.messageDropDown().hide();b.notificationDropDown().hide();
b.loginDropDown().toggle()},"{profileLink} click":function(){b.messageDropDown().hide();b.notificationDropDown().hide();b.profileDropDown().toggle()},"{messageLink} click":function(){b.profileDropDown().hide();b.notificationDropDown().hide();if("none"==b.messageDropDown().css("display")){var d={};d[a(".easydiscuss-token").val()]=1;EasyDiscuss.ajax("site.views.conversation.load",d,{beforeSend:function(){b.messageLoader().show();b.messageItems().remove()},success:function(a){b.messageLoader().hide();
b.messageResult().append(a)}})}b.messageDropDown().toggle()},"{notificationLink} click":function(){b.messageDropDown().hide();b.profileDropDown().hide();if("none"==b.notificationDropDown().css("display")){var d={};d[a(".easydiscuss-token").val()]=1;EasyDiscuss.ajax("site.views.notifications.load",d,{beforeSend:function(){b.notificationLoader().show();b.notificationItems().remove()},success:function(a){b.notificationLoader().hide();b.notificationResult().append(a)}})}b.notificationDropDown().toggle()}}});
d.resolve()})})});