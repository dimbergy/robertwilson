/*
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>

 Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(h,e){function g(a){var b=a.length,c=l.type(a);return l.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"===typeof b&&0<b&&b-1 in a)}function b(a){var b=ab[a]={};l.each(a.match(za)||[],function(a,c){b[c]=!0});return b}function a(a,b,c,d){if(l.acceptData(a)){var f=l.expando,k=a.nodeType,g=k?l.cache:a,n=k?a[f]:a[f]&&f;if(n&&g[n]&&(d||g[n].data)||c!==e||"string"!==typeof b){n||(n=k?a[f]=P.pop()||l.guid++:f);g[n]||(g[n]=k?{}:{toJSON:l.noop});if("object"===typeof b||
"function"===typeof b)d?g[n]=l.extend(g[n],b):g[n].data=l.extend(g[n].data,b);a=g[n];d||(a.data||(a.data={}),a=a.data);c!==e&&(a[l.camelCase(b)]=c);"string"===typeof b?(c=a[b],null==c&&(c=a[l.camelCase(b)])):c=a;return c}}}function c(a,b,c){if(l.acceptData(a)){var d,e,k=a.nodeType,g=k?l.cache:a,n=k?a[l.expando]:l.expando;if(g[n]){if(b&&(d=c?g[n]:g[n].data)){l.isArray(b)?b=b.concat(l.map(b,l.camelCase)):b in d?b=[b]:(b=l.camelCase(b),b=b in d?[b]:b.split(" "));for(e=b.length;e--;)delete d[b[e]];if(c?
!f(d):!l.isEmptyObject(d))return}if(!c&&(delete g[n].data,!f(g[n])))return;k?l.cleanData([a],!0):l.support.deleteExpando||g!=g.window?delete g[n]:g[n]=null}}}function d(a,b,c){if(c===e&&1===a.nodeType)if(c="data-"+b.replace(Aa,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Pa.test(c)?l.parseJSON(c):c}catch(d){}l.data(a,b,c)}else c=e;return c}function f(a){for(var b in a)if(("data"!==b||!l.isEmptyObject(a[b]))&&"toJSON"!==
b)return!1;return!0}function k(){return!0}function n(){return!1}function p(){try{return A.activeElement}catch(a){}}function s(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function q(a,b,c){if(l.isFunction(b))return l.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return l.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Rb.test(b))return l.filter(b,a,c);b=l.filter(b,a)}return l.grep(a,function(a){return 0<=l.inArray(a,b)!==c})}function t(a){var b=Kb.split("|");
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function r(a,b){return l.nodeName(a,"table")&&l.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function u(a){a.type=(null!==l.find.attr(a,"type"))+"/"+a.type;return a}function m(a){var b=Qa.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function x(a,b){for(var c,d=0;null!=(c=a[d]);d++)l._data(c,"globalEval",
!b||l._data(b[d],"globalEval"))}function C(a,b){if(1===b.nodeType&&l.hasData(a)){var c,d,f;d=l._data(a);var e=l._data(b,d),k=d.events;if(k)for(c in delete e.handle,e.events={},k)for(d=0,f=k[c].length;d<f;d++)l.event.add(b,c,k[c][d]);e.data&&(e.data=l.extend({},e.data))}}function w(a,b){var c,d,f=0,k=typeof a.getElementsByTagName!==ca?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==ca?a.querySelectorAll(b||"*"):e;if(!k)for(k=[],c=a.childNodes||a;null!=(d=c[f]);f++)!b||l.nodeName(d,b)?k.push(d):
l.merge(k,w(d,b));return b===e||b&&l.nodeName(a,b)?l.merge([a],k):k}function v(a){Lb.test(a.type)&&(a.defaultChecked=a.checked)}function z(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,f=yb.length;f--;)if(b=yb[f]+c,b in a)return b;return d}function y(a,b){a=b||a;return"none"===l.css(a,"display")||!l.contains(a.ownerDocument,a)}function L(a,b){for(var c,d,f,e=[],k=0,g=a.length;k<g;k++)d=a[k],d.style&&(e[k]=l._data(d,"olddisplay"),c=d.style.display,b?(e[k]||"none"!==c||
(d.style.display=""),""===d.style.display&&y(d)&&(e[k]=l._data(d,"olddisplay",T(d.nodeName)))):e[k]||(f=y(d),(c&&"none"!==c||!f)&&l._data(d,"olddisplay",f?c:l.css(d,"display"))));for(k=0;k<g;k++)d=a[k],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?e[k]||"":"none");return a}function M(a,b,c){return(a=va.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function ba(a,b,c,d,f){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=l.css(a,
c+Ra[b],!0,f)),d?("content"===c&&(e-=l.css(a,"padding"+Ra[b],!0,f)),"margin"!==c&&(e-=l.css(a,"border"+Ra[b]+"Width",!0,f))):(e+=l.css(a,"padding"+Ra[b],!0,f),"padding"!==c&&(e+=l.css(a,"border"+Ra[b]+"Width",!0,f)));return e}function X(a,b,c){var d=!0,f="width"===b?a.offsetWidth:a.offsetHeight,e=Ea(a),k=l.support.boxSizing&&"border-box"===l.css(a,"boxSizing",!1,e);if(0>=f||null==f){f=bb(a,b,e);if(0>f||null==f)f=a.style[b];if(cb.test(f))return f;d=k&&(l.support.boxSizingReliable||f===a.style[b]);
f=parseFloat(f)||0}return f+ba(a,b,c||(k?"border":"content"),d,e)+"px"}function T(a){var b=A,c=mb[a];c||(c=la(a,b),"none"!==c&&c||(nb=(nb||l("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(nb[0].contentWindow||nb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=la(a,b),nb.detach()),mb[a]=c);return c}function la(a,b){var c=l(b.createElement(a)).appendTo(b.body),d=l.css(c[0],"display");c.remove();
return d}function da(a,b,c,d){var f;if(l.isArray(b))l.each(b,function(b,f){c||Zb.test(a)?d(a,f):da(a+"["+("object"===typeof f?b:"")+"]",f,c,d)});else if(c||"object"!==l.type(b))d(a,b);else for(f in b)da(a+"["+f+"]",b[f],c,d)}function I(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,f=0,e=b.toLowerCase().match(za)||[];if(l.isFunction(c))for(;d=e[f++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function F(a,b,c,d){function f(g){var n;e[g]=!0;l.each(a[g]||
[],function(a,D){var g=D(b,c,d);if("string"===typeof g&&!k&&!e[g])return b.dataTypes.unshift(g),f(g),!1;if(k)return!(n=g)});return n}var e={},k=a===ma;return f(b.dataTypes[0])||!e["*"]&&f("*")}function ia(a,b){var c,d,f=l.ajaxSettings.flatOptions||{};for(d in b)b[d]!==e&&((f[d]?a:c||(c={}))[d]=b[d]);c&&l.extend(!0,a,c);return a}function qa(){try{return new h.XMLHttpRequest}catch(a){}}function Fa(){setTimeout(function(){ta=e});return ta=l.now()}function Sa(a,b,c){for(var d,f=(Ya[b]||[]).concat(Ya["*"]),
e=0,k=f.length;e<k;e++)if(d=f[e].call(c,b,a))return d}function U(a,b,c){var d,f=0,e=zb.length,k=l.Deferred().always(function(){delete g.elem}),g=function(){if(d)return!1;for(var b=ta||Fa(),b=Math.max(0,n.startTime+n.duration-b),c=1-(b/n.duration||0),f=0,e=n.tweens.length;f<e;f++)n.tweens[f].run(c);k.notifyWith(a,[n,c,b]);if(1>c&&e)return b;k.resolveWith(a,[n]);return!1},n=k.promise({elem:a,props:l.extend({},b),opts:l.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:ta||
Fa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=l.Tween(a,n.opts,b,c,n.opts.specialEasing[b]||n.opts.easing);n.tweens.push(d);return d},stop:function(b){var c=0,f=b?n.tweens.length:0;if(d)return this;for(d=!0;c<f;c++)n.tweens[c].run(1);b?k.resolveWith(a,[n,b]):k.rejectWith(a,[n,b]);return this}});c=n.props;for(wa(c,n.opts.specialEasing);f<e;f++)if(b=zb[f].call(n,a,c,n.opts))return b;l.map(c,Sa,n);l.isFunction(n.opts.start)&&n.opts.start.call(a,n);l.fx.timer(l.extend(g,{elem:a,anim:n,
queue:n.opts.queue}));return n.progress(n.opts.progress).done(n.opts.done,n.opts.complete).fail(n.opts.fail).always(n.opts.always)}function wa(a,b){var c,d,f,e,k;for(c in a)if(d=l.camelCase(c),f=b[d],e=a[c],l.isArray(e)&&(f=e[1],e=a[c]=e[0]),c!==d&&(a[d]=e,delete a[c]),(k=l.cssHooks[d])&&"expand"in k)for(c in e=k.expand(e),delete a[d],e)c in a||(a[c]=e[c],b[c]=f);else b[d]=f}function B(a,b,c,d,f){return new B.prototype.init(a,b,c,d,f)}function ea(a,b){var c,d={height:a},f=0;for(b=b?1:0;4>f;f+=2-b)c=
Ra[f],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function N(a){return l.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var Q,R,ca=typeof e,S=h.location,A=h.document,W=A.documentElement,O={},P=[],ja=P.concat,ka=P.push,fa=P.slice,db=P.indexOf,na=O.toString,La=O.hasOwnProperty,Ta="1.10.2".trim,l=function(a,b){return new l.fn.init(a,b,R)},V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,za=/\S+/g,ob=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
fb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ba=/^[\],:{}\s]*$/,Ua=/(?:^|:|,)(?:\s*\[)+/g,G=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,H=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,J=/^-ms-/,K=/-([\da-z])/gi,E=function(a,b){return b.toUpperCase()},ra=function(a){if(A.addEventListener||"load"===a.type||"complete"===A.readyState)Ia(),l.ready()},Ia=function(){A.addEventListener?(A.removeEventListener("DOMContentLoaded",ra,!1),h.removeEventListener("load",ra,!1)):(A.detachEvent("onreadystatechange",
ra),h.detachEvent("onload",ra))};l.fn=l.prototype={jquery:"1.10.2",constructor:l,init:function(a,b,c){var d;if(!a)return this;if("string"===typeof a){d="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:pb.exec(a);if(!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof l?b[0]:b,l.merge(this,l.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:A,!0)),fb.test(d[1])&&l.isPlainObject(b))for(d in b)if(l.isFunction(this[d]))this[d](b[d]);
else this.attr(d,b[d])}else{if((b=A.getElementById(d[2]))&&b.parentNode){if(b.id!==d[2])return c.find(a);this.length=1;this[0]=b}this.context=A;this.selector=a}return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(l.isFunction(a))return c.ready(a);a.selector!==e&&(this.selector=a.selector,this.context=a.context);return l.makeArray(a,this)},selector:"",length:0,toArray:function(){return fa.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},
pushStack:function(a){a=l.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,b){return l.each(this,a,b)},ready:function(a){l.ready.promise().done(a);return this},slice:function(){return this.pushStack(fa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},map:function(a){return this.pushStack(l.map(this,function(b,c){return a.call(b,
c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ka,sort:[].sort,splice:[].splice};l.fn.init.prototype=l.fn;l.extend=l.fn.extend=function(){var a,b,c,d,f,k=arguments[0]||{},g=1,n=arguments.length,p=!1;"boolean"===typeof k&&(p=k,k=arguments[1]||{},g=2);"object"===typeof k||l.isFunction(k)||(k={});n===g&&(k=this,--g);for(;g<n;g++)if(null!=(f=arguments[g]))for(d in f)a=k[d],c=f[d],k!==c&&(p&&c&&(l.isPlainObject(c)||(b=l.isArray(c)))?(b?(b=!1,a=a&&l.isArray(a)?a:[]):a=a&&l.isPlainObject(a)?
a:{},k[d]=l.extend(p,a,c)):c!==e&&(k[d]=c));return k};l.extend({expando:"jQuery"+("1.10.2"+Math.random()).replace(/\D/g,""),noConflict:function(a){return l},isReady:!1,readyWait:1,holdReady:function(a){a?l.readyWait++:l.ready(!0)},ready:function(a){if(!0===a?!--l.readyWait:!l.isReady){if(!A.body)return setTimeout(l.ready);l.isReady=!0;!0!==a&&0<--l.readyWait||(Q.resolveWith(A,[l]),l.fn.trigger&&l(A).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===l.type(a)},isArray:Array.isArray||
function(a){return"array"===l.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?O[na.call(a)]||"object":typeof a},isPlainObject:function(a){var b;if(!a||"object"!==l.type(a)||a.nodeType||l.isWindow(a))return!1;try{if(a.constructor&&!La.call(a,"constructor")&&!La.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(l.support.ownLast)for(b in a)return La.call(a,
b);for(b in a);return b===e||La.call(a,b)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||A;var d=fb.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=l.buildFragment([a],b,c);c&&l(c).remove();return l.merge([],d.childNodes)},parseJSON:function(a){if(h.JSON&&h.JSON.parse)return h.JSON.parse(a);if(null===a)return a;if("string"===typeof a&&(a=l.trim(a))&&
Ba.test(a.replace(G,"@").replace(H,"]").replace(Ua,"")))return(new Function("return "+a))();l.error("Invalid JSON: "+a)},parseXML:function(a){var b,c;if(!a||"string"!==typeof a)return null;try{h.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(d){b=e}b&&b.documentElement&&!b.getElementsByTagName("parsererror").length||l.error("Invalid XML: "+a);return b},noop:function(){},globalEval:function(a){a&&l.trim(a)&&
(h.execScript||function(a){h.eval.call(h,a)})(a)},camelCase:function(a){return a.replace(J,"ms-").replace(K,E)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,f=0,e=a.length;d=g(a);if(c)if(d)for(;f<e&&(d=b.apply(a[f],c),!1!==d);f++);else for(f in a){if(d=b.apply(a[f],c),!1===d)break}else if(d)for(;f<e&&(d=b.call(a[f],f,a[f]),!1!==d);f++);else for(f in a)if(d=b.call(a[f],f,a[f]),!1===d)break;return a},trim:Ta&&!Ta.call("\ufeff\u00a0")?
function(a){return null==a?"":Ta.call(a)}:function(a){return null==a?"":(a+"").replace(ob,"")},makeArray:function(a,b){var c=b||[];null!=a&&(g(Object(a))?l.merge(c,"string"===typeof a?[a]:a):ka.call(c,a));return c},inArray:function(a,b,c){var d;if(b){if(db)return db.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=b.length,d=a.length,f=0;if("number"===typeof c)for(;f<c;f++)a[d++]=b[f];else for(;b[f]!==e;)a[d++]=b[f++];
a.length=d;return a},grep:function(a,b,c){var d,f=[],e=0,k=a.length;for(c=!!c;e<k;e++)d=!!b(a[e],e),c!==d&&f.push(a[e]);return f},map:function(a,b,c){var d,f=0,e=a.length,k=[];if(g(a))for(;f<e;f++)d=b(a[f],f,c),null!=d&&(k[k.length]=d);else for(f in a)d=b(a[f],f,c),null!=d&&(k[k.length]=d);return ja.apply([],k)},guid:1,proxy:function(a,b){var c,d;"string"===typeof b&&(d=a[b],b=a,a=d);if(!l.isFunction(a))return e;c=fa.call(arguments,2);d=function(){return a.apply(b||this,c.concat(fa.call(arguments)))};
d.guid=a.guid=a.guid||l.guid++;return d},access:function(a,b,c,d,f,k,g){var n=0,p=a.length,m=null==c;if("object"===l.type(c))for(n in f=!0,c)l.access(a,b,n,c[n],!0,k,g);else if(d!==e&&(f=!0,l.isFunction(d)||(g=!0),m&&(g?(b.call(a,d),b=null):(m=b,b=function(a,b,c){return m.call(l(a),c)})),b))for(;n<p;n++)b(a[n],c,g?d:d.call(a[n],n,b(a[n],c)));return f?a:m?b.call(a):p?b(a[0],c):k},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var f,e={};for(f in b)e[f]=a.style[f],a.style[f]=b[f];
c=c.apply(a,d||[]);for(f in b)a.style[f]=e[f];return c}});l.ready.promise=function(a){if(!Q)if(Q=l.Deferred(),"complete"===A.readyState)setTimeout(l.ready);else if(A.addEventListener)A.addEventListener("DOMContentLoaded",ra,!1),h.addEventListener("load",ra,!1);else{A.attachEvent("onreadystatechange",ra);h.attachEvent("onload",ra);var b=!1;try{b=null==h.frameElement&&A.documentElement}catch(c){}b&&b.doScroll&&function dc(){if(!l.isReady){try{b.doScroll("left")}catch(a){return setTimeout(dc,50)}Ia();
l.ready()}}()}return Q.promise(a)};l.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){O["[object "+b+"]"]=b.toLowerCase()});R=l(A);(function(a,b){function c(a,b,d,f){var e,k,g,n,D;(b?b.ownerDocument||b:Ga)!==sa&&L(b);b=b||sa;d=d||[];if(!a||"string"!==typeof a)return d;if(1!==(n=b.nodeType)&&9!==n)return[];if(ta&&!f){if(e=W.exec(a))if(g=e[1])if(9===n)if((k=b.getElementById(g))&&k.parentNode){if(k.id===g)return d.push(k),d}else return d;else{if(b.ownerDocument&&
(k=b.ownerDocument.getElementById(g))&&wb(b,k)&&k.id===g)return d.push(k),d}else{if(e[2])return N.apply(d,b.getElementsByTagName(a)),d;if((g=e[3])&&z.getElementsByClassName&&b.getElementsByClassName)return N.apply(d,b.getElementsByClassName(g)),d}if(z.qsa&&(!M||!M.test(a))){k=e=ga;g=b;D=9===n&&a;if(1===n&&"object"!==b.nodeName.toLowerCase()){n=x(a);(e=b.getAttribute("id"))?k=e.replace($,"\\$&"):b.setAttribute("id",k);k="[id='"+k+"'] ";for(g=n.length;g--;)n[g]=k+t(n[g]);g=S.test(a)&&b.parentNode||
b;D=n.join(",")}if(D)try{return N.apply(d,g.querySelectorAll(D)),d}catch(p){}finally{e||b.removeAttribute("id")}}}var m;a:{a=a.replace(J,"$1");k=x(a);if(!f&&1===k.length){e=k[0]=k[0].slice(0);if(2<e.length&&"ID"===(m=e[0]).type&&z.getById&&9===b.nodeType&&ta&&F.relative[e[1].type]){b=(F.find.ID(m.matches[0].replace(xa,V),b)||[])[0];if(!b){m=d;break a}a=a.slice(e.shift().value.length)}for(n=Ya.needsContext.test(a)?0:e.length;n--;){m=e[n];if(F.relative[g=m.type])break;if(g=F.find[g])if(f=g(m.matches[0].replace(xa,
V),S.test(e[0].type)&&b.parentNode||b)){e.splice(n,1);a=f.length&&t(e);if(!a){N.apply(d,f);m=d;break a}break}}}y(a,k)(f,b,!ta,d,S.test(a));m=d}return m}function d(a){return O.test(a+"")}function f(){function a(c,d){b.push(c+=" ")>F.cacheLength&&delete a[b.shift()];return a[c]=d}var b=[];return a}function e(a){a[ga]=!0;return a}function k(a){var b=sa.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function g(a,b,c){a=a.split("|");var d,f=a.length;
for(c=c?null:b;f--;)(d=F.attrHandle[a[f]])&&d!==b||(F.attrHandle[a[f]]=c)}function n(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:!0===a[b]?b.toLowerCase():null}function p(a,b){return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}function m(a){if("input"===a.nodeName.toLowerCase())return a.defaultValue}function r(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||wa)-(~a.sourceIndex||wa);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}
function s(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function q(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function h(a){return e(function(b){b=+b;return e(function(c,d){for(var f,e=a([],c.length,b),k=e.length;k--;)c[f=e[k]]&&(c[f]=!(d[f]=c[f]))})})}function x(a,b){var d,f,e,k,g,n,D;if(g=A[a+" "])return b?0:g.slice(0);g=a;n=[];for(D=F.preFilter;g;){if(!d||(f=ea.exec(g)))f&&(g=g.slice(f[0].length)||g),n.push(e=
[]);d=!1;if(f=ca.exec(g))d=f.shift(),e.push({value:d,type:f[0].replace(J," ")}),g=g.slice(d.length);for(k in F.filter)!(f=Ya[k].exec(g))||D[k]&&!(f=D[k](f))||(d=f.shift(),e.push({value:d,type:k,matches:f}),g=g.slice(d.length));if(!d)break}return b?g.length:g?c.error(a):A(a,n).slice(0)}function t(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function da(a,b,c){var d=b.dir,f=c&&"parentNode"===d,e=db++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||f)return a(b,c,e)}:
function(b,c,k){var g,n,D,p=B+" "+e;if(k)for(;b=b[d];){if((1===b.nodeType||f)&&a(b,c,k))return!0}else for(;b=b[d];)if(1===b.nodeType||f)if(D=b[ga]||(b[ga]={}),(n=D[d])&&n[0]===p){if(!0===(g=n[1])||g===pa)return!0===g}else if(n=D[d]=[p],n[1]=a(b,c,k)||pa,!0===n[1])return!0}}function u(a){return 1<a.length?function(b,c,d){for(var f=a.length;f--;)if(!a[f](b,c,d))return!1;return!0}:a[0]}function v(a,b,c,d,f){for(var e,k=[],g=0,n=a.length,D=null!=b;g<n;g++)if(e=a[g])if(!c||c(e,d,f))k.push(e),D&&b.push(g);
return k}function C(a,b,d,f,k,g){f&&!f[ga]&&(f=C(f));k&&!k[ga]&&(k=C(k,g));return e(function(e,g,n,D){var p,m,l=[],r=[],s=g.length,h;if(!(h=e)){h=b||"*";for(var q=n.nodeType?[n]:n,lb=[],x=0,t=q.length;x<t;x++)c(h,q[x],lb);h=lb}h=!a||!e&&b?h:v(h,l,a,n,D);q=d?k||(e?a:s||f)?[]:g:h;d&&d(h,q,n,D);if(f)for(p=v(q,r),f(p,[],n,D),n=p.length;n--;)if(m=p[n])q[r[n]]=!(h[r[n]]=m);if(e){if(k||a){if(k){p=[];for(n=q.length;n--;)(m=q[n])&&p.push(h[n]=m);k(null,q=[],p,D)}for(n=q.length;n--;)(m=q[n])&&-1<(p=k?G.call(e,
m):l[n])&&(e[p]=!(g[p]=m))}}else q=v(q===g?q.splice(s,q.length):q),k?k(null,g,q,D):N.apply(g,q)})}function Z(a){var b,c,d,f=a.length,e=F.relative[a[0].type];c=e||F.relative[" "];for(var k=e?1:0,g=da(function(a){return a===b},c,!0),n=da(function(a){return-1<G.call(b,a)},c,!0),D=[function(a,c,d){return!e&&(d||c!==na)||((b=c).nodeType?g(a,c,d):n(a,c,d))}];k<f;k++)if(c=F.relative[a[k].type])D=[da(u(D),c)];else{c=F.filter[a[k].type].apply(null,a[k].matches);if(c[ga]){for(d=++k;d<f&&!F.relative[a[d].type];d++);
return C(1<k&&u(D),1<k&&t(a.slice(0,k-1).concat({value:" "===a[k-2].type?"*":""})).replace(J,"$1"),c,k<d&&Z(a.slice(k,d)),d<f&&Z(a=a.slice(d)),d<f&&t(a))}D.push(c)}return u(D)}function I(a,b){var d=0,f=0<b.length,k=0<a.length,g=function(e,g,n,D,p){var m,l,r=[],q=0,h="0",s=e&&[],lb=null!=p,x=na,t=e||k&&F.find.TAG("*",p&&g.parentNode||g),da=B+=null==x?1:Math.random()||0.1;lb&&(na=g!==sa&&g,pa=d);for(;null!=(p=t[h]);h++){if(k&&p){for(m=0;l=a[m++];)if(l(p,g,n)){D.push(p);break}lb&&(B=da,pa=++d)}f&&((p=
!l&&p)&&q--,e&&s.push(p))}q+=h;if(f&&h!==q){for(m=0;l=b[m++];)l(s,r,g,n);if(e){if(0<q)for(;h--;)s[h]||r[h]||(r[h]=La.call(D));r=v(r)}N.apply(D,r);lb&&!e&&0<r.length&&1<q+b.length&&c.uniqueSort(D)}lb&&(B=da,na=x);return s};return f?e(g):g}function w(){}var aa,z,pa,F,ua,eb,y,na,ia,L,sa,qa,ta,M,Oa,Fa,wb,ga="sizzle"+-new Date,Ga=a.document,B=0,db=0,ba=f(),A=f(),Sa=f(),T=!1,X=function(){return 0},xb=typeof b,wa=-2147483648,E={}.hasOwnProperty,U=[],La=U.pop,zb=U.push,N=U.push,H=U.slice,G=U.indexOf||function(a){for(var b=
0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},K="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),Q="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+K+")|)|)[\\x20\\t\\r\\n\\f]*\\]",R=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+Q.replace(3,8)+")*)|.*)\\)|)",J=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ea=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
ca=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,S=/[\x20\t\r\n\f]*[+~]/,Ta=/=[\x20\t\r\n\f]*([^\]'"]*)[\x20\t\r\n\f]*\]/g,qb=RegExp(R),la=RegExp("^"+K+"$"),Ya={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+Q),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},O=/^[^{]+\{\s*\[native \w/,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/^(?:input|select|textarea|button)$/i,P=/^h\d$/i,$=/'|\\/g,xa=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,
V=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{N.apply(U=H.call(Ga.childNodes),Ga.childNodes),U[Ga.childNodes.length].nodeType}catch(fa){N={apply:U.length?function(a,b){zb.apply(a,H.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}eb=c.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};z=c.support={};L=c.setDocument=function(a){var b=a?a.ownerDocument||
a:Ga;a=b.parentWindow;if(b===sa||9!==b.nodeType||!b.documentElement)return sa;sa=b;qa=b.documentElement;ta=!eb(b);a&&a.frameElement&&a.attachEvent("onbeforeunload",function(){L()});z.attributes=k(function(a){a.innerHTML="<a href='#'></a>";g("type|href|height|width",p,"#"===a.firstChild.getAttribute("href"));g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",n,null==a.getAttribute("disabled"));a.className="i";return!a.getAttribute("className")});
z.input=k(function(a){a.innerHTML="<input>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")});g("value",m,z.attributes&&z.input);z.getElementsByTagName=k(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});z.getElementsByClassName=k(function(a){a.innerHTML="<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});z.getById=k(function(a){qa.appendChild(a).id=
ga;return!b.getElementsByName||!b.getElementsByName(ga).length});z.getById?(F.find.ID=function(a,b){if(typeof b.getElementById!==xb&&ta){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},F.filter.ID=function(a){var b=a.replace(xa,V);return function(a){return a.getAttribute("id")===b}}):(delete F.find.ID,F.filter.ID=function(a){var b=a.replace(xa,V);return function(a){return(a=typeof a.getAttributeNode!==xb&&a.getAttributeNode("id"))&&a.value===b}});F.find.TAG=z.getElementsByTagName?function(a,
b){if(typeof b.getElementsByTagName!==xb)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],f=0,e=b.getElementsByTagName(a);if("*"===a){for(;c=e[f++];)1===c.nodeType&&d.push(c);return d}return e};F.find.CLASS=z.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==xb&&ta)return b.getElementsByClassName(a)};Oa=[];M=[];if(z.qsa=d(b.querySelectorAll))k(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||M.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll(":checked").length||M.push(":checked")}),k(function(a){var c=b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("t","");a.querySelectorAll("[t^='']").length&&M.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll(":enabled").length||M.push(":enabled",":disabled");a.querySelectorAll("*,:x");M.push(",.*:")});(z.matchesSelector=d(Fa=qa.webkitMatchesSelector||qa.mozMatchesSelector||qa.oMatchesSelector||qa.msMatchesSelector))&&k(function(a){z.disconnectedMatch=
Fa.call(a,"div");Fa.call(a,"[s!='']:x");Oa.push("!=",R)});M=M.length&&RegExp(M.join("|"));Oa=Oa.length&&RegExp(Oa.join("|"));wb=d(qa.contains)||qa.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};z.sortDetached=k(function(a){return a.compareDocumentPosition(b.createElement("div"))&
1});X=qa.compareDocumentPosition?function(a,c){if(a===c)return T=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?d&1||!z.sortDetached&&c.compareDocumentPosition(a)===d?a===b||wb(Ga,a)?-1:c===b||wb(Ga,c)?1:ia?G.call(ia,a)-G.call(ia,c):0:d&4?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,f=0;d=a.parentNode;var e=c.parentNode,k=[a],g=[c];if(a===c)return T=!0,0;if(!d||!e)return a===b?-1:c===b?1:d?-1:e?1:ia?G.call(ia,a)-G.call(ia,c):0;if(d===
e)return r(a,c);for(d=a;d=d.parentNode;)k.unshift(d);for(d=c;d=d.parentNode;)g.unshift(d);for(;k[f]===g[f];)f++;return f?r(k[f],g[f]):k[f]===Ga?-1:g[f]===Ga?1:0};return b};c.matches=function(a,b){return c(a,null,null,b)};c.matchesSelector=function(a,b){(a.ownerDocument||a)!==sa&&L(a);b=b.replace(Ta,"='$1']");if(z.matchesSelector&&ta&&!(Oa&&Oa.test(b)||M&&M.test(b)))try{var d=Fa.call(a,b);if(d||z.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(f){}return 0<c(b,sa,null,[a]).length};
c.contains=function(a,b){(a.ownerDocument||a)!==sa&&L(a);return wb(a,b)};c.attr=function(a,c){(a.ownerDocument||a)!==sa&&L(a);var d=F.attrHandle[c.toLowerCase()],d=d&&E.call(F.attrHandle,c.toLowerCase())?d(a,c,!ta):b;return d===b?z.attributes||!ta?a.getAttribute(c):(d=a.getAttributeNode(c))&&d.specified?d.value:null:d};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};c.uniqueSort=function(a){var b,c=[],d=0,f=0;T=!z.detectDuplicates;ia=!z.sortStable&&a.slice(0);a.sort(X);
if(T){for(;b=a[f++];)b===a[f]&&(d=c.push(f));for(;d--;)a.splice(c[d],1)}return a};ua=c.getText=function(a){var b,c="",d=0;b=a.nodeType;if(!b)for(;b=a[d];d++)c+=ua(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=ua(a)}else if(3===b||4===b)return a.nodeValue;return c};F=c.selectors={cacheLength:50,createPseudo:e,match:Ya,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",
first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(xa,V);a[3]=(a[4]||a[5]||"").replace(xa,V);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]);return a},PSEUDO:function(a){var c,d=!a[5]&&a[2];if(Ya.CHILD.test(a[0]))return null;a[3]&&a[4]!==b?a[2]=a[4]:d&&qb.test(d)&&
(c=x(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(xa,V).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=ba[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&ba(a,function(a){return b.test("string"===typeof a.className&&a.className||typeof a.getAttribute!==xb&&a.getAttribute("class")||
"")})},ATTR:function(a,b,d){return function(f){f=c.attr(f,a);if(null==f)return"!="===b;if(!b)return!0;f+="";return"="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&-1<f.indexOf(d):"$="===b?d&&f.slice(-d.length)===d:"~="===b?-1<(" "+f+" ").indexOf(d):"|="===b?f===d||f.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d,f){var e="nth"!==a.slice(0,3),k="last"!==a.slice(-4),g="of-type"===b;return 1===d&&0===f?function(a){return!!a.parentNode}:function(b,c,n){var D,p,m,l,r;c=e!==
k?"nextSibling":"previousSibling";var q=b.parentNode,h=g&&b.nodeName.toLowerCase();n=!n&&!g;if(q){if(e){for(;c;){for(p=b;p=p[c];)if(g?p.nodeName.toLowerCase()===h:1===p.nodeType)return!1;r=c="only"===a&&!r&&"nextSibling"}return!0}r=[k?q.firstChild:q.lastChild];if(k&&n)for(n=q[ga]||(q[ga]={}),D=n[a]||[],l=D[0]===B&&D[1],m=D[0]===B&&D[2],p=l&&q.childNodes[l];p=++l&&p&&p[c]||(m=l=0)||r.pop();){if(1===p.nodeType&&++m&&p===b){n[a]=[B,l,m];break}}else if(n&&(D=(b[ga]||(b[ga]={}))[a])&&D[0]===B)m=D[1];else for(;(p=
++l&&p&&p[c]||(m=l=0)||r.pop())&&((g?p.nodeName.toLowerCase()!==h:1!==p.nodeType)||!++m||(n&&((p[ga]||(p[ga]={}))[a]=[B,m]),p!==b)););m-=f;return m===d||0===m%d&&0<=m/d}}},PSEUDO:function(a,b){var d,f=F.pseudos[a]||F.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[ga]?f(b):1<f.length?(d=[a,a,"",b],F.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),k=e.length;k--;)d=G.call(a,e[k]),a[d]=!(c[d]=e[k])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=
[],c=[],d=y(a.replace(J,"$1"));return d[ga]?e(function(a,b,c,f){f=d(a,null,f,[]);for(var e=a.length;e--;)if(c=f[e])a[e]=!(b[e]=c)}):function(a,f,e){b[0]=a;d(b,null,e,c);return!c.pop()}}),has:e(function(a){return function(b){return 0<c(a,b).length}}),contains:e(function(a){return function(b){return-1<(b.textContent||b.innerText||ua(b)).indexOf(a)}}),lang:e(function(a){la.test(a||"")||c.error("unsupported lang: "+a);a=a.replace(xa,V).toLowerCase();return function(b){var c;do if(c=ta?b.lang:b.getAttribute("xml:lang")||
b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===qa},focus:function(a){return a===sa.activeElement&&(!sa.hasFocus||sa.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!F.pseudos.empty(a)},header:function(a){return P.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;
return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:h(function(){return[0]}),last:h(function(a,b){return[b-1]}),eq:h(function(a,b,c){return[0>c?c+b:c]}),even:h(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:h(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:h(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:h(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};for(aa in{radio:!0,
checkbox:!0,file:!0,password:!0,image:!0})F.pseudos[aa]=s(aa);for(aa in{submit:!0,reset:!0})F.pseudos[aa]=q(aa);y=c.compile=function(a,b){var c,d=[],f=[],e=Sa[a+" "];if(!e){b||(b=x(a));for(c=b.length;c--;)e=Z(b[c]),e[ga]?d.push(e):f.push(e);e=Sa(a,I(f,d))}return e};F.pseudos.nth=F.pseudos.eq;w.prototype=F.filters=F.pseudos;F.setFilters=new w;z.sortStable=ga.split("").sort(X).join("")===ga;L();[0,0].sort(X);z.detectDuplicates=T;l.find=c;l.expr=c.selectors;l.expr[":"]=l.expr.pseudos;l.unique=c.uniqueSort;
l.text=c.getText;l.isXMLDoc=c.isXML;l.contains=c.contains})(h);var ab={};l.Callbacks=function(a){a="string"===typeof a?ab[a]||b(a):l.extend({},a);var c,d,f,k,g,n,p=[],m=!a.once&&[],r=function(b){d=a.memory&&b;f=!0;g=n||0;n=0;k=p.length;for(c=!0;p&&g<k;g++)if(!1===p[g].apply(b[0],b[1])&&a.stopOnFalse){d=!1;break}c=!1;p&&(m?m.length&&r(m.shift()):d?p=[]:q.disable())},q={add:function(){if(p){var b=p.length;(function ec(b){l.each(b,function(b,c){var d=l.type(c);"function"===d?a.unique&&q.has(c)||p.push(c):
c&&c.length&&"string"!==d&&ec(c)})})(arguments);c?k=p.length:d&&(n=b,r(d))}return this},remove:function(){p&&l.each(arguments,function(a,b){for(var d;-1<(d=l.inArray(b,p,d));)p.splice(d,1),c&&(d<=k&&k--,d<=g&&g--)});return this},has:function(a){return a?-1<l.inArray(a,p):!(!p||!p.length)},empty:function(){p=[];k=0;return this},disable:function(){p=m=d=e;return this},disabled:function(){return!p},lock:function(){m=e;d||q.disable();return this},locked:function(){return!m},fireWith:function(a,b){!p||
f&&!m||(b=b||[],b=[a,b.slice?b.slice():b],c?m.push(b):r(b));return this},fire:function(){q.fireWith(this,arguments);return this},fired:function(){return!!f}};return q};l.extend({Deferred:function(a){var b=[["resolve","done",l.Callbacks("once memory"),"resolved"],["reject","fail",l.Callbacks("once memory"),"rejected"],["notify","progress",l.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){f.done(arguments).fail(arguments);return this},then:function(){var a=arguments;
return l.Deferred(function(c){l.each(b,function(b,e){var k=e[0],g=l.isFunction(a[b])&&a[b];f[e[1]](function(){var a=g&&g.apply(this,arguments);if(a&&l.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[k+"With"](this===d?c.promise():this,g?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?l.extend(a,d):d}},f={};d.pipe=d.then;l.each(b,function(a,e){var k=e[2],g=e[3];d[e[1]]=k.add;g&&k.add(function(){c=g},b[a^1][2].disable,b[2][2].lock);
f[e[0]]=function(){f[e[0]+"With"](this===f?d:this,arguments);return this};f[e[0]+"With"]=k.fireWith});d.promise(f);a&&a.call(f,f);return f},when:function(a){var b=0,c=fa.call(arguments),d=c.length,f=1!==d||a&&l.isFunction(a.promise)?d:0,e=1===f?a:l.Deferred(),k=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?fa.call(arguments):d;c===g?e.notifyWith(b,c):--f||e.resolveWith(b,c)}},g,n,p;if(1<d)for(g=Array(d),n=Array(d),p=Array(d);b<d;b++)c[b]&&l.isFunction(c[b].promise)?c[b].promise().done(k(b,
p,c)).fail(e.reject).progress(k(b,n,g)):--f;f||e.resolveWith(p,c);return e.promise()}});l.support=function(a){var b,c,d,f,e,k,g=A.createElement("div");g.setAttribute("className","t");g.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";b=g.getElementsByTagName("*")||[];c=g.getElementsByTagName("a")[0];if(!c||!c.style||!b.length)return a;d=A.createElement("select");f=d.appendChild(A.createElement("option"));b=g.getElementsByTagName("input")[0];c.style.cssText="top:1px;float:left;opacity:.5";
a.getSetAttribute="t"!==g.className;a.leadingWhitespace=3===g.firstChild.nodeType;a.tbody=!g.getElementsByTagName("tbody").length;a.htmlSerialize=!!g.getElementsByTagName("link").length;a.style=/top/.test(c.getAttribute("style"));a.hrefNormalized="/a"===c.getAttribute("href");a.opacity=/^0.5/.test(c.style.opacity);a.cssFloat=!!c.style.cssFloat;a.checkOn=!!b.value;a.optSelected=f.selected;a.enctype=!!A.createElement("form").enctype;a.html5Clone="<:nav></:nav>"!==A.createElement("nav").cloneNode(!0).outerHTML;
a.inlineBlockNeedsLayout=!1;a.shrinkWrapBlocks=!1;a.pixelPosition=!1;a.deleteExpando=!0;a.noCloneEvent=!0;a.reliableMarginRight=!0;a.boxSizingReliable=!0;b.checked=!0;a.noCloneChecked=b.cloneNode(!0).checked;d.disabled=!0;a.optDisabled=!f.disabled;try{delete g.test}catch(n){a.deleteExpando=!1}b=A.createElement("input");b.setAttribute("value","");a.input=""===b.getAttribute("value");b.value="t";b.setAttribute("type","radio");a.radioValue="t"===b.value;b.setAttribute("checked","t");b.setAttribute("name",
"t");c=A.createDocumentFragment();c.appendChild(b);a.appendChecked=b.checked;a.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked;g.attachEvent&&(g.attachEvent("onclick",function(){a.noCloneEvent=!1}),g.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})g.setAttribute(c="on"+k,"t"),a[k+"Bubbles"]=c in h||!1===g.attributes[c].expando;g.style.backgroundClip="content-box";g.cloneNode(!0).style.backgroundClip="";a.clearCloneStyle="content-box"===g.style.backgroundClip;for(k in l(a))break;
a.ownLast="0"!==k;l(function(){var b,c,d=A.getElementsByTagName("body")[0];d&&(b=A.createElement("div"),b.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",d.appendChild(b).appendChild(g),g.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=g.getElementsByTagName("td"),c[0].style.cssText="padding:0;margin:0;border:0;display:none",e=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",a.reliableHiddenOffsets=e&&0===c[0].offsetHeight,
g.innerHTML="",g.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",l.swap(d,null!=d.style.zoom?{zoom:1}:{},function(){a.boxSizing=4===g.offsetWidth}),h.getComputedStyle&&(a.pixelPosition="1%"!==(h.getComputedStyle(g,null)||{}).top,a.boxSizingReliable="4px"===(h.getComputedStyle(g,null)||{width:"4px"}).width,c=g.appendChild(A.createElement("div")),c.style.cssText=g.style.cssText=
"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",c.style.marginRight=c.style.width="0",g.style.width="1px",a.reliableMarginRight=!parseFloat((h.getComputedStyle(c,null)||{}).marginRight)),typeof g.style.zoom!==ca&&(g.innerHTML="",g.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",a.inlineBlockNeedsLayout=
3===g.offsetWidth,g.style.display="block",g.innerHTML="<div></div>",g.firstChild.style.width="5px",a.shrinkWrapBlocks=3!==g.offsetWidth,a.inlineBlockNeedsLayout&&(d.style.zoom=1)),d.removeChild(b),b=g=c=c=null)});b=d=c=f=c=b=null;return a}({});var Pa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Aa=/([A-Z])/g;l.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?l.cache[a[l.expando]]:a[l.expando];return!!a&&!f(a)},data:function(b,c,d){return a(b,
c,d)},removeData:function(a,b){return c(a,b)},_data:function(b,c,d){return a(b,c,d,!0)},_removeData:function(a,b){return c(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&l.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}});l.fn.extend({data:function(a,b){var c,f,k=null,g=0,n=this[0];if(a===e){if(this.length&&(k=l.data(n),1===n.nodeType&&!l._data(n,"parsedAttrs"))){for(c=n.attributes;g<c.length;g++)f=c[g].name,
0===f.indexOf("data-")&&(f=l.camelCase(f.slice(5)),d(n,f,k[f]));l._data(n,"parsedAttrs",!0)}return k}return"object"===typeof a?this.each(function(){l.data(this,a)}):1<arguments.length?this.each(function(){l.data(this,a,b)}):n?d(n,a,l.data(n,a)):null},removeData:function(a){return this.each(function(){l.removeData(this,a)})}});l.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=l._data(a,b),c&&(!d||l.isArray(c)?d=l._data(a,b,l.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,
b){b=b||"fx";var c=l.queue(a,b),d=c.length,f=c.shift(),e=l._queueHooks(a,b),k=function(){l.dequeue(a,b)};"inprogress"===f&&(f=c.shift(),d--);f&&("fx"===b&&c.unshift("inprogress"),delete e.stop,f.call(a,k,e));!d&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return l._data(a,c)||l._data(a,c,{empty:l.Callbacks("once memory").add(function(){l._removeData(a,b+"queue");l._removeData(a,c)})})}});l.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<
c?l.queue(this[0],a):b===e?this:this.each(function(){var c=l.queue(this,a,b);l._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&l.dequeue(this,a)})},dequeue:function(a){return this.each(function(){l.dequeue(this,a)})},delay:function(a,b){a=l.fx?l.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,f=l.Deferred(),k=this,g=this.length,n=function(){--d||
f.resolveWith(k,[k])};"string"!==typeof a&&(b=a,a=e);for(a=a||"fx";g--;)(c=l._data(k[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(n));n();return f.promise(b)}});var ha,Ca,$=/[\t\r\n\f]/g,gb=/\r/g,Ga=/^(?:input|select|textarea|button|object)$/i,qb=/^(?:a|area)$/i,xa=/^(?:checked|selected)$/i,Za=l.support.getSetAttribute,rb=l.support.input;l.fn.extend({attr:function(a,b){return l.access(this,l.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){l.removeAttr(this,a)})},
prop:function(a,b){return l.access(this,l.prop,a,b,1<arguments.length)},removeProp:function(a){a=l.propFix[a]||a;return this.each(function(){try{this[a]=e,delete this[a]}catch(b){}})},addClass:function(a){var b,c,d,f,e,k=0,g=this.length;b="string"===typeof a&&a;if(l.isFunction(a))return this.each(function(b){l(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(za)||[];k<g;k++)if(c=this[k],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace($," "):" ")){for(e=0;f=b[e++];)0>
d.indexOf(" "+f+" ")&&(d+=f+" ");c.className=l.trim(d)}return this},removeClass:function(a){var b,c,d,f,e,k=0,g=this.length;b=0===arguments.length||"string"===typeof a&&a;if(l.isFunction(a))return this.each(function(b){l(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(za)||[];k<g;k++)if(c=this[k],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace($," "):"")){for(e=0;f=b[e++];)for(;0<=d.indexOf(" "+f+" ");)d=d.replace(" "+f+" "," ");c.className=a?l.trim(d):""}return this},
toggleClass:function(a,b){var c=typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):l.isFunction(a)?this.each(function(c){l(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,f=l(this),e=a.match(za)||[];b=e[d++];)f.hasClass(b)?f.removeClass(b):f.addClass(b);else if(c===ca||"boolean"===c)this.className&&l._data(this,"__className__",this.className),this.className=this.className||!1===a?"":l._data(this,"__className__")||
""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace($," ").indexOf(a))return!0;return!1},val:function(a){var b,c,d,f=this[0];if(arguments.length)return d=l.isFunction(a),this.each(function(b){1===this.nodeType&&(b=d?a.call(this,b,l(this).val()):a,null==b?b="":"number"===typeof b?b+="":l.isArray(b)&&(b=l.map(b,function(a){return null==a?"":a+""})),c=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],c&&
"set"in c&&c.set(this,b,"value")!==e||(this.value=b))});if(f){if((c=l.valHooks[f.type]||l.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(b=c.get(f,"value"))!==e)return b;b=f.value;return"string"===typeof b?b.replace(gb,""):null==b?"":b}}});l.extend({valHooks:{option:{get:function(a){var b=l.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,f=(a="select-one"===a.type||0>d)?null:[],e=a?d+1:c.length,k=0>d?e:a?d:0;k<e;k++)if(b=c[k],!(!b.selected&&
k!==d||(l.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&l.nodeName(b.parentNode,"optgroup"))){b=l(b).val();if(a)return b;f.push(b)}return f},set:function(a,b){for(var c,d,f=a.options,e=l.makeArray(b),k=f.length;k--;)if(d=f[k],d.selected=0<=l.inArray(l(d).val(),e))c=!0;c||(a.selectedIndex=-1);return e}}},attr:function(a,b,c){var d,f,k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(typeof a.getAttribute===ca)return l.prop(a,b,c);1===k&&l.isXMLDoc(a)||(b=b.toLowerCase(),
d=l.attrHooks[b]||(l.expr.match.bool.test(b)?Ca:ha));if(c!==e)if(null===c)l.removeAttr(a,b);else{if(d&&"set"in d&&(f=d.set(a,c,b))!==e)return f;a.setAttribute(b,c+"");return c}else{if(d&&"get"in d&&null!==(f=d.get(a,b)))return f;f=l.find.attr(a,b);return null==f?e:f}}},removeAttr:function(a,b){var c,d,f=0,e=b&&b.match(za);if(e&&1===a.nodeType)for(;c=e[f++];)d=l.propFix[c]||c,l.expr.match.bool.test(c)?rb&&Za||!xa.test(c)?a[d]=!1:a[l.camelCase("default-"+c)]=a[d]=!1:l.attr(a,c,""),a.removeAttribute(Za?
c:d)},attrHooks:{type:{set:function(a,b){if(!l.support.radioValue&&"radio"===b&&l.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,f,k;k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(k=1!==k||!l.isXMLDoc(a))b=l.propFix[b]||b,f=l.propHooks[b];return c!==e?f&&"set"in f&&(d=f.set(a,c,b))!==e?d:a[b]=c:f&&"get"in f&&null!==(d=f.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=l.find.attr(a,
"tabindex");return b?parseInt(b,10):Ga.test(a.nodeName)||qb.test(a.nodeName)&&a.href?0:-1}}}});Ca={set:function(a,b,c){!1===b?l.removeAttr(a,c):rb&&Za||!xa.test(c)?a.setAttribute(!Za&&l.propFix[c]||c,c):a[l.camelCase("default-"+c)]=a[c]=!0;return c}};l.each(l.expr.match.bool.source.match(/\w+/g),function(a,b){var c=l.expr.attrHandle[b]||l.find.attr;l.expr.attrHandle[b]=rb&&Za||!xa.test(b)?function(a,b,d){var f=l.expr.attrHandle[b];a=d?e:(l.expr.attrHandle[b]=e)!=c(a,b,d)?b.toLowerCase():null;l.expr.attrHandle[b]=
f;return a}:function(a,b,c){return c?e:a[l.camelCase("default-"+b)]?b.toLowerCase():null}});rb&&Za||(l.attrHooks.value={set:function(a,b,c){if(l.nodeName(a,"input"))a.defaultValue=b;else return ha&&ha.set(a,b,c)}});Za||(ha={set:function(a,b,c){var d=a.getAttributeNode(c);d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c));d.value=b+="";return"value"===c||b===a.getAttribute(c)?b:e}},l.expr.attrHandle.id=l.expr.attrHandle.name=l.expr.attrHandle.coords=function(a,b,c){var d;return c?e:(d=a.getAttributeNode(b))&&
""!==d.value?d.value:null},l.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:e},set:ha.set},l.attrHooks.contenteditable={set:function(a,b,c){ha.set(a,""===b?!1:b,c)}},l.each(["width","height"],function(a,b){l.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}}));l.support.hrefNormalized||l.each(["href","src"],function(a,b){l.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}});l.support.style||(l.attrHooks.style={get:function(a){return a.style.cssText||
e},set:function(a,b){return a.style.cssText=b+""}});l.support.optSelected||(l.propHooks.selected={get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}});l.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){l.propFix[this.toLowerCase()]=this});l.support.enctype||(l.propFix.enctype="encoding");l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(a,b){if(l.isArray(b))return a.checked=
0<=l.inArray(l(a).val(),b)}};l.support.checkOn||(l.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Ab=/^(?:input|select|textarea)$/i,Mb=/^key/,Sb=/^(?:mouse|contextmenu)|click/,Bb=/^(?:focusinfocus|focusoutblur)$/,Nb=/^([^.]*)(?:\.(.+)|)$/;l.event={global:{},add:function(a,b,c,d,f){var k,g,n,p,m,r,q,h,s;if(n=l._data(a)){c.handler&&(p=c,c=p.handler,f=p.selector);c.guid||(c.guid=l.guid++);(g=n.events)||(g=n.events={});(m=n.handle)||(m=n.handle=function(a){return typeof l===
ca||a&&l.event.triggered===a.type?e:l.event.dispatch.apply(m.elem,arguments)},m.elem=a);b=(b||"").match(za)||[""];for(n=b.length;n--;)k=Nb.exec(b[n])||[],h=r=k[1],s=(k[2]||"").split(".").sort(),h&&(k=l.event.special[h]||{},h=(f?k.delegateType:k.bindType)||h,k=l.event.special[h]||{},r=l.extend({type:h,origType:r,data:d,handler:c,guid:c.guid,selector:f,needsContext:f&&l.expr.match.needsContext.test(f),namespace:s.join(".")},p),(q=g[h])||(q=g[h]=[],q.delegateCount=0,k.setup&&!1!==k.setup.call(a,d,s,
m)||(a.addEventListener?a.addEventListener(h,m,!1):a.attachEvent&&a.attachEvent("on"+h,m))),k.add&&(k.add.call(a,r),r.handler.guid||(r.handler.guid=c.guid)),f?q.splice(q.delegateCount++,0,r):q.push(r),l.event.global[h]=!0);a=null}},remove:function(a,b,c,d,f){var e,k,g,n,p,m,r,q,h,s,x,t=l.hasData(a)&&l._data(a);if(t&&(m=t.events)){b=(b||"").match(za)||[""];for(p=b.length;p--;)if(g=Nb.exec(b[p])||[],h=x=g[1],s=(g[2]||"").split(".").sort(),h){r=l.event.special[h]||{};h=(d?r.delegateType:r.bindType)||
h;q=m[h]||[];g=g[2]&&RegExp("(^|\\.)"+s.join("\\.(?:.*\\.|)")+"(\\.|$)");for(n=e=q.length;e--;)k=q[e],!f&&x!==k.origType||c&&c.guid!==k.guid||g&&!g.test(k.namespace)||d&&!(d===k.selector||"**"===d&&k.selector)||(q.splice(e,1),k.selector&&q.delegateCount--,r.remove&&r.remove.call(a,k));n&&!q.length&&(r.teardown&&!1!==r.teardown.call(a,s,t.handle)||l.removeEvent(a,h,t.handle),delete m[h])}else for(h in m)l.event.remove(a,h+b[p],c,d,!0);l.isEmptyObject(m)&&(delete t.handle,l._removeData(a,"events"))}},
trigger:function(a,b,c,d){var f,k,g,n,p,m,r=[c||A],q=La.call(a,"type")?a.type:a;p=La.call(a,"namespace")?a.namespace.split("."):[];g=f=c=c||A;if(3!==c.nodeType&&8!==c.nodeType&&!Bb.test(q+l.event.triggered)&&(0<=q.indexOf(".")&&(p=q.split("."),q=p.shift(),p.sort()),k=0>q.indexOf(":")&&"on"+q,a=a[l.expando]?a:new l.Event(q,"object"===typeof a&&a),a.isTrigger=d?2:3,a.namespace=p.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=e,a.target||(a.target=
c),b=null==b?[a]:l.makeArray(b,[a]),p=l.event.special[q]||{},d||!p.trigger||!1!==p.trigger.apply(c,b))){if(!d&&!p.noBubble&&!l.isWindow(c)){n=p.delegateType||q;Bb.test(n+q)||(g=g.parentNode);for(;g;g=g.parentNode)r.push(g),f=g;f===(c.ownerDocument||A)&&r.push(f.defaultView||f.parentWindow||h)}for(m=0;(g=r[m++])&&!a.isPropagationStopped();)a.type=1<m?n:p.bindType||q,(f=(l._data(g,"events")||{})[a.type]&&l._data(g,"handle"))&&f.apply(g,b),(f=k&&g[k])&&l.acceptData(g)&&f.apply&&!1===f.apply(g,b)&&a.preventDefault();
a.type=q;if(!(d||a.isDefaultPrevented()||p._default&&!1!==p._default.apply(r.pop(),b))&&l.acceptData(c)&&k&&c[q]&&!l.isWindow(c)){(f=c[k])&&(c[k]=null);l.event.triggered=q;try{c[q]()}catch(s){}l.event.triggered=e;f&&(c[k]=f)}return a.result}},dispatch:function(a){a=l.event.fix(a);var b,c,d,f,k=[],g=fa.call(arguments);b=(l._data(this,"events")||{})[a.type]||[];var n=l.event.special[a.type]||{};g[0]=a;a.delegateTarget=this;if(!n.preDispatch||!1!==n.preDispatch.call(this,a)){k=l.event.handlers.call(this,
a,b);for(b=0;(d=k[b++])&&!a.isPropagationStopped();)for(a.currentTarget=d.elem,f=0;(c=d.handlers[f++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(c.namespace))a.handleObj=c,a.data=c.data,c=((l.event.special[c.origType]||{}).handle||c.handler).apply(d.elem,g),c!==e&&!1===(a.result=c)&&(a.preventDefault(),a.stopPropagation());n.postDispatch&&n.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,d,f,k,g=[],n=b.delegateCount,p=a.target;if(n&&p.nodeType&&
(!a.button||"click"!==a.type))for(;p!=this;p=p.parentNode||this)if(1===p.nodeType&&(!0!==p.disabled||"click"!==a.type)){f=[];for(k=0;k<n;k++)d=b[k],c=d.selector+" ",f[c]===e&&(f[c]=d.needsContext?0<=l(c,this).index(p):l.find(c,this,null,[p]).length),f[c]&&f.push(d);f.length&&g.push({elem:p,handlers:f})}n<b.length&&g.push({elem:this,handlers:b.slice(n)});return g},fix:function(a){if(a[l.expando])return a;var b,c,d;b=a.type;var f=a,e=this.fixHooks[b];e||(this.fixHooks[b]=e=Sb.test(b)?this.mouseHooks:
Mb.test(b)?this.keyHooks:{});d=e.props?this.props.concat(e.props):this.props;a=new l.Event(f);for(b=d.length;b--;)c=d[b],a[c]=f[c];a.target||(a.target=f.srcElement||A);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return e.filter?e.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==
a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,f=b.button,k=b.fromElement;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||A,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||
c&&c.clientTop||0));!a.relatedTarget&&k&&(a.relatedTarget=k===a.target?b.toElement:k);a.which||f===e||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===p()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(l.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return l.nodeName(a.target,
"a")}},beforeunload:{postDispatch:function(a){a.result!==e&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=l.extend(new l.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?l.event.trigger(a,null,b):l.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};l.removeEvent=A.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&(typeof a[b]===ca&&(a[b]=null),a.detachEvent(b,c))};l.Event=
function(a,b){if(!(this instanceof l.Event))return new l.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?k:n):this.type=a;b&&l.extend(this,b);this.timeStamp=a&&a.timeStamp||l.now();this[l.expando]=!0};l.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=k;a&&(a.preventDefault?
a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=k;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=k;this.stopPropagation()}};l.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){l.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,f=a.handleObj;if(!d||d!==this&&!l.contains(this,d))a.type=f.origType,
c=f.handler.apply(this,arguments),a.type=b;return c}}});l.support.submitBubbles||(l.event.special.submit={setup:function(){if(l.nodeName(this,"form"))return!1;l.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=l.nodeName(a,"input")||l.nodeName(a,"button")?a.form:e)&&!l._data(a,"submitBubbles")&&(l.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),l._data(a,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&
!a.isTrigger&&l.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(l.nodeName(this,"form"))return!1;l.event.remove(this,"._submit")}});l.support.changeBubbles||(l.event.special.change={setup:function(){if(Ab.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)l.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),l.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=
!1);l.event.simulate("change",this,a,!0)});return!1}l.event.add(this,"beforeactivate._change",function(a){a=a.target;Ab.test(a.nodeName)&&!l._data(a,"changeBubbles")&&(l.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||l.event.simulate("change",this.parentNode,a,!0)}),l._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},
teardown:function(){l.event.remove(this,"._change");return!Ab.test(this.nodeName)}});l.support.focusinBubbles||l.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){l.event.simulate(b,a.target,l.event.fix(a),!0)};l.event.special[b]={setup:function(){0===c++&&A.addEventListener(a,d,!0)},teardown:function(){0===--c&&A.removeEventListener(a,d,!0)}}});l.fn.extend({on:function(a,b,c,d,f){var k,g;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=e);for(k in a)this.on(k,b,c,a[k],
f);return this}null==c&&null==d?(d=b,c=b=e):null==d&&("string"===typeof b?(d=c,c=e):(d=c,c=b,b=e));if(!1===d)d=n;else if(!d)return this;1===f&&(g=d,d=function(a){l().off(a);return g.apply(this,arguments)},d.guid=g.guid||(g.guid=l.guid++));return this.each(function(){l.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,l(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,
d.selector,d.handler),this;if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=e;!1===c&&(c=n);return this.each(function(){l.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){l.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return l.event.trigger(a,b,c,!0)}});var Rb=/^.[^:#\[\.,]*$/,Tb=/^(?:parents|prev(?:Until|All))/,Cb=l.expr.match.needsContext,Ub={children:!0,contents:!0,next:!0,prev:!0};
l.fn.extend({find:function(a){var b,c=[],d=this,f=d.length;if("string"!==typeof a)return this.pushStack(l(a).filter(function(){for(b=0;b<f;b++)if(l.contains(d[b],this))return!0}));for(b=0;b<f;b++)l.find(a,d[b],c);c=this.pushStack(1<f?l.unique(c):c);c.selector=this.selector?this.selector+" "+a:a;return c},has:function(a){var b,c=l(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(l.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(q(this,a||[],!0))},filter:function(a){return this.pushStack(q(this,
a||[],!1))},is:function(a){return!!q(this,"string"===typeof a&&Cb.test(a)?l(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,f=this.length,e=[],k=Cb.test(a)||"string"!==typeof a?l(a,b||this.context):0;d<f;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(k?-1<k.index(c):1===c.nodeType&&l.find.matchesSelector(c,a))){e.push(c);break}return this.pushStack(1<e.length?l.unique(e):e)},index:function(a){return a?"string"===typeof a?l.inArray(this[0],l(a)):l.inArray(a.jquery?a[0]:a,this):
this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"===typeof a?l(a,b):l.makeArray(a&&a.nodeType?[a]:a),c=l.merge(this.get(),c);return this.pushStack(l.unique(c))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});l.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return l.dir(a,"parentNode")},parentsUntil:function(a,b,c){return l.dir(a,"parentNode",c)},next:function(a){return s(a,
"nextSibling")},prev:function(a){return s(a,"previousSibling")},nextAll:function(a){return l.dir(a,"nextSibling")},prevAll:function(a){return l.dir(a,"previousSibling")},nextUntil:function(a,b,c){return l.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return l.dir(a,"previousSibling",c)},siblings:function(a){return l.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return l.sibling(a.firstChild)},contents:function(a){return l.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:
l.merge([],a.childNodes)}},function(a,b){l.fn[a]=function(c,d){var f=l.map(this,b,c);"Until"!==a.slice(-5)&&(d=c);d&&"string"===typeof d&&(f=l.filter(d,f));1<this.length&&(Ub[a]||(f=l.unique(f)),Tb.test(a)&&(f=f.reverse()));return this.pushStack(f)}});l.extend({filter:function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===d.nodeType?l.find.matchesSelector(d,a)?[d]:[]:l.find.matches(a,l.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,b,c){var d=[];for(a=a[b];a&&9!==a.nodeType&&
(c===e||1!==a.nodeType||!l(a).is(c));)1===a.nodeType&&d.push(a),a=a[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Kb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ob=/ jQuery\d+="(?:null|\d+)"/g,Pb=RegExp("<(?:"+Kb+")[\\s/>]","i"),Db=/^\s+/,ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,hb=
/<([\w:]+)/,sb=/<tbody/i,Qb=/<|&#?\w+;/,Ma=/<(?:script|style|link)/i,Lb=/^(?:checkbox|radio)$/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,Eb=/^$|\/(?:java|ecma)script/i,Qa=/^true\/(.*)/,$b=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Y={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ub=t(A).appendChild(A.createElement("div"));Y.optgroup=Y.option;Y.tbody=Y.tfoot=Y.colgroup=Y.caption=Y.thead;Y.th=Y.td;l.fn.extend({text:function(a){return l.access(this,function(a){return a===e?l.text(this):this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&
11!==this.nodeType&&9!==this.nodeType||r(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=r(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,
b){for(var c,d=a?l.filter(a,this):this,f=0;null!=(c=d[f]);f++)b||1!==c.nodeType||l.cleanData(w(c)),c.parentNode&&(b&&l.contains(c.ownerDocument,c)&&x(w(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&l.cleanData(w(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&l.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return l.clone(this,
a,b)})},html:function(a){return l.access(this,function(a){var b=this[0]||{},c=0,d=this.length;if(a===e)return 1===b.nodeType?b.innerHTML.replace(Ob,""):e;if("string"===typeof a&&!(Ma.test(a)||!l.support.htmlSerialize&&Pb.test(a)||!l.support.leadingWhitespace&&Db.test(a)||Y[(hb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ya,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(l.cleanData(w(b,!1)),b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=
l.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;this.domManip(arguments,function(c){var d=a[b++],f=a[b++];f&&(d&&d.parentNode!==f&&(d=this.nextSibling),l(this).remove(),f.insertBefore(c,d))},!0);return b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=ja.apply([],a);var d,f,e,k,g=0,n=this.length,p=this,r=n-1,q=a[0],h=l.isFunction(q);if(h||!(1>=n||"string"!==typeof q||l.support.checkClone)&&tb.test(q))return this.each(function(d){var f=p.eq(d);
h&&(a[0]=q.call(this,d,f.html()));f.domManip(a,b,c)});if(n&&(k=l.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=k.firstChild,1===k.childNodes.length&&(k=d),d)){e=l.map(w(k,"script"),u);for(f=e.length;g<n;g++)d=k,g!==r&&(d=l.clone(d,!0,!0),f&&l.merge(e,w(d,"script"))),b.call(this[g],d,g);if(f)for(k=e[e.length-1].ownerDocument,l.map(e,m),g=0;g<f;g++)d=e[g],Eb.test(d.type||"")&&!l._data(d,"globalEval")&&l.contains(k,d)&&(d.src?l._evalUrl(d.src):l.globalEval((d.text||d.textContent||d.innerHTML||
"").replace($b,"")));k=d=null}return this}});l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){l.fn[a]=function(a){for(var c=0,d=[],f=l(a),e=f.length-1;c<=e;c++)a=c===e?this:this.clone(!0),l(f[c])[b](a),ka.apply(d,a.get());return this.pushStack(d)}});l.extend({clone:function(a,b,c){var d,f,e,k,g,n=l.contains(a.ownerDocument,a);l.support.html5Clone||l.isXMLDoc(a)||!Pb.test("<"+a.nodeName+">")?e=a.cloneNode(!0):(ub.innerHTML=
a.outerHTML,ub.removeChild(e=ub.firstChild));if(!(l.support.noCloneEvent&&l.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||l.isXMLDoc(a)))for(d=w(e),g=w(a),k=0;null!=(f=g[k]);++k)if(d[k]){var p=d[k],r=void 0,q=void 0,h=void 0;if(1===p.nodeType){r=p.nodeName.toLowerCase();if(!l.support.noCloneEvent&&p[l.expando]){h=l._data(p);for(q in h.events)l.removeEvent(p,q,h.handle);p.removeAttribute(l.expando)}if("script"===r&&p.text!==f.text)u(p).text=f.text,m(p);else if("object"===r)p.parentNode&&
(p.outerHTML=f.outerHTML),l.support.html5Clone&&f.innerHTML&&!l.trim(p.innerHTML)&&(p.innerHTML=f.innerHTML);else if("input"===r&&Lb.test(f.type))p.defaultChecked=p.checked=f.checked,p.value!==f.value&&(p.value=f.value);else if("option"===r)p.defaultSelected=p.selected=f.defaultSelected;else if("input"===r||"textarea"===r)p.defaultValue=f.defaultValue}}if(b)if(c)for(g=g||w(a),d=d||w(e),k=0;null!=(f=g[k]);k++)C(f,d[k]);else C(a,e);d=w(e,"script");0<d.length&&x(d,!n&&w(a,"script"));return e},buildFragment:function(a,
b,c,d){for(var f,e,k,g,n,p,m=a.length,r=t(b),q=[],h=0;h<m;h++)if((e=a[h])||0===e)if("object"===l.type(e))l.merge(q,e.nodeType?[e]:e);else if(Qb.test(e)){k=k||r.appendChild(b.createElement("div"));g=(hb.exec(e)||["",""])[1].toLowerCase();p=Y[g]||Y._default;k.innerHTML=p[1]+e.replace(ya,"<$1></$2>")+p[2];for(f=p[0];f--;)k=k.lastChild;!l.support.leadingWhitespace&&Db.test(e)&&q.push(b.createTextNode(Db.exec(e)[0]));if(!l.support.tbody)for(f=(e="table"!==g||sb.test(e)?"<table>"!==p[1]||sb.test(e)?0:k:
k.firstChild)&&e.childNodes.length;f--;)l.nodeName(n=e.childNodes[f],"tbody")&&!n.childNodes.length&&e.removeChild(n);l.merge(q,k.childNodes);for(k.textContent="";k.firstChild;)k.removeChild(k.firstChild);k=r.lastChild}else q.push(b.createTextNode(e));k&&r.removeChild(k);l.support.appendChecked||l.grep(w(q,"input"),v);for(h=0;e=q[h++];)if(!d||-1===l.inArray(e,d))if(a=l.contains(e.ownerDocument,e),k=w(r.appendChild(e),"script"),a&&x(k),c)for(f=0;e=k[f++];)Eb.test(e.type||"")&&c.push(e);return r},cleanData:function(a,
b){for(var c,d,f,e,k=0,g=l.expando,n=l.cache,p=l.support.deleteExpando,m=l.event.special;null!=(c=a[k]);k++)if(b||l.acceptData(c))if(e=(f=c[g])&&n[f]){if(e.events)for(d in e.events)m[d]?l.event.remove(c,d):l.removeEvent(c,d,e.handle);n[f]&&(delete n[f],p?delete c[g]:typeof c.removeAttribute!==ca?c.removeAttribute(g):c[g]=null,P.push(f))}},_evalUrl:function(a){return l.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}});l.fn.extend({wrapAll:function(a){if(l.isFunction(a))return this.each(function(b){l(this).wrapAll(a.call(this,
b))});if(this[0]){var b=l(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return l.isFunction(a)?this.each(function(b){l(this).wrapInner(a.call(this,b))}):this.each(function(){var b=l(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=l.isFunction(a);return this.each(function(c){l(this).wrapAll(b?
a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){l.nodeName(this,"body")||l(this).replaceWith(this.childNodes)}).end()}});var nb,Ea,bb,ib=/alpha\([^)]*\)/i,jb=/opacity\s*=\s*([^)]*)/,Vb=/^(top|right|bottom|left)$/,ac=/^(none|table(?!-c[ea]).+)/,kb=/^margin/,va=RegExp("^("+V+")(.*)$","i"),cb=RegExp("^("+V+")(?!px)[a-z%]+$","i"),Fb=RegExp("^([+-])=("+V+")","i"),mb={BODY:"block"},Da={position:"absolute",visibility:"hidden",display:"block"},Va={letterSpacing:0,fontWeight:400},
Ra=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"];l.fn.extend({css:function(a,b){return l.access(this,function(a,b,c){var d,f={},k=0;if(l.isArray(b)){d=Ea(a);for(c=b.length;k<c;k++)f[b[k]]=l.css(a,b[k],!1,d);return f}return c!==e?l.style(a,b,c):l.css(a,b)},a,b,1<arguments.length)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){y(this)?l(this).show():l(this).hide()})}});l.extend({cssHooks:{opacity:{get:function(a,
b){if(b){var c=bb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,k,g,n=l.camelCase(b),p=a.style;b=l.cssProps[n]||(l.cssProps[n]=z(p,n));g=l.cssHooks[b]||l.cssHooks[n];if(c!==e){if(k=typeof c,"string"===k&&(f=Fb.exec(c))&&(c=(f[1]+1)*f[2]+parseFloat(l.css(a,
b)),k="number"),!(null==c||"number"===k&&isNaN(c)||("number"!==k||l.cssNumber[n]||(c+="px"),l.support.clearCloneStyle||""!==c||0!==b.indexOf("background")||(p[b]="inherit"),g&&"set"in g&&(c=g.set(a,c,d))===e)))try{p[b]=c}catch(m){}}else return g&&"get"in g&&(f=g.get(a,!1,d))!==e?f:p[b]}},css:function(a,b,c,d){var f,k;k=l.camelCase(b);b=l.cssProps[k]||(l.cssProps[k]=z(a.style,k));(k=l.cssHooks[b]||l.cssHooks[k])&&"get"in k&&(f=k.get(a,!0,c));f===e&&(f=bb(a,b,d));"normal"===f&&b in Va&&(f=Va[b]);return""===
c||c?(a=parseFloat(f),!0===c||l.isNumeric(a)?a||0:f):f}});h.getComputedStyle?(Ea=function(a){return h.getComputedStyle(a,null)},bb=function(a,b,c){var d,f=(c=c||Ea(a))?c.getPropertyValue(b)||c[b]:e,k=a.style;c&&(""!==f||l.contains(a.ownerDocument,a)||(f=l.style(a,b)),cb.test(f)&&kb.test(b)&&(a=k.width,b=k.minWidth,d=k.maxWidth,k.minWidth=k.maxWidth=k.width=f,f=c.width,k.width=a,k.minWidth=b,k.maxWidth=d));return f}):A.documentElement.currentStyle&&(Ea=function(a){return a.currentStyle},bb=function(a,
b,c){var d,f,k=(c=c||Ea(a))?c[b]:e,g=a.style;null==k&&g&&g[b]&&(k=g[b]);if(cb.test(k)&&!Vb.test(b)){c=g.left;if(f=(d=a.runtimeStyle)&&d.left)d.left=a.currentStyle.left;g.left="fontSize"===b?"1em":k;k=g.pixelLeft+"px";g.left=c;f&&(d.left=f)}return""===k?"auto":k});l.each(["height","width"],function(a,b){l.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&ac.test(l.css(a,"display"))?l.swap(a,Da,function(){return X(a,b,d)}):X(a,b,d)},set:function(a,c,d){var f=d&&Ea(a);return M(a,c,d?ba(a,
b,d,l.support.boxSizing&&"border-box"===l.css(a,"boxSizing",!1,f),f):0)}}});l.support.opacity||(l.cssHooks.opacity={get:function(a,b){return jb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,f=l.isNumeric(b)?"alpha(opacity="+100*b+")":"",e=d&&d.filter||c.filter||"";c.zoom=1;if((1<=b||""===b)&&""===l.trim(e.replace(ib,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter))return;
c.filter=ib.test(e)?e.replace(ib,f):e+" "+f}});l(function(){l.support.reliableMarginRight||(l.cssHooks.marginRight={get:function(a,b){if(b)return l.swap(a,{display:"inline-block"},bb,[a,"marginRight"])}});!l.support.pixelPosition&&l.fn.position&&l.each(["top","left"],function(a,b){l.cssHooks[b]={get:function(a,c){if(c)return c=bb(a,b),cb.test(c)?l(a).position()[b]+"px":c}}})});l.expr&&l.expr.filters&&(l.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!l.support.reliableHiddenOffsets&&
"none"===(a.style&&a.style.display||l.css(a,"display"))},l.expr.filters.visible=function(a){return!l.expr.filters.hidden(a)});l.each({margin:"",padding:"",border:"Width"},function(a,b){l.cssHooks[a+b]={expand:function(c){var d=0,f={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)f[a+Ra[d]+b]=c[d]||c[d-2]||c[0];return f}};kb.test(a)||(l.cssHooks[a+b].set=M)});var bc=/%20/g,Zb=/\[\]$/,vb=/\r?\n/g,Na=/^(?:submit|button|image|reset|file)$/i,Gb=/^(?:input|select|textarea|keygen)/i;l.fn.extend({serialize:function(){return l.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var a=l.prop(this,"elements");return a?l.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!l(this).is(":disabled")&&Gb.test(this.nodeName)&&!Na.test(a)&&(this.checked||!Lb.test(a))}).map(function(a,b){var c=l(this).val();return null==c?null:l.isArray(c)?l.map(c,function(a){return{name:b.name,value:a.replace(vb,"\r\n")}}):{name:b.name,value:c.replace(vb,"\r\n")}}).get()}});l.param=function(a,b){var c,d=[],f=function(a,b){b=
l.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===e&&(b=l.ajaxSettings&&l.ajaxSettings.traditional);if(l.isArray(a)||a.jquery&&!l.isPlainObject(a))l.each(a,function(){f(this.name,this.value)});else for(c in a)da(c,a[c],b,f);return d.join("&").replace(bc,"+")};l.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){l.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});l.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Wa,Xa,oa=l.now(),Ja=/\?/,Wb=/#.*$/,Ha=/([?&])_=[^&]*/,Ka=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,
Xb=/^(?:GET|HEAD)$/,cc=/^\/\//,Hb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ib=l.fn.load,$a={},ma={},Jb="*/".concat("*");try{Xa=S.href}catch(Yb){Xa=A.createElement("a"),Xa.href="",Xa=Xa.href}Wa=Hb.exec(Xa.toLowerCase())||[];l.fn.load=function(a,b,c){if("string"!==typeof a&&Ib)return Ib.apply(this,arguments);var d,f,k,g=this,n=a.indexOf(" ");0<=n&&(d=a.slice(n,a.length),a=a.slice(0,n));l.isFunction(b)?(c=b,b=e):b&&"object"===typeof b&&(k="POST");0<g.length&&l.ajax({url:a,type:k,dataType:"html",
data:b}).done(function(a){f=arguments;g.html(d?l("<div>").append(l.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])});return this};l.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){l.fn[b]=function(a){return this.on(b,a)}});l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Xa,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Wa[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":l.parseJSON,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ia(ia(a,l.ajaxSettings),b):ia(l.ajaxSettings,a)},ajaxPrefilter:I($a),ajaxTransport:I(ma),ajax:function(a,
b){function c(a,b,d,f){var r,u,v,Z;Z=b;if(2!==C){C=2;n&&clearTimeout(n);m=e;g=f||"";I.readyState=0<a?4:0;f=200<=a&&300>a||304===a;if(d){v=q;for(var aa=I,w,z,F,D,pa=v.contents,ua=v.dataTypes;"*"===ua[0];)ua.shift(),z===e&&(z=v.mimeType||aa.getResponseHeader("Content-Type"));if(z)for(D in pa)if(pa[D]&&pa[D].test(z)){ua.unshift(D);break}if(ua[0]in d)F=ua[0];else{for(D in d){if(!ua[0]||v.converters[D+" "+ua[0]]){F=D;break}w||(w=D)}F=F||w}F?(F!==ua[0]&&ua.unshift(F),v=d[F]):v=void 0}a:{d=q;w=v;z=I;F=f;
var eb,y,na,aa={},pa=d.dataTypes.slice();if(pa[1])for(y in d.converters)aa[y.toLowerCase()]=d.converters[y];for(D=pa.shift();D;)if(d.responseFields[D]&&(z[d.responseFields[D]]=w),!na&&F&&d.dataFilter&&(w=d.dataFilter(w,d.dataType)),na=D,D=pa.shift())if("*"===D)D=na;else if("*"!==na&&na!==D){y=aa[na+" "+D]||aa["* "+D];if(!y)for(eb in aa)if(v=eb.split(" "),v[1]===D&&(y=aa[na+" "+v[0]]||aa["* "+v[0]])){!0===y?y=aa[eb]:!0!==aa[eb]&&(D=v[0],pa.unshift(v[1]));break}if(!0!==y)if(y&&d["throws"])w=y(w);else try{w=
y(w)}catch(ia){v={state:"parsererror",error:y?ia:"No conversion from "+na+" to "+D};break a}}v={state:"success",data:w}}if(f)q.ifModified&&((Z=I.getResponseHeader("Last-Modified"))&&(l.lastModified[k]=Z),(Z=I.getResponseHeader("etag"))&&(l.etag[k]=Z)),204===a||"HEAD"===q.type?Z="nocontent":304===a?Z="notmodified":(Z=v.state,r=v.data,u=v.error,f=!u);else if(u=Z,a||!Z)Z="error",0>a&&(a=0);I.status=a;I.statusText=(b||Z)+"";f?x.resolveWith(h,[r,Z,I]):x.rejectWith(h,[I,Z,u]);I.statusCode(da);da=e;p&&s.trigger(f?
"ajaxSuccess":"ajaxError",[I,q,f?r:u]);t.fireWith(h,[I,Z]);p&&(s.trigger("ajaxComplete",[I,q]),--l.active||l.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=e);b=b||{};var d,f,k,g,n,p,m,r,q=l.ajaxSetup({},b),h=q.context||q,s=q.context&&(h.nodeType||h.jquery)?l(h):l.event,x=l.Deferred(),t=l.Callbacks("once memory"),da=q.statusCode||{},u={},v={},C=0,Z="canceled",I={readyState:0,getResponseHeader:function(a){var b;if(2===C){if(!r)for(r={};b=Ka.exec(g);)r[b[1].toLowerCase()]=b[2];b=r[a.toLowerCase()]}return null==
b?null:b},getAllResponseHeaders:function(){return 2===C?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();C||(a=v[c]=v[c]||a,u[a]=b);return this},overrideMimeType:function(a){C||(q.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>C)for(b in a)da[b]=[da[b],a[b]];else I.always(a[I.status]);return this},abort:function(a){a=a||Z;m&&m.abort(a);c(0,a);return this}};x.promise(I).complete=t.add;I.success=I.done;I.error=I.fail;q.url=((a||q.url||Xa)+"").replace(Wb,"").replace(cc,Wa[1]+
"//");q.type=b.method||b.type||q.method||q.type;q.dataTypes=l.trim(q.dataType||"*").toLowerCase().match(za)||[""];null==q.crossDomain&&(d=Hb.exec(q.url.toLowerCase()),q.crossDomain=!(!d||d[1]===Wa[1]&&d[2]===Wa[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Wa[3]||("http:"===Wa[1]?"80":"443"))));q.data&&q.processData&&"string"!==typeof q.data&&(q.data=l.param(q.data,q.traditional));F($a,q,b,I);if(2===C)return I;(p=q.global)&&0===l.active++&&l.event.trigger("ajaxStart");q.type=q.type.toUpperCase();q.hasContent=
!Xb.test(q.type);k=q.url;q.hasContent||(q.data&&(k=q.url+=(Ja.test(k)?"&":"?")+q.data,delete q.data),!1===q.cache&&(q.url=Ha.test(k)?k.replace(Ha,"$1_="+oa++):k+(Ja.test(k)?"&":"?")+"_="+oa++));q.ifModified&&(l.lastModified[k]&&I.setRequestHeader("If-Modified-Since",l.lastModified[k]),l.etag[k]&&I.setRequestHeader("If-None-Match",l.etag[k]));(q.data&&q.hasContent&&!1!==q.contentType||b.contentType)&&I.setRequestHeader("Content-Type",q.contentType);I.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?
q.accepts[q.dataTypes[0]]+("*"!==q.dataTypes[0]?", "+Jb+"; q=0.01":""):q.accepts["*"]);for(f in q.headers)I.setRequestHeader(f,q.headers[f]);if(q.beforeSend&&(!1===q.beforeSend.call(h,I,q)||2===C))return I.abort();Z="abort";for(f in{success:1,error:1,complete:1})I[f](q[f]);if(m=F(ma,q,b,I)){I.readyState=1;p&&s.trigger("ajaxSend",[I,q]);q.async&&0<q.timeout&&(n=setTimeout(function(){I.abort("timeout")},q.timeout));try{C=1,m.send(u,c)}catch(aa){if(2>C)c(-1,aa);else throw aa;}}else c(-1,"No Transport");
return I},getJSON:function(a,b,c){return l.get(a,b,c,"json")},getScript:function(a,b){return l.get(a,e,b,"script")}});l.each(["get","post"],function(a,b){l[b]=function(a,c,d,f){l.isFunction(c)&&(f=f||d,d=c,c=e);return l.ajax({url:a,type:b,dataType:f,data:c,success:d})}});l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){l.globalEval(a);return a}}});
l.ajaxPrefilter("script",function(a){a.cache===e&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});l.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=A.head||l("head")[0]||A.documentElement;return{send:function(d,f){b=A.createElement("script");b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),
b=null,c||f(200,"success")};c.insertBefore(b,c.firstChild)},abort:function(){if(b)b.onload(e,!0)}}}});var ua=[],Z=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ua.pop()||l.expando+"_"+oa++;this[a]=!0;return a}});l.ajaxPrefilter("json jsonp",function(a,b,c){var d,f,k,g=!1!==a.jsonp&&(Z.test(a.url)?"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&Z.test(a.data)&&"data");if(g||"jsonp"===a.dataTypes[0])return d=a.jsonpCallback=
l.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g?a[g]=a[g].replace(Z,"$1"+d):!1!==a.jsonp&&(a.url+=(Ja.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){k||l.error(d+" was not called");return k[0]},a.dataTypes[0]="json",f=h[d],h[d]=function(){k=arguments},c.always(function(){h[d]=f;a[d]&&(a.jsonpCallback=b.jsonpCallback,ua.push(d));k&&l.isFunction(f)&&f(k[0]);k=f=e}),"script"});var aa,pa,eb=0,sa=h.ActiveXObject&&function(){for(var a in aa)aa[a](e,!0)};l.ajaxSettings.xhr=
h.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&qa()))a:{try{a=new h.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:qa;pa=l.ajaxSettings.xhr();l.support.cors=!!pa&&"withCredentials"in pa;(pa=l.support.ajax=!!pa)&&l.ajaxTransport(function(a){if(!a.crossDomain||l.support.cors){var b;return{send:function(c,d){var f,k,g=a.xhr();a.username?g.open(a.type,a.url,a.async,a.username,a.password):g.open(a.type,a.url,a.async);if(a.xhrFields)for(k in a.xhrFields)g[k]=a.xhrFields[k];
a.mimeType&&g.overrideMimeType&&g.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");try{for(k in c)g.setRequestHeader(k,c[k])}catch(n){}g.send(a.hasContent&&a.data||null);b=function(c,k){var n,p,m,q;try{if(b&&(k||4===g.readyState))if(b=e,f&&(g.onreadystatechange=l.noop,sa&&delete aa[f]),k)4!==g.readyState&&g.abort();else{q={};n=g.status;p=g.getAllResponseHeaders();"string"===typeof g.responseText&&(q.text=g.responseText);try{m=g.statusText}catch(r){m=
""}n||!a.isLocal||a.crossDomain?1223===n&&(n=204):n=q.text?200:404}}catch(h){k||d(-1,h)}q&&d(n,m,q,p)};a.async?4===g.readyState?setTimeout(b):(f=++eb,sa&&(aa||(aa={},l(h).unload(sa)),aa[f]=b),g.onreadystatechange=b):b()},abort:function(){b&&b(e,!0)}}}});var ta,Oa,wb=/^(?:toggle|show|hide)$/,ga=RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),xb=/queueHooks$/,zb=[function(a,b,c){var d,f,e,k,g,n=this,p={},m=a.style,q=a.nodeType&&y(a),r=l._data(a,"fxshow");c.queue||(k=l._queueHooks(a,"fx"),null==k.unqueued&&
(k.unqueued=0,g=k.empty.fire,k.empty.fire=function(){k.unqueued||g()}),k.unqueued++,n.always(function(){n.always(function(){k.unqueued--;l.queue(a,"fx").length||k.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===l.css(a,"display")&&"none"===l.css(a,"float")&&(l.support.inlineBlockNeedsLayout&&"inline"!==T(a.nodeName)?m.zoom=1:m.display="inline-block"));c.overflow&&(m.overflow="hidden",l.support.shrinkWrapBlocks||n.always(function(){m.overflow=
c.overflow[0];m.overflowX=c.overflow[1];m.overflowY=c.overflow[2]}));for(d in b)f=b[d],wb.exec(f)&&(delete b[d],e=e||"toggle"===f,f!==(q?"hide":"show")&&(p[d]=r&&r[d]||l.style(a,d)));if(!l.isEmptyObject(p))for(d in r?"hidden"in r&&(q=r.hidden):r=l._data(a,"fxshow",{}),e&&(r.hidden=!q),q?l(a).show():n.done(function(){l(a).hide()}),n.done(function(){var b;l._removeData(a,"fxshow");for(b in p)l.style(a,b,p[b])}),p)b=Sa(q?r[d]:0,d,n),d in r||(r[d]=b.start,q&&(b.end=b.start,b.start="width"===d||"height"===
d?1:0))}],Ya={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),f=ga.exec(b),e=f&&f[3]||(l.cssNumber[a]?"":"px"),k=(l.cssNumber[a]||"px"!==e&&+d)&&ga.exec(l.css(c.elem,a)),g=1,n=20;if(k&&k[3]!==e){e=e||k[3];f=f||[];k=+d||1;do g=g||".5",k/=g,l.style(c.elem,a,k+e);while(g!==(g=c.cur()/d)&&1!==g&&--n)}f&&(k=c.start=+k||+d||0,c.unit=e,c.end=f[1]?k+(f[1]+1)*f[2]:+f[2]);return c}]};l.Animation=l.extend(U,{tweener:function(a,b){l.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,f=a.length;d<
f;d++)c=a[d],Ya[c]=Ya[c]||[],Ya[c].unshift(b)},prefilter:function(a,b){b?zb.unshift(a):zb.push(a)}});l.Tween=B;B.prototype={constructor:B,init:function(a,b,c,d,f,e){this.elem=a;this.prop=c;this.easing=f||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=e||(l.cssNumber[c]?"":"px")},cur:function(){var a=B.propHooks[this.prop];return a&&a.get?a.get(this):B.propHooks._default.get(this)},run:function(a){var b,c=B.propHooks[this.prop];this.pos=this.options.duration?b=l.easing[this.easing](a,
this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):B.propHooks._default.set(this);return this}};B.prototype.init.prototype=B.prototype;B.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=l.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(l.fx.step[a.prop])l.fx.step[a.prop](a);else a.elem.style&&
(null!=a.elem.style[l.cssProps[a.prop]]||l.cssHooks[a.prop])?l.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};l.each(["toggle","show","hide"],function(a,b){var c=l.fn[b];l.fn[b]=function(a,d,f){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(ea(b,!0),a,d,f)}});l.fn.extend({fadeTo:function(a,b,c,d){return this.filter(y).css("opacity",0).show().end().animate({opacity:b},
a,c,d)},animate:function(a,b,c,d){var f=l.isEmptyObject(a),e=l.speed(b,c,d);b=function(){var b=U(this,l.extend({},a),e);(f||l._data(this,"finish"))&&b.stop(!0)};b.finish=b;return f||!1===e.queue?this.each(b):this.queue(e.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=e);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,f=null!=a&&a+"queueHooks",e=l.timers,k=l._data(this);if(f)k[f]&&k[f].stop&&d(k[f]);else for(f in k)k[f]&&
k[f].stop&&xb.test(f)&&d(k[f]);for(f=e.length;f--;)e[f].elem!==this||null!=a&&e[f].queue!==a||(e[f].anim.stop(c),b=!1,e.splice(f,1));!b&&c||l.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=l._data(this),d=c[a+"queue"];b=c[a+"queueHooks"];var f=l.timers,e=d?d.length:0;c.finish=!0;l.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<e;b++)d[b]&&d[b].finish&&
d[b].finish.call(this);delete c.finish})}});l.each({slideDown:ea("show"),slideUp:ea("hide"),slideToggle:ea("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){l.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});l.speed=function(a,b,c){var d=a&&"object"===typeof a?l.extend({},a):{complete:c||!c&&b||l.isFunction(a)&&a,duration:a,easing:c&&b||b&&!l.isFunction(b)&&b};d.duration=l.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in l.fx.speeds?
l.fx.speeds[d.duration]:l.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){l.isFunction(d.old)&&d.old.call(this);d.queue&&l.dequeue(this,d.queue)};return d};l.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};l.timers=[];l.fx=B.prototype.init;l.fx.tick=function(){var a,b=l.timers,c=0;for(ta=l.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||l.fx.stop();ta=e};l.fx.timer=function(a){a()&&
l.timers.push(a)&&l.fx.start()};l.fx.interval=13;l.fx.start=function(){Oa||(Oa=setInterval(l.fx.tick,l.fx.interval))};l.fx.stop=function(){clearInterval(Oa);Oa=null};l.fx.speeds={slow:600,fast:200,_default:400};l.fx.step={};l.expr&&l.expr.filters&&(l.expr.filters.animated=function(a){return l.grep(l.timers,function(b){return a===b.elem}).length});l.fn.offset=function(a){if(arguments.length)return a===e?this:this.each(function(b){l.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},f=(c=this[0])&&
c.ownerDocument;if(f){b=f.documentElement;if(!l.contains(b,c))return d;typeof c.getBoundingClientRect!==ca&&(d=c.getBoundingClientRect());c=N(f);return{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}};l.offset={setOffset:function(a,b,c){var d=l.css(a,"position");"static"===d&&(a.style.position="relative");var f=l(a),e=f.offset(),k=l.css(a,"top"),g=l.css(a,"left"),n={},p={};("absolute"===d||"fixed"===d)&&-1<l.inArray("auto",[k,g])?
(p=f.position(),d=p.top,g=p.left):(d=parseFloat(k)||0,g=parseFloat(g)||0);l.isFunction(b)&&(b=b.call(a,c,e));null!=b.top&&(n.top=b.top-e.top+d);null!=b.left&&(n.left=b.left-e.left+g);"using"in b?b.using.call(a,n):f.css(n)}};l.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];"fixed"===l.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),l.nodeName(a[0],"html")||(c=a.offset()),c.top+=l.css(a[0],"borderTopWidth",!0),c.left+=l.css(a[0],"borderLeftWidth",
!0));return{top:b.top-c.top-l.css(d,"marginTop",!0),left:b.left-c.left-l.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||W;a&&!l.nodeName(a,"html")&&"static"===l.css(a,"position");)a=a.offsetParent;return a||W})}});l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);l.fn[a]=function(d){return l.access(this,function(a,d,f){var k=N(a);if(f===e)return k?b in k?k[b]:k.document.documentElement[d]:a[d];k?k.scrollTo(c?
l(k).scrollLeft():f,c?f:l(k).scrollTop()):a[d]=f},a,d,arguments.length,null)}});l.each({Height:"height",Width:"width"},function(a,b){l.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){l.fn[d]=function(d,f){var k=arguments.length&&(c||"boolean"!==typeof d),g=c||(!0===d||!0===f?"margin":"border");return l.access(this,function(b,c,d){return l.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],
c["offset"+a],c["client"+a])):d===e?l.css(b,c,g):l.style(b,c,d,g)},b,k?d:e,k,null)}})});l.fn.size=function(){return this.length};l.fn.andSelf=l.fn.addBack;(function(){var a,b;l.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a=l.uaMatch(navigator.userAgent);
b={};a.browser&&(b[a.browser]=!0,b.version=a.version);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);l.browser=b})();l.version="3.1";l.long_version="3.1.12";l.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")};l.globalNamespace=l.uid("Foundry");h[l.globalNamespace]=l;l.run=function(a){return l.isFunction(a)?a(l):null};l.initialize=function(a){l.initialized||(l.extend(l,a),"development"==l.environment&&(h.F=l),l.initialized=!0,FD31.module.execute())};FD31.jquery(l)})(window);
FD31.plugin("lodash",function(h){function e(a,b,c){c=(c||0)-1;for(var d=a.length;++c<d;)if(a[c]===b)return c;return-1}function g(a,b){var c=typeof b;a=a.cache;if("boolean"==c||null==b)return a[b];"number"!=c&&"string"!=c&&(c="object");var d="number"==c?b:w+b;a=a[c]||(a[c]={});return"object"==c?a[d]&&-1<e(a[d],b)?0:-1:a[d]?0:-1}function b(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:w+a,f=b[c]||(b[c]={});"object"==c?
(f[d]||(f[d]=[])).push(a)==this.array.length&&(b[c]=!1):f[d]=!0}}function a(a){return a.charCodeAt(0)}function c(a,b){var c=a.index,d=b.index;a=a.criteria;b=b.criteria;if(a!==b){if(a>b||"undefined"==typeof a)return 1;if(a<b||"undefined"==typeof b)return-1}return c<d?-1:1}function d(a){var c=-1,d=a.length,f=n();f["false"]=f["null"]=f["true"]=f.undefined=!1;var e=n();e.array=a;e.cache=f;for(e.push=b;++c<d;)e.push(a[c]);return!1===f.object?(s(e),null):e}function f(a){return"\\"+P[a]}function k(){return u.pop()||
[]}function n(){return m.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function p(a){a.length=0;u.length<z&&u.push(a)}function s(a){var b=a.cache;b&&s(b);a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null;m.length<z&&m.push(a)}function q(a,b,c){b||(b=0);"undefined"==typeof c&&(c=a?a.length:0);var d=-1;c=c-b||0;for(var f=Array(0>c?0:c);++d<c;)f[d]=
a[b+d];return f}function t(b){function m(a){return a&&"object"==typeof a&&!Ha(a)&&va.call(a,"__wrapped__")?a:new h(a)}function h(a){this.__wrapped__=a}function u(a,b,c,d){function f(){var d=arguments,m=k?this:b;e||(a=b[g]);c.length&&(d=d.length?(d=oa.call(d),n?d.concat(c):c.concat(d)):c);return this instanceof f?(m=l(a.prototype),d=a.apply(m,d),K(d)?d:m):a.apply(m,d)}var e=J(a),k=!c,g=b;if(k){var n=d;c=b}else if(!e){if(!d)throw new $b;b=a}return f}function l(a){return K(a)?Ra(a):{}}function z(a){return Xb[a]}
function P(a,b,c){var d=(d=m.indexOf)===Sb?e:d;return d}function ja(a){return function(b,c,d,f){"boolean"!=typeof c&&null!=c&&(d=(f=d)&&f[c]===b?r:c,c=!1);null!=d&&(d=m.createCallback(d,f));return a(b,c,d,f)}}function pb(a){var b,c;if(!a||Da.call(a)!=ca||(b=a.constructor,J(b)&&!(b instanceof b)))return!1;$a(a,function(a,b){c=b});return c===r||va.call(a,c)}function fb(a){return cc[a]}function Ba(a,b,c,d,f,e){var g=a;"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1);if("function"==typeof c){c="undefined"==
typeof d?c:m.createCallback(c,d,1);g=c(g);if("undefined"!=typeof g)return g;g=a}if(d=K(g)){var n=Da.call(g);if(!W[n])return g;var l=Ha(g)}if(!d||!b)return d?l?q(g):Hb({},g):g;d=Ja[n];switch(n){case ea:case N:return new d(+g);case R:case A:return new d(g);case S:return d(g.source,T.exec(g))}n=!f;f||(f=k());e||(e=k());for(var h=f.length;h--;)if(f[h]==a)return e[h];g=l?d(g.length):{};l&&(va.call(a,"index")&&(g.index=a.index),va.call(a,"input")&&(g.input=a.input));f.push(a);e.push(g);(l?$:ma)(a,function(a,
d){g[d]=Ba(a,b,c,r,f,e)});n&&(p(f),p(e));return g}function Ua(a){var b=[];$a(a,function(a,c){J(a)&&b.push(c)});return b.sort()}function G(a){for(var b=-1,c=Ka(a),d=c.length,f={};++b<d;){var e=c[b];f[a[e]]=e}return f}function H(a,b,c,d,f,e){var g=c===C;if("function"==typeof c&&!g){c=m.createCallback(c,d,2);var n=c(a,b);if("undefined"!=typeof n)return!!n}if(a===b)return 0!==a||1/a==1/b;var q=typeof a,r=typeof b;if(a===a&&(!a||"function"!=q&&"object"!=q)&&(!b||"function"!=r&&"object"!=r))return!1;if(null==
a||null==b)return a===b;r=Da.call(a);q=Da.call(b);r==wa&&(r=ca);q==wa&&(q=ca);if(r!=q)return!1;switch(r){case ea:case N:return+a==+b;case R:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case S:case A:return a==Qa(b)}q=r==B;if(!q){if(va.call(a,"__wrapped__ ")||va.call(b,"__wrapped__"))return H(a.__wrapped__||a,b.__wrapped__||b,c,d,f,e);if(r!=ca)return!1;var r=a.constructor,l=b.constructor;if(r!=l&&!(J(r)&&r instanceof r&&J(l)&&l instanceof l))return!1}l=!f;f||(f=k());e||(e=k());for(r=f.length;r--;)if(f[r]==
a)return e[r]==b;var h=0,n=!0;f.push(a);e.push(b);if(q){r=a.length;h=b.length;n=h==a.length;if(!n&&!g)return n;for(;h--;)if(q=r,l=b[h],g)for(;q--&&!(n=H(a[q],l,c,d,f,e)););else if(!(n=H(a[h],l,c,d,f,e)))break;return n}$a(b,function(b,k,g){if(va.call(g,k))return h++,n=va.call(a,k)&&H(a[k],b,c,d,f,e)});n&&!g&&$a(a,function(a,b,c){if(va.call(c,b))return n=-1<--h});l&&(p(f),p(e));return n}function J(a){return"function"==typeof a}function K(a){return!(!a||!O[typeof a])}function E(a){return"number"==typeof a||
Da.call(a)==R}function ra(a){return"string"==typeof a||Da.call(a)==A}function Ia(a,b,c){var d=arguments,f=0,e=2;if(!K(a))return a;if(c===C)var g=d[3],n=d[4],q=d[5];else{var r=!0,n=k(),q=k();"number"!=typeof c&&(e=d.length);3<e&&"function"==typeof d[e-2]?g=m.createCallback(d[--e-1],d[e--],2):2<e&&"function"==typeof d[e-1]&&(g=d[--e])}for(;++f<e;)(Ha(d[f])?$:ma)(d[f],function(b,c){var d,f,e=b,k=a[c];if(b&&((f=Ha(b))||Jb(b))){for(e=n.length;e--;)if(d=n[e]==b){k=q[e];break}if(!d){var m;g&&(e=g(k,b),m=
"undefined"!=typeof e)&&(k=e);m||(k=f?Ha(k)?k:[]:Jb(k)?k:{});n.push(b);q.push(k);m||(k=Ia(k,b,C,g,n,q))}}else g&&(e=g(k,b),"undefined"==typeof e&&(e=b)),"undefined"!=typeof e&&(k=e);a[c]=k});r&&(p(n),p(q));return a}function ab(a){for(var b=-1,c=Ka(a),d=c.length,f=ya(d);++b<d;)f[b]=a[c[b]];return f}function Pa(a,b,c){var d=-1,f=P(),e=a?a.length:0,k=!1;c=(0>c?Na(0,e+c):c)||0;e&&"number"==typeof e?k=-1<(ra(a)?a.indexOf(b,c):f(a,b,c)):ma(a,function(a){if(++d>=c)return!(k=a===b)});return k}function Aa(a,
b,c){var d=!0;b=m.createCallback(b,c);c=-1;var f=a?a.length:0;if("number"==typeof f)for(;++c<f&&(d=!!b(a[c],c,a)););else ma(a,function(a,c,f){return d=!!b(a,c,f)});return d}function ha(a,b,c){var d=[];b=m.createCallback(b,c);c=-1;var f=a?a.length:0;if("number"==typeof f)for(;++c<f;){var e=a[c];b(e,c,a)&&d.push(e)}else ma(a,function(a,c,f){b(a,c,f)&&d.push(a)});return d}function Ca(a,b,c){b=m.createCallback(b,c);c=-1;var d=a?a.length:0;if("number"==typeof d)for(;++c<d;){var f=a[c];if(b(f,c,a))return f}else{var e;
ma(a,function(a,c,d){if(b(a,c,d))return e=a,!1});return e}}function $(a,b,c){var d=-1,f=a?a.length:0;b=b&&"undefined"==typeof c?b:m.createCallback(b,c);if("number"==typeof f)for(;++d<f&&!1!==b(a[d],d,a););else ma(a,b);return a}function gb(a,b,c){var d=-1,f=a?a.length:0;b=m.createCallback(b,c);if("number"==typeof f)for(var e=ya(f);++d<f;)e[d]=b(a[d],d,a);else e=[],ma(a,function(a,c,f){e[++d]=b(a,c,f)});return e}function Ga(b,c,d){var f=-Infinity,e=f;if(!c&&Ha(b)){d=-1;for(var k=b.length;++d<k;){var g=
b[d];g>e&&(e=g)}}else c=!c&&ra(b)?a:m.createCallback(c,d),$(b,function(a,b,d){b=c(a,b,d);b>f&&(f=b,e=a)});return e}function qb(a,b){var c=-1,d=a?a.length:0;if("number"==typeof d)for(var f=ya(d);++c<d;)f[c]=a[c][b];return f||gb(a,b)}function xa(a,b,c,d){if(!a)return c;var f=3>arguments.length;b=m.createCallback(b,d,4);var e=-1,k=a.length;if("number"==typeof k)for(f&&(c=a[++e]);++e<k;)c=b(c,a[e],e,a);else ma(a,function(a,d,e){c=f?(f=!1,a):b(c,a,d,e)});return c}function Za(a,b,c,d){var f=a?a.length:
0,e=3>arguments.length;if("number"!=typeof f)var k=Ka(a),f=k.length;b=m.createCallback(b,d,4);$(a,function(d,g,n){g=k?k[--f]:--f;c=e?(e=!1,a[g]):b(c,a[g],g,n)});return c}function rb(a,b,c){var d;b=m.createCallback(b,c);c=-1;var f=a?a.length:0;if("number"==typeof f)for(;++c<f&&!(d=b(a[c],c,a)););else ma(a,function(a,c,f){return!(d=b(a,c,f))});return!!d}function Ab(a){var b=-1,c=P(),f=a?a.length:0,k=jb.apply(Y,oa.call(arguments,1)),n=[],m=f>=v&&c===e;if(m){var p=d(k);p?(c=g,k=p):m=!1}for(;++b<f;)p=
a[b],0>c(k,p)&&n.push(p);m&&s(k);return n}function Mb(a,b,c){if(a){var d=0,f=a.length;if("number"!=typeof b&&null!=b){var e=-1;for(b=m.createCallback(b,c);++e<f&&b(a[e],e,a);)d++}else if(d=b,null==d||c)return a[0];return q(a,0,Gb(Na(0,d),f))}}function Sb(a,b,c){if("number"==typeof c){var d=a?a.length:0;c=0>c?Na(0,d+c):c||0}else if(c)return c=Nb(a,b),a[c]===b?c:-1;return a?e(a,b,c):-1}function Bb(a,b,c){if("number"!=typeof b&&null!=b){var d=0,f=-1,e=a?a.length:0;for(b=m.createCallback(b,c);++f<e&&
b(a[f],f,a);)d++}else d=null==b||c?1:Na(0,b);return q(a,d)}function Nb(a,b,c,d){var f=0,e=a?a.length:f;c=c?m.createCallback(c,d,1):Ob;for(b=c(b);f<e;)d=f+e>>>1,c(a[d])<b?f=d+1:e=d;return f}function Rb(a){for(var b=-1,c=a?Ga(qb(a,"length")):0,d=ya(0>c?0:c);++b<c;)d[b]=qb(a,b);return d}function Tb(a,b){for(var c=-1,d=a?a.length:0,f={};++c<d;){var e=a[c];b?f[e]=b[c]:f[e[0]]=e[1]}return f}function Cb(a,b){return Wb.fastBind||Va&&2<arguments.length?Va.call.apply(Va,arguments):u(a,b,oa.call(arguments,2))}
function Ub(a,b,c){function d(){ib(r);ib(l);m=0;r=l=null}function f(){var b=h&&(!s||1<m);d();b&&(!1!==q&&(p=new sb),g=a.apply(n,k))}function e(){d();if(h||q!==b)p=new sb,g=a.apply(n,k)}var k,g,n,m=0,p=0,q=!1,r=null,l=null,h=!0;b=Na(0,b||0);if(!0===c)var s=!0,h=!1;else K(c)&&(s=c.leading,q="maxWait"in c&&Na(b,c.maxWait||0),h="trailing"in c?c.trailing:h);return function(){k=arguments;n=this;m++;ib(l);if(!1===q)s&&2>m&&(g=a.apply(n,k));else{var c=new sb;r||s||(p=c);var d=q-(c-p);0>=d?(ib(r),r=null,p=
c,g=a.apply(n,k)):r||(r=mb(e,d))}b!==q&&(l=mb(f,b));return g}}function Kb(a){var b=oa.call(arguments,1);return mb(function(){a.apply(r,b)},1)}function Ob(a){return a}function Pb(a){$(Ua(a),function(b){var c=m[b]=a[b];m.prototype[b]=function(){var a=this.__wrapped__,b=[a];cb.apply(b,arguments);b=c.apply(m,b);return a&&"object"==typeof a&&a===b?this:new h(b)}})}function Db(){return this.__wrapped__}b=b?fa.defaults(window.Object(),b,fa.pick(window,Sa)):window;var ya=b.Array,hb=b.Boolean,sb=b.Date,Qb=
b.Function,Ma=b.Math,Lb=b.Number,tb=b.Object,Eb=b.RegExp,Qa=b.String,$b=b.TypeError,Y=[],ub=tb.prototype,nb=b._,Ea=Eb("^"+Qa(ub.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),bb=Ma.ceil,ib=b.clearTimeout,jb=Y.concat,Vb=Ma.floor,ac=Qb.prototype.toString,kb=Ea.test(kb=tb.getPrototypeOf)&&kb,va=ub.hasOwnProperty,cb=Y.push,Fb=b.setImmediate,mb=b.setTimeout,Da=ub.toString,Va=Ea.test(Va=Da.bind)&&Va,Ra=Ea.test(Ra=tb.create)&&Ra,yb=Ea.test(yb=ya.isArray)&&yb,bc=
b.isFinite,Zb=b.isNaN,vb=Ea.test(vb=tb.keys)&&vb,Na=Ma.max,Gb=Ma.min,Wa=b.parseInt,Xa=Ma.random,oa=Y.slice,Ma=Ea.test(b.attachEvent),Ma=Va&&!/\n|true/.test(Va+Ma),Ja={};Ja[B]=ya;Ja[ea]=hb;Ja[N]=sb;Ja[Q]=Qb;Ja[ca]=tb;Ja[R]=Lb;Ja[S]=Eb;Ja[A]=Qa;h.prototype=m.prototype;var Wb=m.support={};Wb.fastBind=Va&&!Ma;m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:la,variable:"",imports:{_:m}};var Ha=yb,hb=function(a){var b,c=[];if(!a||!O[typeof a])return c;for(b in a)va.call(a,
b)&&c.push(b);return c},Ka=vb?function(a){return K(a)?vb(a):[]}:hb,Xb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cc=G(Xb),Hb=function(a,b,c){var d,f=a,e=f;if(!f)return e;var k=arguments,g=0,n="number"==typeof c?2:k.length;if(3<n&&"function"==typeof k[n-2])var p=m.createCallback(k[--n-1],k[n--],2);else 2<n&&"function"==typeof k[n-1]&&(p=k[--n]);for(;++g<n;)if((f=k[g])&&O[typeof f])for(var q=-1,r=O[typeof f]&&Ka(f),l=r?r.length:0;++q<l;)d=r[q],e[d]=p?p(e[d],f[d]):f[d];return e},Ib=
function(a,b,c){var d,f=a,e=f;if(!f)return e;for(var k=arguments,g=0,n="number"==typeof c?2:k.length;++g<n;)if((f=k[g])&&O[typeof f])for(var m=-1,p=O[typeof f]&&Ka(f),q=p?p.length:0;++m<q;)d=p[m],"undefined"==typeof e[d]&&(e[d]=f[d]);return e},$a=function(a,b,c){var d;if(!a||!O[typeof a])return a;b=b&&"undefined"==typeof c?b:m.createCallback(b,c);for(d in a)if(!1===b(a[d],d,a))break;return a},ma=function(a,b,c){if(!a||!O[typeof a])return a;b=b&&"undefined"==typeof c?b:m.createCallback(b,c);for(var d=
-1,f=O[typeof a]&&Ka(a),e=f?f.length:0;++d<e&&(c=f[d],!1!==b(a[c],c,a)););return a},Jb=function(a){if(!a||Da.call(a)!=ca)return!1;var b=a.valueOf,c="function"==typeof b&&(c=kb(b))&&kb(c);return c?a==c||kb(a)==c:pb(a)},hb=ja(function Z(a,b,c){for(var d=-1,f=a?a.length:0,e=[];++d<f;){var k=a[d];c&&(k=c(k,d,a));Ha(k)?cb.apply(e,b?k:Z(k)):e.push(k)}return e}),Yb=ja(function(a,b,c){var f=-1,n=P(),m=a?a.length:0,q=[],r=!b&&m>=v&&n===e,l=c||r?k():q;if(r){var h=d(l);h?(n=g,l=h):(r=!1,l=c?l:(p(l),q))}for(;++f<
m;){var h=a[f],x=c?c(h,f,a):h;if(b?!f||l[l.length-1]!==x:0>n(l,x))(c||r)&&l.push(x),q.push(h)}r?(p(l.array),s(l)):c&&p(l);return q});Ma&&ka&&"function"==typeof Fb&&(Kb=Cb(Fb,b));Fb=8==Wa(I+"08")?Wa:function(a,b){return Wa(ra(a)?a.replace(F,""):a,b||0)};m.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}};m.assign=Hb;m.at=function(a){for(var b=-1,c=jb.apply(Y,oa.call(arguments,1)),d=c.length,f=ya(d);++b<d;)f[b]=a[c[b]];return f};m.bind=Cb;m.bindAll=function(a){for(var b=
1<arguments.length?jb.apply(Y,oa.call(arguments,1)):Ua(a),c=-1,d=b.length;++c<d;){var f=b[c];a[f]=Cb(a[f],a)}return a};m.bindKey=function(a,b){return u(a,b,oa.call(arguments,2),C)};m.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var f=a[b];f&&d.push(f)}return d};m.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}};m.countBy=function(a,b,c){var d={};b=m.createCallback(b,c);$(a,function(a,c,f){c=Qa(b(a,c,f));va.call(d,
c)?d[c]++:d[c]=1});return d};m.createCallback=function(a,b,c){if(null==a)return Ob;var d=typeof a;if("function"!=d){if("object"!=d)return function(b){return b[a]};var f=Ka(a);return function(b){for(var c=f.length,d=!1;c--&&(d=H(b[f[c]],a[f[c]],C)););return d}}return"undefined"==typeof b||da&&!da.test(ac.call(a))?a:1===c?function(c){return a.call(b,c)}:2===c?function(c,d){return a.call(b,c,d)}:4===c?function(c,d,f,e){return a.call(b,c,d,f,e)}:function(c,d,f){return a.call(b,c,d,f)}};m.debounce=Ub;
m.defaults=Ib;m.defer=Kb;m.delay=function(a,b){var c=oa.call(arguments,2);return mb(function(){a.apply(r,c)},b)};m.difference=Ab;m.filter=ha;m.flatten=hb;m.forEach=$;m.forIn=$a;m.forOwn=ma;m.functions=Ua;m.groupBy=function(a,b,c){var d={};b=m.createCallback(b,c);$(a,function(a,c,f){c=Qa(b(a,c,f));(va.call(d,c)?d[c]:d[c]=[]).push(a)});return d};m.initial=function(a,b,c){if(!a)return[];var d=0,f=a.length;if("number"!=typeof b&&null!=b){var e=f;for(b=m.createCallback(b,c);e--&&b(a[e],e,a);)d++}else d=
null==b||c?1:b||d;return q(a,0,Gb(Na(0,f-d),f))};m.intersection=function(a){for(var b=arguments,c=b.length,f=-1,n=k(),m=-1,q=P(),r=a?a.length:0,l=[],h=k();++f<c;){var x=b[f];n[f]=q===e&&(x?x.length:0)>=v&&d(f?b[f]:h)}a:for(;++m<r;){var t=n[0],x=a[m];if(0>(t?g(t,x):q(h,x))){f=c;for((t||h).push(x);--f;)if(t=n[f],0>(t?g(t,x):q(b[f],x)))continue a;l.push(x)}}for(;c--;)(t=n[c])&&s(t);p(n);p(h);return l};m.invert=G;m.invoke=function(a,b){var c=oa.call(arguments,2),d=-1,f="function"==typeof b,e=a?a.length:
0,k=ya("number"==typeof e?e:0);$(a,function(a){k[++d]=(f?b:a[b]).apply(a,c)});return k};m.keys=Ka;m.map=gb;m.max=Ga;m.memoize=function(a,b){function c(){var d=c.cache,f=w+(b?b.apply(this,arguments):arguments[0]);return va.call(d,f)?d[f]:d[f]=a.apply(this,arguments)}c.cache={};return c};m.merge=Ia;m.min=function(b,c,d){var f=Infinity,e=f;if(!c&&Ha(b)){d=-1;for(var k=b.length;++d<k;){var g=b[d];g<e&&(e=g)}}else c=!c&&ra(b)?a:m.createCallback(c,d),$(b,function(a,b,d){b=c(a,b,d);b<f&&(f=b,e=a)});return e};
m.omit=function(a,b,c){var d=P(),f="function"==typeof b,e={};if(f)b=m.createCallback(b,c);else var k=jb.apply(Y,oa.call(arguments,1));$a(a,function(a,c,g){if(f?!b(a,c,g):0>d(k,c))e[c]=a});return e};m.once=function(a){var b,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};m.pairs=function(a){for(var b=-1,c=Ka(a),d=c.length,f=ya(d);++b<d;){var e=c[b];f[b]=[e,a[e]]}return f};m.partial=function(a){return u(a,oa.call(arguments,1))};m.partialRight=function(a){return u(a,
oa.call(arguments,1),null,C)};m.pick=function(a,b,c){var d={};if("function"!=typeof b)for(var f=-1,e=jb.apply(Y,oa.call(arguments,1)),k=K(a)?e.length:0;++f<k;){var g=e[f];g in a&&(d[g]=a[g])}else b=m.createCallback(b,c),$a(a,function(a,c,f){b(a,c,f)&&(d[c]=a)});return d};m.pluck=qb;m.range=function(a,b,c){a=+a||0;c=+c||1;null==b&&(b=a,a=0);var d=-1;b=Na(0,bb((b-a)/c));for(var f=ya(b);++d<b;)f[d]=a,a+=c;return f};m.reject=function(a,b,c){b=m.createCallback(b,c);return ha(a,function(a,c,d){return!b(a,
c,d)})};m.rest=Bb;m.shuffle=function(a){var b=-1,c=a?a.length:0,d=ya("number"==typeof c?c:0);$(a,function(a){var c=Vb(Xa()*(++b+1));d[b]=d[c];d[c]=a});return d};m.sortBy=function(a,b,d){var f=-1,e=a?a.length:0,k=ya("number"==typeof e?e:0);b=m.createCallback(b,d);$(a,function(a,c,d){var e=k[++f]=n();e.criteria=b(a,c,d);e.index=f;e.value=a});e=k.length;for(k.sort(c);e--;)a=k[e],k[e]=a.value,s(a);return k};m.tap=function(a,b){b(a);return a};m.throttle=function(a,b,c){var d=!0,f=!0;!1===c?d=!1:K(c)&&
(d="leading"in c?c.leading:d,f="trailing"in c?c.trailing:f);c=n();c.leading=d;c.maxWait=b;c.trailing=f;a=Ub(a,b,c);s(c);return a};m.times=function(a,b,c){a=-1<(a=+a)?a:0;var d=-1,f=ya(a);for(b=m.createCallback(b,c,1);++d<a;)f[d]=b(d);return f};m.toArray=function(a){return a&&"number"==typeof a.length?q(a):ab(a)};m.transform=function(a,b,c,d){var f=Ha(a);b=m.createCallback(b,d,4);null==c&&(f?c=[]:(d=a&&a.constructor,c=l(d&&d.prototype)));(f?$:ma)(a,function(a,d,f){return b(c,a,d,f)});return c};m.union=
function(a){Ha(a)||(arguments[0]=a?oa.call(a):Y);return Yb(jb.apply(Y,arguments))};m.uniq=Yb;m.unzip=Rb;m.values=ab;m.where=ha;m.without=function(a){return Ab(a,oa.call(arguments,1))};m.wrap=function(a,b){return function(){var c=[a];cb.apply(c,arguments);return b.apply(this,c)}};m.zip=function(a){return a?Rb(arguments):[]};m.zipObject=Tb;m.collect=gb;m.drop=Bb;m.each=$;m.extend=Hb;m.methods=Ua;m.object=Tb;m.select=ha;m.tail=Bb;m.unique=Yb;Pb(m);m.chain=m;m.prototype.chain=function(){return this};
m.clone=Ba;m.cloneDeep=function(a,b,c){return Ba(a,!0,b,c)};m.contains=Pa;m.escape=function(a){return null==a?"":Qa(a).replace(qa,z)};m.every=Aa;m.find=Ca;m.findIndex=function(a,b,c){var d=-1,f=a?a.length:0;for(b=m.createCallback(b,c);++d<f;)if(b(a[d],d,a))return d;return-1};m.findKey=function(a,b,c){var d;b=m.createCallback(b,c);ma(a,function(a,c,f){if(b(a,c,f))return d=c,!1});return d};m.has=function(a,b){return a?va.call(a,b):!1};m.identity=Ob;m.indexOf=Sb;m.isArguments=function(a){return Da.call(a)==
wa};m.isArray=Ha;m.isBoolean=function(a){return!0===a||!1===a||Da.call(a)==ea};m.isDate=function(a){return a?"object"==typeof a&&Da.call(a)==N:!1};m.isElement=function(a){return a?1===a.nodeType:!1};m.isEmpty=function(a){var b=!0;if(!a)return b;var c=Da.call(a),d=a.length;if(c==B||c==A||c==wa||c==ca&&"number"==typeof d&&J(a.splice))return!d;ma(a,function(){return b=!1});return b};m.isEqual=H;m.isFinite=function(a){return bc(a)&&!Zb(parseFloat(a))};m.isFunction=J;m.isNaN=function(a){return E(a)&&a!=
+a};m.isNull=function(a){return null===a};m.isNumber=E;m.isObject=K;m.isPlainObject=Jb;m.isRegExp=function(a){return a?"object"==typeof a&&Da.call(a)==S:!1};m.isString=ra;m.isUndefined=function(a){return"undefined"==typeof a};m.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Na(0,d+c):Gb(c,d-1))+1);d--;)if(a[d]===b)return d;return-1};m.mixin=Pb;m.noConflict=function(){b._=nb;return this};m.parseInt=Fb;m.random=function(a,b){null==a&&null==b&&(b=1);a=+a||0;null==b?(b=
a,a=0):b=+b||0;var c=Xa();return a%1||b%1?a+Gb(c*(b-a+parseFloat("1e-"+((c+"").length-1))),b):a+Vb(c*(b-a+1))};m.reduce=xa;m.reduceRight=Za;m.result=function(a,b){var c=a?a[b]:r;return J(c)?a[b]():c};m.runInContext=t;m.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Ka(a).length};m.some=rb;m.sortedIndex=Nb;m.template=function(a,b,c){var d=m.templateSettings;a||(a="");c=Ib({},c,d);var e=Ib({},c.imports,d.imports),d=Ka(e),e=ab(e),k,g=0,n=c.interpolate||ia,p="__p += '",n=Eb((c.escape||
ia).source+"|"+n.source+"|"+(n===la?X:ia).source+"|"+(c.evaluate||ia).source+"|$","g");a.replace(n,function(b,c,d,e,n,m){d||(d=e);p+=a.slice(g,m).replace(Fa,f);c&&(p+="' +\n__e("+c+") +\n'");n&&(k=!0,p+="';\n"+n+";\n__p += '");d&&(p+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'");g=m+b.length;return b});var p=p+"';\n",q=n=c.variable;q||(n="obj",p="with ("+n+") {\n"+p+"\n}\n");p=(k?p.replace(y,""):p).replace(L,"$1").replace(M,"$1;");p="function("+n+") {\n"+(q?"":n+" || ("+n+" = {});\n")+"var __t, __p = '', __e = _.escape"+
(k?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";c="\n/*\n//@ sourceURL="+(c.sourceURL||"/lodash/template/source["+U++ +"]")+"\n*/";try{var l=Qb(d,"return "+p+c).apply(r,e)}catch(h){throw h.source=p,h;}if(b)return l(b);l.source=p;return l};m.unescape=function(a){return null==a?"":Qa(a).replace(ba,fb)};m.uniqueId=function(a){var b=++x;return Qa(null==a?"":a)+b};m.all=Aa;m.any=rb;m.detect=Ca;m.findWhere=Ca;m.foldl=xa;m.foldr=Za;m.include=
Pa;m.inject=xa;ma(m,function(a,b){m.prototype[b]||(m.prototype[b]=function(){var b=[this.__wrapped__];cb.apply(b,arguments);return a.apply(m,b)})});m.first=Mb;m.last=function(a,b,c){if(a){var d=0,f=a.length;if("number"!=typeof b&&null!=b){var e=f;for(b=m.createCallback(b,c);e--&&b(a[e],e,a);)d++}else if(d=b,null==d||c)return a[f-1];return q(a,Na(0,f-d))}};m.take=Mb;m.head=Mb;ma(m,function(a,b){m.prototype[b]||(m.prototype[b]=function(b,c){var d=a(this.__wrapped__,b,c);return null==b||c&&"function"!=
typeof b?d:new h(d)})});m.VERSION="1.3.1";m.prototype.toString=function(){return Qa(this.__wrapped__)};m.prototype.value=Db;m.prototype.valueOf=Db;$(["join","pop","shift"],function(a){var b=Y[a];m.prototype[a]=function(){return b.apply(this.__wrapped__,arguments)}});$(["push","reverse","sort","unshift"],function(a){var b=Y[a];m.prototype[a]=function(){b.apply(this.__wrapped__,arguments);return this}});$(["concat","slice","splice"],function(a){var b=Y[a];m.prototype[a]=function(){return new h(b.apply(this.__wrapped__,
arguments))}});return m}var r,u=[],m=[],x=0,C={},w=+new Date+"",v=75,z=40,y=/\b__p \+= '';/g,L=/\b(__p \+=) '' \+/g,M=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ba=/&(?:amp|lt|gt|quot|#39);/g,X=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,T=/\w*$/,la=/<%=([\s\S]+?)%>/g,da=(da=/\bthis\b/)&&da.test(t)&&da,I=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",F=RegExp("^["+I+"]*0+(?=.$)"),ia=/($^)/,qa=/[&<>"']/g,Fa=/['\n\r\t\u2028\u2029\\]/g,
Sa="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),U=0,wa="[object Arguments]",B="[object Array]",ea="[object Boolean]",N="[object Date]",Q="[object Function]",R="[object Number]",ca="[object Object]",S="[object RegExp]",A="[object String]",W={};W[Q]=!1;W[wa]=W[B]=W[ea]=W[N]=W[R]=W[ca]=W[S]=W[A]=!0;var O={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},P={"\\":"\\","'":"'","\n":"n",
"\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},ja=O[typeof exports]&&exports,ka=O[typeof module]&&module&&module.exports==ja&&module,ja=O[typeof global]&&global;!ja||ja.global!==ja&&ja.window!==ja||(window=ja);var fa=h._=t();h.each(fa,function(a,b){Object.hasOwnProperty.call(fa,a)&&!/VERSION/.test(name)&&(h[a]||(h[a]=b))})});
FD31.plugin("bootstrap",function(h){!function(e){e(function(){var g=e.support,b;a:{b=document.createElement("bootstrap");var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in a)if(void 0!==b.style[c]){b=a[c];break a}b=void 0}g.transition=b&&{end:b}})}(h);!function(e){var g=function(b){e(b).on("click",'[data-foundry-dismiss="alert"]',this.close)};g.prototype.close=function(b){function a(){f.trigger("closed").remove()}
var c=e(this),d=c.attr("data-target"),f;d||(d=(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,""));f=e(d);b&&b.preventDefault();f.length||(f=c.hasClass("alert")?c:c.parent());f.trigger(b=e.Event("close"));b.isDefaultPrevented()||(f.removeClass("in"),e.support.transition&&f.hasClass("fade")?f.on(e.support.transition.end,a):a())};e.fn.alert=function(b){return this.each(function(){var a=e(this),c=a.data("alert");c||a.data("alert",c=new g(this));"string"==typeof b&&c[b].call(a)})};e.fn.alert.Constructor=
g;e(document).on("click.alert.data-api",'[data-foundry-dismiss="alert"]',g.prototype.close)}(h);!function(e){var g=function(b,a){this.$element=e(b);this.options=e.extend({},e.fn.button.defaults,a)};g.prototype.setState=function(b){var a=this.$element,c=a.data(),d=a.is("input")?"val":"html";b+="Text";c.resetText||a.data("resetText",a[d]());a[d](c[b]||this.options[b]);setTimeout(function(){"loadingText"==b?a.addClass("disabled").attr("disabled","disabled"):a.removeClass("disabled").removeAttr("disabled")},
0)};g.prototype.toggle=function(){var b=this.$element.closest('[data-foundry-toggle="buttons-radio"]');b.hasClass("disabled")||(b&&b.find(".active").removeClass("active"),this.$element.toggleClass("active"))};e.fn.button=function(b){return this.each(function(){var a=e(this),c=a.data("button"),d="object"==typeof b&&b;c||a.data("button",c=new g(this,d));"toggle"==b?c.toggle():b&&c.setState(b)})};e.fn.button.defaults={loadingText:"loading..."};e.fn.button.Constructor=g;e(document).on("click.button.data-api",
"[data-foundry-toggle^=button]",function(b){b=e(b.target);b.hasClass("btn")||(b=b.closest(".btn"));b.button("toggle")})}(h);!function(e){var g=function(b,a){this.$element=e(b);this.options=a;this.options.slide&&this.slide(this.options.slide);"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};g.prototype={cycle:function(b){b||(this.paused=!1);this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,
this),this.options.interval));return this},to:function(b){var a=this.$element.find(".item.active"),c=a.parent().children(),a=c.index(a),d=this;if(!(b>c.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):a==b?this.pause().cycle():this.slide(b>a?"next":"prev",e(c[b]))},pause:function(b){b||(this.paused=!0);this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle());clearInterval(this.interval);this.interval=
null;return this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(b,a){var c=this.$element.find(".item.active"),d=a||c[b](),f=this.interval,k="next"==b?"left":"right",g="next"==b?"first":"last",p=this;this.sliding=!0;f&&this.pause();d=d.length?d:this.$element.find(".item")[g]();g=e.Event("slide",{relatedTarget:d[0]});if(!d.hasClass("active")){if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(g);
if(g.isDefaultPrevented())return;d.addClass(b);d[0].offsetWidth;c.addClass(k);d.addClass(k);this.$element.one(e.support.transition.end,function(){d.removeClass([b,k].join(" ")).addClass("active");c.removeClass(["active",k].join(" "));p.sliding=!1;setTimeout(function(){p.$element.trigger("slid")},0)})}else{this.$element.trigger(g);if(g.isDefaultPrevented())return;c.removeClass("active");d.addClass("active");this.sliding=!1;this.$element.trigger("slid")}f&&this.cycle();return this}}};e.fn.carousel=
function(b){return this.each(function(){var a=e(this),c=a.data("carousel"),d=e.extend({},e.fn.carousel.defaults,"object"==typeof b&&b),f="string"==typeof b?b:d.slide;c||a.data("carousel",c=new g(this,d));if("number"==typeof b)c.to(b);else if(f)c[f]();else d.interval&&c.cycle()})};e.fn.carousel.defaults={interval:5E3,pause:"hover"};e.fn.carousel.Constructor=g;e(document).on("click.carousel.data-api","[data-foundry-slide]",function(b){var a=e(this),c,d=e(a.attr("data-target")||(c=a.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,
"")),a=e.extend({},d.data(),a.data());d.carousel(a);b.preventDefault()})}(h);!function(e){var g=function(b,a){this.$element=e(b);this.options=e.extend({},e.fn.collapse.defaults,a);this.options.parent&&(this.$parent=e(this.options.parent));this.options.toggle&&this.toggle()};g.prototype={constructor:g,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var b,a,c,d;if(!this.transitioning){b=this.dimension();a=e.camelCase(["scroll",b].join("-"));if((c=this.$parent&&
this.$parent.find("> .accordion-group > .in"))&&c.length){if((d=c.data("collapse"))&&d.transitioning)return;c.collapse("hide");d||c.data("collapse",null)}this.$element[b](0);e.support.transition&&this.$element[b](this.$element[0][a]);this.transition("addClass",e.Event("bootstrap-show"),"shown")}},hide:function(){var b;this.transitioning||(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",e.Event("bootstrap-hide"),"hidden"),this.$element[b](0))},reset:function(b){var a=
this.dimension();this.$element.removeClass("collapse")[a](b||"auto")[0].offsetWidth;this.$element[null!==b?"addClass":"removeClass"]("collapse");return this},transition:function(b,a,c){var d=this,f=function(){"bootstrap-show"==a.type&&d.reset();d.transitioning=0;d.$element.trigger(c)};this.$element.trigger(a);a.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?
"hide":"show"]()}};e.fn.collapse=function(b){return this.each(function(){var a=e(this),c=a.data("collapse"),d="object"==typeof b&&b;c||a.data("collapse",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.collapse.defaults={toggle:!0};e.fn.collapse.Constructor=g;e(document).on("click.collapse.data-api","[data-foundry-toggle=collapse]",function(b){var a=e(this),c;b=a.attr("data-target")||b.preventDefault()||(c=a.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");c=e(b).data("collapse")?"toggle":a.data();
a[e(b).hasClass("in")?"addClass":"removeClass"]("collapsed");e(b).collapse(c)})}(h);!function(e){function g(c){e(a).each(function(){var a=b(e(this)),k=a.hasClass("open");a.removeClass("open");k&&a.trigger("dropdownClose",[c.target])})}function b(a){var b=a.attr("data-target");b||(b=(b=a.attr("href"))&&/#/.test(b)&&b.replace(/.*(?=#[^\s]*$)/,""));b=e(b);b.length||(b=a.parent());return b}var a="[data-foundry-toggle=dropdown]",c=function(a){var b=e(a).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",
function(){b.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(a){var c=e(this),k,n;if(!c.is(".disabled, :disabled"))return k=b(c),n=k.hasClass("open"),g(a),n||(k.toggleClass("open"),k.trigger("dropdownOpen",[a.target]),c.focus()),!1},keydown:function(a){var c,k,g;if(/(38|40|27)/.test(a.keyCode)&&(c=e(this),a.preventDefault(),a.stopPropagation(),!c.is(".disabled, :disabled"))){k=b(c);g=k.hasClass("open");if(!g||g&&27==a.keyCode)return c.click();c=e("[role=menu] li:not(.divider) a",
k);c.length&&(k=c.index(c.filter(":focus")),38==a.keyCode&&0<k&&k--,40==a.keyCode&&k<c.length-1&&k++,~k||(k=0),c.eq(k).focus())}}};e.fn.dropdown=function(a){return this.each(function(){var b=e(this),k=b.data("dropdown");k||b.data("dropdown",k=new c(this));"string"==typeof a&&k[a].call(b)})};e.fn.dropdown.Constructor=c;e(document).on("click.dropdown.data-api",g).on("click.dropdown",".dropdown_ form, .dropdown-static",function(a){a.stopPropagation()}).on("click.dropdown.data-api",a,c.prototype.toggle).on("keydown.dropdown.data-api",
a+", [role=menu]",c.prototype.keydown)}(h);!function(e){var g=function(b,a){this.options=a;this.$element=e(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};g.prototype={constructor:g,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,a=e.Event("show");this.$element.trigger(a);this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var a=
e.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body);b.$element.show();a&&b.$element[0].offsetWidth;b.$element.addClass("in").attr("aria-hidden",!1).focus();b.enforceFocus();a?b.$element.one(e.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=e.Event("hide");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,
this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;e(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var b=this;if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.modal",function(a){27==a.which&&b.hide()});
else this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,a=setTimeout(function(){b.$element.off(e.support.transition.end);b.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(a);b.hideModal()})},hideModal:function(b){this.$element.hide().trigger("hidden");this.backdrop()},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(b){var a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&
this.options.backdrop){var c=e.support.transition&&a;this.$backdrop=e('<div class="modal-backdrop '+a+'" />').appendTo(document.body);this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this));c&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");c?this.$backdrop.one(e.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,
e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}};e.fn.modal=function(b){return this.each(function(){var a=e(this),c=a.data("modal"),d=e.extend({},e.fn.modal.defaults,a.data(),"object"==typeof b&&b);c||a.data("modal",c=new g(this,d));if("string"==typeof b)c[b]();else d.show&&c.show()})};e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};e.fn.modal.Constructor=g;e(document).on("click.modal.data-api",'[data-foundry-toggle="modal"]',function(b){var a=e(this),c=a.attr("href"),d=e(a.attr("data-target")||
c&&c.replace(/.*(?=#[^\s]+$)/,"")),c=d.data("modal")?"toggle":e.extend({remote:!/#/.test(c)&&c},d.data(),a.data());b.preventDefault();d.modal(c).one("hide",function(){a.focus()})})}(h);!function(e){var g=function(b,a){this.init("tooltip",b,a)};g.prototype={constructor:g,init:function(b,a,c){this.type=b;this.$element=e(a);this.options=this.getOptions(c);this.enabled=!0;if("click"==this.options.trigger)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else"manual"!=
this.options.trigger&&(b="hover"==this.options.trigger?"mouseenter":"focus",a="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(b+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=e.extend({},e.fn[this.type].defaults,b,this.$element.data());b.delay&&"number"==
typeof b.delay&&(b.delay={show:b.delay,hide:b.delay});return b},enter:function(b){var a=e(b.currentTarget)[this.type](this._options).data(this.type);if(!a.options.delay||!a.options.delay.show)return a.show();clearTimeout(this.timeout);a.hoverState="in";this.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show)},leave:function(b){var a=e(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!a.options.delay||!a.options.delay.hide)return a.hide();
a.hoverState="out";this.timeout=setTimeout(function(){"out"==a.hoverState&&a.hide()},a.options.delay.hide)},show:function(){var b,a,c,d,f,k,g;if(this.hasContent()&&this.enabled){b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");k="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement;a=/in/.test(k);b.detach().css({top:0,left:0,display:"block"});switch(this.options.container||"parent"){case "parent":b.insertAfter(this.$element);
break;case "body":b.appendTo(document.body);break;default:c=e(this.options.container),c.length?b.appendTo(c):b.insertAfter(this.$element)}c=this.getPosition(a);d=b[0].offsetWidth;f=b[0].offsetHeight;switch(a?k.split(" ")[1]:k){case "bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case "top":g={top:c.top-f,left:c.left+c.width/2-d/2};break;case "left":g={top:c.top+c.height/2-f/2,left:c.left-d};break;case "right":g={top:c.top+c.height/2-f/2,left:c.left+c.width}}b.offset(g).addClass(k).addClass("in")}},
setContent:function(){var b=this.tip(),a=this.getTitle();b.find(".tooltip-inner")[this.options.html?"html":"text"](a);b.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){a.off(e.support.transition.end).detach()},500);a.one(e.support.transition.end,function(){clearTimeout(b);a.detach()})}var a=this.tip();a.removeClass("in");e.support.transition&&this.$tip.hasClass("fade")?b():a.detach();return this},fixTitle:function(){var b=this.$element;(b.attr("title")||
"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return e.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var b=this.$element,a=this.options;return b.attr("data-original-title")||("function"==typeof a.title?a.title.call(b[0]):a.title)},tip:function(){return this.$tip=
this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){b=e(b.currentTarget)[this.type](this._options).data(this.type);b[b.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};e.fn.tooltip=function(b){return this.each(function(){var a=
e(this),c=a.data("tooltip"),d="object"==typeof b&&b;c||a.data("tooltip",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.tooltip.Constructor=g;e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1,container:"parent"}}(h);!function(e){var g=function(b,a){this.init("popover",b,a)};g.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:g,
setContent:function(){var b=this.tip(),a=this.getTitle(),c=this.getContent();b.find(".popover-title")[this.options.html?"html":"text"](a);b.find(".popover-content > *")[this.options.html?"html":"text"](c);b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var b=this.$element,a=this.options;return b.attr("data-content")||("function"==typeof a.content?a.content.call(b[0]):a.content)},tip:function(){this.$tip||(this.$tip=
e(this.options.template));return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});e.fn.popover=function(b){return this.each(function(){var a=e(this),c=a.data("popover"),d="object"==typeof b&&b;c||a.data("popover",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.popover.Constructor=g;e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover popover-fd"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(h);
!function(e){function g(b,a){var c=e.proxy(this.process,this),d=e(b).is("body")?e(window):e(b),f;this.options=e.extend({},e.fn.scrollspy.defaults,a);this.$scrollElement=d.on("scroll.scroll-spy.data-api",c);this.selector=(this.options.target||(f=e(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=e("body");this.refresh();this.process()}g.prototype={constructor:g,refresh:function(){var b=this;this.offsets=e([]);this.targets=e([]);this.$body.find(this.selector).map(function(){var a=
e(this),a=a.data("target")||a.attr("href"),b=/^#\w/.test(a)&&e(a);return b&&b.length&&[[b.position().top,a]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]);b.targets.push(this[1])})},process:function(){var b=this.$scrollElement.scrollTop()+this.options.offset,a=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),c=this.offsets,d=this.targets,f=this.activeTarget,e;if(b>=a)return f!=(e=d.last()[0])&&this.activate(e);for(e=
c.length;e--;)f!=d[e]&&b>=c[e]&&(!c[e+1]||b<=c[e+1])&&this.activate(d[e])},activate:function(b){this.activeTarget=b;e(this.selector).parent(".active").removeClass("active");b=e(this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]').parent("li").addClass("active");b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active"));b.trigger("activate")}};e.fn.scrollspy=function(b){return this.each(function(){var a=e(this),c=a.data("scrollspy"),d="object"==typeof b&&b;
c||a.data("scrollspy",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.scrollspy.Constructor=g;e.fn.scrollspy.defaults={offset:10};e(window).on("load",function(){e('[data-foundry-spy="scroll"]').each(function(){var b=e(this);b.scrollspy(b.data())})})}(h);!function(e){var g=function(b){this.element=e(b)};g.prototype={constructor:g,show:function(){var b=this.element,a=b.closest("ul:not(.dropdown-menu)"),c=b.attr("data-target"),d,f;c||(c=(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]*$)/,""));b.parent("li").hasClass("active")||
(d=a.find(".active:last a")[0],f=e.Event("show",{relatedTarget:d}),b.trigger(f),f.isDefaultPrevented()||(c=e(c),this.activate(b.parent("li"),a),this.activate(c,c.parent(),function(){b.trigger({type:"shown",relatedTarget:d})})))},activate:function(b,a,c){function d(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");k?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");
c&&c()}var f=a.find("> .active"),k=c&&e.support.transition&&f.hasClass("fade");k?f.one(e.support.transition.end,d):d();f.removeClass("in")}};e.fn.tab=function(b){return this.each(function(){var a=e(this),c=a.data("tab");c||a.data("tab",c=new g(this));if("string"==typeof b)c[b]()})};e.fn.tab.Constructor=g;e(document).on("click.tab.data-api",'[data-foundry-toggle="tab"], [data-foundry-toggle="pill"]',function(b){b.preventDefault();e(this).tab("show")})}(h);!function(e){var g=function(b,a){this.$element=
e(b);this.options=e.extend({},e.fn.typeahead.defaults,a);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=e(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=!1;this.listen()};g.prototype={constructor:g,select:function(){var b=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(b)).change();
return this.hide()},updater:function(b){return b},show:function(){var b=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:b.top+b.height,left:b.left});this.$menu.show();this.shown=!0;return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(b){this.query=this.$element.val();return!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,
this)):this.source)?this.process(b):this},process:function(b){var a=this;b=e.grep(b,function(b){return a.matcher(b)});b=this.sorter(b);return b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(b){return~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(b){for(var a=[],c=[],d=[],f;f=b.shift();)f.toLowerCase().indexOf(this.query.toLowerCase())?~f.indexOf(this.query)?c.push(f):d.push(f):a.push(f);return a.concat(c,d)},highlighter:function(b){var a=
this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return b.replace(RegExp("("+a+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var a=this;b=e(b).map(function(b,d){b=e(a.options.item).attr("data-value",d);b.find("a").html(a.highlighter(d));return b[0]});b.first().addClass("active");this.$menu.html(b);return this},next:function(b){b=this.$menu.find(".active").removeClass("active").next();b.length||(b=e(this.$menu.find("li")[0]));b.addClass("active")},prev:function(b){b=
this.$menu.find(".active").removeClass("active").prev();b.length||(b=this.$menu.find("li").last());b.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",e.proxy(this.keydown,this));this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},eventSupported:function(b){var a=b in this.$element;
a||(this.$element.setAttribute(b,"return;"),a="function"===typeof this.$element[b]);return a},move:function(b){if(this.shown){switch(b.keyCode){case 9:case 13:case 27:b.preventDefault();break;case 38:b.preventDefault();this.prev();break;case 40:b.preventDefault(),this.next()}b.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=!~e.inArray(b.keyCode,[40,38,9,13,27]);this.move(b)},keypress:function(b){this.suppressKeyPressRepeat||this.move(b)},keyup:function(b){switch(b.keyCode){case 40:case 38:case 16:case 17:case 18:break;
case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}b.stopPropagation();b.preventDefault()},blur:function(b){var a=this;setTimeout(function(){a.hide()},150)},click:function(b){b.stopPropagation();b.preventDefault();this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active");e(b.currentTarget).addClass("active")}};e.fn.typeahead=function(b){return this.each(function(){var a=e(this),c=a.data("typeahead"),
d="object"==typeof b&&b;c||a.data("typeahead",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};e.fn.typeahead.Constructor=g;e(document).on("focus.typeahead.data-api",'[data-foundry-provide="typeahead"]',function(b){var a=e(this);a.data("typeahead")||(b.preventDefault(),a.typeahead(a.data()))})}(h);!function(e){var g=function(b,a){this.options=e.extend({},e.fn.affix.defaults,
a);this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this));this.$element=e(b);this.checkPosition()};g.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=e(document).height(),a=this.$window.scrollTop(),c=this.$element.offset(),d=this.options.offset,f=d.bottom,k=d.top;"object"!=typeof d&&(f=k=d);"function"==typeof k&&(k=d.top());"function"==typeof f&&
(f=d.bottom());b=null!=this.unpin&&a+this.unpin<=c.top?!1:null!=f&&c.top+this.$element.height()>=b-f?"bottom":null!=k&&a<=k?"top":!1;this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?c.top-a:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(b?"-"+b:"")))}};e.fn.affix=function(b){return this.each(function(){var a=e(this),c=a.data("affix"),d="object"==typeof b&&b;c||a.data("affix",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.affix.Constructor=g;e.fn.affix.defaults=
{offset:0};e(window).on("load",function(){e('[data-foundry-spy="affix"]').each(function(){var b=e(this),a=b.data();a.offset=a.offset||{};a.offsetBottom&&(a.offset.bottom=a.offsetBottom);a.offsetTop&&(a.offset.top=a.offsetTop);b.affix(a)})})}(h);!function(e){var g=function(b,a){this.$element=e(b);this.$note=e('<div class="alert"></div>');this.options=e.extend(!0,e.fn.notify.defaults,a);this.options.transition?"fade"==this.options.transition?this.$note.addClass("in").addClass(this.options.transition):
this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in");this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success");this.options.message||""===this.$element.data("message")?"object"===typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message)):this.$note.html(this.$element.data("message"));
if(this.options.closable)var c=e('<a class="close pull-right" href="javascript: void(0);">&times;</a>');e(c).on("click",e.proxy(onClose,this));this.$note.prepend(c);return this};onClose=function(){this.options.onClose();e(this.$note).remove();this.options.onClosed()};g.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3E3).fadeOut("slow",e.proxy(onClose,this));this.$element.append(this.$note);this.$note.alert()};g.prototype.hide=function(){this.options.fadeOut.enabled?
this.$note.delay(this.options.fadeOut.delay||3E3).fadeOut("slow",e.proxy(onClose,this)):onClose.call(this)};e.fn.notify=function(b){return new g(this,b)};e.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3E3},message:null,onClose:function(){},onClosed:function(){}}}(h)});
FD31.plugin("responsive",function(h){h.responsive=function(a,c){return new b(a,c)};h.fn.responsive=function(a){a&&h.responsive(this,{elementWidth:function(a){return a.outerWidth(!0)},conditions:a});return this};var e=h(window),g=h.isFunction,b=function(a,b){var d=this;a=h(a);var f=a.data("$responsive");f&&f.destroy();h.extend(d,{elem:a,options:b,conditions:h.sortBy(h.makeArray(b.conditions),function(a){return a.at}),event:"resize.responsive"+h.uid(),handler:h.debounce(function(){d.set()},250)});delete b.conditions;
a.data("$responsive",d);h(function(){e.on(d.event,d.handler);d.set()});h(window).load(function(){d.set()})};h.extend(b.prototype,{set:function(){var a=this,b=a.options.elementWidth;a.elem.each(function(){var d=h(this),f=g(b)?b(d):b;a.removeCondition(d.data("currentCondition"),d);h.each(a.conditions,function(b,c){if(f<=c.at)return a.applyCondition(c,d),!1})})},applyCondition:function(a,b){var d,f,e,n;(d=a.switchTo)&&b.addClass(d);(f=a.alsoSwitch)&&h.each(f,function(a,b){h(a).addClass(b)});(e=a.switchStylesheet)&&
h.each(h.makeArray(e),function(a,b){1>h('link[href$="'+b+'"]').length&&h("<link/>").attr({rel:"stylesheet",type:"text/css",href:b}).appendTo("head")});(n=a.whenApplied)&&g(n)&&n();b.data("currentCondition",a).trigger("responsive",[a])},removeCondition:function(a,b){if(a){var d,f,e,n;(d=a.switchTo)&&b.removeClass(d);(f=a.alsoSwitch)&&h.each(f,function(a,b){h(a).removeClass(b)});(e=a.switchStylesheet)&&h.each(h.makeArray(e),function(a,b){h('link[href$="'+b+'"]').remove()});(n=a.whenRemoved)&&g(n)&&
n();b.removeData("currentCondition")}},resetToDefault:function(a){var b=this,d=b.elem;h.each(b.conditions,function(f,e){a&&f==a||b.removeCondition(e,d)})},destroy:function(){e.off(this.event);var a=this;a.elem.each(function(){var b=h(this);a.removeCondition(b.data("currentCondition"),b)})}})});
FD31.plugin("utils",function(h){h.IE=function(){if(-1!=navigator.appVersion.indexOf("MSIE 10"))return 10;for(var e=3,g=document.createElement("div"),b=g.getElementsByTagName("i");e++,g.innerHTML="\x3c!--[if gt IE "+e+"]><i></i><![endif]--\x3e",b[0];);return 4<e?e:void 0}();h.uid=function(e,g){return(e?e:"")+Math.random().toString().replace(".","")+(g?g:"")};h.isDeferred=function(e){return e&&h.isFunction(e.always)};h.distinct=function(e){var g=h.unique;if(!(1>e.length)){if(e[0].nodeType)return g.apply(this,
arguments);if("object"==typeof e[0]){var b=Math.random(),a=[];h.each(e,function(c){e[c][b]||(a.push(e[c]),e[c][b]=!0)});h.each(a,function(c){delete a[c][b]});return a}return h.grep(e,function(a,b){return h.inArray(a,e)===b})}};h.trimSeparators=function(e,g,b){e=e.replace(RegExp("^["+g+"\\s]+|["+g+",\\s]+$","g"),"").replace(RegExp(g+"["+g+"\\s]*"+g,"g"),g).replace(RegExp("[\\s]+"+g,"g"),g).replace(RegExp(g+"[\\s]+","g"),g);b&&(e=h.distinct(e.split(g)).join(g));return e};h.isNumeric=function(e){return!isNaN(parseFloat(e))&&
isFinite(e)};h.Number={rotate:function(e,g,b,a){void 0===a&&(a=0);e+=a;e<g?e+=b+1:e>b&&(e-=b+1);return e}};h.fn.stretchToFit=function(){return h.each(this,function(){var e=h(this);e.css("width","100%").css("width",2*e.width()-e.outerWidth(!0)-parseInt(e.css("borderLeftWidth"))-parseInt(e.css("borderRightWidth")))})};h.fn.serializeObject=function(){var e={};h.each(h(this).serializeArray(),function(g,b){e.hasOwnProperty(b.name)?(h.isArray(e[b.name])||(e[b.name]=[e[b.name]]),e[b.name].push(b.value)):
e[b.name]=b.value});return e};h.fn.serializeJSON=function(){return JSON.stringify(h(this).serializeObject())};h.toHTML=function(e){return h("<div>").html(e).html()};h.fn.toHTML=function(){return h.toHTML(this.clone())};(function(){var e=function(e){this.items=e;this.start=0;this.end=e.length-1;this.node=null;this.stopped=!1};h.extend(e.prototype,{isLooping:function(){return this.stopped?!1:1<Math.abs(this.start-this.end)?(this.node=Math.floor((this.start+this.end)/2),!0):!1},flip:function(e){e?this.end=
this.node-1:this.start=this.node+1},stop:function(){this.stop=!0}});h.Bloop=function(g){return new e(g)}})();h.remap=function(e,g,b){h.each(b,function(a,b){e[b]=g[b]});return obj};h.deletes=function(e,g){h.each(g,function(b,a){delete e[a]})};(function(){var e=function(e){this.threads=[];this.threadCount=0;this.threadLimit=e.threadLimit||1;this.threadDelay=e.threadDelay||0};h.extend(e.prototype,{add:function(e,b){h.isFunction(e)&&(e.type=b||"normal","deferred"==b&&(e.deferred=h.Deferred().always(h.proxy(this.next,
this))),this.threads.push(e),this.run())},addDeferred:function(e){return this.add(e,"deferred")},next:function(){this.threadCount--;this.run()},run:function(){var e=this;setTimeout(function(){if(!(1>e.threads.length)&&e.threadCount<e.threadLimit){e.threadCount++;var b=e.threads.shift();try{b.call(b,b.deferred)}catch(a){console.error(a)}!b.deferred&&e.next()}},e.threadDelay)}});h.Threads=function(g){return new e(g)}})();(function(){var e=h.isFunction,g=function(){this.lastId=0};g.prototype.queue=function(b){var a=
this,c=h.uid();a.lastId=c;return function(){if(a.lastId===c){var d=arguments,d=e(b)?b.apply(this,d):d;return e(a.fn)?a.fn.apply(this,d):d}}};h.Enqueue=function(b){var a=new g;h.isFunction(b)&&(a.fn=b);b=h.proxy(a.queue,a);b.reset=function(){a.lastId=0};return b}})();(function(){var e=["on","off","fire"],g=function(b){this.fnList={};this.events={};this.mode=b};h.extend(g.prototype,{createEvent:function(b){return this.events[b]=h.Callbacks(this.mode)},on:function(b,a){if(!b||!h.isFunction(a))return this;
var c=this.fnList;(c[b]||(c[b]=[])).push(a);c=b.split(".")[0];(this.events[c]||this.createEvent(c)).add(a);return this},off:function(b){if(!b)return this;var a=b.split(".")[0],c=this.events[a];if(!c)return this;var d=function(a){h.each(a,function(a,b){c.remove(b)})};a!==b?h.each(this.fnList,function(b,c){-1<b.indexOf(a)&&d(c)}):d(this.fnList[b]);return this},fire:function(b){var a=this.events[b];if(a)return a.fire.apply(a,h.makeArray(arguments).slice(1)),this},destroy:function(){for(name in this.events)this.events[name].disable()}});
h.eventable=function(b,a){var c=b.___eventable;if(c&&"destroy"===a)return c.destroy(),h.deletes(b,e),delete b.___eventable;c=b.___eventable=new g(a);b.on=h.proxy(c.on,c);b.off=h.proxy(c.off,c);b.fire=h.proxy(c.fire,c);return b}})();h.Chunk=function(e,g){h.isArray(e)&&(e=[]);g=h.extend({},{size:256,every:1E3},g);var b=h.extend(h.Deferred(),{size:g.size,every:g.every,from:0,to:e.length,process:function(a){b.process.fn=a;return b},chunkStart:function(a){b.chunkStart.fn=a;return b},chunkEnd:function(a){b.chunkEnd.fn=
a;return b},start:function(){b.stopped=!1;b.iterate();return b},iterate:function(){if(!b.stopped){var a=b.process.fn;if(a){b.to=from.size+b.size;var c=e.length;b.to>c&&(b.to=c);var c=b.from,d=b.to;for(b.chunkStart.fn&&b.chunkStart.fn.call(b,c,d);b.from<b.to&&!b.stopped;)a.call(b,e[b.from]),b.from++;b.chunkEnd.fn&&b.chunkEnd.fn.call(b,c,d);b.completed=b.from>=e.length-1;b.completed?b.resolveWith(b):b.nextIteration=setTimeout(b.iterate,b.every);return b}}},pause:function(){b.stopped=!0;clearTimeout(b.nextIteration);
return b},restart:function(){if("rejected"===b.state())return b;b.from=0;b.start();return b},stop:function(){b.pause();b.rejectWith(b,[b.from]);return b}});return b};h.fn.disabled=function(e){return void 0===e?this.is(":disabled")||this.hasClass("disabled"):this.prop("disabled",!!e).toggleClass("disabled",!!e)};h.fn.enabled=function(e){return void 0===e?!this.disabled():this.disabled(!e)};(function(){var e=h.Ajax=function(g){var b=h.Deferred(),a=arguments;h.isPlainObject(g)&&h.isFunction(g.beforeCreate)&&
g.beforeCreate(b);e.queue.addDeferred(function(c){b.xhr=h.ajax.apply(null,a).pipe(b.resolve,b.reject,b.notify);setTimeout(c.resolve,e.requestInterval)});return b};e.queue=h.Threads({threadLimit:1});e.requestInterval=1200})();h.callback=function(e,g){if(h.isFunction(e)){var b=h.uid("cb");window[b]=function(){g||delete window[b];return e.apply(null,arguments)};return b}if(h.isString(e))switch(e){case "destroy":b=g,delete window[b]}};h.fn.visible=function(e){var g=h(this),b=h(window);if(!(1>g.length)){var a=
b.scrollTop(),b=a+b.height(),c=g.offset().top,g=c+g.height();return(!0===e?c:g)<=b&&(!0===e?g:c)>=a}};h.fn.selectAll=function(){return this.each(function(){this.select()})};h.fn.unselect=function(){return this.each(function(){var e=this.value;this.value+=" ";this.value=e})};h.fn.addTransitionClass=function(e,g){var b=this.addClass(e);setTimeout(function(){b.removeClass(e)},g||0);return this};h.fn.switchClass=function(e,g){g=g||"-";var b=e.split(g)[0]+g,a=b.length;return this.each(function(){var c=
h(this),d=h.map(c.attr("class").split(" "),function(c){return c.slice(0,a)==b||""==c?null:c});d.push(e);c.attr("class",d.join(" "))})};h.sanitizeHTML=function(e){return h(h.parseHTML(e,document,!0)).toHTML()};h.buildHTML=function(e,g){if(e instanceof h)return e;e=h.trim(e);var b=[],a=h.buildFragment([e],document,b),a=h.merge([],a.childNodes);if(!g&&0<b.length){var c=document.createElement("script");c.text=h.callback(function(){h(b).remove()})+"();";for(var d=a.length-1,f,k;(f=a[d--])&&("SCRIPT"===
f.nodeName?k=a.push(c):1===f.nodeType&&(k=f.appendChild(c)),!k););k||a.push(c);b.push(c)}return h(a)};h.fn.filterBy=function(e,g,b){b=b||"=";e="[data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+b+g+"]";return this.filter(e)};h.intersects=function(e,g){h.isArray(g)&&(g={top:g.y,left:g.x,bottom:g.y,right:g.x});return g.left<=e.right&&e.left<=g.right&&g.top<=e.bottom&&e.top<=g.bottom};h.fn.intersectsWith=function(e,g,b,a){var c=this.offset(),c={top:c.top,left:c.left,bottom:c.top+(sourceHeight=
this.height()),right:c.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight};e={top:e,left:g,bottom:e+(a||(a=0)),right:g+(b||(b=0)),width:b,height:a};return h.intersects(c,e)?{reference:c,subject:e}:!1};h.download=function(e){return h("<iframe>").hide().appendTo("body").bind("load",function(){h(this).remove()}).attr("src",e)}});
FD31.plugin("uri",function(h){h.isUrl=function(b){return/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(b)};var e=function(b){var a=function(a){var b=[],c,d,f,e;if("undefined"===typeof a||null===a||""===a)return b;0===a.indexOf("?")&&(a=a.substring(1));c=a.toString().split(/[&;]/);for(a=0;a<c.length;a++)d=c[a],f=d.split("="),e=f[0],d=-1===d.indexOf("=")?null:null===f[1]?"":f[1],b.push([e,d]);return b}(b),c=function(a){a=decodeURIComponent(a);return a=a.replace("+",
" ")},d=function(b,d){var f=[],e,g,h,r;for(e=0;e<a.length;e++)g=a[e],h=c(g[0])===c(b),r=c(g[1])===c(d),(1===arguments.length&&!h||2===arguments.length&&!h&&!r)&&f.push(g);a=f;return this},f=function(b,c,d){3===arguments.length&&-1!==d?(d=Math.min(d,a.length),a.splice(d,0,[b,c])):0<arguments.length&&a.push([b,c]);return this};return{getParamValue:function(b){var d,f;for(f=0;f<a.length;f++)if(d=a[f],c(b)===c(d[0]))return d[1]},getParamValues:function(b){var d=[],f,e;for(f=0;f<a.length;f++)e=a[f],c(b)===
c(e[0])&&d.push(e[1]);return d},deleteParam:d,addParam:f,replaceParam:function(b,e,g){var h=-1,q,t;if(3===arguments.length){for(q=0;q<a.length;q++)if(t=a[q],c(t[0])===c(b)&&decodeURIComponent(t[1])===c(g)){h=q;break}d(b,g).addParam(b,e,h)}else{for(q=0;q<a.length;q++)if(t=a[q],c(t[0])===c(b)){h=q;break}d(b);f(b,e,h)}return this},toString:function(){var b="",c,d;for(c=0;c<a.length;c++)d=a[c],0<b.length&&(b+="&"),b=null===d[1]?b+d[0]:b+d.join("=");return 0<b.length?"?"+b:b}}},g=function(b){var a=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,
c=function(a){var b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a);for(var c={},d=14;d--;)c[b[d]]=a[d]||"";c.queryKey={};c[b[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c.queryKey[b]=d)});return c}(b||""),d=new e(c.query),
f=function(a){"undefined"!==typeof a&&(c.protocol=a);return c.protocol},k=null,n=function(a){"undefined"!==typeof a&&(k=a);return null===k?-1!==c.source.indexOf("//"):k},p=function(a){"undefined"!==typeof a&&(c.userInfo=a);return c.userInfo},h=function(a){"undefined"!==typeof a&&(c.host=a);return c.host},q=function(a){"undefined"!==typeof a&&(c.port=a);return c.port},t=function(a){"undefined"!==typeof a&&(c.path=a);return c.path},r=function(a){"undefined"!==typeof a&&(d=new e(a));return d},u=function(a){"undefined"!==
typeof a&&(c.anchor=a);return c.anchor},m=function(){var a="",b=function(a){return null!==a&&""!==a};b(f())?(a+=f(),f().indexOf(":")!==f().length-1&&(a+=":"),a+="//"):n()&&b(h())&&(a+="//");b(p())&&b(h())&&(a+=p(),p().indexOf("@")!==p().length-1&&(a+="@"));b(h())&&(a+=h(),b(q())&&(a+=":"+q()));b(t())?a+=t():b(h())&&(b(r().toString())||b(u()))&&(a+="/");b(r().toString())&&(0!==r().toString().indexOf("?")&&(a+="?"),a+=r().toString());b(u())&&(0!==u().indexOf("#")&&(a+="#"),a+=u());return a};return{protocol:f,
hasAuthorityPrefix:n,userInfo:p,host:h,port:q,path:t,query:r,anchor:u,setProtocol:function(a){f(a);return this},setHasAuthorityPrefix:function(a){n(a);return this},setUserInfo:function(a){p(a);return this},setHost:function(a){h(a);return this},setPort:function(a){q(a);return this},setPath:function(a){t(a);return this},setQuery:function(a){r(a);return this},setAnchor:function(a){u(a);return this},getQueryParamValue:function(a){return r().getParamValue(a)},getQueryParamValues:function(a){return r().getParamValues(a)},
deleteQueryParam:function(a,b){2===arguments.length?r().deleteParam(a,b):r().deleteParam(a);return this},addQueryParam:function(a,b,c){3===arguments.length?r().addParam(a,b,c):r().addParam(a,b);return this},replaceQueryParam:function(a,b,c){3===arguments.length?r().replaceParam(a,b,c):r().replaceParam(a,b);return this},extract:function(c){var d=b.match(a)||[];return void 0===c?d:d[c]||""},toPath:function(a){if(void 0===a)return c.path;if("/"==a.substring(0,1))return c.path=a;var b=c.path.split("/");
a=a.split("/");""===b.slice(-1)[0]&&b.pop();for(var d;d=a.shift();)switch(d){case "..":1<b.length&&b.pop();break;case ".":break;default:b.push(d)}c.path=b.join("/");return this},toString:m,clone:function(){return new g(m())}}};h.uri=function(b){return new g(b)}});
FD31.plugin("mvc",function(h){(function(){var e={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},g=function(a,b,c){return void 0!==a[b]?a[b]:c&&(a[b]={})},b=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},a,c=h.String=h.extend(h.String||{},{getObject:a=function(a,c,k){a=a?a.split(e.dot):[];var n=a.length,p,s,q,t=0;c=h.isArray(c)?c:[c||window];if(0==n)return c[0];for(;p=c[t++];){for(q=0;q<
n-1&&b(p);q++)p=g(p,a[q],k);if(b(p)&&(s=g(p,a[q],k),void 0!==s))return!1===k&&delete p[a[q]],s}},capitalize:function(a,b){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(a){a=c.classize(a);return a.charAt(0).toLowerCase()+a.substr(1)},classize:function(a,b){for(var k=a.split(e.undHash),g=0;g<k.length;g++)k[g]=c.capitalize(k[g]);return k.join(b||"")},niceName:function(a){return c.classize(a," ")},underscore:function(a){return a.replace(e.colons,"/").replace(e.words,"$1_$2").replace(e.lowUp,
"$1_$2").replace(e.dash,"_").toLowerCase()},sub:function(b,c,k){var g=[];g.push(b.replace(e.replacer,function(b,d){var e=a(b,c,"boolean"==typeof k?!k:k)||a(d,c,"boolean"==typeof k?!k:k),h=typeof e;if("object"!==h&&"function"!==h||null===h)return""+e;g.push(e);return""}));return 1>=g.length?g[0]:g},_regs:e})})();(function(){h.String.rsplit=function(e,g){for(var b=g.exec(e),a=[],c;null!==b;)c=b.index,0!==c&&(a.push(e.substring(0,c)),e=e.slice(c)),a.push(b[0]),e=e.slice(b[0].length),b=g.exec(e);""!==
e&&a.push(e);return a}})();(function(){var e=/^\d+$/,g=/([^\[\]]+)|(\[\])/g,b=/\+/g,a=/([^?#]*)(#.*)?$/;h.String=h.extend(h.String||{},{deparam:function(c){if(!c||!a.test(c))return{};var d={};c=c.split("&");for(var f,k=0;k<c.length;k++){f=d;var n=c[k].split("=");2!=n.length&&(n=[n[0],n.slice(1).join("=")]);for(var p=decodeURIComponent(n[0].replace(b," ")),n=decodeURIComponent(n[1].replace(b," ")),p=p.match(g),h=0;h<p.length-1;h++){var q=p[h];f[q]||(f[q]=e.test(p[h+1])||"[]"==p[h+1]?[]:{});f=f[q]}lastPart=
p[p.length-1];"[]"==lastPart?f.push(n):f[lastPart]=n}return d}})})();(function(){var e=h.cleanData;h.cleanData=function(g){for(var b=0,a;void 0!==(a=g[b]);b++)h(a).triggerHandler("destroyed");e(g)}})();(function(){var e=h.fn.closest;h.fn.closest=function(g,b){var a={},c,d,f,k,n=!0,p=g;"string"==typeof g&&(p=[g]);h.each(p,function(b,c){if(0==c.indexOf(">")){if(-1!=c.indexOf(" "))throw" closest does not work with > followed by spaces!";a[p[b]=c.substr(1)]=c;"string"==typeof g&&(g=c.substr(1));n=!1}});
c=e.call(this,g,b);if(n)return c;for(f=0;f<c.length;){d=c[f];k=d.selector;if(void 0!==a[k]&&(d.selector=a[k],a[k]=!1,"string"!==typeof d.selector||d.elem.parentNode!==b)){c.splice(f,1);continue}f++}return c}})();(function(){h.cookie=function(e,g,b){if("undefined"!=typeof g){b=b||{};null===g&&(g="",b.expires=-1);"object"==typeof g&&jQuery.toJSON&&(g=jQuery.toJSON(g));var a="";b.expires&&("number"==typeof b.expires||b.expires.toUTCString)&&("number"==typeof b.expires?(a=new Date,a.setTime(a.getTime()+
864E5*b.expires)):a=b.expires,a="; expires="+a.toUTCString());var c=b.path?"; path="+b.path:"",d=b.domain?"; domain="+b.domain:"";b=b.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(g),a,c,d,b].join("")}else{g=null;if(document.cookie&&""!=document.cookie)for(b=document.cookie.split(";"),a=0;a<b.length;a++)if(c=jQuery.trim(b[a]),c.substring(0,e.length+1)==e+"="){g=decodeURIComponent(c.substring(e.length+1));break}if(jQuery.evalJSON&&g&&g.match(/^\s*\{/))try{g=jQuery.evalJSON(g)}catch(f){}return g}}})();
(function(){var e=!1,g=h.makeArray,b=h.isFunction,a=h.isArray,c=h.extend,d=h.String.getObject,f=function(a,b){return a.concat(g(b))},k=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,n=function(a,c,d){d=d||a;for(var f in a)d[f]=b(a[f])&&b(c[f])&&k.test(a[f])?function(a,b){return function(){var d=this._super,f;this._super=c[a];f=b.apply(this,arguments);this._super=d;return f}}(f,a[f]):a[f]};clss=h.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)};c(clss,{proxy:function(b){var c=g(arguments),
d;b=c.shift();a(b)||(b=[b]);d=this;return function(){for(var e=f(c,arguments),k,g=b.length,n=0,h;n<g;n++)if(h=b[n])(k="string"==typeof h)&&d._set_called&&(d.called=h),e=(k?d[h]:h).apply(d,e||[]),n<g-1&&(e=!a(e)||e._use_call?[e]:e);return e}},newInstance:function(){var b=this.rawInstance(),c;b.setup&&(c=b.setup.apply(b,arguments));b.init&&b.init.apply(b,a(c)?c:arguments);return b},setup:function(a,b){this.defaults=c(!0,{},a.defaults,this.defaults);return arguments},rawInstance:function(){e=!0;var a=
new this;e=!1;return a},extend:function(a,b,k){function g(){if(!e)return this.constructor!==g&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}"string"!=typeof a&&(k=b,b=a,a=null);k||(k=b,b=null);k=k||{};var r=this.prototype,u,m,x,C;e=!0;C=new this;e=!1;n(k,r,C);for(u in this)this.hasOwnProperty(u)&&(g[u]=this[u]);n(b,this,g);if(a){var w;b&&b.root&&(w=b.root,h.isString(w)&&(w=d(w,window,!0)));x=a.split(/\./);m=x.pop();x=
w=d(x.join("."),w||window,!0);c(!0,g,w[m]);w[m]=g}c(g,{prototype:C,namespace:x,shortName:m,constructor:g,fullName:a});g.prototype.Class=g.prototype.constructor=g;m=g.setup.apply(g,f([this],arguments));g.init&&g.init.apply(g,m||f([this],arguments));return g}});clss.callback=clss.prototype.callback=clss.prototype.proxy=clss.proxy})();(function(){var e=function(b,c,d){var f,e=b.bind&&b.unbind?b:h(a(b)?[b]:b);0===c.indexOf(">")&&(c=c.substr(1),f=function(a){a.target===b&&d.apply(this,arguments)});e.bind(c,
f||d);return function(){e.unbind(c,f||d);b=c=d=f=null}},g=h.makeArray,b=h.isArray,a=h.isFunction,c=h.isString,d=h.extend,f=h.String,k=h.each,n=f.getObject,p=Array.prototype.slice,s=function(b,c,d,f){0===c.indexOf(">")&&(c=(b.data("directSelector")+" "||"")+c);var e=b.delegate&&b.undelegate?b:h(a(b)?[b]:b);e.delegate(c,d,f);return function(){e.undelegate(c,d,f);e=b=d=f=c=null}},q=function(a,b,c,d){return d?s(a,d,b,c):e(a,b,c)},t=function(a,b){var c="string"==typeof b?a[b]:b;return function(){a.called=
b;return c.apply(a,[this.nodeName?h(this):this].concat(p.call(arguments,0)))}},r=/\./g,u=/_?controllers?/ig,m=function(a){return f.underscore(a.replace(h.globalNamespace+".","").replace(r,"_").replace(u,""))},x=/^\S(.*)\s(.*)/,C=/\{([^\}]+)\}/g,w=/\{([^\.]+[\.][^\.]+)\}/g,v=/^(?:(.*?)\s)?([\w\.\:>]+)$/,z,y=function(a,b){return h.data(a,"controllers",b)},L=h.globalNamespace+".Controller";h.Controller=function(a){var b=g(arguments),c={root:L};2<b.length?(c=h.extend(c,b[1]),b=b[2]):b=b[1];c.namespace&&
(a=c.namespace+"."+a);return h.Controller.Class(a,c,b)};var M=L+".Class";h.Class(M,{setup:function(b,d){this._super.apply(this,arguments);if(this.shortName&&this.fullName!=M){this._fullName=m(this.fullName);this._shortName=m(this.shortName);var f=this,e;if(c(this.pluginName)){var k=this._fullName,n=this.pluginName;h.fn[n]||(h.fn[n]=function(a){var b=g(arguments);if(h.isString(a)&&"controller"===a){var c=y(this[0]);return c&&c[k]}return this.each(function(){var c=y(this);if(c=c&&c[k])if(h.isString(a)){var d=
c[a];h.isFunction(d)&&d.apply(c,b.slice(1))}else c.update.apply(c,b);else f.newInstance.apply(f,[this].concat(b))})})}var p=g(arguments),n=this.prototype,p=p[3<p.length?3:2];a(p)&&(this.protoFactory=p,n=this.protoFactory.call(this,null));this.actions={};for(e in n)"constructor"!=e&&a(n[e])&&this._isAction(e)&&(this.actions[e]=this._action(e));h.module("$:/Controllers/"+this.fullName).resolve(this)}},hookup:function(a){return new this(a)},_isAction:function(a){return x.test(a)?!0:-1<h.inArray(a,this.listensTo)||
h.event.special[a]||ba[a]},_action:function(a,c){C.lastIndex=0;if(!c&&C.test(a))return null;var d=a=a.replace("{self} ","");if(c){var e=!1;if(w.test(a))var k,g="",d=a.replace(w,function(a,b){var d=b.split(".");k=c["{"+d[0]+"}"]||{};h.isControllerInstance(k)&&(g=(k[d[1]]||{}).selector);return g}).match(v),e=!!g,d=[k.element].concat(d||[]);e||(d=f.sub(a,[c,window]))}var e=b(d),n=(e?d[1]:d).match(v);return{processor:ba[n[2]]||z,parts:n,delegate:e?d[0]:void 0}},processors:{},listensTo:[],defaults:{},
hostname:"parent"},{setup:function(a,b){var f=this,e=f.constructor,n=f.prototype,m=e._fullName;f.instanceId=h.uid(m+"_");var p=f.options=d(!0,{},e.defaults,e.defaultOptions,b),q=f.element=h(a);e.protoFactory&&(n=e.protoFactory.apply(e,[f,p,q]),d(!0,f,n));(y(a)||y(a,{}))[m]=f;q.data("directSelector")||(n=h.uid("DS"),q.addClass(n).data("directSelector","."+n));for(name in p)name.match(/^\{.+\}$/)&&(n=name.replace(/^\{|\}$/g,""),m=p[name],c(m)?f[n]=function(a,b,c){b=/^(\.|\#)$/.test(b)?b+c:b;var d=function(c){var d=
a.element.find(b);c&&(d=d.filter(c));return d};d.selector=b;d.css=function(){var a=d.cssRule;if(!a){var c=q.data("directSelector"),a=h.map(b.split(","),function(a){return c+" "+a}),a=d.cssRule=h.cssRule(a);a.important=!0}return arguments.length?a.css.apply(a,arguments):a};return d}(f,m,n):f[n]=m);var n=p.view,r=f.view;f.view=function(){return r.apply(this,arguments)};k(n||{},function(a,b){f.view[a]=function(b){var c=g(arguments);h.isBoolean(b)?c=c.slice(1):b=!1;return f.view.apply(f,[b,a].concat(c))}});
h.extend(f,p.controller);f.pluginInstances={};f.called="init";f._bind();var s=f.init||h.noop;f.init=function(){f.init=s;result=s.apply(f,arguments);f.trigger("init."+e.fullName.toLowerCase(),[f]);return result};return[q,p].concat(g(arguments).slice(2))},on:function(a){var b=g(arguments),d=this.element,f=b.length;return 2==f?this._binder(d,a,b[1]):3==f&&c(b[1])?this._binder(d,a,b[2],b[1]):this._binder(b[1],a,b[2])},_bind:function(){var a=this,b=a.constructor,c=b.actions,d=a._bindings=[],f=a.element;
k(c||{},function(e,k){if(c.hasOwnProperty(e)){var g=b.actions[e]||b._action(e,a.options);h.isControllerInstance(g.delegate)&&(g.delegate=g.delegate.element);d.push(g.processor(g.delegate||f,g.parts[2],g.parts[1],e,a))}});var e=t(this,"destroy");f.bind("destroyed",e);d.push(function(a){h(a).unbind("destroyed",e)});return d.length},_binder:function(a,b,c,d){"string"==typeof c&&(c=t(this,c));this._bindings.push(q(a,b,c,d));return this._bindings.length},_unbind:function(){var a=this.element[0];k(this._bindings,
function(b,c){c(a)});this._bindings=[]},trigger:function(a){var b=this.element;if(b){var c=h.Event(a);b.trigger.apply(b,[c].concat(h.makeArray(arguments).slice(1)));return c}},delegate:function(a,b,c,d){"string"==typeof a&&(d=c,c=b,b=a,a=this.element);return this._binder(a,c,d,b)},update:function(a){d(this.options,a);this._unbind();this._bind()},destroy:function(){if(!this._destroyed){var a=this.constructor._fullName;for(pname in this.pluginInstances)this.removePlugin(pname);this._destroyed=!0;this.element.removeClass(a);
this._unbind();delete this._actions;delete this.element.data("controllers")[a];h(this).triggerHandler("destroyed");this.element=h()}},find:function(a){return this.element.find(a)},view:function(){var a=g(arguments),b=a,c=!1,d=this.constructor.component||h,f="",f=this.options.view||{};"boolean"==typeof a[0]&&(c=a[0],b=a.slice(1));if(void 0==(b[0]=f[b[0]]))return c?"":h("");f=d.View.apply(d,b);return c?f:h(h.parseHTML(h.trim(f)))},getPlugin:function(a){return this.pluginInstances[a]},addSubscriber:function(a){a=
h.isArray(a)?a:[a||{}];var b=this,c=this.Class.hostname,d={};d["{"+c+"}"]=b;h.map(a,function(a,f){if(!h.isControllerInstance(a))return!1;if(a.options[c]===this)return a;a[c]=b;return a.update(d)});return a},addPlugin:function(b,c,d){if(b){if(!c&&!d||h.isPlainObject(c))d=c,c=[this.Class.root,this.Class.fullName,h.String.capitalize(b)].join(".");h.isString(c)&&(c=h.getController(c));var f=h.isControllerInstance(c);if(a(c)||f){d=h.extend(!0,{element:this.element},d,(this.options.plugin||{})[b]||{});
f=f?"instance":h.isController(c)?"controller":"function";this.trigger("addPlugin",[b,c,d,f]);var e=this.Class.hostname;d["{"+e+"}"]=this;var k;switch(f){case "instance":k=c;c.update(d);c[e]=this;break;case "controller":k=d.element.addController(c,d);break;case "function":k=c(this,d)}if(k)return this.pluginInstances[b]=k,"function"!==f&&(c={},c["{"+b+"}"]=k,this.update(c)),this.trigger("registerPlugin",[b,k,d,f]),k}}},removePlugin:function(a){var b=this.getPlugin(a);if(b)return this.trigger("removePlugin",
[a,b]),delete this.pluginInstances[a],h.isFunction(b.destroy)?b.destroy():null},invokePlugin:function(a,b,c){var d=this.getPlugin(a);if(d&&h.isFunction(d[b]))return this.trigger("invokePlugin",[a,d,c]),d[b].apply(this,c)},getMessageGroup:function(){var a=h.isFunction(this.messageGroup)?this.messageGroup():this.element.find("[data-message-group]");1>a.length&&(a=h("<div data-message-group></div>").prependTo(this.element));return a},setMessage:function(a,b){var c={type:"warning",message:"",parent:this.getMessageGroup(),
element:h('<div class="alert fade in"><button type="button" class="close" data-foundry-dismiss="alert">\u00d7</button></div>')},d={},d=h.isDeferred(a),d=h.isPlainObject(a)&&!d?a:{message:a,type:b||"warning"},f=h.extend({},c,d),e=f.element;if(h.isDeferred(a)){var k=arguments.callee,g=this;a.done(function(a,b){f.message=a;f.type=b||"warning";k.call(g,f);e.show()})}else e.addClass("alert-"+f.type).append(f.message),1>h("html").has(e).length&&e.appendTo(f.parent);return e},clearMessage:function(){this.getMessageGroup().empty()},
_set_called:!0});var ba=h.Controller.Class.processors;z=function(a,b,c,d,f){return q(a,b,t(f,d),c)};k("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){ba[b]=z});var X=function(a){c(a)&&(a=a.replace("$.Controller",L),a=n(a)||n(L+"."+a));if(T(a))return a},T=function(b){return a(b)&&b.hasOwnProperty("_fullName")},la=function(a){return h.map(a,function(a){return b(a)?
la(a):X(a)})};h.getController=X;h.isController=function(a){return!!X(a)};h.isControllerInstance=function(a){return a&&a.constructor&&T(a.constructor)};h.isControllerOf=function(a,c){if(!c)return!1;b(c)||(c=[c]);for(var d=0;d<c.length;d++){var f=X(c[d]);if(a instanceof f)return!0}return!1};h.fn.extend({controllers:function(){var a=la(g(arguments)),b=[];this.each(function(){var c=h.data(this,"controllers");k(c||{},function(d,f){c.hasOwnProperty(d)&&(a.length&&!h.isControllerOf(f,a)||b.push(f))})});
return b},controller:function(a,b){if(void 0===b)return this.controllers(a)[0];this.addController.apply(this,arguments);return this},hasController:function(a){return(a=(X(a)||{})._fullName||(c(a)?m(a.replace("$.Controller",L)):""))?(h(this).data("controllers")||{}).hasOwnProperty(a):!1},addController:function(b,c,d){var f=X(b);if(f){var e=[];this.each(function(){if(1===this.nodeType&&"SCRIPT"!=this.nodeName){var k=h(this).controller(b);k||(k=new f(this,c),a(d)&&d.apply(k,[h(this),k]));e.push(k)}});
return 1<e.length?e:e[0]}},removeController:function(a){this.each(function(){for(var b=h(this).controllers(a);b.length;)b.shift().destroy()});return this},addControllerWhenAvailable:function(a){var b=this,d=arguments,f=h.Deferred();h.isController(a)&&(a=a.fullName);if(!c(a))return f.reject();h.module("$:/Controllers/"+a).pipe(function(){var a=b.addController.apply(b,d);f.resolveWith(a,[b,a])},f.reject,f.fail);return f},implement:function(){this.addController.apply(this,arguments);return this}})})();
(function(){var e=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},g=h.makeArray,b=1,a=h.View=function(a,b,c,e){"function"===typeof c&&(e=c,c=void 0);var n=f(b);if(n.length){var m=h.Deferred();n.push(h.ajax({url:a,dataType:"view",async:!0}));h.when.apply(h,n).then(function(a){var f=g(arguments),n=f.pop()[0];if(d(b))b=k(a);else for(var p in b)d(b[p])&&(b[p]=k(f.shift()));f=n(b,c);m.resolve(f);e&&e(f)});return m.promise()}var p,n="function"===typeof e,m=h.ajax({url:a,dataType:"view",
async:n});n?(p=m,m.done(function(a){e(a(b,c))})):m.done(function(a){p=a(b,c)});return p},c=function(a,b){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+b;},d=function(a){return a&&h.isFunction(a.always)},f=function(a){var b=[];if(d(a))return[a];for(var c in a)d(a[c])&&b.push(a[c]);return b},k=function(a){return h.isArray(a)&&3===a.length&&"success"===a[1]?a[0]:a};h.ajaxTransport("view",function(b,d){var f=d.url,k=f.match(/\.[\w\d]+$/),g,n,m,p,q=function(b){b=
g.renderer(m,b);a.cache&&(a.cached[m]=b);return{view:b}};if(n=document.getElementById(f))k="."+n.type.match(/\/(x\-)?(.+)/)[2];k||(k=a.ext,f+=a.ext);m=e(f);if(f.match(/^\/\//))var r=f.substr(2),f="undefined"===typeof steal?f="/"+r:steal.root.mapJoin(r)+"";g=a.types[k];var s=h.template()[d.url];return{send:function(b,e){if(s)return g=a.types["."+s.type],e(200,"success",q(s.content));if(a.cached[m])return e(200,"success",{view:a.cached[m]});n?e(200,"success",q(n.innerHTML)):p=h.ajax({async:d.async,
url:f,dataType:"text",error:function(){c("",f);e(404)},success:function(a){c(a,f);e(200,"success",q(a))}})},abort:function(){p&&p.abort()}}});h.extend(a,{hookups:{},hookup:function(c){var d=++b;a.hookups[d]=c;return d},cached:{},cache:!0,register:function(b){this.types["."+b.suffix]=b;window.steal&&steal.type(b.suffix+" view js",function(b,c,d){d=a.types["."+b.type];var f=e(b.rootSrc+"");b.text=d.script(f,b.text);c()})},types:{},ext:".ejs",registerScript:function(b,c,d){return"$.View.preload('"+c+
"',"+a.types["."+b].script(c,d)+");"},preload:function(b,c){a.cached[b]=function(a,b){return c.call(a,a,b)}}});window.steal&&steal.type("view js",function(b,c,d){d=a.types["."+b.type];var f=e(b.rootSrc+"");b.text="steal('"+(d.plugin||"jquery/view/"+b.type)+"').then(function($){$.View.preload('"+f+"',"+b.text+");\n})";c()});var n,p,s,q,t,r,u,m={val:!0,text:!0};n=function(b){var c=h.fn[b];h.fn[b]=function(){var f=g(arguments),e,k,n=this;if(d(f[0]))return f[0].done(function(a){p.call(n,[a],c)}),this;
if(s(f)){if(e=r(f))return k=f[e],f[e]=function(a){p.call(n,[a],c);k.call(n,a)},a.apply(a,f),this;f=a.apply(a,f);if(d(f))return f.done(function(a){p.call(n,[a],c)}),this;f=[f]}return m[b]?c.apply(this,f):p.call(this,f,c)}};p=function(b,c){var d,f;for(d in a.hookups)break;d&&b[0]&&q(b[0])&&(f=a.hookups,a.hookups={},b[0]=h(b[0]));d=c.apply(this,b);f&&u(b[0],f);return d};s=function(a){var b=typeof a[1];return"string"==typeof a[0]&&("object"==b||"function"==b)&&!t(a[1])};t=function(a){return a.nodeType||
a.jquery};q=function(a){return t(a)?!0:"string"===typeof a?(a=h.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)&&3<=a.length):!1};r=function(a){return"function"===typeof a[3]?3:"function"===typeof a[2]&&2};u=function(b,c){var d,f,e=0,k,g;b=b.filter(function(){return 3!=this.nodeType});d=b.add("[data-view-id]",b);for(f=d.length;e<f;e++)d[e].getAttribute&&(k=d[e].getAttribute("data-view-id"))&&(g=c[k])&&(g(d[e],k),delete c[k],d[e].removeAttribute("data-view-id"));h.extend(a.hookups,c)};h.fn.hookup=
function(){var b=a.hookups;a.hookups={};u(this,b);return this};h.each("prepend append after before text html replaceWith val".split(" "),function(a,b){n(b)})})();(function(){var e=function(a){eval(a)},g=h.String.rsplit,b=h.extend,a=h.isArray,c=/\r\n/g,d=/\r/g,f=/\n/g,k=/\n/,n=/\\/g,p=/"/g,s=/'/g,q=/\t/g,t=/\{/g,r=/\}/g,u=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,m=function(a){return a.replace(n,"\\\\").replace(f,"\\n").replace(p,'\\"').replace(q,"\\t")},x=h.View,C=function(a){var b=a.match(t);a=a.match(r);
return(b?b.length:0)-(a?a.length:0)},w=function(a){if(this.constructor!=w){var c=new w(a);return function(a,b){return c.render(a,b)}}"function"==typeof a?this.template={fn:a}:(b(this,w.options,a),this.template=y(this.text,this.type,this.name))};h&&(h.EJS=w);w.prototype.render=function(a,b){a=a||{};this._extra_helpers=b;var c=new w.Helpers(a,b||{});return this.template.fn.call(a,a,c)};b(w,{text:function(b){if("string"==typeof b)return b;if(null===b||void 0===b)return"";var c=b.hookup&&function(a,c){b.hookup.call(b,
a,c)}||"function"==typeof b&&b||a(b)&&function(a,c){for(var d=0;d<b.length;d++)b[d].hookup?b[d].hookup(a,c):b[d](a,c)};return c?"data-view-id='"+x.hookup(c)+"'":b.toString?b.toString():""},clean:function(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(p,"&#34;").replace(s,"&#39;"):"number"==typeof a?a:w.text(a)},options:{type:"[",ext:".ejs"}});var v=function(a,b,c){b=g(b,k);for(var d=0;d<b.length;d++){var f=a,e=b[d],n=c;f.lines++;for(var e=g(e,
f.splitter),m=void 0,p=0;p<e.length;p++)m=e[p],null!==m&&n(m,f)}},z=function(a,c){var d={};b(d,{left:a+"%",right:"%"+c,dLeft:a+"%%",dRight:"%%"+c,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",cleanLeft:a+"%~",scan:v,lines:0});d.splitter=RegExp("("+[d.dLeft,d.dRight,d.eeLeft,d.eLeft,d.cmnt,d.left,d.right+"\n",d.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return d},y=function(a,b,f){a=a.replace(c,"\n").replace(d,"\n");b=b||"[";var k=new w.Buffer(["var ___v1ew = [];"],[]),g="",n=
null,p=[];v(z(b,"["===b?"]":">"),a||"",function(a,b){var c;if(null===n)switch(a){case "\n":g+="\n";k.push("___v1ew.push(",'"',m(g),'");');k.cr();g="";break;case b.left:case b.eLeft:case b.eeLeft:case b.cmnt:n=a;0<g.length&&k.push("___v1ew.push(",'"',m(g),'");');g="";break;case b.dLeft:g+=b.left;break;default:g+=a}else switch(a){case b.right:switch(n){case b.left:c=C(g);var d=p.length&&-1==c?p.pop():";";"));"===d&&k.push("return ___v1ew.join('')");k.push(g,d);1===c&&p.push(";");break;case b.eLeft:(c=
C(g))&&p.push("));");u.test(g)&&(d=g.match(u),g="function(__){var "+d[1]+"=$(__);"+d[2]+"}");k.push("___v1ew.push(",h.globalNamespace+".EJS.clean(",g,c?"var ___v1ew = [];":"));");break;case b.eeLeft:(c=C(g))&&p.push("));"),k.push("___v1ew.push(",h.globalNamespace+".EJS.text(",g,c?"var ___v1ew = [];":"));")}n=null;g="";break;case b.dRight:g+=b.right;break;default:g+=a}});0<g.length&&k.push("___v1ew.push(",'"',m(g)+'");');a={out:"try { with(_VIEW) { with (_CONTEXT) {"+k.close()+" return ___v1ew.join('')}}}catch(e){e.lineNumber=null;throw e;}"};
e.call(a,"this.fn = (function(_CONTEXT,_VIEW){ var $ = "+h.globalNamespace+";"+a.out+"});");return a};w.Buffer=function(a,b){this.line=[];this.script=[];this.post=b;this.push.apply(this,a)};w.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=[]},close:function(){0<this.line.length&&(this.script.push(this.line.join("")),this.line=[]);this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};
w.Helpers=function(a,c){this._data=a;this._extras=c;b(this,c)};w.Helpers.prototype={plugin:function(a){var b=h.makeArray(arguments),c=b.shift();return function(a){a=h(a);a[c].apply(a,b)}},view:function(a,b,c){c=c||this._extras;b=b||this._data;return x(a,b,c)}};x.register({suffix:"ejs",script:function(a,b){return h.globalNamespace+".EJS(function(_CONTEXT,_VIEW) { "+(new w({text:b,name:a})).template.out+" })"},renderer:function(a,b){return w({text:b,name:a})}})})();(function(){var e=h.isArray,g=function(a){return"object"===
typeof a&&null!==a&&a},b=h.makeArray,a=h.each,c=function(a,b,c){a instanceof h.Observe?d([a],c._namespace):a=e(a)?new h.Observe.List(a):new h.Observe(a);a.bind("change"+c._namespace,function(d,f){var e=h.makeArray(arguments);d=e.shift();e[0]="*"===b?c.indexOf(a)+"."+e[0]:b+"."+e[0];h.event.trigger(d,e,c)});return a},d=function(a,b){for(var c,d=0;d<a.length;d++)(c=a[d])&&c.unbind&&c.unbind("change"+b)},f=0,k=null,n=function(){if(!k)return k=[],!0},p=function(a,b,c){if(!a._init)if(k)k.push({t:a,ev:b,
args:c});else return h.event.trigger(b,c,a,!0)},s=0,q=function(){var a=k.length,b=k.slice(0),c;k=null;s++;for(var d=0;d<a;d++)c=b[d],h.event.trigger({type:c.ev,batchNum:s},c.args,c.t)},t=function(a,b,c){a.each(function(a,d){c[a]=g(d)&&"function"==typeof d[b]?d[b]():d});return c};h.Class(h.globalNamespace+".Observe",{init:function(a){this._data={};this._namespace=".observe"+ ++f;this._init=!0;this.attrs(a);delete this._init},attr:function(a,b){if(void 0===b)return this._get(a);this._set(a,b);return this},
each:function(){return a.apply(null,[this.__get()].concat(b(arguments)))},removeAttr:function(a){a=e(a)?a:a.split(".");var b=a.shift(),c=this._data[b];if(a.length)return c.removeAttr(a);delete this._data[b];p(this,"change",[b,"remove",void 0,c]);return c},_get:function(a){a=e(a)?a:(""+a).split(".");var b=this.__get(a.shift());return a.length?b?b._get(a):void 0:b},__get:function(a){return a?this._data[a]:this._data},_set:function(a,b){var f=e(a)?a:(""+a).split("."),k=f.shift(),n=this.__get(k);if(g(n)&&
f.length)n._set(f,b);else{if(f.length)throw"jQuery.Observe: set a property on an object that does not exist";b!==n&&(f=this.__get().hasOwnProperty(k)?"set":"add",this.__set(k,g(b)?c(b,k,this):b),p(this,"change",[k,f,b,n]),n&&d([n],this._namespace))}},__set:function(a,b){this._data[a]=b;a in this.constructor.prototype||(this[a]=b)},bind:function(a,b){h.fn.bind.apply(h([this]),arguments);return this},unbind:function(a,b){h.fn.unbind.apply(h([this]),arguments);return this},serialize:function(){return t(this,
"serialize",{})},attrs:function(a,b){if(void 0===a)return t(this,"attrs",{});a=h.extend(!0,{},a);var c,d=n();for(c in this._data){var f=this._data[c],e=a[c];void 0===e?b&&this.removeAttr(c):(g(f)&&g(e)?f.attrs(e,b):f!=e&&this._set(c,e),delete a[c])}for(c in a)e=a[c],this._set(c,e);d&&q()}});var r=h.Observe(h.globalNamespace+".Observe.List",{init:function(a,c){this.length=0;this._namespace=".list"+ ++f;this._init=!0;this.bind("change",this.proxy("_changes"));this.push.apply(this,b(a||[]));h.extend(this,
c);this.comparator&&this.sort();delete this._init},_changes:function(a,b,c,d,f){if(this.comparator&&/^\d+./.test(b)){var e=+/^\d+/.exec(b)[0],k=this[e],g=this.sortedIndex(k);if(g!==e){[].splice.call(this,e,1);[].splice.call(this,g,0,k);p(this,"move",[k,g,e]);a.stopImmediatePropagation();p(this,"change",[b.replace(/^\d+/,g),c,d,f]);return}}-1===b.indexOf(".")&&("add"===c?p(this,c,[d,+b]):"remove"===c&&p(this,c,[f,+b]))},sortedIndex:function(a){var b=a.attr(this.comparator),c=0,d;for(d=0;d<this.length;d++)if(a===
this[d])c=-1;else if(b<=this[d].attr(this.comparator))break;return d+c},__get:function(a){return a?this[a]:this},__set:function(a,b){this[a]=b},serialize:function(){return t(this,"serialize",[])},splice:function(a,f){var e=b(arguments),k;for(k=2;k<e.length;k++){var n=e[k];g(n)&&(e[k]=c(n,"*",this))}void 0===f&&(f=e[1]=this.length-a);k=[].splice.apply(this,e);0<f&&(p(this,"change",[""+a,"remove",void 0,k]),d(k,this._namespace));2<e.length&&p(this,"change",[""+a,"add",e.slice(2),k]);return k},attrs:function(a,
b){if(void 0===a)return t(this,"attrs",[]);a=a.slice(0);for(var c=Math.min(a.length,this.length),d=n(),f=0;f<c;f++){var e=this[f],k=a[f];g(e)&&g(k)?e.attrs(k,b):e!=k&&this._set(f,k)}a.length>this.length?this.push(a.slice(this.length)):a.length<this.length&&b&&this.splice(a.length);d&&q()},sort:function(a,b){var c=this.comparator;[].sort.apply(this,c?[function(a,b){a=a[c];b=b[c];return a===b?0:a<b?-1:1}]:[]);!b&&p(this,"reset")}}),u=function(a){return a[0]&&h.isArray(a[0])?a[0]:b(a)};a({push:"length",
unshift:0},function(a,b){r.prototype[a]=function(){for(var d=u(arguments),f=b?this.length:0,e=0;e<d.length;e++){var k=d[e];g(k)&&(d[e]=c(k,"*",this))}if(1==d.length&&this.comparator)return f=this.sortedIndex(d[0]),this.splice(f,0,d[0]),this.length;e=[][a].apply(this,d);this.comparator&&1<d.length?(this.sort(null,!0),p(this,"reset",[d])):p(this,"change",[""+f,"add",d,void 0]);return e}});a({pop:"length",shift:0},function(a,b){r.prototype[a]=function(){var c=u(arguments),d=b&&this.length?this.length-
1:0,c=[][a].apply(this,c);p(this,"change",[""+d,"remove",void 0,[c]]);c&&c.unbind&&c.unbind("change"+this._namespace);return c}});r.prototype.indexOf=[].indexOf||function(a){return h.inArray(a,this)};h.O=function(a,b){return e(a)||a instanceof h.Observe.List?new h.Observe.List(a,b):new h.Observe(a,b)}})()});
FD31.plugin("joomla",function(h){var e={squeezebox:function(){return g.isJoomla15?window.parent.document.getElementById("sbox-window"):window.parent.SqueezeBox}},g=h.Joomla=function(a,b){if(h.isFunction(b))g.isJoomla15?window[a]=b:window.Joomla[a]=b;else if(a=e[a]||(g.isJoomla15?window[a]:window.Joomla[a]),h.isFunction(a))return a.apply(window,b)},b=parseFloat(h.joomla.version);g.isJoomla15=1.5>=b;g.isJoomla25=1.6<=b&&2.5>=b;g.isJoomla30=3<=b});
FD31.plugin("module",function(h){var e=function(e){var b=this,a=h.Callbacks("once memory");h.extend(this,h.Deferred(),{name:e,status:"pending",ready:function(c){!0===c&&a.fire.call(b,h);h.isFunction(c)&&a.add(c)}});b.then(function(){b.exports=this;b.status="resolved"},function(){b.status="rejected"});var c=b.done;b.done=function(){b.required=!0;var a=b.factory;a&&"ready"===b.status&&a.call(b,h);b.done=c;return b.done.apply(this,arguments)}};h.module=function(){var g=function(b,a){var c;if("string"===
typeof b){c=g.get(b);if(void 0===a)return c;if(h.isFunction(a)){if("resolved"==c.status)return c;c.factory=a;c.status="ready";c.ready("true");c.required&&(c.status="executing",a.call(c,h));return c}}h.isArray(b)&&(c=h.map(b,function(a){var b=g.get(h.isString(a)?a:a.name);if(b&&("pending"===b.status&&(b.status="ready"),h.isPlainObject(a)))return a}),h.each(c,function(a,b){g(b.name,b.factory)}))};h.extend(g,{registry:{},get:function(b){if(b)return h.isModule(b)&&(b=b.replace("module://","")),g.registry[b]||
g.create(b)},create:function(b){return g.registry[b]=new e(b)},remove:function(b){delete g.registry[b]}});return g}();h.isModule=function(g){return h.isString(g)?!!g.match("module://"):g&&g instanceof e}});
FD31.plugin("script",function(h){h.script=function(){var e=function(b){b=h.extend(this,b);b.manager=h.Deferred();h.extend(b,b.manager.promise());b.load()},g=document.getElementsByTagName("head")[0];document.getElementsByTagName("base");h.extend(e.prototype,{timeout:7E3,retry:3,retryCount:1,type:"text/javascript",async:!1,charset:"UTF-8",verbose:!1,insert:function(){g.appendChild(this.node)},remove:function(){var b=this.node;setTimeout(function(){b.onload=b.onerror=b.onreadystatechange=null;try{g.removeChild(b)}catch(a){}},
1E3)},load:function(){var b;this.endTime=void 0;this.startTime=new Date;this.node=b=document.createElement("script");this.insert();this._ready=h.proxy(this.ready,this);this._error=h.proxy(this.error,this);b.attachEvent&&!h.browser.opera?(b.attachEvent("onreadystatechange",this._ready),b.attachEvent("onerror",this._error)):(b.addEventListener("load",this._ready,!1),b.addEventListener("error",this._error,!1));h(b).attr({type:this.type,async:this.async,charset:this.charset,src:this.url});this.monitor()},
monitor:function(){var b=this;b.retryCount>b.retry?b._error():setTimeout(function(){"resolved"!==b.state()&&(b.verbose&&console.warn("$.script: Load timeout. [Retry: "+b.retryCount+"]",b),b.remove(),b.retryCount++,b.load())},b.timeout*b.retryCount)},ready:function(b){var a=this.node;if("load"===b.type||/loaded|complete/.test(a.readyState))this.complete.call(this,b),this.manager.resolve(this)},error:function(b){this.verbose&&console.error("$.script: Unable to load ",this);this.complete.call(this,b);
this.remove();this.manager.reject(this)},complete:function(b){b=this.node;this.endTime=new Date;b.detachEvent&&!h.browser.opera?(b.detachEvent("onreadystatechange",this._ready),b.detachEvent("onerror",this._error)):(b.removeEventListener("load",this._ready,!1),b.removeEventListener("error",this._error,!1))}});return function(b){if(void 0!==b)return"string"===typeof b&&(b={url:b}),new e(b)}}()});
FD31.plugin("stylesheet",function(h){var e=document.getElementsByTagName("head")[0],g=document.styleSheets,b=document.createStyleSheet;h.stylesheet=function(){var a=function(b,d){var f={};h.extend(f,a.defaultOptions,h.isPlainObject(b)?b:{url:b,attr:d||{}});return void 0===f.url?a.create(f):a.load(f)};h.extend(a,{defaultOptions:{type:"text/css",rel:"stylesheet",media:"all",title:"",forceInject:!1,xhr:!1},setup:function(b){h.extend(a.defaultOptions,b)},availability:function(){var b={},d=h('link[rel*="stylesheet"]');
styles=h("style");b.groups=31-d.length-styles.length;b.slots=31*b.groups;a.currentGroup&&(b.slots+=31-a.currentGroup.imports.length);return b},get:function(a){for(var b=0;b<g.length;b++){var f=g[b];if((f.ownerNode||f.owningElement)==a)return f}},create:function(a){var d,f;f=g.length;if(b){if(31<=f)return;d=document.createStyleSheet();f=d.ownerNode||d.owningElement}else f=document.createElement("style"),e.appendChild(f);h.extend(f,{type:a.type,title:a.title,media:a.media,rel:a.rel});a=a.content;void 0!==
a&&(b?d.cssText=a:f.appendChild(document.createTextNode(a)));return f},nextAvailable:function(c){var d,f=g.length;if(f)for(;f--;0>f)if(d=g[f],b&&4095<=(d.cssRules||d.rules).length)d=void 0;else break;return d.ownerNode||d.owningElement||(c?a():void 0)},load:function(b){return h.browser.msie&&!b.forceInject?a._import(b):h("<link>").attr({href:b.url,type:b.type,rel:b.rel,media:b.media}).appendTo("head")[0]},_import:function(b){var d;if(void 0===a.currentGroup){var f;try{f=document.createStyleSheet(),
f.media="all",f.title="jquery_stylesheet"}catch(e){d=!0,b.verbose&&console.error("There is not enough slots left to create a new stylesheet group.")}if(d)return!1;a.currentGroup=f}try{a.currentGroup.addImport(b.url)}catch(g){d=!0,b.verbose&&console.info("Import slots exceeded. Creating a new stylesheet group.")}return d?(a.currentGroup=void 0,a._import(b)):!0}});return a}();(function(){var a=function(a,b,c){h.extend(this,{id:h.uid(),style:c,selectors:[],preRule:"",rules:{},legacy:8===h.IE,important:!1});
a&&this.set(a,b)};h.extend(a.prototype,{set:function(a,b){h.isString(a)?this.selectors=a.split(","):this.selectors=a;h.isString(b)?(this.preRule=b+"\n",this.rules={}):(this.preRule="",this.rules=b||this.rules);this.update();return this},cssText:function(){return this.selectors.join(",")+"{"+this.ruleText()+"}\n"},ruleText:function(){var a=this.important;return this.preRule+(this.legacy?"-rule-id:"+this.id+";":"")+h.map(this.rules,function(b,c){h.isNumeric(b)&&!h.cssNumber[c]&&(b+="px");a&&(b+=" !important");
return c+":"+b}).join(";")},update:function(){if(this.legacy)return this.updateLegacy();var a=this.cssText();void 0===this.textNode?(this.textNode=document.createTextNode(a),this.style.appendChild(this.textNode)):this.textNode.nodeValue=a;return this},updateLegacy:function(){this.removeLegacy();for(var a=h.stylesheet.get(this.style),b=this.selectors,c=this.ruleText(),e=0;e<b.length;e++)a.addRule(b[e],c);return this},remove:function(){if(this.legacy)return this.removeLegacy();void 0!==this.textNode&&
(this.style.removeChild(this.textNode),delete this.textNode);return this},removeLegacy:function(){for(var a=h.stylesheet.get(this.style),b=a.rules,c=0;c<b.length;c++)null!==b[c].cssText.match(this.id)&&a.removeRule(c);return this},css:function(a,b){if(h.isString(a)&&void 0===b)return this.rules[a];h.isPlainObject(a)?h.extend(this.rules,a):this.rules[a]=b;this.update();return this}});var b=h.cssRule=function(d,f,e){if(e=e||b.style||h.stylesheet.nextAvailable(!0))return new a(d,f,e)};b.style=h.stylesheet()})();
(function(){h.cssUrl=function(a){return'url("'+encodeURI(a)+'")'}})()});
FD31.plugin("language",function(h){h.sprintf=function(){var e=arguments,b=0,a=function(a,b,c,d){c||(c=" ");b=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+b:b+a},c=function(b,c,d,e,g,q){var h=e-b.length;0<h&&(b=d||!g?a(b,e,q,d):b.slice(0,c.length)+a("",h,"0",!0)+b.slice(c.length));return b},d=function(b,d,e,g,h,q,t){b>>>=0;e=e&&b&&{2:"0b",8:"0",16:"0x"}[d]||"";b=e+a(b.toString(d),q||0,"0",!1);return c(b,e,g,h,t)};return e[b++].replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,
function(f,k,n,p,h,q,t){var r,u;if("%%"==f)return"%";var m=!1;u="";var x=h=!1;r=" ";for(var C=n.length,w=0;n&&w<C;w++)switch(n.charAt(w)){case " ":u=" ";break;case "+":u="+";break;case "-":m=!0;break;case "'":r=n.charAt(w+1);break;case "0":h=!0;break;case "#":x=!0}p=p?"*"==p?+e[b++]:"*"==p.charAt(0)?+e[p.slice(1,-1)]:+p:0;0>p&&(p=-p,m=!0);if(!isFinite(p))throw Error("sprintf: (minimum-)width must be finite");q=q?"*"==q?+e[b++]:"*"==q.charAt(0)?+e[q.slice(1,-1)]:+q:-1<"fFeE".indexOf(t)?6:"d"==t?0:
void 0;k=k?e[k.slice(0,-1)]:e[b++];switch(t){case "s":return t=String(k),null!=q&&(t=t.slice(0,q)),c(t,"",m,p,h,r);case "c":return t=String.fromCharCode(+k),null!=q&&(t=t.slice(0,q)),c(t,"",m,p,h,void 0);case "b":return d(k,2,x,m,p,q,h);case "o":return d(k,8,x,m,p,q,h);case "x":return d(k,16,x,m,p,q,h);case "X":return d(k,16,x,m,p,q,h).toUpperCase();case "u":return d(k,10,x,m,p,q,h);case "i":case "d":return r=+k|0,f=0>r?"-":u,k=f+a(String(Math.abs(r)),q,"0",!1),c(k,f,m,p,h);case "e":case "E":case "f":case "F":case "g":case "G":return r=
+k,f=0>r?"-":u,u=["toExponential","toFixed","toPrecision"]["efg".indexOf(t.toLowerCase())],t=["toString","toUpperCase"]["eEfFgG".indexOf(t)%2],k=f+Math.abs(r)[u](q),c(k,f,m,p,h)[t]();default:return f}})};var e=h.language=h.JText=function(g){return 2>arguments.length?e._(g):e.sprintf.apply(null,arguments)};h.extend(e,{lang:{},add:function(g,b){h.isPlainObject(g)?h.extend(e.lang,g):e.lang[g]=b},remove:function(g){delete e.lang[g]},_:function(g){return e.lang[g]||""},sprintf:function(){arguments[0]=
e.lang[arguments[0]];return h.sprintf.apply(null,arguments)}})});FD31.plugin("template",function(h){h.template=function(){var e={content:"",type:"ejs"},g=function(b,a){if(void 0===b)return g.templates;var c;if("string"==typeof a)return c=h.isPlainObject(a)?a:h.extend({},e,{name:b,content:a}),g.templates[b]=c;c=g.templates[b]||{};return c.content||""};h.extend(g,{templates:{},remove:function(b){delete g.templates[b]}});return g}()});
FD31.plugin("require",function(h){h.require=function(){var e=function(a){return h.uri(a).setAnchor("").setQuery("").toPath("../").toString()},g=function(b){b=new a(b);return g.batches[b.id]=b};h.extend(g,{defaultOptions:{path:function(){var a=h.path+"/scripts/"||h("[require-path]").attr("require-path")||e(h("script:last").attr("src"))||e(window.location.href);/^(\/|\.)/.test(a)&&(a=h.uri(window.location.href).toPath(a).toString());return a}(),timeout:1E4,retry:3,verbose:"development"==h.environment},
setup:function(a){h.extend(g.defaultOptions,a)},batches:{},status:function(a){h.each(g.batches,function(b,f){var e={pending:0,resolved:0,rejected:0,ready:0,total:0},g=[];h.each(f.tasks,function(a,b){state=b.module&&"ready"==b.module.status?"ready":b.state();e[state]++;e.total++;g.push({state:state,content:"["+state+"] "+b.name})});var p=f.id+": "+f.state()+" ["+e.resolved+"/"+e.total+"]";a&&1>e[a]||(h.IE?(console.log('$.require.batches["'+f.id+'"]'),h.each(g,function(a,b){console.log(b.content)}),
console.log("")):(console.groupCollapsed(p),console.log('$.require.batches["'+f.id+'"]',f),h.each(g,function(b,d){var f=d.state,e=d.content;if(!a||f==a)switch(f){case "pending":console.warn(e);break;case "rejected":console.error(e);break;default:console.info(e)}}),console.groupEnd(p)))});return"$.require.status(pending|resolved|rejected|ready);"},loaders:{},addLoader:function(b,d){g[b]=d;a.prototype[b]=function(){this.autoFinalize();d.apply(this,arguments);return this};g.loaders[b]=g[b]=d},removeLoader:function(b){delete a.prototype[b];
delete g[b]}});var b=0,a=function(a){var d=h.Callbacks("once memory"),f=!1;return h.extend(this,{id:++b,tasks:[],options:h.extend({},g.defaultOptions,a),autoFinalizeDuration:300,finalized:!1,required:function(a){!0===a&&(f=d.fire());h.isFunction(a)&&d.add(a);return f}})};h.extend(a.prototype,{addTask:function(a){h.isDeferred(a)&&!this.finalized&&(this.tasks.push(a),a.batch=this)},autoFinalize:function(){var a=this,b=a.autoFinalizeDuration;!1!==b&&(clearTimeout(a.autoFinalizeTimer),a.autoFinalizeTimer=
setTimeout(function(){a.finalize()},b))},finalize:function(){var a=this;if(!a.finalized){a.finalized=!0;var b=a.manager=h.when.apply(null,a.tasks),f=b.promise(),e=h.Callbacks();h.extend(a,f,{progress:e.add,notify:e.fire,done:function(){a.required(!0);a.done=f.done;return a.done.apply(a,arguments)}});var g=a.options.verbose;b.progress(function(a,b){g&&"rejected"==a&&console.warn("Require: Task "+b.name+" failed to load.",b)}).fail(function(){g&&console.warn("Require: Batch "+a.id+" failed.",a)});setTimeout(function(){h.each(a.tasks,
function(b,d){d.then(function(){a.notify("resolved",d)},function(){a.notify("rejected",d)},function(){a.notify("progress",d)})})},1)}},expand:function(a,b){a=h.makeArray(a);var f=b||{},e=[];h.isPlainObject(a[0])?(f=h.extend(a[0],b),e=a.slice(1)):e=a;return{options:f,names:e}}});h.each(["done","fail","progress","always","then"],function(b,d){a.prototype[d]=function(){this.finalize();return this[d].apply(this,arguments)}});return g}();h.require.addLoader("script",function(){var e=h.uri(h.indexUrl).host(),
g=h.uri(document.location.href).host();e!==g&&e.match("xn--")&&(h.support.cors=!0);document.createElement("script");var b=function(){var a=this,c=h.makeArray(arguments),d;h.isPlainObject(c[0])&&(d=c[0],c=c.slice(1));d=h.extend({},b.defaultOptions,a.options,d,{batch:a});var f;h.each(c,function(c,e){var g=new b.task(e,d,f);a.addTask(g);d.serial&&void 0!==f?f.always(g.start):g.start();f=g})};h.extend(b,{defaultOptions:{path:"",extension:"compressed"==h.mode?"min.js":"js",serial:!1,async:!1,xhr:!1},setup:function(){h.extend(b.defaultOptions,
options)},scripts:{},task:function(a,b,d){var f=h.extend(this,h.Deferred());f.name=a;f.options=b;f.taskBefore=d;h.isArray(a)&&(f.name=a[0]+"@"+a[1],f.moduleName=a[0],a[2]||(f.defineModule=!0,h.module.registry[f.moduleName]&&console.warn("$.require.script: "+f.moduleName+" exists! Using existing module instead."),f.options.xhr=!0),a=a[1],f.module=h.module(f.moduleName));h.isUrl(a)?f.url=a:/^(\/|\.)/.test(a)?f.url=h.uri(f.options.path).toPath(a).toString():(f.url=h.uri(f.options.path).toPath("./"+a+
"."+f.options.extension).toString(),f.module=h.module(a))}});h.extend(b.task.prototype,{start:function(){var a=this.module;a&&"pending"!==a.status?this.waitForModule():this.load()},waitForModule:function(){var a=this,b=a.module;b.then(a.resolve,a.reject,a.notify);a.batch.required(function(){b.done(a.resolve)})},load:function(){var a=this,c=a.taskBefore;a.script=b.scripts[a.url]||function(){var c=a.options.xhr?h.ajax({url:a.url,dataType:"text"}):h.script({url:a.url,type:"text/javascript",async:a.options.async,
timeout:a.batch.options.timeout,retry:a.batch.options.retry,verbose:a.batch.options.verbose});return b.scripts[a.url]=c}();a.script.done(function(b){if(a.options.xhr&&(a.defineModule&&(a.module=h.module(a.moduleName,function(){h.globalEval(b);this.resolveWith(b)})),!a.options.async||c)){c.done(function(){h.globalEval(b);a.module?a.waitForModule():a.resolve()});return}a.module?a.waitForModule():a.resolve()}).fail(function(){a.reject()})}});return b}());h.require.addLoader("stylesheet",function(){var e=
function(){var g=this,b=h.makeArray(arguments),a;h.isPlainObject(b[0])&&(a=b[0],b=b.slice(1));a=h.extend({},e.defaultOptions,g.options,{path:h.path+"/styles/"},a,{batch:g});h.each(b,function(b,d){var f=new e.task(d,a),k=e.stylesheets[f.url],f=k||f;g.addTask(f);k||(e.stylesheets[f.url]=f,f.start())})};h.extend(e,{defaultOptions:{path:"",extension:"compressed"==h.mode?"min.css":"css",xhr:!1},setup:function(){h.extend(e.defaultOptions,options)},stylesheets:{},task:function(e,b){var a=h.extend(this,h.Deferred());
a.name=e;a.options=b;h.isUrl(e)?a.url=e:/^(\/|\.)/.test(e)?a.url=h.uri(a.options.path).toPath(e).toString():a.url=h.uri(a.options.path).toPath("./"+e+"."+a.options.extension).toString();a.options.url=a.url},loaders:{},loader:function(g){if(h.isArray(g))return h.map(g,function(a){return e.loader(a)});if(h.isPlainObject(g))return h.map(g,function(a,b){return e.loader(a).resolve(b)});var b=e.loaders[g];b||(b=e.loaders[g]=h.Deferred().done(function(a){h.isPlainObject(a)||h.stylesheet(a)}));return b}});
h.extend(e.task.prototype,{start:function(){var g=e.loaders[this.name];g||(g=e.loader(this.name),h.stylesheet(this.options)?g.resolve():g.reject());g.then(this.resolve,this.reject)}});return e}());h.require.addLoader("template",function(){var e=function(){var g=this,b=h.makeArray(arguments),a;h.isPlainObject(b[0])&&(a=b[0],b=b.slice(1));a=h.extend({},e.defaultOptions,g.options,a,{batch:g});h.each(b,function(b,d){var f=new e.task(d,a);g.addTask(f);f.start()})};h.extend(e,{defaultOptions:{path:"",extension:"htm"},
setup:function(){h.extend(e.defaultOptions,options)},task:function(e,b){var a=h.extend(this,h.Deferred());a.name=e;a.options=b;h.isArray(e)&&(a.name=e[0],e=e[1]);h.isUrl(e)?a.url=e:/^(\/|\.)/.test(e)?a.url=h.uri(a.options.path).toPath(e).toString():a.url=h.uri(a.options.path).toPath("./"+e+"."+a.options.extension).toString()},loaders:{},loader:function(g){if(h.isArray(g))return h.map(g,function(a){return e.loader(a)});if(h.isPlainObject(g))return h.map(g,function(a,b){return e.loader(b).resolve(a)});
var b=e.loaders[g];b||(b=e.loaders[g]=h.Deferred().done(function(a){h.template(g,a)}));return b}});h.extend(e.task.prototype,{start:function(){var g=e.loaders[this.name];g||(g=e.loader(this.name),g.xhr=h.Ajax({url:this.url,dataType:"text"}).then(g.resolve,g.reject).then(this.resolve,this.reject));this.loader=g;return this}});return e}());h.require.addLoader("language",function(){var e=function(){var g=h.makeArray(arguments),b;h.isPlainObject(g[0])&&(b=g[0],g=g.slice(1));b=h.extend({},e.defaultOptions,
this.options,b,{batch:this});b=new e.task(g,b);this.addTask(b);b.start()};h.extend(e,{defaultOptions:{path:""},setup:function(){h.extend(e.defaultOptions,options)},loaders:{},task:function(e,b){var a=h.extend(this,h.Deferred());a.name=e.join(",");a.options=b;a.url=b.path;a.names=e},loaders:{},loader:function(g){if(h.isArray(g))return h.map(g,function(a){return e.loader(a)});if(h.isPlainObject(g))return h.map(g,function(a,b){return e.loader(b).resolve(a)});var b=e.loaders[g];b||(b=e.loaders[g]=h.Deferred().done(function(a){h.language.add(g,
a)}));return b}});h.extend(e.task.prototype,{start:function(){var g=this,b=h.map(g.names,function(a){var b=e.loader(a);b.push(b);return/resolved|rejected/.test(b.state())?null:a});g.fail(function(){h.each(b,function(a,b){e.loader(b).reject()})});h.when.apply(null,[]).then(g.resolve,g.reject);if(1>b.length)return g;g.xhr=h.Ajax({url:g.url,type:"POST",data:{keys:b}}).done(function(a){h.isPlainObject(a)?e.loader(a):g.reject()}).fail(function(){g.reject()});return g}});return e}());h.require.addLoader("library",
function(){var e=h.makeArray(arguments),g={};h.isPlainObject(e[0])&&(g=e[0],e=e.slice(1));h.extend(g,{path:h.scriptPath});return this.script.apply(this,[g].concat(e))});h.require.addLoader("image",function(){var e=function(){var g=this,b=h.makeArray(arguments),a;h.isPlainObject(b[0])&&(a=b[0],b=b.slice(1));a=h.extend({},e.defaultOptions,g.options,a,{batch:g});h.each(b,function(b,d){var f=new e.task(d,a),k=e.images[f.url],f=k||f;g.addTask(f);k||(e.images[f.url]=f,f.start())})};h.extend(e,{defaultOptions:{path:""},
setup:function(){h.extend(e.defaultOptions,options)},images:{},task:function(e,b){var a=h.extend(this,h.Deferred());a.name=e;a.options=b;h.isUrl(e)?a.url=e:/^(\/|\.)/.test(e)?a.url=h.uri(a.options.path).toPath(e).toString():a.url=h.uri(a.options.path).toPath("./"+e).toString();a.options.url=a.url}});h.extend(e.task.prototype,{start:function(){var e=this;e.image=h(new Image).load(function(){e.resolve()}).error(function(){e.reject()}).attr("src",e.options.url)}});return e}())});
FD31.plugin("iframe-transport",function(h){h.ajaxPrefilter(function(e,g,b){if(e.iframe)return"iframe"});h.ajaxTransport("iframe",function(e,g,b){function a(){n&&p.replaceWith(function(a){return k.get(a)});c.remove();d.attr("src","javascript:false;").remove()}var c=null,d=null,f="iframe-"+h.now(),k=h(e.files).filter(":file:enabled"),n=0<k.length,p=null;e.dataTypes.shift();c=h("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:e.url,target:f});"string"===typeof e.data&&
0<e.data.length&&h.error("data must not be serialized");h.each(e.data||{},function(a,b){h.isPlainObject(b)&&(a=b.name,b=b.value);h.isArray(b)||(b=[b]);h.each(b,function(b,d){h("<input type='hidden' />").attr({name:a,value:d}).appendTo(c)})});h("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(c);n&&(p=k.after(function(a){return h(this).clone().prop("disabled",!0)}).next(),k.appendTo(c));return{send:function(b,e){d=h("<iframe src='javascript:false;' name='"+f+"' id='"+f+"' style='display:none'></iframe>");
d.bind("load",function(){d.unbind("load").bind("load",function(){var b=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,c=b.documentElement?b.documentElement:b.body,d=c.getElementsByTagName("textarea")[0],b=d?d.getAttribute("data-type"):null,f=d?d.getAttribute("data-status"):200,k=d?d.getAttribute("data-statusText"):"OK",c={html:c.innerHTML,text:b?d.value:c?c.textContent||c.innerText:null};a();e(f,k,c,b?"Content-Type: "+b:null)});c[0].submit()});
h("body").append(c,d)},abort:function(){null!==d&&(d.unbind("load").attr("src","javascript:false;"),a())}}})});
FD31.plugin("server",function(h){var e=h.server=function(g){var b=h.Deferred(),a=h.extend(!0,{},e.defaultOptions,g,{success:function(){}});b.xhr=h.Ajax(a).done(function(a){if("string"===typeof a)try{a=h.parseJSON(a)}catch(d){b.rejectWith(b,["Unable to parse Ajax commands.","error"])}if(h.isArray(a)){var f=function(a){var c=a.type,c=e.parsers[c]||g[c];if(h.isFunction(c))return c.apply(b,a.data)};a=h.map(a,function(a){if("notify"==a.type)f(a);else return a});h.each(a,function(a,b){f(b)})}else b.rejectWith(b,
["Invalid ajax commands.","error"]);"pending"===b.state()&&b.resolveWith(b)}).fail(function(a,d,f){b.rejectWith(b,[f,d])});return b};e.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},dataType:"json"};e.parsers={script:function(){var e=h.makeArray(arguments);if("string"==typeof e[0])try{eval(e[0])}catch(b){}else{var a=window;h.each(e,function(b,d){"Foundry"===d.property&&(d.property=h.globalNamespace);"Foundry"===d.method&&(d.method=h.globalNamespace);try{switch(d.type){case "get":a=
a[d.property];break;case "set":a[d.property]=d.value;break;case "call":a=a[d.method].apply(a,d.args)}}catch(f){}})}},resolve:function(){this.resolveWith(this,arguments)},reject:function(){this.rejectWith(this,arguments)},notify:function(){this.notifyWith(this,arguments)},redirect:function(e){window.location=e}}});
FD31.plugin("component",function(h){var e=h.Component=function(a,b){return 1>arguments.length?e.registry:2>arguments.length?e.registry[a]:e.register(a,b)};e.registry={};e.proxy=function(a,b,d){h.isFunction(d)?a[b]=h.proxy(d,a):a[b]=d};e.register=function(a,b){var d;h.isFunction(a)&&(d=a,a=d.className,b=d.options);var f=e.registry[a]=window[a]=function(a){return h.isFunction(a)?a(h):component};h.each(e.prototype,function(a,b){e.proxy(f,a,b)});f.$=h;f.options=b;f.className=a;f.identifier=a.toLowerCase();
f.componentName="com_"+f.identifier;f.prefix=f.identifier+"/";f.version=b.version;f.safeVersion=f.version.replace(/\./g,"");f.environment=b.environment||h.environment;f.mode=b.mode||h.mode;f.debug="development"===f.environment;f.console=e.console(f);f.language=b.language||h.locale.lang||"en";f.baseUrl=b.baseUrl||h.indexUrl+"?option="+f.componentName;f.ajaxUrl=b.ajaxUrl||h.basePath+"/?option="+f.componentName;f.scriptPath=b.scriptPath||h.rootPath+"/media/"+f.componentName+"/scripts/";f.stylePath=b.stylePath||
h.rootPath+"/media/"+f.componentName+"/styles/";f.templatePath=b.templatePath||b.scriptPath;f.languagePath=b.languagePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=lang&task=getLanguage";f.viewPath=b.viewPath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=themes&task=getAjaxTemplate";f.optimizeResources=!0;f.resourcePath=b.resourcePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=foundry&task=getResource";f.resourceInterval=1200;f.scriptVersioning=b.scriptVersioning||!1;f.token=(d||{}).token;
f.tasks=[];FD31.component(a,f);if(d)if(f.debug)d.queue.execute();else{for(var k,g=FD31.installer(a);k=g.shift();)f.install.apply(f,k);h.when(f.install("definitions"),f.install("scripts"),f.install("resources")).done(function(){d.queue.execute()})}};e.extend=function(a,b){e.prototype[a]=b;h.each(e.registry,function(d,f){e.proxy(f,a,b)})};h.template("component/console",'<div id="[%== component.identifier %]-console" class="foundry-console" style="display: none; z-index: 999999;"><div class="console-header"><div class="console-title">[%= component.className %] [%= component.version %]</div><div class="console-remove-button">x</div></div><div class="console-log-item-group"></div><style type="text/css">.foundry-console{position:fixed;width:50%;height:50%;bottom:0;left:0;background:white;box-shadow: 0 0 5px 0;margin-left: 25px;}.console-log-item-group{width: 100%;height: 100%;overflow-y:scroll;}.console-header{position: absolute;background:red;color:white;font-weight:bold;top:-24px;left: 0;line-height:24px;width:100%}.console-remove-button{text-align:center;cursor: pointer;display:block;width: 24px;float:right}.console-remove-button:hover{color: yellow}.console-title{padding: 0 5px;float:left}.console-log-item{padding: 5px}.console-log-item + .console-log-item{border-top: 1px solid #ccc}</style></div>');
e.console=function(a){return function(a){var b=function(a){return 1>arguments.length?b.toggle():b[a]&&b[a].apply(b,arguments)},f;b.selector="#"+a.identifier+"-console";b.init=function(){f=h(b.selector);1>f.length&&(f=h(h.View("component/console",{component:a})).appendTo("body"),f.find(".console-remove-button").click(function(){f.hide()}));b.element=f;return arguments.callee}();b.methods={log:function(b,d,e){d=d||"info";var g=f.find(".console-log-item-group");b=h(document.createElement("div")).addClass("console-log-item type-"+
d).attr("data-code",e).html(b);g.append(b);g[0].scrollTop=g[0].scrollHeight;a.debug&&f.show()},toggle:function(){f.toggle()},reset:function(){f.find(".console-log-item-group").empty()}};h.each(b.methods,function(a,c){b[a]=function(){b.init();return c.apply(b,arguments)}});return b}(a)};var g=h(document),b=e.prototype;h.extend(b,{run:function(a){return h.isFunction(a)?a(h):this},ready:function(){g.ready(function(){b.ready=b.run});return function(a){h.isFunction(a)&&g.ready(function(){a(h)})}}(),install:function(a,
b){var d=this,f=d.tasks[a]||(d.tasks[a]=h.Deferred());if(!b)return f;var e=function(){b(h,d);return f.resolve()};if("definitions"==a)return e();h.when(d.install("definitions")).done(e)},template:function(a){var b=this;if(void 0==a)return h.grep(h.template(),function(a){return 0==a.indexOf(b.prefix)});arguments[0]=b.prefix+a;return h.template.apply(null,arguments)},require:function(a){var b=this;a=a||{};var d=h.require(a),f={};h.each(["library","script","language","template","done"],function(a,b){f[b]=
d[b]});d.resource=function(a){if(h.isPlainObject(a)&&a.type&&a.name&&h.isDeferred(a.loader)){var f=b.resourceCollector;f||(f=b.resourceCollector=h.Deferred(),h.extend(f,{name:h.uid("ResourceCollector"),manifest:[],loaderList:[],loaders:[],load:function(){delete b.resourceCollector;if(0>f.manifest.length)f.resolve();else{var a=0,d=function(){a++;h.Ajax({type:"POST",url:b.resourcePath,dataType:"json",data:{resource:f.manifest}}).done(function(d){h.isArray(d)?(h.each(d,function(a,b){var c=b.content;
f.loaders[b.id][void 0!==c?"resolve":"reject"](c)}),1<a&&b.debug&&console.info("Attempt to try and get resources again was successful!")):f.reject("Server did not return a valid resource manifest.")}).fail(function(){2<a?b.debug&&console.error("Unable to get resource again. Giving up!"):(b.debug&&console.warn("Unable to get resource. Trying again..."),d())})};d();h.when.apply(null,f.loaderList).done(f.resolve).fail(f.reject)}}}),setTimeout(f.load,b.resourceCollectionInterval));var e=a.id=h.uid("Resource");
f.loaders[e]=a.loader;f.loaderList.push(a.loader);delete a.loader;f.manifest.push(a);return d}};d.view=function(){var a=this,f=a.expand(arguments,{path:b.viewPath}),e={},g=f.options,f=h.map(f.names,function(f){var g=b.prefix+f,n=h.require.template.loaders[g];if(!n)if(n=h.require.template.loader(g),n.name=g,a.addTask(n),b.optimizeResources)d.resource({type:"view",name:f,loader:n});else return e[f]=n,f});0<f.length&&h.Ajax({url:g.path,dataType:"json",data:{names:f}}).done(function(a){h.isArray(a)&&
h.each(a,function(a,b){var c=b.content;e[b.name][void 0!==c?"resolve":"reject"](c)})});return d};d.language=function(){var a=this,e=a.expand(arguments,{path:b.languagePath});b.optimizeResources?h.each(e.names,function(b,c){var f=h.require.language.loaders[c];f||(f=h.require.language.loader(c),f.name=c,a.addTask(f),d.resource({type:"language",name:c,loader:f}))}):f.language.apply(d,[e.options].concat(e.names));return d};d.library=function(){f.script.apply(this,arguments);return d};d.script=function(){var a=
this.expand(arguments,{path:b.scriptPath});names=h.map(a.names,function(d){if(h.isArray(d)||h.isUrl(d)||/^(\/|\.)/.test(d))return d;var f=b.prefix+d;d=h.uri(a.options.path).toPath("./"+d+"."+(a.options.extension||"js")+(b.scriptVersioning?"?version="+b.safeVersion:"")).toString();return[[f,d,!0]]});f.script.apply(d,[a.options].concat(names));return d};d.template=function(){var a=this.expand(arguments,{path:b.templatePath});f.template.apply(d,[a.options].concat(h.map(a.names,function(a){return[[b.prefix+
a,a]]})));return d};d.done=function(a){return f.done.call(d,function(){b.ready(a)})};return d},module:function(a,b){if(!h.isArray(a)){var d=this.prefix+a;return b?h.module.apply(null,[d,function(){b.call(this,h)}]):h.module(d)}}});h.Component.extend("getToken",function(){return h("span#"+this.identifier+"-token input").attr("name")||this.token});h.Component.extend("ajax",function(a,b,d){var f=this;a={url:f.ajaxUrl,data:h.extend(b,{option:f.componentName,namespace:a})};a=h.extend(!0,a,f.options.ajax);
a.data[f.getToken()]=1;a.data.hasOwnProperty("args")&&(a.data.args=h.toJSON(a.data.args));if(h.isPlainObject(d)){if(d.type){switch(d.type){case "jsonp":d.dataType="jsonp";d.crossDomain=!0;a.data.transport="jsonp";break;case "iframe":d.iframe=!0,d.processData=!1,d.files=a.data.files,delete a.data.files,a.data.transport="iframe"}delete d.type}h.extend(a,d)}h.isFunction(d)&&(a.success=d);d=h.server(a);d.progress(function(a,b,c){"debug"==b&&f.console.log(a,b,c)});return d});h.Component.extend("Controller",
function(){var a=h.makeArray(arguments),b=a[0],d;if(1==a.length)return h.String.getObject(b);2<a.length?(d=a[1],a=a[2]):(d={},a=a[1]);h.extend(d,{root:this.className+".Controller",component:this});return h.Controller.apply(this,[b,d,a])});h.Component.extend("Model",function(){var a=h.makeArray(arguments),b=this.className+".Model."+a[0],d,f;if(1==a.length)return h.String.getObject(a[0]);2==a.length&&(d={},f=a[1]);2<a.length&&(d=a[1],f=a[2]);h.extend(d,{component:this});return h.Model.apply(this,[b,
d,f])});h.Component.extend("Model.List",function(){var a=h.makeArray(arguments),b=this.className+".Model.List."+a[0],d,f;if(1==a.length)return h.String.getObject(a[0]);2==a.length&&(d={},f=a[1]);2<a.length&&(d=a[1],f=a[2]);h.extend(d,{component:this});return h.Model.List.apply(this,[b,d,f])});h.Component.extend("View",function(a){if(1>arguments.length)return this.template();arguments[0]=this.prefix+arguments[0];return h.View.apply(this,arguments)});FD31.module.execute();h.each(FD31.component(),function(a,
b){b.registered||h.Component.register(b)})});
FD31.plugin("static",function(h){h.module("uniform chosen event/drag mousewheel resize ui/core ui/mouse ui/widget textboxlist autosize.input scrollTo expanding tinyscrollbar history masonry dialog ui/position easing popbox ui/autocomplete ui/menu gmaps imgareaselect image".split(" "));(function(){FD31.module("uniform",function(e){var g=function(){(function(b){b.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",
fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:!0,idPrefix:"uniform",resetSelector:!1,autoHide:!0},elements:[]};b.support.selectOpacity=b.browser.msie&&7>b.browser.version?!1:!0;b.fn.uniform=function(a){function c(c){var d=b(c),f=b("<div>"),e=b("<span>");f.addClass(a.buttonClass);a.useID&&""!=d.attr("id")&&f.attr("id",a.idPrefix+"-"+d.attr("id"));var k;
if(d.is("a")||d.is("button"))k=d.text();else if(d.is(":submit")||d.is(":reset")||d.is("input[type=button]"))k=d.attr("value");k=""==k?d.is(":reset")?"Reset":"Submit":k;e.html(k);d.css("opacity",0);d.wrap(f);d.wrap(e);f=d.closest("div");e=d.closest("span");d.is(":disabled")&&f.addClass(a.disabledClass);f.bind({"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)},"mousedown.uniform touchbegin.uniform":function(){f.addClass(a.activeClass)},
"mouseup.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"click.uniform touchend.uniform":function(a){if(b(a.target).is("span")||b(a.target).is("div"))c[0].dispatchEvent?(a=document.createEvent("MouseEvents"),a.initEvent("click",!0,!0),c[0].dispatchEvent(a)):c[0].click()}});c.bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)}});b.uniform.noSelect(f);p(c)}function d(c){var d=b(c),f=b("<div />"),e=b("<span />");"none"==
!d.css("display")&&a.autoHide&&f.hide();f.addClass(a.selectClass);a.useID&&""!=c.attr("id")&&f.attr("id",a.idPrefix+"-"+c.attr("id"));d=c.find(":selected:first");0==d.length&&(d=c.find("option:first"));e.html(d.html());c.css("opacity",0);c.wrap(f);c.before(e);f=c.parent("div");e=c.siblings("span");c.bind({"change.uniform":function(){e.text(c.find(":selected").html());f.removeClass(a.activeClass)},"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass);
f.removeClass(a.activeClass)},"mousedown.uniform touchbegin.uniform":function(){f.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"click.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)},"keyup.uniform":function(){e.text(c.find(":selected").html())}});b(c).prop("disabled")&&f.addClass(a.disabledClass);
b.uniform.noSelect(e);p(c)}function f(c){var d=b(c),f=b("<div />"),e=b("<span />");"none"==!d.css("display")&&a.autoHide&&f.hide();f.addClass(a.checkboxClass);a.useID&&""!=c.attr("id")&&f.attr("id",a.idPrefix+"-"+c.attr("id"));b(c).wrap(f);b(c).wrap(e);e=c.parent();f=e.parent();b(c).css("opacity",0).bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)},"click.uniform touchend.uniform":function(){b(c).prop("checked")?e.addClass(a.checkedClass):
e.removeClass(a.checkedClass)},"mousedown.uniform touchbegin.uniform":function(){f.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)}});b(c).prop("checked")&&e.addClass(a.checkedClass);b(c).prop("disabled")&&f.addClass(a.disabledClass);p(c)}function e(c){var d=b(c),f=b("<div />"),k=b("<span />");"none"==
!d.css("display")&&a.autoHide&&f.hide();f.addClass(a.radioClass);a.useID&&""!=c.attr("id")&&f.attr("id",a.idPrefix+"-"+c.attr("id"));b(c).wrap(f);b(c).wrap(k);k=c.parent();f=k.parent();b(c).css("opacity",0).bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)},"click.uniform touchend.uniform":function(){if(b(c).prop("checked")){var d=a.radioClass.split(" ")[0];b("."+d+" span."+a.checkedClass+":has([name='"+b(c).attr("name")+"'])").removeClass(a.checkedClass);
k.addClass(a.checkedClass)}else k.removeClass(a.checkedClass)},"mousedown.uniform touchend.uniform":function(){b(c).is(":disabled")||f.addClass(a.activeClass)},"mouseup.uniform touchbegin.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform touchend.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)}});b(c).prop("checked")&&k.addClass(a.checkedClass);b(c).prop("disabled")&&f.addClass(a.disabledClass);
p(c)}function g(c){var d=b(c),f=b("<div />"),e=b("<span>"+a.fileDefaultText+"</span>"),k=b("<span>"+a.fileBtnText+"</span>");"none"==!d.css("display")&&a.autoHide&&f.hide();f.addClass(a.fileClass);e.addClass(a.filenameClass);k.addClass(a.fileBtnClass);a.useID&&""!=d.attr("id")&&f.attr("id",a.idPrefix+"-"+d.attr("id"));d.wrap(f);d.after(k);d.after(e);f=d.closest("div");e=d.siblings("."+a.filenameClass);k=d.siblings("."+a.fileBtnClass);if(!d.attr("size")){var n=f.width();d.attr("size",n/10)}var h=function(){var b=
d.val();""===b?b=a.fileDefaultText:(b=b.split(/[\/\\]+/),b=b[b.length-1]);e.text(b)};h();d.css("opacity",0).bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)},"mousedown.uniform":function(){b(c).is(":disabled")||f.addClass(a.activeClass)},"mouseup.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)}});
b.browser.msie?d.bind("click.uniform.ie7",function(){setTimeout(h,0)}):d.bind("change.uniform",h);d.prop("disabled")&&f.addClass(a.disabledClass);b.uniform.noSelect(e);b.uniform.noSelect(k);p(c)}function p(a){a=b(a).get();1<a.length?b.each(a,function(a,c){b.uniform.elements.push(c)}):b.uniform.elements.push(a)}a=b.extend(b.uniform.options,a);var h=this;!1!=a.resetSelector&&b(a.resetSelector).mouseup(function(){setTimeout(function(){b.uniform.update(h)},10)});b.uniform.restore=function(a){void 0==
a&&(a=b(b.uniform.elements));b(a).each(function(){b(this).is(":checkbox")?b(this).unwrap().unwrap():b(this).is("select")?(b(this).siblings("span").remove(),b(this).unwrap()):b(this).is(":radio")?b(this).unwrap().unwrap():b(this).is(":file")?(b(this).siblings("span").remove(),b(this).unwrap()):b(this).is("button, :submit, :reset, a, input[type='button']")&&b(this).unwrap().unwrap();b(this).unbind(".uniform");b(this).css("opacity","1");var c=b.inArray(b(a),b.uniform.elements);b.uniform.elements.splice(c,
1)})};b.uniform.noSelect=function(a){function c(){return!1}b(a).each(function(){this.onselectstart=this.ondragstart=c;b(this).mousedown(c).css({MozUserSelect:"none"})})};b.uniform.update=function(c){void 0==c&&(c=b(b.uniform.elements));c=b(c);c.each(function(){var d=b(this);if(d.is("select")){var f=d.siblings("span"),e=d.parent("div");e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass);f.html(d.find(":selected").html());d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass)}else if(d.is(":checkbox"))f=
d.closest("span"),e=d.closest("div"),e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),f.removeClass(a.checkedClass),d.is(":checked")&&f.addClass(a.checkedClass),d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass);else if(d.is(":radio"))f=d.closest("span"),e=d.closest("div"),e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),f.removeClass(a.checkedClass),d.is(":checked")&&f.addClass(a.checkedClass),d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass);
else if(d.is(":file"))e=d.parent("div"),f=d.siblings(a.filenameClass),btnTag=d.siblings(a.fileBtnClass),e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),f.text(d.val()),d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass);else if(d.is(":submit")||d.is(":reset")||d.is("button")||d.is("a")||c.is("input[type=button]"))e=d.closest("div"),e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass)})};
return this.each(function(){if(b.support.selectOpacity){var a=b(this);a.is("select")?!0!=a.attr("multiple")&&(void 0==a.attr("size")||1>=a.attr("size"))&&d(a):a.is(":checkbox")?f(a):a.is(":radio")?e(a):a.is(":file")?g(a):a.is(":text, :password, input[type='email']")?($el=b(a),$el.addClass($el.attr("type")),p(a)):a.is("textarea")?(b(a).addClass("uniform"),p(a)):(a.is("a")||a.is(":submit")||a.is(":reset")||a.is("button")||a.is("input[type=button]"))&&c(a)}})}})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("chosen",
function(e){var g=function(){var b={};(function(){var a;a=function(){function a(){this.options_index=0;this.parsed=[]}a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)};a.prototype.add_group=function(a){var b,c,e,g,h,q;b=this.parsed.length;this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled});h=a.childNodes;q=[];e=0;for(g=h.length;e<g;e++)c=h[e],q.push(this.add_option(c,b,a.disabled));return q};a.prototype.add_option=
function(a,b,c){if("OPTION"===a.nodeName.toUpperCase())return""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:!0===c?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};return a}();a.select_to_array=function(b){var d,
f,e,g;d=new a;g=b.childNodes;f=0;for(e=g.length;f<e;f++)b=g[f],d.add_node(b);return d.parsed};this.SelectParser=a}).call(b);(function(){this.AbstractChosen=function(){function a(a,b){this.form_field=a;this.options=null!=b?b:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()}a.prototype.set_default_values=function(){var a=this;this.click_test_action=function(b){return a.test_active_click(b)};
this.activate_action=function(b){return a.activate_field(b)};this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_single_selected=this.result_highlighted=null;this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||!1;this.search_contains=
this.options.search_contains||!1;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||!1;return this.max_selected_options=this.options.max_selected_options||Infinity};a.prototype.set_default_text=function(){this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.default_text=this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||
this.options.placeholder_text||"Select an Option";return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"};a.prototype.mouse_enter=function(){return this.mouse_on_container=!0};a.prototype.mouse_leave=function(){return this.mouse_on_container=!1};a.prototype.input_focus=function(a){var b=this;if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)};a.prototype.input_blur=function(a){var b=
this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return b.blur_test()},100)};a.prototype.result_add_option=function(a){var b,f;if(a.disabled)return"";a.dom_id=this.container_id+"_o_"+a.array_index;b=a.selected&&this.is_multiple?[]:["active-result"];a.selected&&b.push("result-selected");null!=a.group_array_index&&b.push("group-option");""!==a.classes&&b.push(a.classes);f=""!==a.style.cssText?' style="'+a.style+'"':"";return'<li id="'+a.dom_id+'" class="'+b.join(" ")+
'"'+f+">"+a.html+"</li>"};a.prototype.results_update_field=function(){this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};a.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()};a.prototype.keyup_checker=function(a){var b,f;b=null!=(f=a.which)?f:a.keyCode;
this.search_field_scale();switch(b){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};a.prototype.generate_field_id=function(){var a;
a=this.generate_random_id();return this.form_field.id=a};a.prototype.generate_random_char=function(){var a;a=Math.floor(36*Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(a,a+1)};return a}()}).call(b);(function(){var a,b,d,f=Object.prototype.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};d=this;e.fn.extend({chosen:function(b){return e.browser.msie&&
("6.0"===e.browser.version||"7.0"===e.browser.version&&7===document.documentMode)?this:this.each(function(c){c=e(this);if(!c.hasClass("chzn-done"))return c.data("chosen",new a(this,b))})}});a=function(a){function f(){f.__super__.constructor.apply(this,arguments)}k(f,a);f.prototype.setup=function(){this.form_field_jq=e(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};f.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};
f.prototype.set_up_html=function(){var a,d;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();a=e("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?a.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):
a.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(a);this.container=e("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();a=this.container.height();
d=this.f_width-b(this.dropdown);this.dropdown.css({width:d+"px",top:a+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),
this.selected_item=this.container.find(".chzn-single").first(),a=d-b(this.search_container)-b(this.search_field),this.search_field.css({width:a+"px"}));this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};f.prototype.register_observers=function(){var a=this;this.container.mousedown(function(b){return a.container_mousedown(b)});this.container.mouseup(function(b){return a.container_mouseup(b)});this.container.mouseenter(function(b){return a.mouse_enter(b)});
this.container.mouseleave(function(b){return a.mouse_leave(b)});this.search_results.mouseup(function(b){return a.search_results_mouseup(b)});this.search_results.mouseover(function(b){return a.search_results_mouseover(b)});this.search_results.mouseout(function(b){return a.search_results_mouseout(b)});this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)});this.form_field_jq.bind("liszt:activate",function(b){return a.activate_field(b)});this.form_field_jq.bind("liszt:open",
function(b){return a.container_mousedown(b)});this.search_field.blur(function(b){return a.input_blur(b)});this.search_field.keyup(function(b){return a.keyup_checker(b)});this.search_field.keydown(function(b){return a.keydown_checker(b)});return this.is_multiple?(this.search_choices.click(function(b){return a.choices_click(b)}),this.search_field.focus(function(b){return a.input_focus(b)})):this.container.click(function(a){return a.preventDefault()})};f.prototype.search_field_disabled=function(){if(this.is_disabled=
this.form_field_jq[0].disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)};f.prototype.container_mousedown=function(a){var b;if(!this.is_disabled){b=null!=a?e(a.target).hasClass("search-choice-close"):!1;a&&"mousedown"===
a.type&&!this.results_showing&&a.stopPropagation();if(this.pending_destroy_click||b)return this.pending_destroy_click=!1;this.active_field?this.is_multiple||!a||e(a.target)[0]!==this.selected_item[0]&&!e(a.target).parents("a.chzn-single").length||(a.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show());return this.activate_field()}};f.prototype.container_mouseup=function(a){if("ABBR"===a.target.nodeName&&
!this.is_disabled)return this.results_reset(a)};f.prototype.blur_test=function(a){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};f.prototype.close_field=function(){e(document).unbind("click",this.click_test_action);this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1));this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();
this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};f.prototype.activate_field=function(){this.is_multiple||this.active_field||(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1));this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};f.prototype.test_active_click=function(a){return e(a.target).parents("#"+
this.container_id).length?this.active_field=!0:this.close_field()};f.prototype.results_build=function(){var a,b,c,f,e;this.parsing=!0;this.results_data=d.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):
this.container.removeClass("chzn-container-single-nosearch"));a="";e=this.results_data;c=0;for(f=e.length;c<f;c++)b=e[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();
this.search_results.html(a);return this.parsing=!1};f.prototype.result_add_group=function(a){if(a.disabled)return"";a.dom_id=this.container_id+"_g_"+a.array_index;return'<li id="'+a.dom_id+'" class="group-result">'+e("<div />").text(a.label).html()+"</li>"};f.prototype.result_do_highlight=function(a){var b,c,d,f;if(a.length){this.result_clear_highlight();this.result_highlight=a;this.result_highlight.addClass("highlighted");c=parseInt(this.search_results.css("maxHeight"),10);f=this.search_results.scrollTop();
d=c+f;b=this.result_highlight.position().top+this.search_results.scrollTop();a=b+this.result_highlight.outerHeight();if(a>=d)return this.search_results.scrollTop(0<a-c?a-c:0);if(b<f)return this.search_results.scrollTop(b)}};f.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};f.prototype.results_show=function(){var a;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&
this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;a=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:a+"px",left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};f.prototype.results_hide=
function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=!1};f.prototype.set_tab_index=function(a){if(this.form_field_jq.attr("tabindex")){a=this.form_field_jq.attr("tabindex");this.form_field_jq.attr("tabindex",-1);if(this.is_multiple)return this.search_field.attr("tabindex",a);this.selected_item.attr("tabindex",
a);return this.search_field.attr("tabindex",-1)}};f.prototype.show_search_field_default=function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};f.prototype.search_results_mouseup=function(a){var b;b=e(a.target).hasClass("active-result")?e(a.target):e(a.target).parents(".active-result").first();if(b.length)return this.result_highlight=
b,this.result_select(a)};f.prototype.search_results_mouseover=function(a){if(a=e(a.target).hasClass("active-result")?e(a.target):e(a.target).parents(".active-result").first())return this.result_do_highlight(a)};f.prototype.search_results_mouseout=function(a){if(e(a.target).hasClass("active-result"))return this.result_clear_highlight()};f.prototype.choices_click=function(a){a.preventDefault();if(this.active_field&&!e(a.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};
f.prototype.choice_build=function(a){var b,c=this;if(this.is_multiple&&this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;b=this.container_id+"_c_"+a.array_index;this.choices+=1;this.search_container.before(a.disabled?'<li class="search-choice search-choice-disabled" id="'+b+'"><span>'+a.html+"</span></li>":'<li class="search-choice" id="'+b+'"><span>'+a.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+a.array_index+
'"></a></li>');return e("#"+b).find("a").first().click(function(a){return c.choice_destroy_link_click(a)})};f.prototype.choice_destroy_link_click=function(a){a.preventDefault();if(this.is_disabled)return a.stopPropagation;this.pending_destroy_click=!0;return this.choice_destroy(e(a.target))};f.prototype.choice_destroy=function(a){if(this.result_deselect(a.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&0<this.choices&&1>this.search_field.val().length&&this.results_hide(),
a.parents("li").first().remove()};f.prototype.results_reset=function(){this.form_field.options[0].selected=!0;this.selected_item.find("span").text(this.default_text);this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};f.prototype.results_reset_cleanup=function(){this.current_value=this.form_field_jq.val();return this.selected_item.find("abbr").remove()};
f.prototype.result_select=function(a){var b,c;if(this.result_highlight)return b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),b=c.substr(c.lastIndexOf("_")+1),b=this.results_data[b],b.selected=!0,this.form_field.options[b.options_index].selected=!0,this.is_multiple?
this.choice_build(b):(this.selected_item.find("span").first().text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()),a.metaKey&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[b.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()};f.prototype.result_activate=function(a){return a.addClass("active-result")};
f.prototype.result_deactivate=function(a){return a.removeClass("active-result")};f.prototype.result_deselect=function(a){var b;b=this.results_data[a];if(this.form_field.options[b.options_index].disabled)return!1;b.selected=!1;this.form_field.options[b.options_index].selected=!1;e("#"+this.container_id+"_o_"+a).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value});
this.search_field_scale();return!0};f.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&1>this.selected_item.find("abbr").length)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};f.prototype.winnow_results=function(){var a,b,c,d,f,k,g,n,p,h,z,y,L,M,ba;this.no_results_clear();n=0;p=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html();f=RegExp((this.search_contains?"":
"^")+p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");h=RegExp(p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");ba=this.results_data;z=0;for(L=ba.length;z<L;z++)if(b=ba[z],!b.disabled&&!b.empty)if(b.group)e("#"+b.dom_id).css("display","none");else if(!this.is_multiple||!b.selected){a=!1;g=b.dom_id;k=e("#"+g);if(f.test(b.html))a=!0,n+=1;else if(0<=b.html.indexOf(" ")||0===b.html.indexOf("["))if(d=b.html.replace(/\[|\]/g,"").split(" "),d.length)for(y=0,M=d.length;y<M;y++)c=d[y],f.test(c)&&(a=!0,n+=
1);a?(p.length?(a=b.html.search(h),c=b.html.substr(0,a+p.length)+"</em>"+b.html.substr(a+p.length),c=c.substr(0,a)+"<em>"+c.substr(a)):c=b.html,k.html(c),this.result_activate(k),null!=b.group_array_index&&e("#"+this.results_data[b.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&g===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(k))}return 1>n&&p.length?this.no_results(p):this.winnow_results_set_highlight()};f.prototype.winnow_results_clear=
function(){var a,b,c,d,f;this.search_field.val("");b=this.search_results.find("li");f=[];c=0;for(d=b.length;c<d;c++)a=b[c],a=e(a),a.hasClass("group-result")?f.push(a.css("display","auto")):this.is_multiple&&a.hasClass("result-selected")?f.push(void 0):f.push(this.result_activate(a));return f};f.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=a.length?a.first():this.search_results.find(".active-result").first(),
null!=a))return this.result_do_highlight(a)};f.prototype.no_results=function(a){var b;b=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');b.find("span").first().html(a);return this.search_results.append(b)};f.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};f.prototype.keydown_arrow=function(){var a;this.result_highlight?this.results_showing&&(a=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(a):
(a=this.search_results.find("li.active-result").first())&&this.result_do_highlight(e(a));if(!this.results_showing)return this.results_show()};f.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};f.prototype.keydown_backstroke=function(){var a;
if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();a=this.search_container.siblings("li.search-choice").last();if(a.length&&!a.hasClass("search-choice-disabled"))return this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};f.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");
return this.pending_backstroke=null};f.prototype.keydown_checker=function(a){var b,c;b=null!=(c=a.which)?c:a.keyCode;this.search_field_scale();8!==b&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};f.prototype.search_field_scale=
function(){var a,b,c,d,f;if(this.is_multiple){b="position:absolute; left: -1000px; top: -1000px; display:none;";c="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");d=0;for(f=c.length;d<f;d++)a=c[d],b+=a+":"+this.search_field.css(a)+";";a=e("<div />",{style:b});a.text(this.search_field.val());e("body").append(a);b=a.width()+25;a.remove();b>this.f_width-10&&(b=this.f_width-10);this.search_field.css({width:b+"px"});a=this.container.height();return this.dropdown.css({top:a+
"px"})}};f.prototype.generate_random_id=function(){var a;for(a="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();0<e("#"+a).length;)a+=this.generate_random_char();return a};return f}(d.AbstractChosen);b=function(a){return a.outerWidth()-a.width()};d.get_side_border_padding=b}).call(b)};g();this.resolveWith(g)})})();(function(){FD31.module("event/drag",function(e){var g=function(){(function(b){b.fn.drag=function(a,c,d){var f="string"==typeof a?a:"",e=b.isFunction(a)?
a:b.isFunction(c)?c:null;0!==f.indexOf("drag")&&(f="drag"+f);d=(a==e?c:d)||{};return e?this.bind(f,d,e):this.trigger(f)};var a=b.event,c=a.special,d=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(a){var c=b.data(this,d.datakey),f=a.data||{};c.related+=1;b.each(d.defaults,function(a,b){void 0!==f[a]&&(c[a]=f[a])})},remove:function(){b.data(this,d.datakey).related-=1},setup:function(){if(!b.data(this,d.datakey)){var c=
b.extend({related:0},d.defaults);b.data(this,d.datakey,c);a.add(this,"touchstart mousedown",d.init,c);this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){(b.data(this,d.datakey)||{}).related||(b.removeData(this,d.datakey),a.remove(this,"touchstart mousedown",d.init),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart))},init:function(f){if(!d.touched){var e=f.data,k;if(!(0!=f.which&&0<e.which&&f.which!=e.which||b(f.target).is(e.not)||e.handle&&
!b(f.target).closest(e.handle,f.currentTarget).length)&&(d.touched="touchstart"==f.type?this:null,e.propagates=1,e.mousedown=this,e.interactions=[d.interaction(this,e)],e.target=f.target,e.pageX=f.pageX,e.pageY=f.pageY,e.dragging=null,k=d.hijack(f,"draginit",e),e.propagates&&((k=d.flatten(k))&&k.length&&(e.interactions=[],b.each(k,function(){e.interactions.push(d.interaction(this,e))})),e.propagates=e.interactions.length,!1!==e.drop&&c.drop&&c.drop.handler(f,e),d.textselect(!1),d.touched?a.add(d.touched,
"touchmove touchend",d.handler,e):a.add(document,"mousemove mouseup",d.handler,e),!d.touched||e.live)))return!1}},interaction:function(a,c){var f=b(a)[c.relative?"position":"offset"]()||{top:0,left:0};return{drag:a,callback:new d.callback,droppable:[],offset:f}},handler:function(f){var e=f.data;switch(f.type){case !e.dragging&&"touchmove":f.preventDefault();case !e.dragging&&"mousemove":if(Math.pow(f.pageX-e.pageX,2)+Math.pow(f.pageY-e.pageY,2)<Math.pow(e.distance,2))break;f.target=e.target;d.hijack(f,
"dragstart",e);e.propagates&&(e.dragging=!0);case "touchmove":f.preventDefault();case "mousemove":if(e.dragging){d.hijack(f,"drag",e);if(e.propagates){!1!==e.drop&&c.drop&&c.drop.handler(f,e);break}f.type="mouseup"}default:d.touched?a.remove(d.touched,"touchmove touchend",d.handler):a.remove(document,"mousemove mouseup",d.handler),e.dragging&&(!1!==e.drop&&c.drop&&c.drop.handler(f,e),d.hijack(f,"dragend",e)),d.textselect(!0),!1===e.click&&e.dragging&&b.data(e.mousedown,"suppress.click",(new Date).getTime()+
5),e.dragging=d.touched=!1}},hijack:function(c,f,e,k,g){if(e){var h=c.originalEvent,u=c.type,m=f.indexOf("drop")?"drag":"drop",x,C=k||0,w,v;k=isNaN(k)?e.interactions.length:k;c.type=f;c.originalEvent=null;e.results=[];do!(w=e.interactions[C])||"dragend"!==f&&w.cancelled||(v=d.properties(c,e,w),w.results=[],b(g||w[m]||e.droppable).each(function(k,g){v.target=g;c.isPropagationStopped=function(){return!1};x=g?a.dispatch.call(g,c,v):null;!1===x?("drag"==m&&(w.cancelled=!0,e.propagates-=1),"drop"==f&&
(w[m][k]=null)):"dropinit"==f&&w.droppable.push(d.element(x)||g);"dragstart"==f&&(w.proxy=b(d.element(x)||w.drag)[0]);w.results.push(x);delete c.result;if("dropinit"!==f)return x}),e.results[C]=d.flatten(w.results),"dropinit"==f&&(w.droppable=d.flatten(w.droppable)),"dragstart"!=f||w.cancelled||v.update());while(++C<k);c.type=u;c.originalEvent=h;return d.flatten(e.results)}},properties:function(a,b,c){var f=c.callback;f.drag=c.drag;f.proxy=c.proxy||c.drag;f.startX=b.pageX;f.startY=b.pageY;f.deltaX=
a.pageX-b.pageX;f.deltaY=a.pageY-b.pageY;f.originalX=c.offset.left;f.originalY=c.offset.top;f.offsetX=f.originalX+f.deltaX;f.offsetY=f.originalY+f.deltaY;f.drop=d.flatten((c.drop||[]).slice());f.available=d.flatten((c.droppable||[]).slice());return f},element:function(a){if(a&&(a.jquery||1==a.nodeType))return a},flatten:function(a){return b.map(a,function(a){return a&&a.jquery?b.makeArray(a):a&&a.length?d.flatten(a):a})},textselect:function(a){b(document)[a?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",
a?"":"none");document.unselectable=a?"off":"on"},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.drop&&this.available.length&&b.each(this.available,function(a){c.drop.locate(this,a)})}};var f=a.dispatch;a.dispatch=function(a){if(0<b.data(this,"suppress."+a.type)-(new Date).getTime())b.removeData(this,"suppress."+a.type);else return f.apply(this,arguments)};var e=a.fixHooks.touchstart=a.fixHooks.touchmove=a.fixHooks.touchend=a.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),
filter:function(a,c){if(c){var d=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0]||null;d&&b.each(e.props,function(b,c){a[c]=d[c]})}return a}};c.draginit=c.dragstart=c.dragend=d})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("mousewheel",function(e){var g=function(){function b(a){var b=a||window.event,c=[].slice.call(arguments,1),k=0,g=0,h=0,u=0,u=0;a=e.event.fix(b);a.type="mousewheel";b.wheelDelta&&(k=b.wheelDelta);b.detail&&(k=-1*b.detail);b.deltaY&&(k=h=-1*b.deltaY);
b.deltaX&&(g=b.deltaX,k=-1*g);void 0!==b.wheelDeltaY&&(h=b.wheelDeltaY);void 0!==b.wheelDeltaX&&(g=-1*b.wheelDeltaX);u=Math.abs(k);if(!d||u<d)d=u;u=Math.max(Math.abs(h),Math.abs(g));if(!f||u<f)f=u;b=0<k?"floor":"ceil";k=Math[b](k/d);g=Math[b](g/f);h=Math[b](h/f);c.unshift(a,k,g,h);return(e.event.dispatch||e.event.handle).apply(this,c)}var a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],
d,f;if(e.event.fixHooks)for(var k=a.length;k;)e.event.fixHooks[a[--k]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}};e.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",
a)}})};g();this.resolveWith(g)})})();(function(){FD31.module("resize",function(e){var g=function(){function b(){d=window[f](function(){a.each(function(){var a=e(this),b=a.width(),c=a.height(),d=e.data(this,g);b===d.w&&c===d.h||a.trigger(k,[d.w=b,d.h=c])});b()},c[h])}var a=e([]),c=e.resize=e.extend(e.resize,{}),d,f="setTimeout",k="resize",g=k+"-special-event",h="delay";c[h]=250;c.throttleWindow=!0;e.event.special[k]={setup:function(){if(!c.throttleWindow&&this[f])return!1;var d=e(this);a=a.add(d);
e.data(this,g,{w:d.width(),h:d.height()});1===a.length&&b()},teardown:function(){if(!c.throttleWindow&&this[f])return!1;var b=e(this);a=a.not(b);b.removeData(g);a.length||clearTimeout(d)},add:function(a){function b(a,c,f){var k=e(this),h=e.data(this,g);null==h&&(h={w:null,h:null});h.w=void 0!==c?c:k.width();h.h=void 0!==f?f:k.height();d.apply(this,arguments)}if(!c.throttleWindow&&this[f])return!1;var d;if(e.isFunction(a))return d=a,b;d=a.handler;a.handler=b}}};g();this.resolveWith(g)})})();(function(){FD31.module("ui/core",
function(e){var g=function(){(function(b,a){function c(a,c){var f,e;f=a.nodeName.toLowerCase();if("area"===f){f=a.parentNode;e=f.name;if(!a.href||!e||"map"!==f.nodeName.toLowerCase())return!1;f=b("img[usemap=#"+e+"]")[0];return!!f&&d(f)}return(/input|select|textarea|button|object/.test(f)?!a.disabled:"a"===f?a.href||c:c)&&d(a)}function d(a){return b.expr.filters.visible(a)&&!b(a).parents().addBack().filter(function(){return"hidden"===b.css(this,"visibility")}).length}var f=0,e=/^ui-id-\d+$/;b.ui=
b.ui||{};b.extend(b.ui,{version:"1.10.4pre",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:function(a){return function(c,d){return"number"===typeof c?this.each(function(){var a=this;setTimeout(function(){b(a).focus();d&&d.call(a)},c)}):a.apply(this,arguments)}}(b.fn.focus),
scrollParent:function(){var a;a=b.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||
!a.length?b(document):a},zIndex:function(c){if(c!==a)return this.css("zIndex",c);if(this.length){c=b(this[0]);for(var d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++f)})},removeUniqueId:function(){return this.each(function(){e.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],
{data:b.expr.createPseudo?b.expr.createPseudo(function(a){return function(c){return!!b.data(c,a)}}):function(a,c,d){return!!b.data(a,d[3])},focusable:function(a){return c(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var d=b.attr(a,"tabindex"),f=isNaN(d);return(f||0<=d)&&c(a,!f)}});b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(c,d){function f(a,c,d,k){b.each(e,function(){c-=parseFloat(b.css(a,"padding"+this))||0;d&&(c-=parseFloat(b.css(a,"border"+this+"Width"))||0);k&&
(c-=parseFloat(b.css(a,"margin"+this))||0)});return c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],k=d.toLowerCase(),g={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(c){return c===a?g["inner"+d].call(this):this.each(function(){b(this).css(k,f(this,c)+"px")})};b.fn["outer"+d]=function(a,c){return"number"!==typeof a?g["outer"+d].call(this,a):this.each(function(){b(this).css(k,f(this,a,!0,c)+"px")})}});
b.fn.addBack||(b.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});b("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(b.fn.removeData=function(a){return function(c){return arguments.length?a.call(this,b.camelCase(c)):a.call(this)}}(b.fn.removeData));b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart"in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?
"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(a,c,d){var f;a=b.ui[a].prototype;for(f in d)a.plugins[f]=a.plugins[f]||[],a.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<d.length;b++)a.options[d[b][0]]&&d[b][1].apply(a.element,c)}},hasScroll:function(a,c){if("hidden"===
b(a).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",f=!1;if(0<a[d])return!0;a[d]=1;f=0<a[d];a[d]=0;return f}});b(function(){0<b("body > #fd_.ui").length||b(document.createElement("div")).attr("id","fd_").addClass("ui").css({position:"absolute",top:0,left:0,overflow:"visible",width:0,height:0}).appendTo("body")})})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("ui/mouse",function(e){var g=this;e.require().script("ui/widget").done(function(){var b=function(){(function(a,
b){var d=!1;a(document).mouseup(function(){d=!1});a.widget("ui.mouse",{version:"1.10.4pre",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!d){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,e=1===b.which,g="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||g||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);b.preventDefault();return d=!0}},_mouseMove:function(b){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,
this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},
_mouseStop:function(){},_mouseCapture:function(){return!0}})})(e)};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/widget",function(e){var g=function(){(function(b,a){var c=0,d=Array.prototype.slice,f=b.cleanData;b.cleanData=function(a){for(var c=0,d;null!=(d=a[c]);c++)try{b(d).triggerHandler("remove")}catch(e){}f(a)};b.widget=function(a,c,d){var f,e,g,h,u={},m=a.split(".")[0];a=a.split(".")[1];f=m+"-"+a;d||(d=c,c=b.Widget);b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)};b[m]=
b[m]||{};e=b[m][a];g=b[m][a]=function(a,b){if(!this._createWidget)return new g(a,b);arguments.length&&this._createWidget(a,b)};b.extend(g,e,{version:d.version,_proto:b.extend({},d),_childConstructors:[]});h=new c;h.options=b.widget.extend({},h.options);b.each(d,function(a,d){b.isFunction(d)?u[a]=function(){var b=function(){return c.prototype[a].apply(this,arguments)},f=function(b){return c.prototype[a].apply(this,b)};return function(){var a=this._super,c=this._superApply,e;this._super=b;this._superApply=
f;e=d.apply(this,arguments);this._super=a;this._superApply=c;return e}}():u[a]=d});g.prototype=b.widget.extend(h,{widgetEventPrefix:e?h.widgetEventPrefix:a},u,{constructor:g,namespace:m,widgetName:a,widgetFullName:f});e?(b.each(e._childConstructors,function(a,c){var d=c.prototype;b.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete e._childConstructors):c._childConstructors.push(g);b.widget.bridge(a,g)};b.widget.extend=function(c){for(var f=d.call(arguments,1),e=0,g=f.length,h,t;e<g;e++)for(h in f[e])t=
f[e][h],f[e].hasOwnProperty(h)&&t!==a&&(b.isPlainObject(t)?c[h]=b.isPlainObject(c[h])?b.widget.extend({},c[h],t):b.widget.extend({},t):c[h]=t);return c};b.widget.bridge=function(c,f){var e=f.prototype.widgetFullName||c;b.fn[c]=function(g){var h="string"===typeof g,t=d.call(arguments,1),r=this;g=!h&&t.length?b.widget.extend.apply(null,[g].concat(t)):g;h?this.each(function(){var d,f=b.data(this,e);if(!f)return b.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+
g+"'");if(!b.isFunction(f[g])||"_"===g.charAt(0))return b.error("no such method '"+g+"' for "+c+" widget instance");d=f[g].apply(f,t);if(d!==f&&d!==a)return r=d&&d.jquery?r.pushStack(d.get()):d,!1}):this.each(function(){var a=b.data(this,e);a?a.option(g||{})._init():b.data(this,e,new f(g,this))});return r}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,
d){d=b(d||this.defaultElement||this)[0];this.element=b(d);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),a);this.bindings=b();this.hoverable=b();this.focusable=b();d!==this&&(b.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=b(d.style?d.ownerDocument:d.document||d),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));
this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(c,d){var f=c,e,g,h;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof c)if(f={},e=c.split("."),c=e.shift(),e.length){g=f[c]=b.widget.extend({},this.options[c]);for(h=0;h<e.length-1;h++)g[e[h]]=g[e[h]]||{},g=g[e[h]];c=e.pop();if(d===a)return g[c]===a?null:g[c];g[c]=d}else{if(d===a)return this.options[c]===
a?null:this.options[c];f[c]=d}this._setOptions(f);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",
!0)},_on:function(a,c,d){var f,e=this;"boolean"!==typeof a&&(d=c,c=a,a=!1);d?(c=f=b(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,f=this.widget());b.each(d,function(d,g){function h(){if(a||!0!==e.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof g?e[g]:g).apply(e,arguments)}"string"!==typeof g&&(h.guid=g.guid=g.guid||h.guid||b.guid++);var m=d.match(/^(\w+)\s*(.*)$/),p=m[1]+e.eventNamespace;(m=m[2])?f.delegate(m,p,h):c.bind(p,h)})},_off:function(a,b){b=
(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){b(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){b(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,
{focusin:function(a){b(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){b(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,c,d){var f,e=this.options[a];d=d||{};c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(f in a)f in c||(c[f]=a[f]);this.element.trigger(c,d);return!(b.isFunction(e)&&!1===e.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};b.each({show:"fadeIn",
hide:"fadeOut"},function(a,c){b.Widget.prototype["_"+a]=function(d,f,e){"string"===typeof f&&(f={effect:f});var g,h=f?!0===f||"number"===typeof f?c:f.effect||c:a;f=f||{};"number"===typeof f&&(f={duration:f});g=!b.isEmptyObject(f);f.complete=e;f.delay&&d.delay(f.delay);if(g&&b.effects&&b.effects.effect[h])d[a](f);else if(h!==a&&d[h])d[h](f.duration,f.easing,e);else d.queue(function(c){b(this)[a]();e&&e.call(d[0]);c()})}})})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("textboxlist",function(e){var g=
this;e.require().script("autosize.input","scrollTo").done(function(){var b=function(){e.template("textboxlist/item",'<div class="textboxlist-item" data-textboxlist-item><span class="textboxlist-itemContent" data-textboxlist-itemContent>[%== html %]</span><div class="textboxlist-itemRemoveButton" data-textboxlist-itemRemoveButton><i class="ies-cancel-2"></i></a></div>');e.template("textboxlist/itemContent",'[%= title %]<input type="hidden" name="[%= name %]" value="[%= id %]"/>');e.Controller("Textboxlist",
{pluginName:"textboxlist",hostname:"textboxlist",defaultOptions:{view:{item:"textboxlist/item",itemContent:"textboxlist/itemContent"},plugin:{},name:"items[]",unique:!0,caseSensitive:!1,max:null,filterItem:null,"{item}":"[data-textboxlist-item]","{itemContent}":"[data-textboxlist-itemContent]","{itemRemoveButton}":"[data-textboxlist-itemRemoveButton]","{textField}":"[data-textboxlist-textField]"}},function(a){return{init:function(){var b=a.textField();b.autosizeInput();b.data("placeholderText",b.attr("placeholder"));
if(b=b.data("textboxlistName"))a.options.name=b;a.item().each(function(){var b=e(this),c=b.find(a.itemContent.selector);a.createItem({id:b.data("id")||function(){var a=e.uid("item-");b.data("id",a);return a}(),title:b.data("title")||e.trim(c.text()),html:c.html()})});(a.options.plugin.autocomplete||a.element.data("query"))&&a.addPlugin("autocomplete");a.on("keypress",a.textField(),function(a){if(13==a.keyCode)return a.preventDefault()})},setLayout:function(){var b=a.textField(),d=b.data("placeholderText");
0<a.item().length&&(d="");b.attr("placeholder",d).data("autosizeInputInstance").update()},enable:function(){a.element.removeClass("disabled");a.textField().enabled(!0)},disable:function(){a.element.addClass("disabled");a.textField().disabled(!0)},items:{},itemsByTitle:{},getItemKey:function(b){return a.options.caseSensitive?b:b.toLowerCase()},filterItem:function(b){var d=a.options.filterItem;e.isFunction(d)&&(b=d.call(a,b));d=a.itemsByTitle;if(e.isString(b)&&""!==b){var f=a.getItemKey(b);b=d.hasOwnProperty(f)?
a.itemsByTitle[f]:{id:e.uid("item-"),title:b,key:a.getItemKey(b)}}b.name=b.name||a.options.name;b.html=b.html||a.view.itemContent(!0,b);return b},createItem:function(b){b.key=a.getItemKey(b.title);a.items[b.id]=b;a.itemsByTitle[b.key]=b},deleteItem:function(b){var d=a.items[b];delete a.items[b];b=a.options.caseSensitive?d.title:d.title.toLowerCase();delete a.itemsByTitle[b]},addItem:function(b){if(b){var d=a.options,f=d.max;if(!(null!==f&&a.item().length>=f)&&(b=a.filterItem(b),e.isPlainObject(b))){var k,
f=a.item().filterBy("id",b.id);d.unique&&0<f.length&&(k=f);k||(k=a.view.item(b).addClass(b.className||"").attr("data-id",b.id));a.createItem(b);k.insertBefore(a.textField());a.trigger("addItem",[b]);return b}}},removeItem:function(b){var d=a.items[b];a.item().filterBy("id",b).remove();a.deleteItem(b);a.trigger("removeItem",[d])},clearItems:function(){a.item().each(function(){a.removeItem(e(this).data("id"))})},getAddedItems:function(){var b=[];a.item().each(function(){var d=e(this).data("id");b.push(a.items[d])});
return b},"{self} addItem":function(){a.setLayout()},"{self} removeItem":function(){a.setLayout()},"{itemRemoveButton} click":function(b){b=b.parents(a.item.selector);a.removeItem(b.data("id"))},"{textField} keydown":function(a,b){a.data("realEnterKey",13==b.keyCode)},"{textField} keypress":function(b,d){var f=b.data("realEnterKey"),k=13==d.keyCode;b.data("realEnterKey",f&&k);f=e.trim(a.textField().val());switch(d.keyCode){case 13:if(b.data("realEnterKey")){d=a.trigger("useItem",[f]);k=d.item;void 0===
k&&(k=f);if(!1===k||null===k)break;a.addItem(k);b.val("")}}},"{textField} keyup":function(b,d){var f=e.trim(a.textField().val());switch(d.keyCode){case 8:""===f&&(a.canRemoveItemUsingBackspace?(f=b.prev(a.item.selector),0<f.length&&a.removeItem(f.data("id"))):a.canRemoveItemUsingBackspace=!0);break;default:a.canRemoveItemUsingBackspace=!1}},"{self} click":function(b,d){var f=a.textField();f.is(d.target)||f.focus()},"{textField} focusin":function(){a.activated||(a.activated=!0,a.trigger("textboxlistActivate"))},
"{self} mousedown":function(){a.focusing=!0},"{self} mouseup":function(){a.focusing=!1},"{self} focusout":function(){a.focusing||(a.activated=!1,a.deactivateTimer=setTimeout(function(){a.activated||a.trigger("textboxlistDeactivate")},1))}}});e(document).on("click.textboxlist.data-api","[data-textboxlist]",function(a){e(this).addController(e.Controller.TextboxList).textField().focus()}).on("focus.textboxlist.data-api","[data-textboxlist] [data-textboxlist-textField]",function(a){e(this).parents("[data-textboxlist]").addController(e.Controller.TextboxList)});
e.template("textboxlist/menu",'<div class="textboxlist-autocomplete" data-textboxlist-autocomplete><div class="textboxlist-autocomplete-inner" data-textboxlist-autocomplete-viewport><div class="textboxlist-autocomplete-loading" data-textboxlist-autocomplete-loading></div><div class="textboxlist-autocomplete-empty" data-textboxlist-autocomplete-empty></div><ul class="textboxlist-menu" data-textboxlist-menu></ul></div></div>');e.template("textboxlist/menuItem",'<li class="textboxlist-menuItem" data-textboxlist-menuItem>[%== html %]</li>');
e.template("textboxlist/loadingHint",'<i class="textboxlist-autocomplete-loading-indicator"></i>');e.template("textboxlist/emptyHint",'<span class="textboxlist-autocomplete-empty-text">No items found.</span>');e.Controller("Textboxlist.Autocomplete",{defaultOptions:{view:{menu:"textboxlist/menu",menuItem:"textboxlist/menuItem",loadingHint:"textboxlist/loadingHint",emptyHint:"textboxlist/emptyHint"},cache:!0,minLength:1,limit:10,highlight:!0,caseSensitive:!1,exclusive:!1,query:null,position:{my:"left top",
at:"left bottom",collision:"none"},filterItem:null,showEmptyHint:!1,showLoadingHint:!1,"{menu}":"[data-textboxlist-menu]","{menuItem}":"[data-textboxlist-menuItem]","{viewport}":"[data-textboxlist-autocomplete-viewport]","{loadingHint}":"[data-textboxlist-autocomplete-loading]","{emptyHint}":"[data-textboxlist-autocomplete-empty]"}},function(a){return{init:function(){if(a.element.data(a.Class.fullName)){var b=a.textboxlist;b.autocomplete=a;b.pluginInstances.autocomplete=a;a.options.position.of=a.textboxlist.element;
a.initQuery();a.view.loadingHint().appendTo(a.loadingHint());a.view.emptyHint().appendTo(a.emptyHint());a.element.detach()}else a.destroy(),a.view.menu().appendTo("body").data(a.Class.fullName,!0).addController(a.Class,a.options)},initQuery:function(){var b=a.options.query||a.textboxlist.element.data("query");e.isUrl(b)?a.query=function(a){return e.ajax(b+a)}:e.isFunction(b)?a.query=function(d){return b.call(a,d)}:e.isArray(b)&&(a.query=function(a){var f=e.Deferred();a=a.toLowerCase();setTimeout(function(){var k=
e.grep(b,function(b){return-1<b.title.toLowerCase().indexOf(a)});f.resolve(k)},0);return f})},setLayout:function(){a.hidden||a.element.css({opacity:1,width:a.textboxlist.element.outerWidth()}).position(a.options.position)},"{window} resize":e.debounce(function(){a.element.css("opacity",0);a.setLayout()},250),"{window} scroll":e.debounce(function(){a.element.css("opacity",0);a.setLayout()},250),"{window} dialogTransitionStart":function(){a.hidden=!0;a.element.css("opacity",0)},"{window} dialogTransitionEnd":function(){a.hidden=
!1;a.setLayout()},show:function(){clearTimeout(a.sleep);a.element.appendTo("body").show();a.hidden=!1;a.setLayout()},hide:function(){a.element.hide();var b=a.menuItem(),d=b.filter(".active");0<d.length&&(a.lastItem={keyword:e.trim(a.textboxlist.textField().val()),item:d.data("item")});b.removeClass("active");a.render.reset();a.hidden=!0;clearTimeout(a.sleep);a.sleep=setTimeout(function(){a.element.detach()},3E3)},queries:{},populated:!1,populate:function(b){a.populated=!1;var d=a.element,f=a.options;
d.removeClass("loading empty");f.showLoadingHint&&a.hide();var k=a.trigger("populateKeyword",[b]);k.keyword&&(b=k.keyword);var g=f.caseSensitive?b:b.toLowerCase(),h=a.queries[g],s=!e.isDeferred(h)||!a.options.cache,k=function(){f.showLoadingHint&&(d.addClass("loading"),a.show());if(s||!s&&"rejected"==h.state())h=a.queries[g]=a.query(b);h.done(a.render(function(a){return[a,b]})).fail(function(){a.hide()}).always(function(){d.removeClass("loading")});a.trigger("queryKeyword",[h,b])};s?(clearTimeout(a.queryTask),
a.queryTask=setTimeout(k,250)):k()},populateTask:null,populateFromTextField:function(){clearTimeout(a.populateTask);a.populateTask=setTimeout(function(){var b=a.textboxlist.textField(),b=e.trim(b.val());""===b||b.length<a.options.minLength?a.hide():a.populate(b)},1)},render:e.Enqueue(function(b,d){e.isArray(b)||(b=[]);var f=a.textboxlist,k=a.element,g=a.options,h=a.menu();if(1>b.length)g.showEmptyHint?(h.empty(),k.addClass("empty"),f.trigger("renderMenu",[h,a,f]),a.show()):a.hide();else{k.removeClass("empty");
g.cache&&h.data("keyword")===d||(h.empty(),e.each(b,function(b,c){f.trigger("filterItem",[c,a,f]);var k=g.filterItem;e.isFunction(k)&&(c=k.call(a,c,d));e.isPlainObject(c)&&!c.discard&&a.view.menuItem({html:c.menuHtml||c.title}).addClass(c.className||"").data("item",c).appendTo(h)}),h.data("keyword",d));var s=a.menuItem();f.trigger("filterMenu",[h,s,a,f]);if(1>s.filter(":not(.hidden)").length&&(k.addClass("empty"),!g.showEmptyHint))return a.hide();g.exclusive&&a.menuItem(":not(.hidden):first").addClass("active");
f.trigger("renderMenu",[h,a,f]);a.show()}}),"{textboxlist.textField} keydown":function(b,d){clearTimeout(a.sleep);var f=a.menuItem(".active:not(.hidden)");1>f.length&&(f=!1);a.textboxlist.textField();switch(d.keyCode){case 38:a.menuItem().removeClass("active");f?f.prev(a.menuItem.selector+":not(.hidden)").addClass("active"):a.menuItem(":not(.hidden):last").addClass("active");d.preventDefault();break;case 40:a.menuItem().removeClass("active");f?f.next(a.menuItem.selector+":not(.hidden)").addClass("active"):
a.menuItem(":not(.hidden):first").addClass("active");d.preventDefault();break;case 27:a.hide();break;case 13:break;default:a.populateFromTextField()}f=a.menuItem(".active:not(.hidden)");1>f.length||a.viewport().scrollIntoView(f)},"{textboxlist} textboxlistActivate":function(b){a.populateFromTextField()},"{textboxlist} textboxlistDeactivate":function(b){setTimeout(function(){a.hide()},150)},"{textboxlist} destroyed":function(){a.element.remove()},"{textboxlist} useItem":function(b,d,f){if(b=a.options.exclusive)d.item=
!1;if(a.hidden){var e=a.lastItem;b&&e&&e.keyword==f&&(d.item=e.item)}else f=a.menuItem(".active"),0<f.length&&(f=f.data("item"),d.item=f),a.hide()},"{menuItem} mousedown":function(){a.textboxlist.focusing=!0},"{menuItem} mouseup":function(){a.textboxlist.focusing=!1},"{menuItem} click":function(b){a.hide();b=b.data("item");a.textboxlist.addItem(b);var d=a.textboxlist.textField().val("");setTimeout(function(){d.focus()},150)},"{menuItem} mouseover":function(b){a.menuItem().removeClass("active");b.addClass("active")},
"{menuItem} mouseout":function(b){a.menuItem().removeClass("active")}}})};b();g.resolveWith(b)})})})();(function(){FD31.module("autosize.input",function(e){var g=e,b=function(){var a;(function(a){var b=function(){function a(b,c){var d=this;this._input=e(b);this._options=c;this._mirror=e('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>');e.each("fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent".split(" "),function(a,b){d._mirror[0].style[b]=
d._input.css(b)});e("body").append(this._mirror);this._input.bind("keydown keyup input",function(a){d.update()});d.update()}Object.defineProperty(a.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0});Object.defineProperty(a,"instanceKey",{get:function(){return"autosizeInputInstance"},enumerable:!0,configurable:!0});a.prototype.update=function(){var a=this._input.val();a||(a=this._input.attr("placeholder"));a!==this._mirror.text()&&(this._mirror.text(a),a=this._mirror.width()+
this._options.space,this._input.width(a))};return a}();a.AutosizeInput=b;var f=function(){function a(b){"undefined"===typeof b&&(b=30);this._space=b}Object.defineProperty(a.prototype,"space",{get:function(){return this._space},set:function(a){this._space=a},enumerable:!0,configurable:!0});return a}();a.AutosizeInputOptions=f;(function(b){var d="text password search url tel email".split(" ");b.fn.autosizeInput=function(e){return this.each(function(){if("INPUT"==this.tagName&&-1<b.inArray(this.type,
d)){var e=b(this);if(!e.data(a.AutosizeInput.instanceKey)){if(void 0==g){var g=e.data("autosize-input");g&&"object"==typeof g||(g=new f)}e.data(a.AutosizeInput.instanceKey,new a.AutosizeInput(this,g))}}})};b(function(){b("input[data-autosize-input]").autosizeInput()})})(g)})(a||(a={}))};b();this.resolveWith(b)})})();(function(){FD31.module("scrollTo",function(e){var g=function(){(function(b){function a(a){return"object"==typeof a?a:{top:a,left:a}}var c=b.scrollTo=function(a,c,e){b(window).scrollTo(a,
c,e)};c.defaults={axis:"xy",duration:1.3<=parseFloat(b.fn.jquery)?0:1,limit:!0};c.window=function(a){return b(window)._scrollable()};b.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==b.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var a=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||"BackCompat"==a.compatMode?a.body:a.documentElement})};b.fn.scrollTo=function(d,f,e){"object"==
typeof f&&(e=f,f=0);"function"==typeof e&&(e={onAfter:e});"max"==d&&(d=9E9);e=b.extend({},c.defaults,e);f=f||e.duration;e.queue=e.queue&&1<e.axis.length;e.queue&&(f/=2);e.offset=a(e.offset);e.over=a(e.over);return this._scrollable().each(function(){function g(a){s.animate(r,f,e.easing,a&&function(){a.call(this,d,e)})}if(null!=d){var h=this,s=b(h),q=d,t,r={},u=s.is("html,body");switch(typeof q){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(q)){q=a(q);break}q=b(q,this);if(!q.length)return;
case "object":if(q.is||q.style)t=(q=b(q)).offset()}b.each(e.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",f=d.toLowerCase(),v="scroll"+d,z=h[v],y=c.max(h,b);t?(r[v]=t[f]+(u?0:z-s.offset()[f]),e.margin&&(r[v]-=parseInt(q.css("margin"+d))||0,r[v]-=parseInt(q.css("border"+d+"Width"))||0),r[v]+=e.offset[f]||0,e.over[f]&&(r[v]+=q["x"==b?"width":"height"]()*e.over[f])):(d=q[f],r[v]=d.slice&&"%"==d.slice(-1)?parseFloat(d)/100*y:d);e.limit&&/^\d+$/.test(r[v])&&(r[v]=0>=r[v]?0:Math.min(r[v],y));!a&&
e.queue&&(z!=r[v]&&g(e.onAfterFirst),delete r[v])});g(e.onAfter)}}).end()};b.fn.scrollIntoView=function(a){a=b(a);if(!(1>a.length)){var c=this.offset(),e=this.height(),c=c.top,g=c+e,h=a.offset(),s=a.height(),h=h.top;if(h+s>g)return this.scrollTo(a);if(h<c)return this.scrollTo(a,{offset:-1*(e-s)})}};c.max=function(a,c){var e="x"==c?"Width":"Height",g="scroll"+e;if(!b(a).is("html,body"))return a[g]-b(a)[e.toLowerCase()]();var e="client"+e,h=a.ownerDocument.documentElement,s=a.ownerDocument.body;return Math.max(h[g],
s[g])-Math.min(h[e],s[e])}})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("expanding",function(e){var g=function(){function b(){e(this).data("textareaClone").find("div").text(this.value.replace(/\r\n/g,"\n")+" ");e(this).trigger("resize.expanding")}e.expandingTextarea=e.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},e.expandingTextarea||{});var a="lineHeight textDecoration letterSpacing fontSize fontFamily fontStyle fontWeight textTransform textAlign direction wordSpacing fontSizeAdjust wordWrap word-break borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom boxSizing webkitBoxSizing mozBoxSizing msBoxSizing".split(" "),
c={position:"absolute",height:"100%",resize:"none"},d={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},f={position:"relative"};e.fn.expandingTextarea=function(k){var g=e.extend({},e.expandingTextarea.opts,k);if("resize"===k)return this.trigger("input.expanding");if("destroy"===k)return this.filter(".expanding-init").each(function(){var a=e(this).removeClass("expanding-init");a.attr("style",a.data("expanding-styles")||"").removeData("expanding-styles")}),this;this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var k=
e(this),h=k.parent(),q=e(e.parseHTML("<pre class='textareaClone'><div></div></pre>"));k.after(q).data("textareaClone",q);h.css(f);k.data("expanding-styles",k.attr("style"));k.css(c);q.css(d);e.each(a,function(a,b){var c=k.css(b);q.css(b)!==c&&q.css(b,c)});k.bind("input.expanding propertychange.expanding keyup.expanding",b);b.apply(this);g.resize&&k.bind("resize.expanding",g.resize)});return this};e(function(){e.expandingTextarea.autoInitialize&&e(e.expandingTextarea.initialSelector).expandingTextarea()})};
g();this.resolveWith(g)})})();(function(){FD31.module("tinyscrollbar",function(e){var g=function(){(function(b){function a(a,d){var f,e,g;function h(a){var c=parseInt(C.obj.css(v),10);f=w?a.pageX:a.pageY;e="auto"==c?0:c;L?(document.ontouchmove=function(a){a.preventDefault();q(a.touches[0])},document.ontouchend=t):(b(document).bind("mousemove",q),b(document).bind("mouseup",t),C.obj.bind("mouseup",t))}function s(a){1>u.ratio&&(a=a||window.event,y-=(a.wheelDelta?a.wheelDelta/120:-a.detail/3)*d.wheel,
y=Math.min(u[d.axis]-r[d.axis],Math.max(0,y)),C.obj.css(v,y/m.ratio),u.obj.css(v,-y),d.lockscroll||y!==u[d.axis]-r[d.axis]&&0!==y)&&(a=b.event.fix(a),a.preventDefault())}function q(a){1>u.ratio&&(g=L?Math.min(x[d.axis]-C[d.axis],Math.max(0,e+(f-(w?a.pageX:a.pageY)))):Math.min(x[d.axis]-C[d.axis],Math.max(0,e+((w?a.pageX:a.pageY)-f))),y=g*m.ratio,u.obj.css(v,-y),C.obj.css(v,g))}function t(){b(document).unbind("mousemove",q);b(document).unbind("mouseup",t);C.obj.unbind("mouseup",t);document.ontouchmove=
document.ontouchend=null}var r={obj:b(".viewport",a)},u={obj:b(".overview",a)},m={obj:b(".scrollbar",a)},x={obj:b(".track",m.obj)},C={obj:b(".thumb",m.obj)},w="x"===d.axis,v=w?"left":"top",z=w?"Width":"Height",y=0;g=e=0;f=void 0;var L="ontouchstart"in document.documentElement?!0:!1;this.update=function(a){r[d.axis]=r.obj[0]["offset"+z];u[d.axis]=u.obj[0]["scroll"+z];u.ratio=r[d.axis]/u[d.axis];m.obj.toggleClass("disable",1<=u.ratio);x[d.axis]="auto"===d.size?r[d.axis]:d.size;C[d.axis]=Math.min(x[d.axis],
Math.max(0,"auto"===d.sizethumb?x[d.axis]*u.ratio:d.sizethumb));m.ratio="auto"===d.sizethumb?u[d.axis]/x[d.axis]:(u[d.axis]-r[d.axis])/(x[d.axis]-C[d.axis]);y="relative"===a&&1>=u.ratio?Math.min(u[d.axis]-r[d.axis],Math.max(0,y)):0;y="bottom"===a&&1>=u.ratio?u[d.axis]-r[d.axis]:isNaN(parseInt(a,10))?y:parseInt(a,10);a=z.toLowerCase();C.obj.css(v,y/m.ratio);u.obj.css(v,-y);f=C.obj.offset()[v];m.obj.css(a,x[d.axis]);x.obj.css(a,x[d.axis]);C.obj.css(a,C[d.axis])};this.update();(function(){L?r.obj[0].ontouchstart=
function(a){1===a.touches.length&&(h(a.touches[0]),a.stopPropagation())}:(C.obj.bind("mousedown",h),x.obj.bind("mouseup",q));d.scroll&&window.addEventListener?(a[0].addEventListener("DOMMouseScroll",s,!1),a[0].addEventListener("mousewheel",s,!1)):d.scroll&&(a[0].onmousewheel=s)})();return this}b.tiny=b.tiny||{};b.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,lockscroll:!0,size:"auto",sizethumb:"auto"}};b.fn.tinyscrollbar=function(c){var d=b.extend({},b.tiny.scrollbar.options,c);this.each(function(){b(this).data("tsb",
new a(b(this),d))});return this};b.fn.tinyscrollbar_update=function(a){return b(this).data("tsb").update(a)}})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("history",function(e){var g=function(){(function(a,b){var d=a.History=a.History||{};if("undefined"!==typeof d.Adapter)throw Error("History.js Adapter has already been loaded...");d.Adapter={bind:function(a,b,c){e(a).bind(b,c)},trigger:function(a,b,c){e(a).trigger(b,c)},extractEventData:function(a,d,e){return d&&d.originalEvent&&d.originalEvent[a]||
e&&e[a]||b},onDomLoad:function(a){e(a)}};"undefined"!==typeof d.init&&d.init()})(window);(function(a,b){var d=a.document,f=a.setInterval||f,e=a.History=a.History||{};if("undefined"!==typeof e.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");e.initHtml4=function(){if("undefined"!==typeof e.initHtml4.initialized)return!1;e.initHtml4.initialized=!0;e.enabled=!0;e.savedHashes=[];e.isLastHash=function(a){var b=e.getHashByIndex();return a===b};e.saveHash=function(a){if(e.isLastHash(a))return!1;
e.savedHashes.push(a);return!0};e.getHashByIndex=function(a){var b=null;return b="undefined"===typeof a?e.savedHashes[e.savedHashes.length-1]:0>a?e.savedHashes[e.savedHashes.length+a]:e.savedHashes[a]};e.discardedHashes={};e.discardedStates={};e.discardState=function(a,b,c){var d=e.getHashByState(a);e.discardedStates[d]={discardedState:a,backState:c,forwardState:b};return!0};e.discardHash=function(a,b,c){e.discardedHashes[a]={discardedHash:a,backState:c,forwardState:b};return!0};e.discardedState=
function(a){a=e.getHashByState(a);return e.discardedStates[a]||!1};e.discardedHash=function(a){return e.discardedHashes[a]||!1};e.recycleState=function(a){var b=e.getHashByState(a);e.discardedState(a)&&delete e.discardedStates[b];return!0};e.emulated.hashChange&&(e.hashChangeInit=function(){e.checkerFunction=null;var b="",c,g,h;e.isInternetExplorer()?(c=d.createElement("iframe"),c.setAttribute("id","historyjs-iframe"),c.style.display="none",d.body.appendChild(c),c.contentWindow.document.open(),c.contentWindow.document.close(),
g="",h=!1,e.checkerFunction=function(){if(h)return!1;h=!0;var d=e.getHash()||"",f=e.unescapeHash(c.contentWindow.document.location.hash)||"";d!==b?(b=d,f!==d&&(g=d,c.contentWindow.document.open(),c.contentWindow.document.close(),c.contentWindow.document.location.hash=e.escapeHash(d)),e.Adapter.trigger(a,"hashchange")):f!==g&&(g=f,e.setHash(f,!1));h=!1;return!0}):e.checkerFunction=function(){var c=e.getHash();c!==b&&(b=c,e.Adapter.trigger(a,"hashchange"));return!0};e.intervalList.push(f(e.checkerFunction,
e.options.hashChangeInterval));return!0},e.Adapter.onDomLoad(e.hashChangeInit));e.emulated.pushState&&(e.onHashChange=function(b){var c=e.getHashByUrl(b&&b.newURL||d.location.href);b=null;if(e.isLastHash(c))return e.busy(!1),!1;e.doubleCheckComplete();e.saveHash(c);if(c&&e.isTraditionalAnchor(c))return e.Adapter.trigger(a,"anchorchange"),e.busy(!1),!1;b=e.extractState(e.getFullUrl(c||d.location.href,!1),!0);if(e.isLastSavedState(b))return e.busy(!1),!1;e.getHashByState(b);if(c=e.discardedState(b))return e.getHashByIndex(-2)===
e.getHashByState(c.forwardState)?e.back(!1):e.forward(!1),!1;e.pushState(b.data,b.title,b.url,!1);return!0},e.Adapter.bind(a,"hashchange",e.onHashChange),e.pushState=function(b,c,f,g){if(e.getHashByUrl(f))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==g&&e.busy())return e.pushQueue({scope:e,callback:e.pushState,args:arguments,queue:g}),!1;e.busy(!0);var h=e.createStateObject(b,c,f),r=e.getHashByState(h),u=e.getState(!1),u=e.getHashByState(u),
m=e.getHash();e.storeState(h);e.expectedStateId=h.id;e.recycleState(h);e.setTitle(h);if(r===u)return e.busy(!1),!1;if(r!==m&&r!==e.getShortUrl(d.location.href))return e.setHash(r,!1),!1;e.saveState(h);e.Adapter.trigger(a,"statechange");e.busy(!1);return!0},e.replaceState=function(a,b,c,d){if(e.getHashByUrl(c))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==d&&e.busy())return e.pushQueue({scope:e,callback:e.replaceState,args:arguments,queue:d}),
!1;e.busy(!0);var f=e.createStateObject(a,b,c),g=e.getState(!1),h=e.getStateByIndex(-2);e.discardState(g,f,h);e.pushState(f.data,f.title,f.url,!1);return!0});if(e.emulated.pushState&&e.getHash()&&!e.emulated.hashChange)e.Adapter.onDomLoad(function(){e.Adapter.trigger(a,"hashchange")})};"undefined"!==typeof e.init&&e.init()})(window);(function(a,b){var d=a.console||b,f=a.document,e=a.navigator,g=a.sessionStorage||!1,h=a.setTimeout,s=a.clearTimeout,q=a.setInterval,t=a.clearInterval,r=a.JSON,u=a.alert,
m=a.History=a.History||{},x=a.history;r.stringify=r.stringify||r.encode;r.parse=r.parse||r.decode;if("undefined"!==typeof m.init)throw Error("History.js Core has already been loaded...");m.init=function(){if("undefined"===typeof m.Adapter)return!1;"undefined"!==typeof m.initCore&&m.initCore();"undefined"!==typeof m.initHtml4&&m.initHtml4();return!0};m.initCore=function(){if("undefined"!==typeof m.initCore.initialized)return!1;m.initCore.initialized=!0;m.options=m.options||{};m.options.hashChangeInterval=
m.options.hashChangeInterval||100;m.options.safariPollInterval=m.options.safariPollInterval||500;m.options.doubleCheckInterval=m.options.doubleCheckInterval||500;m.options.storeInterval=m.options.storeInterval||1E3;m.options.busyDelay=m.options.busyDelay||250;m.options.debug=m.options.debug||!1;m.options.initialTitle=m.options.initialTitle||f.title;m.intervalList=[];m.clearAllIntervals=function(){var a,b=m.intervalList;if("undefined"!==typeof b&&null!==b){for(a=0;a<b.length;a++)t(b[a]);m.intervalList=
null}};m.debug=function(){m.options.debug&&m.log.apply(m,arguments)};m.log=function(){var a=!("undefined"===typeof d||"undefined"===typeof d.log||"undefined"===typeof d.log.apply),b=f.getElementById("log"),c,e,g,k;a?(e=Array.prototype.slice.call(arguments),c=e.shift(),"undefined"!==typeof d.debug?d.debug.apply(d,[c,e]):d.log.apply(d,[c,e])):c="\n"+arguments[0]+"\n";e=1;for(g=arguments.length;e<g;++e){k=arguments[e];if("object"===typeof k&&"undefined"!==typeof r)try{k=r.stringify(k)}catch(m){}c+="\n"+
k+"\n"}b?(b.value+=c+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||u(c);return!0};m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion,b;if("undefined"!==typeof m.getInternetExplorerMajorVersion.cached)b=m.getInternetExplorerMajorVersion.cached;else{b=3;for(var c=f.createElement("div"),d=c.getElementsByTagName("i");(c.innerHTML="\x3c!--[if gt IE "+ ++b+"]><i></i><![endif]--\x3e")&&d[0];);b=4<b?b:!1}return a.cached=b};m.isInternetExplorer=function(){return m.isInternetExplorer.cached=
"undefined"!==typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion())};m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in f)||m.isInternetExplorer()&&8>m.getInternetExplorerMajorVersion())};m.enabled=!m.emulated.pushState;m.bugs={setHash:Boolean(!m.emulated.pushState&&
"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&8>m.getInternetExplorerMajorVersion()),hashEscape:Boolean(m.isInternetExplorer()&&7>m.getInternetExplorerMajorVersion())};m.isEmptyObject=function(a){for(var b in a)return!1;return!0};m.cloneObject=function(a){a?(a=r.stringify(a),a=r.parse(a)):
a={};return a};m.getRootUrl=function(){var a=f.location.protocol+"//"+(f.location.hostname||f.location.host);f.location.port&&(a+=":"+f.location.port);return a+"/"};m.getBaseHref=function(){var a=f.getElementsByTagName("base"),b=null,b="";1===a.length&&(b=a[0],b=b.href.replace(/[^\/]+$/,""));(b=b.replace(/\/+$/,""))&&(b+="/");return b};m.getBaseUrl=function(){return m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl()};m.getPageUrl=function(){return((m.getState(!1,!1)||{}).url||f.location.href).replace(/\/+$/,
"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"})};m.getBasePageUrl=function(){return f.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);b="undefined"===typeof b?!0:b;/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,
""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,""));return c.replace(/\#$/,"")};m.getShortUrl=function(a){var b=m.getBaseUrl(),c=m.getRootUrl();m.emulated.pushState&&(a=a.replace(b,""));a=a.replace(c,"/");m.isTraditionalAnchor(a)&&(a="./"+a);return a=a.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")};m.store={};m.idToState=m.idToState||{};m.stateToId=m.stateToId||{};m.urlToId=m.urlToId||{};m.storedStates=m.storedStates||[];m.savedStates=m.savedStates||[];m.normalizeStore=function(){m.store.idToState=m.store.idToState||
{};m.store.urlToId=m.store.urlToId||{};m.store.stateToId=m.store.stateToId||{}};m.getState=function(a,b){"undefined"===typeof a&&(a=!0);"undefined"===typeof b&&(b=!0);var c=m.getLastSavedState();!c&&b&&(c=m.createStateObject());a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url);return c};m.getIdByState=function(a){var b=m.extractId(a.url),c;if(!b)if(c=m.getStateString(a),"undefined"!==typeof m.stateToId[c])b=m.stateToId[c];else if("undefined"!==typeof m.store.stateToId[c])b=m.store.stateToId[c];else{for(;b=
(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!==typeof m.idToState[b]||"undefined"!==typeof m.store.idToState[b];);m.stateToId[c]=b;m.idToState[b]=a}return b};m.normalizeState=function(a){var b;a&&"object"===typeof a||(a={});if("undefined"!==typeof a.normalized)return a;a.data&&"object"===typeof a.data||(a.data={});b={normalized:!0};b.title=a.title||"";b.url=m.getFullUrl(m.unescapeString(a.url||f.location.href));b.hash=m.getShortUrl(b.url);b.data=m.cloneObject(a.data);b.id=
m.getIdByState(b);b.cleanUrl=b.url.replace(/\??\&_suid.*/,"");b.url=b.cleanUrl;a=!m.isEmptyObject(b.data);if(b.title||a)b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;b.hashedUrl=m.getFullUrl(b.hash);(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl);return b};m.createStateObject=function(a,b,c){a={data:a,title:b,url:c};return a=m.normalizeState(a)};m.getStateById=function(a){a=String(a);return m.idToState[a]||
m.store.idToState[a]||b};m.getStateString=function(a){a={data:m.normalizeState(a).data,title:a.title,url:a.url};return r.stringify(a)};m.getStateId=function(a){return m.normalizeState(a).id};m.getHashByState=function(a){return m.normalizeState(a).hash};m.extractId=function(a){return((a=/(.*)\&_suid=([0-9]+)$/.exec(a))?String(a[2]||""):"")||!1};m.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};m.extractState=function(a,b){var c=null,d,f;b=b||!1;(d=m.extractId(a))&&(c=m.getStateById(d));
c||(f=m.getFullUrl(a),(d=m.getIdByUrl(f)||!1)&&(c=m.getStateById(d)),c||!b||m.isTraditionalAnchor(a)||(c=m.createStateObject(null,null,f)));return c};m.getIdByUrl=function(a){return m.urlToId[a]||m.store.urlToId[a]||b};m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b};m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b};m.hasUrlDuplicate=function(a){var b=!1;return b=(b=m.extractState(a.url))&&b.id!==a.id};m.storeState=function(a){m.urlToId[a.url]=
a.id;m.storedStates.push(m.cloneObject(a));return a};m.isLastSavedState=function(a){var b=!1;m.savedStates.length&&(a=a.id,b=m.getLastSavedState(),b=b.id,b=a===b);return b};m.saveState=function(a){if(m.isLastSavedState(a))return!1;m.savedStates.push(m.cloneObject(a));return!0};m.getStateByIndex=function(a){var b=null;return b="undefined"===typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]};m.getHash=function(){return m.unescapeHash(f.location.hash)};
m.unescapeString=function(b){for(var c;;){c=a.unescape(b);if(c===b)break;b=c}return b};m.unescapeHash=function(a){a=m.normalizeHash(a);return a=m.unescapeString(a)};m.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};m.setHash=function(a,b){var c,d;if(!1!==b&&m.busy())return m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1;c=m.escapeHash(a);m.busy(!0);(d=m.extractState(a,!0))&&!m.emulated.pushState?m.pushState(d.data,d.title,d.url,!1):f.location.hash!==
c&&(m.bugs.setHash?(d=m.getPageUrl(),m.pushState(null,null,d+"#"+c,!1)):f.location.hash=c);return m};m.escapeHash=function(b){b=m.normalizeHash(b);b=a.escape(b);m.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return b};m.getHashByUrl=function(a){a=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return a=m.unescapeHash(a)};m.setTitle=function(a){var b=a.title,c;b||(c=m.getStateByIndex(0))&&c.url===a.url&&(b=c.title||m.options.initialTitle);
try{f.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(d){}f.title=b;return m};m.queues=[];m.busy=function(a){"undefined"!==typeof a?m.busy.flag=a:"undefined"===typeof m.busy.flag&&(m.busy.flag=!1);if(!m.busy.flag){s(m.busy.timeout);var b=function(){var a,c;if(!m.busy.flag)for(a=m.queues.length-1;0<=a;--a)c=m.queues[a],0!==c.length&&(c=c.shift(),m.fireQueueItem(c),m.busy.timeout=h(b,m.options.busyDelay))};m.busy.timeout=h(b,m.options.busyDelay)}return m.busy.flag};
m.busy.flag=!1;m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])};m.pushQueue=function(a){m.queues[a.queue||0]=m.queues[a.queue||0]||[];m.queues[a.queue||0].push(a);return m};m.queue=function(a,b){"function"===typeof a&&(a={callback:a});"undefined"!==typeof b&&(a.queue=b);m.busy()?m.pushQueue(a):m.fireQueueItem(a);return m};m.clearQueue=function(){m.busy.flag=!1;m.queues=[];return m};m.stateChanged=!1;m.doubleChecker=!1;m.doubleCheckComplete=function(){m.stateChanged=!0;m.doubleCheckClear();
return m};m.doubleCheckClear=function(){m.doubleChecker&&(s(m.doubleChecker),m.doubleChecker=!1);return m};m.doubleCheck=function(a){m.stateChanged=!1;m.doubleCheckClear();m.bugs.ieDoubleCheck&&(m.doubleChecker=h(function(){m.doubleCheckClear();m.stateChanged||a();return!0},m.options.doubleCheckInterval));return m};m.safariStatePoll=function(){var b=m.extractState(f.location.href);if(!m.isLastSavedState(b))return b||m.createStateObject(),m.Adapter.trigger(a,"popstate"),m};m.back=function(a){if(!1!==
a&&m.busy())return m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1;m.busy(!0);m.doubleCheck(function(){m.back(!1)});x.go(-1);return!0};m.forward=function(a){if(!1!==a&&m.busy())return m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1;m.busy(!0);m.doubleCheck(function(){m.forward(!1)});x.go(1);return!0};m.go=function(a,b){var c;if(0<a)for(c=1;c<=a;++c)m.forward(b);else if(0>a)for(c=-1;c>=a;--c)m.back(b);else throw Error("History.go: History.go requires a positive or negative integer passed.");
return m};if(m.emulated.pushState){var C=function(){};m.pushState=m.pushState||C;m.replaceState=m.replaceState||C}else m.onPopState=function(b,c){var d=!1,d=!1;m.doubleCheckComplete();if(d=m.getHash())return(d=m.extractState(d||f.location.href,!0))?m.replaceState(d.data,d.title,d.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1;(d=(d=m.Adapter.extractEventData("state",b,c)||!1)?m.getStateById(d):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(f.location.href))||
(d=m.createStateObject(null,null,f.location.href));m.expectedStateId=!1;if(m.isLastSavedState(d))return m.busy(!1),!1;m.storeState(d);m.saveState(d);m.setTitle(d);m.Adapter.trigger(a,"statechange");m.busy(!1);return!0},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,f){if(m.getHashByUrl(d)&&m.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,
queue:f}),!1;m.busy(!0);var e=m.createStateObject(b,c,d);m.isLastSavedState(e)?m.busy(!1):(m.storeState(e),m.expectedStateId=e.id,x.pushState(e.id,e.title,e.url),m.Adapter.trigger(a,"popstate"));return!0},m.replaceState=function(b,c,d,f){if(m.getHashByUrl(d)&&m.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:f}),!1;m.busy(!0);var e=m.createStateObject(b,
c,d);m.isLastSavedState(e)?m.busy(!1):(m.storeState(e),m.expectedStateId=e.id,x.replaceState(e.id,e.title,e.url),m.Adapter.trigger(a,"popstate"));return!0};if(g)try{m.store=r.parse(g.getItem("History.store"))||{}}catch(w){m.store={}}else m.store={};m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals);m.Adapter.bind(a,"unload",m.clearAllIntervals);m.saveState(m.storeState(m.extractState(f.location.href,!0)));g&&(m.onUnload=function(){var a,b;try{a=r.parse(g.getItem("History.store"))||
{}}catch(c){a={}}a.idToState=a.idToState||{};a.urlToId=a.urlToId||{};a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a;m.normalizeStore();g.setItem("History.store",r.stringify(a))},m.intervalList.push(q(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",
m.onUnload),m.Adapter.bind(a,"unload",m.onUnload));if(!m.emulated.pushState&&(m.bugs.safariPoll&&m.intervalList.push(q(m.safariStatePoll,m.options.safariPollInterval)),"Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()))m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})};m.init()})(window);var b=[];e.fn.route=function(a){if(this.is("a")){var c=(new Date).getTime();b[c]=c;History.pushState(e.extend({timestamp:c,
refresh:!0},a),this.attr("title"),this.attr("href"))}return this};History.Adapter.bind(window,"statechange",function(){var a=History.getState();a.data.timestamp in b?delete b[a.data.timestamp]:a.data.refresh&&(window.location=a.url)})};g();this.resolveWith(g)})})();(function(){FD31.module("masonry",function(e){var g=function(){(function(b,a,c){var d=a.event,f;d.special.smartresize={setup:function(){a(this).bind("resize",d.special.smartresize.handler)},teardown:function(){a(this).unbind("resize",d.special.smartresize.handler)},
handler:function(a,b){var c=this,d=arguments;a.type="smartresize";f&&clearTimeout(f);f=setTimeout(function(){e.event.dispatch.apply(c,d)},"execAsap"===b?0:100)}};a.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};a.Mason=function(b,c){this.element=a(c);this._create(b);this._init()};a.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}};
a.Mason.prototype={_filterFindBricks:function(a){var b=this.options.itemSelector;return b?a.filter(b).add(a.find(b)):a},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(c){this.options=a.extend(!0,{},a.Mason.settings,c);this.styleQueue=[];c=this.element[0].style;this.originalStyle={height:c.height||""};var d=this.options.containerStyle,f;for(f in d)this.originalStyle[f]=c[f]||"";this.element.css(d);this.horizontalDirection=
this.options.isRTL?"right":"left";this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)};this.isFluid=this.options.columnWidth&&"function"===typeof this.options.columnWidth;var e=this;setTimeout(function(){e.element.addClass("masonry")},0);this.options.isResizable&&a(b).bind("smartresize.masonry",function(){e.resize()});this.reloadItems()},_init:function(a){this._getColumns();this._reLayout(a)},option:function(b,c){a.isPlainObject(b)&&
(this.options=a.extend(!0,this.options,b))},layout:function(a,b){for(var c=0,d=a.length;c<d;c++)this._placeBrick(a[c]);d={};d.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){for(var f=0,c=this.cols;--c&&0===this.colYs[c];)f++;d.width=(this.cols-f)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:d});for(var f=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",e=this.options.animationOptions,g,c=0,d=this.styleQueue.length;c<d;c++)g=
this.styleQueue[c],g.$el[f](g.style,e);this.styleQueue=[];b&&b.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.isFluid?this.options.columnWidth(a):this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(b){b=a(b);var c,d,f,e,g;c=Math.ceil(b.outerWidth(!0)/
(this.columnWidth+this.options.gutterWidth));c=Math.min(c,this.cols);if(1===c)f=this.colYs;else for(d=this.cols+1-c,f=[],g=0;g<d;g++)e=this.colYs.slice(g,g+c),f[g]=Math.max.apply(Math,e);g=Math.min.apply(Math,f);d=c=0;for(e=f.length;d<e;d++)if(f[d]===g){c=d;break}f={top:g+this.offset.y};f[this.horizontalDirection]=this.columnWidth*c+this.offset.x;this.styleQueue.push({$el:b,style:f});b=g+b.outerHeight(!0);f=this.cols+1-e;for(d=0;d<f;d++)this.colYs[c+d]=b},resize:function(){var a=this.cols;this._getColumns();
(this.isFluid||this.cols!==a)&&this._reLayout()},_reLayout:function(a){var b=this.cols;for(this.colYs=[];b--;)this.colYs.push(0);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();this._init(a)},appended:function(a,b,c){if(b){this._filterFindBricks(a).css({top:this.element.height()});var d=this;setTimeout(function(){d._appended(a,c)},1)}else this._appended(a,c)},_appended:function(a,b){var c=this._getBricks(a);
this.$bricks=this.$bricks.add(c);this.layout(c,b)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});var c=this.element[0].style,d;for(d in this.originalStyle)c[d]=this.originalStyle[d];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");a(b).unbind(".masonry")}};a.fn.imagesLoaded=function(b){function c(){b.call(f,e)}function d(b){b=
b.target;b.src!==h&&-1===a.inArray(b,u)&&(u.push(b),0>=--g&&(setTimeout(c),e.unbind(".imagesLoaded",d)))}var f=this,e=f.find("img").add(f.filter("img")),g=e.length,h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",u=[];g||c();e.bind("load.imagesLoaded error.imagesLoaded",d).each(function(){var a=this.src;this.src=h;this.src=a});return f};a.fn.masonry=function(c){if("string"===typeof c){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var f=a.data(this,"masonry");
f?a.isFunction(f[c])&&"_"!==c.charAt(0)?f[c].apply(f,d):b.console&&b.console.error("no such method '"+c+"' for masonry instance"):b.console&&b.console.error("cannot call methods on masonry prior to initialization; attempted to call method '"+c+"'")})}else this.each(function(){var b=a.data(this,"masonry");b?(b.option(c||{}),b._init()):a.data(this,"masonry",new a.Mason(c,this))});return this}})(window,e)};g();this.resolveWith(g)})})();(function(){FD31.module("dialog",function(e){var g=this;e.require().script("ui/position",
"easing").done(function(){var b=function(){e.template("dialog/default",'<div class="foundryDialog global"><div class="dialog-wrap"><div class="in"><div class="dialog-loader"><div class="loader-img"></div></div><div class="dialog-head"><span class="dialog-title"></span><a class="dialog-closeButton">Close</a></div><div class="dialog-body dialog-content"></div><div class="dialog-footer"><div class="dialog-loading"></div><div class="dialog-buttons"></div></div></div></div></div>');e.Controller("Dialog",
{pluginName:"dialog",defaultOptions:{title:"",content:void 0,buttons:{},customClass:"",width:"auto",height:"auto",css:{position:"absolute",width:"auto",height:"auto",zIndex:10001},position:{my:"center center",at:"center center",of:window},offset:100,showOverlay:!0,overlay:{css:{background:"#000",opacity:"0.4",position:"fixed",top:0,left:0,zIndex:1E4,width:"100%",height:"100%",display:"none"}},body:{css:{minWidth:0,minHeight:0,overflow:"auto"}},loader:{width:300,height:100},loading:"",iframe:{css:{width:"100%",
height:"100%",border:"none"}},transition:{show:"zoom",hide:"zoom"},escapeKey:!0,beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){},dialogHead:".dialog-head",dialogBody:".dialog-body",dialogFooter:".dialog-footer",dialogTitle:".dialog-title",dialogContent:".dialog-content",dialogButtons:".dialog-buttons",dialogLoader:".dialog-loader",dialogLoading:".dialog-loading","{closeButton}":".dialog-closeButton"}},function(a){return{ready:!1,contentReady:!1,init:function(){a.setInitOptions(a.options);
a.initElement=a.element.clone();a.element.finalizeContent=function(){return a.finalizeContent.apply(a,arguments)};e.each("dialogHead dialogBody dialogFooter dialogTitle dialogContent dialogButtons dialogLoader dialogLoading".split(" "),function(b,d){a[d]=a.find(a.options[d])});void 0!==a.options.content&&a.display()},"{self} destroyed":function(){e(document).off("keydown.foundry.dialog")},setInitOptions:function(b){a.initOptions=e.extend(!0,{},b);e.each(["beforeShow","afterShow","beforeHide","afterHide"],
function(b,c){a.initOptions[c]=function(){}});e.each("title content buttons loading selectors bindings".split(" "),function(b,c){a.initOptions[c]=null})},update:function(b){if(b){if(b.hasOwnProperty("{binder}"))return;b=e.extend(!0,{},a.initOptions,b);a.setInitOptions(b);a.display(b)}return a},determineContentType:function(a){return/<dialog>(.*?)/.test(a)?"dialog":e.isUrl(a)?"iframe":e.isDeferred(a)?"deferred":"html"},displayQueue:[],display:function(b){if(a.resizing)return a.displayQueue.push(b);
e.isPlainObject(b)&&(a.options=e.extend(!0,{},a.Class.defaults,b));a.ready||a.options.showOverlay&&a.createOverlay();b=a.options;var d=b.content;a.contentReady=null===d;a.contentType=a.determineContentType(d);var f=b.transition;e.isString(f)&&(b.transition={show:f,hide:f});switch(a.contentType){case "html":a.hideLoader();a.show();break;case "iframe":var g=e(document.createElement("iframe")),h=b.iframe.css,p=a.dialogContent,s=e.extend(!0,{},b,{content:g,buttons:b.buttons});a.showLoader(function(){onIframeLoaded=
function(){return function(b){try{g[0].contentWindow.parentDialog=a}catch(c){}a.update(s)}}();a.dialogBody.addClass("type-iframe");g.appendTo(p).css(h).css({position:"absolute",visibility:"hidden"}).one("load",onIframeLoaded).attr("src",d)});break;case "deferred":a.showLoader(function(){d.done(function(d){d&&(d=e.isString(d)?{content:d}:d,d.content&&a.update(e.extend(!0,{},b,d)))}).fail(function(b,c){var d=e.isString(c)?e.String.capitalize(c):"Error",f=e.isString(b)?b:"There was an error loading content.";
a.update({title:d,content:f})})});break;case "dialog":var f=e.buildHTML(d),q={};e.each(f.children(),function(a,b){b=e(b);var c=e.String.camelize(this.nodeName.toLowerCase()),d=b.html();switch(b.attr("type")){case "json":try{d=e.parseJSON(d)}catch(f){}break;case "javascript":try{d=eval("(function($){ return "+e.trim(d)+" })("+e.globalNamespace+")")}catch(g){}break;case "text":d=b.text()}e.isNumeric(d)&&(d=parseFloat(d));q[c]=d});a.update(e.extend(!0,{},b,q))}},loading:function(b){var d=a.element;if(void 0===
b)return d.hasClass("loading");!1===b?d.removeClass("loading"):(!0===b&&(b=a.options.loading||""),e.isString(b)&&(d.addClass("loading"),a.dialogLoading.html(b)))},showLoader:function(b){var d=a.options.width,f=a.options.height,g=function(){a.dialogLoader.show().css({width:a.dialogBody.outerWidth(!0),height:a.dialogBody.outerHeight(!0)}).position({my:"top left",at:"top left",of:a.options.dialogContent});a.options.width=d;a.options.height=f;return b&&b()};return a.ready?g():a.update(e.extend({title:a.options.title,
content:"",width:a.initOptions.body.css.minWidth,height:a.initOptions.body.css.minHeight,afterShow:g},a.options.loader))},hideLoader:function(){a.element.removeClass("loading");a.dialogLoader.hide()},autoSize:function(){return"auto"==a.initOptions.css.width||"auto"==a.initOptions.css.height},finalizeContent:function(b){var d=a.options,f=d.content;a.element.css(d.css);a.dialogContent.css(d.body.css);if(!a.refreshing){null!==d.title&&a.dialogTitle.html(d.title);if(null!==f){var g=!e.isString(f)&&e(f).is("iframe");
a.dialogBody.toggleClass("type-iframe",g);if(g){d=f.parent()[0];for(b=0;1<d.childNodes.length;)g=d.childNodes[b],g!==f[0]&&d.removeChild(g),b++;f.css({position:"relative",visibility:"visible"})}else b?d.content=a.stripScript(f):f=a.stripScript(f),a.dialogContent.html(f)}a.contentReady||a.finalizeButtons();return a.element}},stripScript:function(a){if(!e.isString(a))return a;a=e(e.parseHTML(a));a.find("script").remove();return a},finalizeSize:function(b){var d=a.refElement,f=a.options,g=f.content,
h=f.css,p=f.body.css;void 0===d?d=a.refElement=a.initElement.clone().removeClass("global").insertAfter(a.element):d.insertAfter(a.element);if(!b){refTitle=d.find(f.dialogTitle);refBody=d.find(f.dialogBody);refFooter=d.find(f.dialogFooter);refButtons=d.find(f.dialogButtons);d.css(a.initOptions.css).css({display:"block"});refTitle.html(f.title);e.isEmptyObject(f.buttons)?refFooter.hide():(refFooter.show(),refButtons.append("<button>test</button>"));var s=(b=!e.isString(g)&&e(g).is("iframe"))?document.createElement("div"):
a.stripScript(g);p.width=b&&"auto"==f.width?g.contents().width():f.width;p.height=b&&"auto"==f.height?g.contents().height():f.height;refBody.css(p).toggleClass("type-iframe",b).html(s);g=refBody.width();s=refBody.height();"border-box"!==refBody.css("boxSizing")&&(p.width=g,p.height=s);p.width<p.minWidth&&(p.width=p.minWidth);p.height<p.minHeight&&(p.height=p.minHeight);var q=f.offset,g=d.width(),s=d.height(),t=e(window).width()-q,q=e(window).height()-q,r=g>t,u=s>q;h.width=r?t:g;h.height=u?q:s;"auto"!==
p.width&&(p.width-=g-h.width);0>=p.width&&(p.width="auto");"auto"!==p.height&&(p.height-=s-h.height);0>=p.height&&(p.height="auto");p.minWidth=p.minHeight="auto";refBody.css(p);p.overflowX=!r||b||refBody[0].scrollWidth<=p.width?"auto":"scroll";p.overflowY=!u||b||refBody[0].scrollHeight<=p.height?"auto":"scroll";refBody.html("")}d.css(h).css("visibility","hidden").position(f.position);h.top=d.css("top");h.left=d.css("left")},finalizeButtons:function(){var b=a.dialogFooter,d=a.dialogButtons;d.empty();
var f=a.options.buttons;e.isEmptyObject(f)?b.hide():(e.isString(f)&&d.html(f),e.isArray(f)&&e.each(f,function(a,b){var c=e.extend({},b),f=b.classNames?b.classNames:"";delete c.name;delete c.classNames;e(document.createElement("button")).attr("type","button").addClass(f).html(b.name).bind(c).appendTo(d)}),b.show())},show:function(b){if(!a.ready||!a.resizing){var d=a.options;a.refElement&&a.refElement.remove();a.contentReady||d.beforeShow.apply(a);e(document).off("keydown.foundry.dialog");if(d.escapeKey)e(document).on("keydown.foundry.dialog",
function(b){27==b.keyCode&&a.close()});a.resizing=!0;a.finalizeSize();a.element.addClass("resizing");e(window).trigger("dialogTransitionStart");a.transition[d.transition.show].show.apply(a,[function(){a.ready||(a.on("resize.dialog scroll.dialog",window,e._.debounce(function(){a.refresh()},150)),a.ready=!0);a.contentReady||(b&&b.apply(a),d.afterShow.apply(a));a.refElement.detach();a.element.removeClass("resizing");a.contentReady=!0;a.element.css({width:"auto",height:"auto"});a.removePlugin("binder");
var f=d.selectors,g=d.bindings;f&&g&&(f=e.Controller(e.uid("dialogBinder"),{defaultOptions:f},function(a){return g}),a.addPlugin("binder",f));0<a.displayQueue.length?setTimeout(function(){a.resizing=!1;a.display(a.displayQueue.shift())},500):(a.resizing=!1,e(window).trigger("dialogTransitionEnd"))}])}},"{self} removePlugin":function(a,b,f,g){void 0!==g&&delete e.Controller[g.Class.fullName]},hide:function(b){a.contentReady||a.options.beforeHide.apply(a);e(window).trigger("dialogTransitionStart");
a.transition[a.options.transition.hide].hide.apply(a,[function(){b&&b.apply(a);a.options.afterHide.apply(a);e(window).trigger("dialogTransitionEnd")}])},refresh:function(){a.closing||a.resizing||(a.finalizeSize(!0),a.resizing=!0,a.refreshing=!0,e(window).trigger("dialogTransitionStart"),a.transition[a.options.transition.show].show.apply(a,[function(){e(window).trigger("dialogTransitionEnd");a.resizing=!1;a.refreshing=!1;a.element.css({width:"auto",height:"auto"})}]))},transition:{none:{show:function(b){a.ready||
a.overlay.show();a.element.finalizeContent().show(0,b)},hide:function(b){a.overlay.hide();a.element.hide(0,b)}},fade:{show:function(b){a.ready||a.overlay.fadeOut(0).fadeIn("normal");if(a.contentReady)return a.element.finalizeContent(),b&&b();a.element.fadeOut(a.contentReady?"fast":0,function(){a.element.finalizeContent().fadeIn("normal","easeInCubic",b)})},hide:function(b){a.overlay.fadeOut("normal","easeOutCubic");a.element.fadeOut("normal","easeOutCubic",b)}},zoom:{show:function(b){var d=a.dialogBody,
f=a.dialogFooter,e=a.options.css;a.ready||(a.overlay.fadeIn("fast"),a.element.finalizeContent().css({top:parseInt(e.top)+parseInt(e.height)/2,left:parseInt(e.left)+parseInt(e.width)/2,width:0,height:0}));a.contentReady||(d.css({opacity:0}),f.css({opacity:0}));a.element.animate({top:e.top,left:e.left,width:e.width,height:e.height},"normal","easeInCubic",function(){a.element.finalizeContent(!0);d.css({opacity:1});f.css({opacity:1});return b&&b()})},hide:function(b){var d=a.options.css;a.element.animate({top:parseInt(d.top)+
parseInt(d.height)/2,left:parseInt(d.left)+parseInt(d.width)/2,width:0,height:0},"normal","easeOutCubic",function(){a.overlay.fadeOut("fast");return b&&b()})}}},overlay:e("<div></div>"),createOverlay:function(){a.overlay.css(a.options.overlay.css).click(function(){a.close()}).appendTo("body")},closing:!1,close:function(){if(!a.closing)return a.closing=!0,e(document).off("keydown.foundry.dialog"),a.hide(function(){a.removePlugin("binder");a.element.remove();a.refElement&&a.refElement.remove()}),a},
"{closeButton} click":function(){a.close()},content:function(){var b=a.dialogContent,d=b.find("> iframe");return 0<d.length?d.contents():b},messageGroup:function(){var b=a.dialogBody,d=b.find("> [data-message-group]");1>d.length&&(d=e("<div data-message-group></div>").prependTo(b));return d}}});e.dialog=function(a){if(window.parentDialog)return window.parentDialog.update(a);var b=e(".foundryDialog.global"),d=b.controllers("dialog")[0];if(1>arguments.length&&d)return d;1>b.length&&(b=e(e.View("dialog/default")).addClass("global").addClass(a.customClass).appendTo("body"));
if("string"===typeof a||e.isDeferred(a)){var f=arguments[1];a={content:a,afterShow:e.isFunction(f)?f:e.noop}}d?d.update(a):d=b.addController("Dialog",a);return d}};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/position",function(e){var g=function(){(function(b,a){function c(a,b,c){return[parseFloat(a[0])*(u.test(a[0])?b/100:1),parseFloat(a[1])*(u.test(a[1])?c/100:1)]}function d(a){var c=a[0];return 9===c.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:b.isWindow(c)?{width:a.width(),
height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}b.ui=b.ui||{};var f,e=Math.max,g=Math.abs,h=Math.round,s=/left|center|right/,q=/top|center|bottom/,t=/[\+\-]\d+(\.[\d]+)?%?/,r=/^\w+/,u=/%$/,m=b.fn.position;b.position={scrollbarWidth:function(){if(f!==a)return f;var c,d,e=b("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");
d=e.children()[0];b("body").append(e);c=d.offsetWidth;e.css("overflow","scroll");d=d.offsetWidth;c===d&&(d=e[0].clientWidth);e.remove();return f=c-d},getScrollInfo:function(a){var c=a.isWindow?"":a.element.css("overflow-x"),d=a.isWindow?"":a.element.css("overflow-y"),c="scroll"===c||"auto"===c&&a.width<a.element[0].scrollWidth;return{width:"scroll"===d||"auto"===d&&a.height<a.element[0].scrollHeight?b.position.scrollbarWidth():0,height:c?b.position.scrollbarWidth():0}},getWithinInfo:function(a){a=
b(a||window);var c=b.isWindow(a[0]);return{element:a,isWindow:c,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:c?a.width():a.outerWidth(),height:c?a.height():a.outerHeight()}}};b.fn.position=function(a){if(!a||!a.of)return m.apply(this,arguments);a=b.extend({},a);var f,u,v,z,y,L,M=b(a.of),ba=b.position.getWithinInfo(a.within),X=b.position.getScrollInfo(ba),T=(a.collision||"flip").split(" "),la={};L=d(M);M[0].preventDefault&&(a.at="left top");u=L.width;v=
L.height;z=L.offset;y=b.extend({},z);b.each(["my","at"],function(){var b=(a[this]||"").split(" "),c,d;1===b.length&&(b=s.test(b[0])?b.concat(["center"]):q.test(b[0])?["center"].concat(b):["center","center"]);b[0]=s.test(b[0])?b[0]:"center";b[1]=q.test(b[1])?b[1]:"center";c=t.exec(b[0]);d=t.exec(b[1]);la[this]=[c?c[0]:0,d?d[0]:0];a[this]=[r.exec(b[0])[0],r.exec(b[1])[0]]});1===T.length&&(T[1]=T[0]);"right"===a.at[0]?y.left+=u:"center"===a.at[0]&&(y.left+=u/2);"bottom"===a.at[1]?y.top+=v:"center"===
a.at[1]&&(y.top+=v/2);f=c(la.at,u,v);y.left+=f[0];y.top+=f[1];return this.each(function(){var d,m,r=b(this),q=r.outerWidth(),t=r.outerHeight(),s=parseInt(b.css(this,"marginLeft"),10)||0,L=parseInt(b.css(this,"marginTop"),10)||0,U=q+s+(parseInt(b.css(this,"marginRight"),10)||0)+X.width,wa=t+L+(parseInt(b.css(this,"marginBottom"),10)||0)+X.height,B=b.extend({},y),ea=c(la.my,r.outerWidth(),r.outerHeight());"right"===a.my[0]?B.left-=q:"center"===a.my[0]&&(B.left-=q/2);"bottom"===a.my[1]?B.top-=t:"center"===
a.my[1]&&(B.top-=t/2);B.left+=ea[0];B.top+=ea[1];b.support.offsetFractions||(B.left=h(B.left),B.top=h(B.top));d={marginLeft:s,marginTop:L};b.each(["left","top"],function(c,e){if(b.ui.position[T[c]])b.ui.position[T[c]][e](B,{targetWidth:u,targetHeight:v,elemWidth:q,elemHeight:t,collisionPosition:d,collisionWidth:U,collisionHeight:wa,offset:[f[0]+ea[0],f[1]+ea[1]],my:a.my,at:a.at,within:ba,elem:r})});a.using&&(m=function(b){var c=z.left-B.left,d=c+u-q,f=z.top-B.top,h=f+v-t,m={target:{element:M,left:z.left,
top:z.top,width:u,height:v},element:{element:r,left:B.left,top:B.top,width:q,height:t},horizontal:0>d?"left":0<c?"right":"center",vertical:0>h?"top":0<f?"bottom":"middle"};u<q&&g(c+d)<u&&(m.horizontal="center");v<t&&g(f+h)<v&&(m.vertical="middle");e(g(c),g(d))>e(g(f),g(h))?m.important="horizontal":m.important="vertical";a.using.call(this,b,m)});r.offset(b.extend(B,{using:m}))})};b.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,
c=d-g,h=g+b.collisionWidth-f-d;b.collisionWidth>f?0<c&&0>=h?(d=a.left+c+b.collisionWidth-f-d,a.left+=c-d):a.left=0<h&&0>=c?d:c>h?d+f-b.collisionWidth:d:a.left=0<c?a.left+c:0<h?a.left-h:e(a.left-g,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,c=d-g,h=g+b.collisionHeight-f-d;b.collisionHeight>f?0<c&&0>=h?(d=a.top+c+b.collisionHeight-f-d,a.top+=c-d):a.top=0<h&&0>=c?d:c>h?d+f-b.collisionHeight:d:a.top=0<c?a.top+
c:0<h?a.top-h:e(a.top-g,a.top)}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,e=c.isWindow?c.scrollLeft:c.offset.left,k=a.left-b.collisionPosition.marginLeft,c=k-e,h=k+b.collisionWidth-f-e,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,m="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,r=-2*b.offset[0];if(0>c){if(d=a.left+k+m+r+b.collisionWidth-f-d,0>d||d<g(c))a.left+=k+m+r}else 0<h&&(d=a.left-b.collisionPosition.marginLeft+k+m+r-
e,0<d||g(d)<h)&&(a.left+=k+m+r)},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,f=c.height,e=c.isWindow?c.scrollTop:c.offset.top,k=a.top-b.collisionPosition.marginTop,c=k-e,h=k+b.collisionHeight-f-e,k="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,r=-2*b.offset[1];0>c?(d=a.top+k+m+r+b.collisionHeight-f-d,a.top+k+m+r>c&&(0>d||d<g(c))&&(a.top+=k+m+r)):0<h&&(d=a.top-b.collisionPosition.marginTop+k+m+r-
e,a.top+k+m+r>h&&(0<d||g(d)<h)&&(a.top+=k+m+r))}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,arguments)},top:function(){b.ui.position.flip.top.apply(this,arguments);b.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,c,d,f,e=document.getElementsByTagName("body")[0];d=document.createElement("div");a=document.createElement(e?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};e&&b.extend(c,
{position:"absolute",left:"-1000px",top:"-1000px"});for(f in c)a.style[f]=c[f];a.appendChild(d);c=e||document.documentElement;c.insertBefore(a,c.firstChild);d.style.cssText="position: absolute; left: 10.7432222px;";d=b(d).offset().left;b.support.offsetFractions=10<d&&11>d;a.innerHTML="";c.removeChild(a)})()})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("easing",function(e){var g=function(){e.easing.jswing=e.easing.swing;e.extend(e.easing,{def:"easeOutQuad",swing:function(b,a,c,d,f){return e.easing[e.easing.def](b,
a,c,d,f)},easeInQuad:function(b,a,c,d,f){return d*(a/=f)*a+c},easeOutQuad:function(b,a,c,d,f){return-d*(a/=f)*(a-2)+c},easeInOutQuad:function(b,a,c,d,f){return 1>(a/=f/2)?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c},easeInCubic:function(b,a,c,d,f){return d*(a/=f)*a*a+c},easeOutCubic:function(b,a,c,d,f){return d*((a=a/f-1)*a*a+1)+c},easeInOutCubic:function(b,a,c,d,f){return 1>(a/=f/2)?d/2*a*a*a+c:d/2*((a-=2)*a*a+2)+c},easeInQuart:function(b,a,c,d,f){return d*(a/=f)*a*a*a+c},easeOutQuart:function(b,a,c,d,f){return-d*
((a=a/f-1)*a*a*a-1)+c},easeInOutQuart:function(b,a,c,d,f){return 1>(a/=f/2)?d/2*a*a*a*a+c:-d/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(b,a,c,d,f){return d*(a/=f)*a*a*a*a+c},easeOutQuint:function(b,a,c,d,f){return d*((a=a/f-1)*a*a*a*a+1)+c},easeInOutQuint:function(b,a,c,d,f){return 1>(a/=f/2)?d/2*a*a*a*a*a+c:d/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(b,a,c,d,f){return-d*Math.cos(a/f*(Math.PI/2))+d+c},easeOutSine:function(b,a,c,d,f){return d*Math.sin(a/f*(Math.PI/2))+c},easeInOutSine:function(b,
a,c,d,f){return-d/2*(Math.cos(Math.PI*a/f)-1)+c},easeInExpo:function(b,a,c,d,f){return 0==a?c:d*Math.pow(2,10*(a/f-1))+c},easeOutExpo:function(b,a,c,d,f){return a==f?c+d:d*(-Math.pow(2,-10*a/f)+1)+c},easeInOutExpo:function(b,a,c,d,f){return 0==a?c:a==f?c+d:1>(a/=f/2)?d/2*Math.pow(2,10*(a-1))+c:d/2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(b,a,c,d,f){return-d*(Math.sqrt(1-(a/=f)*a)-1)+c},easeOutCirc:function(b,a,c,d,f){return d*Math.sqrt(1-(a=a/f-1)*a)+c},easeInOutCirc:function(b,a,c,d,f){return 1>
(a/=f/2)?-d/2*(Math.sqrt(1-a*a)-1)+c:d/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(b,a,c,d,f){b=1.70158;var e=0,g=d;if(0==a)return c;if(1==(a/=f))return c+d;e||(e=0.3*f);g<Math.abs(d)?(g=d,b=e/4):b=e/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*f-b)*Math.PI/e))+c},easeOutElastic:function(b,a,c,d,f){b=1.70158;var e=0,g=d;if(0==a)return c;if(1==(a/=f))return c+d;e||(e=0.3*f);g<Math.abs(d)?(g=d,b=e/4):b=e/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*a)*Math.sin(2*
(a*f-b)*Math.PI/e)+d+c},easeInOutElastic:function(b,a,c,d,f){b=1.70158;var e=0,g=d;if(0==a)return c;if(2==(a/=f/2))return c+d;e||(e=0.3*f*1.5);g<Math.abs(d)?(g=d,b=e/4):b=e/(2*Math.PI)*Math.asin(d/g);return 1>a?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*f-b)*Math.PI/e)+c:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*f-b)*Math.PI/e)*0.5+d+c},easeInBack:function(b,a,c,d,f,e){void 0==e&&(e=1.70158);return d*(a/=f)*a*((e+1)*a-e)+c},easeOutBack:function(b,a,c,d,f,e){void 0==e&&(e=1.70158);return d*((a=a/f-1)*
a*((e+1)*a+e)+1)+c},easeInOutBack:function(b,a,c,d,f,e){void 0==e&&(e=1.70158);return 1>(a/=f/2)?d/2*a*a*(((e*=1.525)+1)*a-e)+c:d/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+c},easeInBounce:function(b,a,c,d,f){return d-e.easing.easeOutBounce(b,f-a,0,d,f)+c},easeOutBounce:function(b,a,c,d,f){return(a/=f)<1/2.75?7.5625*d*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(b,a,c,d,f){return a<f/2?0.5*
e.easing.easeInBounce(b,2*a,0,d,f)+c:0.5*e.easing.easeOutBounce(b,2*a-f,0,d,f)+0.5*d+c}})};g();this.resolveWith(g)})})();(function(){FD31.module("popbox",function(e){var g=this;e.require().script("ui/position").done(function(){var b=function(){e.fn.popbox=function(b){if(e.isPlainObject(b))return this.each(function(){var d=e(this),f=a.get(d);f?f.update(b):new a(d,b)}),this;if(e.isString(b)){var d=e(this[0]),d=a.get(d)||new a(d),f=d[b],g;e.isFunction(f)&&(g=f.apply(d,e.makeArray(arguments).slice(1)));
return g||this}return this};var a=function(b,d){b.data("popbox",this);e.isString(d)&&(d={content:d});var f={},g=b.attr("data-popbox"),h=b.attr("data-popbox-toggle"),p=b.attr("data-popbox-position"),s=b.attr("data-popbox-collision"),q=b.attr("data-popbox-type"),t=b.attr("data-popbox-id");g&&(f.content=g);h&&(f.toggle=h);q&&(f.type=q);p&&(f.position=p);s&&(f.collision=s);t&&(f.id=t);void 0===g&&b.attr("data-popbox","");this.update(e.extend(!0,{},a.defaultOptions,{tooltip:e(),loader:e('<div class="popbox loading" data-popbox-tooltip><div class="arrow"></div></div>'),
uid:e.uid(),button:b},f,d))};a.defaultOptions={content:"",id:null,type:"",enabled:!1,wait:!1,locked:!1,exclusive:!1,hideTimer:null,hideDelay:50,toggle:"hover",position:"bottom",collision:"flip",cache:!0};a.get=function(b){b=e(b).data("popbox");if(b instanceof a)return b};a.toggleEvent=navigator.userAgent.match(/iPhone|iPad|iPod/i)?"touchstart":"click";e.extend(a.prototype,{positions:"top top-left top-right top-center bottom bottom-left bottom-right bottom-center left left-top left-bottom left-center right right-top right-bottom right-center",
update:function(a){var b=this;e.extend(!0,b,a);if(e.isModule(b.content))b.wait=!0,e.module(b.content).done(function(a){e.isPlainObject(a)&&b.update(a);e.isFunction(a)&&b.update({content:a})}).fail(function(){b.update({content:"Unable to load tooltip content."})}).always(function(){b.wait=!1});else{e.isString(b.content)&&(b.content=e.Deferred().resolve(b.content));a=b.position;if(e.isString(a)){var f=a.split("-"),g,h,p,s;switch(f[0]){case "top":case "bottom":g=p=f[1]||"center";h="top"==f[0]?"bottom":
"top";s="top"==f[0]?"top":"bottom";break;case "left":case "right":h=s=f[1]||"center",g="left"==f[0]?"right":"left",p="left"==f[0]?"left":"right"}b.position={classname:a,my:g+" "+h,at:p+" "+s,using:function(a,c){var g=e(this),k=b.position.classname,h=a.top,n=a.left;switch(f[0]){case "top":case "bottom":var p=c.vertical;p==f[0]&&(k=k.replace(/top|bottom/gi,"top"==p?"bottom":"top"));h="top"==p?h+10:h-10;break;case "left":case "right":p=c.horizontal,c.horizontal==f[0]&&(k=k.replace(/left|right/gi,"left"==
c.horizontal?"right":"left")),n="left"==p?n+10:n-10}g.css({top:h+"px",left:n+"px"}).removeClass(b.positions).addClass(k)}}}e.extend(b.position,{of:b.button,collision:b.collision});b.loader.attr({id:b.id,"data-popbox-tooltip":b.type}).addClass("popbox-"+b.type);b.enabled&&b.show()}},trigger:function(a,b){this.tooltip.trigger(a,b);this.button.trigger(a,b)},show:function(){var b=this;b.enabled=!0;if(!b.wait){clearTimeout(b.hideTimer);b.exclusive&&e("[data-popbox-tooltip]").each(function(){var b=a.get(e(this));
b&&b.hide()});if("click"==b.toggle){var d=e(document),f=a.toggleEvent+".popbox."+b.uid;d.off(f).on(f,function(a){a=e(a.target).parents().andSelf();0<a.filter(b.button).length||0<a.filter(b.tooltip).length||(d.off(f),b.hide())})}if(0<b.tooltip.length)b.tooltip.appendTo("body").position(b.position),b.trigger("popboxActivate",[b]);else{if(e.isFunction(b.content)){var g=b.content(b);b.update(g);if(b.wait)return}e.isDeferred(b.content)&&("pending"==b.content.state()&&b.loader.appendTo("body").position(b.position),
b.content.always(function(){b.wait=!1}).done(function(a){if(!(0<b.tooltip.length)&&b.enabled){b.loader.detach();a=e.buildHTML(a);if(1>a.filter("[data-popbox-tooltip]").length){var d=a;a=e('<div class="popbox" data-popbox-tooltip><div class="arrow"></div><div class="popbox-content" data-popbox-content></div></div>').attr({id:b.id,"data-popbox-tooltip":b.type}).addClass("popbox-"+b.type).appendTo("body");a.find("[data-popbox-content]").append(d)}else a=a.appendTo("body").filter("[data-popbox-tooltip]");
b.tooltip=a.data("popbox",b).position(b.position);b.trigger("popboxActivate",[b])}}).fail(function(){b.update({content:"Unable to load tooltip content."})}))}}},hide:function(a){var b=this;b.enabled=!1;clearTimeout(b.hideTimer);b.loader.detach();b.hideTimer=setTimeout(function(){if(!b.locked||a)b.tooltip.detach(),b.trigger("popboxDeactivate",[b]),b.cache||b.destroy()},b.hideDelay)},destroy:function(){this.button.removeData("popbox")},widget:function(){return this}});e(document).on(a.toggleEvent+".popbox",
"[data-popbox]",function(){var a=e(this).popbox("widget");a.enabled?a.hide():a.show()}).on("mouseover.popbox","[data-popbox]",function(){var a=e(this).popbox("widget");"hover"==a.toggle&&a.show()}).on("mouseout.popbox","[data-popbox]",function(){var a=e(this).popbox("widget");"hover"==a.toggle&&a.hide()}).on("mouseover.popbox.tooltip","[data-popbox-tooltip]",function(){var b=a.get(this);b&&"hover"===b.toggle&&(b.locked=!0,clearTimeout(b.hideTimer))}).on("mouseout.popbox.tooltip","[data-popbox-tooltip]",
function(){var b=a.get(this);b&&"hover"===b.toggle&&(b.locked=!1,b.hide())}).on("click.popbox.close","[data-popbox-close]",function(){var b=a.get(e(this).parents("[data-popbox-tooltip]"));b&&b.hide()})};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/autocomplete",function(e){var g=this;e.require().script("ui/core","ui/widget","ui/position","ui/menu").done(function(){var b=function(){(function(a,b){var d=0;a.widget("ui.autocomplete",{version:"1.10.4pre",defaultElement:"<input>",options:{appendTo:"#fd_.ui",
autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),g="textarea"===e,e="input"===e;this.isMultiLine=g?!0:e?!1:this.element.prop("isContentEditable");this.valueMethod=this.element[g||e?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");
this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))c=d=b=!0;else{c=d=b=!1;var g=a.ui.keyCode;switch(e.keyCode){case g.PAGE_UP:b=!0;this._move("previousPage",e);break;case g.PAGE_DOWN:b=!0;this._move("nextPage",e);break;case g.UP:b=!0;this._keyEvent("previous",e);break;case g.DOWN:b=!0;this._keyEvent("next",e);break;case g.ENTER:case g.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case g.TAB:this.menu.active&&this.menu.select(e);break;case g.ESCAPE:this.menu.element.is(":visible")&&
(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}}},keypress:function(d){if(b)b=!1,this.isMultiLine&&!this.menu.element.is(":visible")||d.preventDefault();else if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){d?(d=!1,a.preventDefault()):this._searchTimeout(a)},
focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||
this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&
this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);
this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this._appendTo());"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;
b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0));b||(b=this.element.closest(".ui-front"));b.length||(b=this.document[0].body);return b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"===typeof this.options.source?(c=this.options.source,this.source=function(b,f){d.xhr&&d.xhr.abort();d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){f(a)},error:function(){f([])}})}):
this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=
!1;this.source({term:a},this._response())},_response:function(){var a=this,b=++d;return function(c){b===d&&a.__response(c);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&
(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b);this.isNewMenu=!0;this.menu.refresh();c.show();
this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},
_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments);this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):
this.options.messages.noResults,this.liveRegion.text(b))}})})(e);(function(a){function b(c,d){var f=RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(c,function(b){return f.test(a("<div>").html(b.label||b.value||b).text())})}var d=a.ui.autocomplete.prototype,f=d._initSource;a.extend(d,{_initSource:function(){this.options.html&&a.isArray(this.options.source)?this.source=function(a,d){d(b(this.options.source,a.term))}:f.call(this)},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",
c).append(a("<a></a>")[this.options.html?"html":"text"](c.label)).appendTo(b)}})})(e)};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/menu",function(e){var g=this;e.require().script("ui/widget").done(function(){var b=function(){(function(a,b){a.widget("ui.menu",{version:"1.10.4pre",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=
this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},
"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");
this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var e,g,h,s,q=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:q=!1,e=this.previousFilter||"",g=String.fromCharCode(b.keyCode),h=!1,clearTimeout(this.filterTimer),g===e?h=!0:g=e+g,s=RegExp("^"+c(g),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(a(this).children("a").text())}),e=h&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e,e.length||(g=String.fromCharCode(b.keyCode),s=RegExp("^"+c(g),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(a(this).children("a").text())})),
e.length?(this.focus(b,e),1<e.length?(this.previousFilter=g,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}q&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu;b=this.element.find(this.options.menus);b.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,
"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e);b.attr("aria-labelledby",d.attr("id"))});b=b.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var b=
a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu);this._super(a,b)},focus:function(a,b){var c;this.blur(a,a&&
"focus"===a.type);this._scrollIntoView(b);this.active=b.first();c=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",
a,{item:b})},_scrollIntoView:function(b){var c,e,g;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,e=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,c=b.offset().top-this.activeMenu.offset().top-c-e,e=this.activeMenu.scrollTop(),g=this.activeMenu.height(),b=b.height(),0>c?this.activeMenu.scrollTop(e+c):c+b>g&&this.activeMenu.scrollTop(e+c-g+b))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),
this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,
c){clearTimeout(this.timer);this.timer=this._delay(function(){var e=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element);this._close(e);this.blur(b);this.activeMenu=e},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",
this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},
_move:function(a,b,c){var e;this.active&&(e="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));e&&e.length&&this.active||(e=this.activeMenu.children(".ui-menu-item")[b]());this.focus(c,e)},nextPage:function(b){var c,e,g;this.active?this.isLastItem()||(this._hasScroll()?(e=this.active.offset().top,g=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return 0>c.offset().top-e-g}),
this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var c,e,g;this.active?this.isFirstItem()||(this._hasScroll()?(e=this.active.offset().top,g=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return 0<c.offset().top-e+g}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,c)}})})(e)};b();g.resolveWith(b)})})})();(function(){FD31.module("gmaps",function(e){var g=this,b=e.callback(function(){window.google||window.google.maps||g.reject("Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true.");
var a=function(a){var g=document,h=function(a,b){return e("#"+a.replace("#",""),b)[0]},q=function(a){var e=this,n="bounds_changed center_changed click dblclick drag dragend dragstart idle maptypeid_changed projection_changed resize tilesloaded zoom_changed".split(" "),m=["mousemove","mouseout","mouseover"];window.context_menu={};this.el="string"===typeof a.el||"string"===typeof a.div?h(a.el||a.div,a.context):a.el||a.div;if("undefined"===typeof this.el||null===this.el)throw"No element defined.";this.el.style.width=
a.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=a.height||this.el.scrollHeight||this.el.offsetHeight;this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.overlay_el=this.infoWindow=null;this.zoom=a.zoom||15;this.registered_events={};var x=a.markerClusterer,C;C=a.mapType?google.maps.MapTypeId[a.mapType.toUpperCase()]:google.maps.MapTypeId.ROADMAP;var w=new google.maps.LatLng(a.lat,a.lng);
delete a.el;delete a.lat;delete a.lng;delete a.mapType;delete a.width;delete a.height;delete a.markerClusterer;var v=a.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},z,y={},y={zoom:this.zoom,center:w,mapTypeId:C},v={panControl:a.panControl||!0,zoomControl:a.zoomControl||!0,zoomControlOptions:{style:google.maps.ZoomControlStyle[v.style||"DEFAULT"],position:google.maps.ControlPosition[v.position||"TOP_LEFT"]},mapTypeControl:a.mapTypeControl||!0,scaleControl:a.scaleControl||!0,streetViewControl:a.streetViewControl||
!0,overviewMapControl:z||!0};!0!=a.disableDefaultUI&&(y=d(y,v));y=d(y,a);for(v=0;v<n.length;v++)delete y[n[v]];for(v=0;v<m.length;v++)delete y[m[v]];this.map=new google.maps.Map(this.el,y);x&&(this.markerClusterer=x.apply(this,[this.map]));var L=function(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return[b,c]},M=function(a,b){var c="",d=window.context_menu[a],f;for(f in d)d.hasOwnProperty(f)&&(c+='<li><a id="'+a+"_"+f+'" href="#">'+d[f].title+"</a></li>");
if(h("gmaps_context_menu")){var g=h("gmaps_context_menu");g.innerHTML=c;var c=g.getElementsByTagName("a"),k=c.length;for(f=0;f<k;f++){var m=c[f];google.maps.event.clearListeners(m,"click");google.maps.event.addDomListenerOnce(m,"click",function(c){c.preventDefault();d[this.id.replace(a+"_","")].action.apply(e,[b]);e.hideContextMenu()},!1)}f=L.apply(this,[e.el]);c=f[1]+b.pixel.y-15;g.style.left=f[0]+b.pixel.x-15+"px";g.style.top=c+"px";g.style.display="block"}},ba=function(a,b){if("marker"===a){b.pixel=
{};var c=new google.maps.OverlayView;c.setMap(e.map);c.draw=function(){var d=c.getProjection(),f=b.marker.getPosition();b.pixel=d.fromLatLngToContainerPixel(f);M(a,b)}}else M(a,b)};this.setContextMenu=function(a){window.context_menu[a.control]={};for(var b in a.options)if(a.options.hasOwnProperty(b)){var c=a.options[b];window.context_menu[a.control][c.name]={title:c.title,action:c.action}}a=g.createElement("ul");a.id="gmaps_context_menu";a.style.display="none";a.style.position="absolute";a.style.minWidth=
"100px";a.style.background="white";a.style.listStyle="none";a.style.padding="8px";a.style.boxShadow="2px 2px 6px #ccc";g.body.appendChild(a);var d=h("gmaps_context_menu");google.maps.event.addDomListener(d,"mouseout",function(a){a.relatedTarget&&this.contains(a.relatedTarget)||window.setTimeout(function(){d.style.display="none"},400)},!1)};this.hideContextMenu=function(){var a=h("gmaps_context_menu");a&&(a.style.display="none")};x=function(b,c){google.maps.event.addListener(b,c,function(b){void 0==
b&&(b=this);a[c].apply(this,[b]);e.hideContextMenu()})};for(v=0;v<n.length;v++)z=n[v],z in a&&x(this.map,z);for(v=0;v<m.length;v++)z=m[v],z in a&&x(this.map,z);google.maps.event.addListener(this.map,"rightclick",function(b){a.rightclick&&a.rightclick.apply(this,[b]);void 0!=window.context_menu.map&&ba("map",b)});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){for(var a=[],b=this.markers.length,c=0;c<b;c++)a.push(this.markers[c].getPosition());this.fitLatLngBounds(a)};
this.fitLatLngBounds=function(a){for(var b=a.length,c=new google.maps.LatLngBounds,d=0;d<b;d++)c.extend(a[d]);this.map.fitBounds(c)};this.setCenter=function(a,b,c){this.map.panTo(new google.maps.LatLng(a,b));c&&c()};this.getElement=function(){return this.el};this.zoomIn=function(a){a=a||1;this.zoom=this.map.getZoom()+a;this.map.setZoom(this.zoom)};this.zoomOut=function(a){a=a||1;this.zoom=this.map.getZoom()-a;this.map.setZoom(this.zoom)};var n=[],X;for(X in this.map)"function"!=typeof this.map[X]||
this[X]||n.push(X);for(v=0;v<n.length;v++)(function(a,b,c){a[c]=function(){return b[c].apply(b,arguments)}})(this,this.map,n[v]);this.createControl=function(a){var b=g.createElement("div");b.style.cursor="pointer";b.style.fontFamily="Arial, sans-serif";b.style.fontSize="13px";b.style.boxShadow="rgba(0, 0, 0, 0.398438) 0px 2px 4px";for(var c in a.style)b.style[c]=a.style[c];a.id&&(b.id=a.id);a.classes&&(b.className=a.classes);a.content&&(b.innerHTML=a.content);for(var d in a.events)(function(b,c){google.maps.event.addDomListener(b,
c,function(){a.events[c].apply(this,[this])})})(b,d);b.index=1;return b};this.addControl=function(a){var b=google.maps.ControlPosition[a.position.toUpperCase()];delete a.position;a=this.createControl(a);this.controls.push(a);this.map.controls[b].push(a);return a};this.createMarker=function(a){if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position){var b=this,c=a.details,f=a.fences,e=a.outside,g={position:new google.maps.LatLng(a.lat,a.lng),map:null};delete a.lat;delete a.lng;delete a.fences;
delete a.outside;var g=d(g,a),k=new google.maps.Marker(g);k.fences=f;if(a.infoWindow)for(k.infoWindow=new google.maps.InfoWindow(a.infoWindow),g=["closeclick","content_changed","domready","position_changed","zindex_changed"],f=0;f<g.length;f++)(function(b,c){a.infoWindow[c]&&google.maps.event.addListener(b,c,function(b){a.infoWindow[c].apply(this,[b])})})(k.infoWindow,g[f]);for(var g="animation_changed clickable_changed cursor_changed draggable_changed flat_changed icon_changed position_changed shadow_changed shape_changed title_changed visible_changed zindex_changed".split(" "),
h="dblclick drag dragend dragstart mousedown mouseout mouseover mouseup".split(" "),f=0;f<g.length;f++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this,[this])})})(k,g[f]);for(f=0;f<h.length;f++)(function(b,c,d){a[d]&&google.maps.event.addListener(c,d,function(c){c.pixel||(c.pixel=b.getProjection().fromLatLngToPoint(c.latLng));a[d].apply(this,[c])})})(this.map,k,h[f]);google.maps.event.addListener(k,"click",function(){this.details=c;a.click&&a.click.apply(this,[this]);
k.infoWindow&&(b.hideInfoWindows(),k.infoWindow.open(b.map,k))});google.maps.event.addListener(k,"rightclick",function(b){b.marker=this;a.rightclick&&a.rightclick.apply(this,[b]);void 0!=window.context_menu.marker&&ba("marker",b)});k.fences&&google.maps.event.addListener(k,"dragend",function(){b.checkMarkerGeofence(k,function(a,b){e(a,b)})});return k}throw"No latitude or longitude defined.";};this.addMarker=function(a){if(!a.hasOwnProperty("gm_accessors_"))if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||
a.position)a=this.createMarker(a);else throw"No latitude or longitude defined.";a.setMap(this.map);this.markerClusterer&&this.markerClusterer.addMarker(a);this.markers.push(a);q.fire("marker_added",a,this);return a};this.addMarkers=function(a){for(var b=0,c;c=a[b];b++)this.addMarker(c);return this.markers};this.hideInfoWindows=function(){for(var a=0,b;b=this.markers[a];a++)b.infoWindow&&b.infoWindow.close()};this.removeMarker=function(a){for(var b=0;b<this.markers.length;b++)if(this.markers[b]===
a){this.markers[b].setMap(null);this.markers.splice(b,1);q.fire("marker_removed",a,this);break}return a};this.removeMarkers=function(a){a=a||this.markers;for(var b=0;b<this.markers.length;b++)this.markers[b]===a[b]&&this.markers[b].setMap(null);a=[];for(b=0;b<this.markers.length;b++)null!=this.markers[b].getMap()&&a.push(this.markers[b]);this.markers=a};this.drawOverlay=function(a){var b=new google.maps.OverlayView;b.setMap(e.map);var c=!0;null!=a.auto_show&&(c=a.auto_show);b.onAdd=function(){var c=
g.createElement("div");c.style.borderStyle="none";c.style.borderWidth="0px";c.style.position="absolute";c.style.zIndex=100;c.innerHTML=a.content;b.el=c;var d=this.getPanes();a.layer||(a.layer="overlayLayer");d[a.layer].appendChild(c);for(var d=["contextmenu","DOMMouseScroll","dblclick","mousedown"],f=0;f<d.length;f++)(function(a,b){google.maps.event.addDomListener(a,b,function(a){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()})})(c,
d[f]);google.maps.event.trigger(this,"ready")};b.draw=function(){var d=this.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));a.horizontalOffset=a.horizontalOffset||0;a.verticalOffset=a.verticalOffset||0;var f=b.el,e=f.children[0],g=e.clientHeight,e=e.clientWidth;switch(a.verticalAlign){case "top":f.style.top=d.y-g+a.verticalOffset+"px";break;default:case "middle":f.style.top=d.y-g/2+a.verticalOffset+"px";break;case "bottom":f.style.top=d.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case "left":f.style.left=
d.x-e+a.horizontalOffset+"px";break;default:case "center":f.style.left=d.x-e/2+a.horizontalOffset+"px";break;case "right":f.style.left=d.x+a.horizontalOffset+"px"}f.style.display=c?"block":"none";c||a.show.apply(this,[f])};b.onRemove=function(){var c=b.el;a.remove?a.remove.apply(this,[c]):(b.el.parentNode.removeChild(b.el),b.el=null)};e.overlays.push(b);return b};this.removeOverlay=function(a){for(var b=0;b<this.overlays.length;b++)if(this.overlays[b]===a){this.overlays[b].setMap(null);this.overlays.splice(b,
1);break}};this.removeOverlays=function(){for(var a=0,b;b=e.overlays[a];a++)b.setMap(null);e.overlays=[]};this.drawPolyline=function(a){var b=[],c=a.path;if(c.length)if(void 0===c[0][0])b=c;else for(var d=0,f;f=c[d];d++)b.push(new google.maps.LatLng(f[0],f[1]));b={map:this.map,path:b,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(b.clickable=a.clickable);a.hasOwnProperty("editable")&&
(b.editable=a.editable);a.hasOwnProperty("icons")&&(b.icons=a.icons);a.hasOwnProperty("zIndex")&&(b.zIndex=a.zIndex);b=new google.maps.Polyline(b);c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");for(d=0;d<c.length;d++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})})(b,c[d]);this.polylines.push(b);q.fire("polyline_added",b,this);return b};this.removePolyline=function(a){for(var b=0;b<this.polylines.length;b++)if(this.polylines[b]===
a){this.polylines[b].setMap(null);this.polylines.splice(b,1);q.fire("polyline_removed",a,this);break}};this.removePolylines=function(){for(var a=0,b;b=e.polylines[a];a++)b.setMap(null);e.polylines=[]};this.drawCircle=function(a){a=d({map:this.map,center:new google.maps.LatLng(a.lat,a.lng)},a);delete a.lat;delete a.lng;for(var b=new google.maps.Circle(a),c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),f=0;f<c.length;f++)(function(b,c){a[c]&&google.maps.event.addListener(b,
c,function(b){a[c].apply(this,[b])})})(b,c[f]);this.polygons.push(b);return b};this.drawRectangle=function(a){a=d({map:this.map},a);var b=new google.maps.LatLngBounds(new google.maps.LatLng(a.bounds[0][0],a.bounds[0][1]),new google.maps.LatLng(a.bounds[1][0],a.bounds[1][1]));a.bounds=b;for(var b=new google.maps.Rectangle(a),c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),f=0;f<c.length;f++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,
[b])})})(b,c[f]);this.polygons.push(b);return b};this.drawPolygon=function(a){var e=!1;a.hasOwnProperty("useGeoJSON")&&(e=a.useGeoJSON);delete a.useGeoJSON;a=d({map:this.map},a);!1==e&&(a.paths=[a.paths.slice(0)]);0<a.paths.length&&0<a.paths[0].length&&(a.paths=k(f(a.paths,b,e)));for(var e=new google.maps.Polygon(a),g="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),h=0;h<g.length;h++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,
[b])})})(e,g[h]);this.polygons.push(e);q.fire("polygon_added",e,this);return e};this.removePolygon=function(a){for(var b=0;b<this.polygons.length;b++)if(this.polygons[b]===a){this.polygons[b].setMap(null);this.polygons.splice(b,1);q.fire("polygon_removed",a,this);break}};this.removePolygons=function(){for(var a=0,b;b=e.polygons[a];a++)b.setMap(null);e.polygons=[]};this.getFromFusionTables=function(a){var b=a.events;delete a.events;a=new google.maps.FusionTablesLayer(a);for(var c in b)(function(a,
c){google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])})})(a,c);this.layers.push(a);return a};this.loadFromFusionTables=function(a){a=this.getFromFusionTables(a);a.setMap(this.map);return a};this.getFromKML=function(a){var b=a.url,c=a.events;delete a.url;delete a.events;a=new google.maps.KmlLayer(b,a);for(var d in c)(function(a,b){google.maps.event.addListener(a,b,function(a){c[b].apply(this,[a])})})(a,d);this.layers.push(a);return a};this.loadFromKML=function(a){a=this.getFromKML(a);
a.setMap(this.map);return a};var T,la;this.getRoutes=function(a){switch(a.travelMode){case "bicycling":T=google.maps.TravelMode.BICYCLING;break;case "transit":T=google.maps.TravelMode.TRANSIT;break;case "driving":T=google.maps.TravelMode.DRIVING;break;default:T=google.maps.TravelMode.WALKING}la="imperial"===a.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var b=d({avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},a);b.origin=/string/.test(typeof a.origin)?
a.origin:new google.maps.LatLng(a.origin[0],a.origin[1]);b.destination=new google.maps.LatLng(a.destination[0],a.destination[1]);b.travelMode=T;b.unitSystem=la;delete b.callback;var c=this;(new google.maps.DirectionsService).route(b,function(b,d){if(d===google.maps.DirectionsStatus.OK)for(var f in b.routes)b.routes.hasOwnProperty(f)&&c.routes.push(b.routes[f]);a.callback&&a.callback(c.routes)})};this.removeRoutes=function(){this.routes=[]};this.getElevations=function(a){a=d({locations:[],path:!1,
samples:256},a);0<a.locations.length&&0<a.locations[0].length&&(a.locations=k(f([a.locations],b,!1)));var e=a.callback;delete a.callback;var g=new google.maps.ElevationService;a.path?g.getElevationAlongPath({path:a.locations,samples:a.samples},function(a,b){e&&"function"===typeof e&&e(a,b)}):(delete a.path,delete a.samples,g.getElevationForLocations(a,function(a,b){e&&"function"===typeof e&&e(a,b)}))};this.cleanRoute=this.removePolylines;this.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,
destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,callback:function(c){0<c.length&&(b.drawPolyline({path:c[c.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.callback&&a.callback(c[c.length-1]))}})};this.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(b){0<b.length&&
a.start&&a.start(b[b.length-1]);if(0<b.length&&a.step){var c=b[b.length-1];if(0<c.legs.length)for(var d=c.legs[0].steps,f=0,e;e=d[f];f++)e.step_number=f,a.step(e,c.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b=a.route.legs[0].steps,c=0,d;d=b[c];c++)d.step_number=c,a.step(d)};this.drawSteppedRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,
callback:function(b){0<b.length&&a.start&&a.start(b[b.length-1]);if(0<b.length&&a.step){var c=b[b.length-1];if(0<c.legs.length)for(var d=c.legs[0].steps,f=0,g;g=d[f];f++)g.step_number=f,e.drawPolyline({path:g.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(g,c.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b=a.route.legs[0].steps,c=0,d;d=b[c];c++)d.step_number=c,e.drawPolyline({path:d.path,
strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(d)};this.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))};this.checkMarkerGeofence=function(a,b){if(a.fences)for(var c=0,d;d=a.fences[c];c++){var f=a.getPosition();e.checkGeofence(f.lat(),f.lng(),d)||b(a,d)}};this.addLayer=function(a,b){b=b||{};var c;switch(a){case "weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case "clouds":this.singleLayers.clouds=
c=new google.maps.weather.CloudLayer;break;case "traffic":this.singleLayers.traffic=c=new google.maps.TrafficLayer;break;case "transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case "bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case "panoramio":this.singleLayers.panoramio=c=new google.maps.panoramio.PanoramioLayer;c.setTag(b.filter);delete b.filter;b.click&&google.maps.event.addListener(c,"click",function(a){b.click(a);delete b.click});break;
case "places":this.singleLayers.places=c=new google.maps.places.PlacesService(this.map);if(b.search||b.nearbySearch){var d={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.search&&c.search(d,b.search);b.nearbySearch&&c.nearbySearch(d,b.nearbySearch)}b.textSearch&&c.textSearch({bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null},b.textSearch)}if(void 0!==
c)return"function"==typeof c.setOptions&&c.setOptions(b),"function"==typeof c.setMap&&c.setMap(this.map),c};this.removeLayer=function(a){void 0!==this.singleLayers[a]&&(this.singleLayers[a].setMap(null),delete this.singleLayers[a])};this.toImage=function(a){a=a||{};var b={};b.size=a.size||[this.el.clientWidth,this.el.clientHeight];b.lat=this.getCenter().lat();b.lng=this.getCenter().lng();if(0<this.markers.length)for(b.markers=[],a=0;a<this.markers.length;a++)b.markers.push({lat:this.markers[a].getPosition().lat(),
lng:this.markers[a].getPosition().lng()});0<this.polylines.length&&(a=this.polylines[0],b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(a.getPath()),b.polyline.strokeColor=a.strokeColor,b.polyline.strokeOpacity=a.strokeOpacity,b.polyline.strokeWeight=a.strokeWeight);return q.staticMapURL(b)};this.addMapType=function(a,b){if(b.hasOwnProperty("getTileUrl")&&"function"==typeof b.getTileUrl){b.tileSize=b.tileSize||new google.maps.Size(256,256);var c=new google.maps.ImageMapType(b);
this.map.mapTypes.set(a,c)}else throw"'getTileUrl' function required.";};this.addOverlayMapType=function(a){if(a.hasOwnProperty("getTile")&&"function"==typeof a.getTile){var b=a.index;delete a.index;this.map.overlayMapTypes.insertAt(b,a)}else throw"'getTile' function required.";};this.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)};this.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,a.styledMapName);this.map.mapTypes.set(a.mapTypeId,b)};this.setStyle=function(a){this.map.setMapTypeId(a)};
this.createPanorama=function(a){a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng());this.panorama=q.createPanorama(a);this.map.setStreetView(this.panorama);return this.panorama};this.on=function(a,b){return q.on(a,this,b)};this.off=function(a){q.off(a,this)}};q.createPanorama=function(a){var b=h(a.el,a.context);a.position=new google.maps.LatLng(a.lat,a.lng);delete a.el;delete a.context;delete a.lat;delete a.lng;for(var c="closeclick links_changed pano_changed position_changed pov_changed resize visible_changed".split(" "),
f=d({visible:!0},a),e=0;e<c.length;e++)delete f[c[e]];b=new google.maps.StreetViewPanorama(b,f);for(e=0;e<c.length;e++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this)})})(b,c[e]);return b};q.Route=function(a){this.map=a.map;this.route=a.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}).getPath();
this.back=function(){if(0<this.step_count){this.step_count--;var a=this.route.legs[0].steps[this.step_count].path,b;for(b in a)a.hasOwnProperty(b)&&this.polyline.pop()}};this.forward=function(){if(this.step_count<this.steps_length){var a=this.route.legs[0].steps[this.step_count].path,b;for(b in a)a.hasOwnProperty(b)&&this.polyline.push(a[b]);this.step_count++}}};q.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){a.success(c);
b&&b()},function(c){a.error(c);b&&b()},a.options):(a.not_supported(),b&&b())};q.geocode=function(a){this.geocoder=new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng));delete a.lat;delete a.lng;delete a.callback;this.geocoder.geocode(a,function(a,c){b(a,c)})};q.staticMapURL=function(a){function b(a,c){if("#"===a[0]&&(a=a.replace("#","0x"),c)){c=parseFloat(c);c=Math.min(1,Math.max(c,0));if(0===c)return"0x00000000";
c=(255*c).toString(16);1===c.length&&(c+=c);a=a.slice(0,8)+c}return a}var c=[],d="http://maps.googleapis.com/maps/api/staticmap";a.url&&(d=a.url,delete a.url);var d=d+"?",f=a.markers;delete a.markers;!f&&a.marker&&(f=[a.marker],delete a.marker);var e=a.polyline;delete a.polyline;if(a.center)c.push("center="+a.center),delete a.center;else if(a.address)c.push("center="+a.address),delete a.address;else if(a.lat)c.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng;else if(a.visible){var g=
encodeURI(a.visible.join("|"));c.push("visible="+g)}(g=a.size)?(g.join&&(g=g.join("x")),delete a.size):g="630x300";c.push("size="+g);a.zoom||(a.zoom=15);g=a.hasOwnProperty("sensor")?!!a.sensor:!0;delete a.sensor;c.push("sensor="+g);for(var k in a)a.hasOwnProperty(k)&&c.push(k+"="+a[k]);if(f)for(g=0;a=f[g];g++)k=[],a.size&&"normal"!==a.size?k.push("size:"+a.size):a.icon&&k.push("icon:"+encodeURI(a.icon)),a.color&&k.push("color:"+a.color.replace("#","0x")),a.label&&k.push("label:"+a.label[0].toUpperCase()),
a=a.address?a.address:a.lat+","+a.lng,k.length||0===g?(k.push(a),k=k.join("|"),c.push("markers="+encodeURI(k))):(k=c.pop()+encodeURI("|"+a),c.push(k));if(e){a=e;e=[];a.strokeWeight&&e.push("weight:"+parseInt(a.strokeWeight,10));a.strokeColor&&(f=b(a.strokeColor,a.strokeOpacity),e.push("color:"+f));a.fillColor&&(f=b(a.fillColor,a.fillOpacity),e.push("fillcolor:"+f));f=a.path;if(f.join)for(a=0;k=f[a];a++)e.push(k.join(","));else e.push("enc:"+f);e=e.join("|");c.push("path="+encodeURI(e))}c=c.join("&");
return d+c};q.custom_events="marker_added marker_removed polyline_added polyline_removed polygon_added polygon_removed geolocated geolocation_failed".split(" ");q.on=function(a,b,c){if(-1==q.custom_events.indexOf(a))return google.maps.event.addListener(b,a,c);c={handler:c,eventName:a};b.registered_events[a]=b.registered_events[a]||[];b.registered_events[a].push(c);return c};q.off=function(a,b){-1==q.custom_events.indexOf(a)?google.maps.event.clearListeners(b,a):b.registered_events[a]=[]};q.fire=function(a,
b,c){if(-1==q.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));else if(a in c.registered_events)for(var d=c.registered_events[a],f=0;f<d.length;f++)d[f].handler.apply(c,[b])};google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(a){a=new google.maps.LatLngBounds;for(var b=this.getPaths(),c,d=0;d<b.getLength();d++){c=b.getAt(d);for(var f=0;f<c.getLength();f++)a.extend(c.getAt(f))}return a});google.maps.Polygon.prototype.containsLatLng||
(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;for(var b=!1,c=this.getPaths().getLength(),d=0;d<c;d++)for(var f=this.getPaths().getAt(d),e=f.getLength(),g=e-1,k=0;k<e;k++){var h=f.getAt(k),g=f.getAt(g);(h.lng()<a.lng()&&g.lng()>=a.lng()||g.lng()<a.lng()&&h.lng()>=a.lng())&&h.lat()+(a.lng()-h.lng())/(g.lng()-h.lng())*(g.lat()-h.lat())<a.lat()&&(b=!b);g=k}return b});google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)};
google.maps.Marker.prototype.setFences=function(a){this.fences=a};google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)};return q}(this),b=function(a,d){for(var f=0;f<a.length;f++)if(0<a[f].length&&"number"!=typeof a[f][0])a[f]=b(a[f],d);else{var e=a,g=f,k;k=a[f];var h=k[0],m=k[1];d&&(h=k[1],m=k[0]);k=new google.maps.LatLng(h,m);e[g]=k}return a},d=function(a,b){if(a===b)return a;for(var c in b)a[c]=b[c];return a},f=function(a,b){var c=Array.prototype.slice.call(arguments,2);if(Array.prototype.map&&
a.map===Array.prototype.map)return Array.prototype.map.call(a,function(a){callback_params=c;callback_params.splice(0,0,a);return b.apply(this,callback_params)});for(var d=[],f=a.length,e=0;e<f;e++)callback_params=c,callback_params=callback_params.splice(0,0,a[e]),d.push(b.apply(this,callback_params));return d},k=function(a){new_array=[];for(var b=0;b<a.length;b++)new_array=new_array.concat(a[b]);return new_array};e.GMaps=a;e.GMaps.mapEvents="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed".split(" ");
e.fn.gmaps=function(b){if(!(1>this.length)){var c=e(this[0]),d=c.data("gmaps"),f=void 0===d,g=void 0===b;e.isString(b)&&(b={address:b});if(f){var f=e.uid("gmaps-"),k={lat:0,lng:0};e.isPlainObject(b)&&(b=e.extend({},k,b));c.attr("id",f);b.div="#"+f;e.each(e.GMaps.mapEvents,function(a,f){var g=e.isFunction(b[f])?b[f]:e.noop;b[f]=function(){var a=e.makeArray(arguments);g.apply(d,arguments);c.trigger.apply(c,["map_"+f].concat(a))}});d=new a(b);c.data("gmaps",d);d.go=function(a,b){d.setCenter(a,b);d.addMarker({lat:a,
lng:b})};g&&a.geolocate({success:function(a){d.go(a.coords.latitude,a.coords.longitude)}})}else g=b.lat,f=b.lng,(e.isNumber(g)||e.isNumber(f))&&d.go(g,f);return d}};g.resolveWith(a)});e.require().script(e.uri(window.location).protocol()+"://maps.google.com/maps/api/js?sensor=true&callback="+b).done()})})();(function(){FD31.module("imgareaselect",function(e){var g=function(){(function(b){function a(){return b("<div/>")}var c=Math.abs,d=Math.max,f=Math.min,e=Math.round;b.imgAreaSelect=function(g,h){function s(a){return a+
W.left-ka.left}function q(a){return a+W.top-ka.top}function t(a){return a-W.left+ka.left}function r(a){return a-W.top+ka.top}function u(a){var b=a||Ta;a=a||l;return{x1:e(E.x1*b),y1:e(E.y1*a),x2:e(E.x2*b),y2:e(E.y2*a),width:e(E.x2*b)-e(E.x1*b),height:e(E.y2*a)-e(E.y1*a)}}function m(a,b,c,d,f){var g=f||Ta;f=f||l;E={x1:e(a/g||0),y1:e(b/f||0),x2:e(c/g||0),y2:e(d/f||0)};E.width=E.x2-E.x1;E.height=E.y2-E.y1}function x(){U.width()&&(W={left:e(U.offset().left),top:e(U.offset().top)},O=U.innerWidth(),P=U.innerHeight(),
W.top+=U.outerHeight()-P>>1,W.left+=U.outerWidth()-O>>1,za=e(h.minWidth/Ta)||0,ob=e(h.minHeight/l)||0,pb=e(f(h.maxWidth/Ta||16777216,O)),fb=e(f(h.maxHeight/l||16777216,P)),"1.3.2"!=b().jquery||"fixed"!=db||ra.getBoundingClientRect||(W.top+=d(document.body.scrollTop,ra.scrollTop),W.left+=d(document.body.scrollLeft,ra.scrollLeft)),ka=/absolute|relative/.test(ja.css("position"))?{left:e(ja.offset().left)-ja.scrollLeft(),top:e(ja.offset().top)-ja.scrollTop()}:"fixed"==db?{left:b(document).scrollLeft(),
top:b(document).scrollTop()}:{left:0,top:0},S=s(0),A=q(0),(E.x2>O||E.y2>P)&&ba())}function C(a){if(Ua){B.css({left:s(E.x1),top:q(E.y1)}).add(ea).width(ha=E.width).height(Ca=E.height);ea.add(N).add(R).css({left:0,top:0});N.width(d(ha-N.outerWidth()+N.innerWidth(),0)).height(d(Ca-N.outerHeight()+N.innerHeight(),0));b(Q[0]).css({left:S,top:A,width:E.x1,height:P});b(Q[1]).css({left:S+E.x1,top:A,width:ha,height:E.y1});b(Q[2]).css({left:S+E.x2,top:A,width:O-E.x2,height:P});b(Q[3]).css({left:S+E.x1,top:A+
E.y2,width:ha,height:P-E.y2});ha-=R.outerWidth();Ca-=R.outerHeight();switch(R.length){case 8:b(R[4]).css({left:ha>>1}),b(R[5]).css({left:ha,top:Ca>>1}),b(R[6]).css({left:ha>>1,top:Ca}),b(R[7]).css({top:Ca>>1});case 4:R.slice(1,3).css({left:ha}),R.slice(2,4).css({top:Ca})}if(!1!==a&&(b.imgAreaSelect.keyPress!=gb&&b(document).unbind(b.imgAreaSelect.keyPress,b.imgAreaSelect.onKeyPress),h.keys))b(document)[b.imgAreaSelect.keyPress](b.imgAreaSelect.onKeyPress=gb);b.browser.msie&&2==N.outerWidth()-N.innerWidth()&&
(N.css("margin",0),setTimeout(function(){N.css("margin","auto")},0))}}function w(a){x();C(a);G=s(E.x1);H=q(E.y1);J=s(E.x2);K=q(E.y2)}function v(a,b){h.fadeSpeed?a.fadeOut(h.fadeSpeed,b):a.hide()}function z(a){var b=t(a.pageX-ka.left)-E.x1;a=r(a.pageY-ka.top)-E.y1;$||(x(),$=!0,B.one("mouseout",function(){$=!1}));V="";h.resizable&&(a<=h.resizeMargin?V="n":a>=E.height-h.resizeMargin&&(V="s"),b<=h.resizeMargin?V+="w":b>=E.width-h.resizeMargin&&(V+="e"));B.css("cursor",V?V+"-resize":h.movable?"move":"");
ca&&ca.toggle()}function y(a){b("body").css("cursor","");(h.autoHide||0==E.width*E.height)&&v(B.add(Q),function(){b(this).hide()});b(document).unbind("mousemove",X);B.mousemove(z);h.onSelectEnd(g,u())}function L(a){if(1!=a.which)return!1;x();V?(b("body").css("cursor",V+"-resize"),G=s(E[/w/.test(V)?"x2":"x1"]),H=q(E[/n/.test(V)?"y2":"y1"]),b(document).mousemove(X).one("mouseup",y),B.unbind("mousemove",z)):h.movable?(na=S+E.x1-(a.pageX-ka.left),La=A+E.y1-(a.pageY-ka.top),B.unbind("mousemove",z),b(document).mousemove(la).one("mouseup",
function(){h.onSelectEnd(g,u());b(document).unbind("mousemove",la);B.mousemove(z)})):U.mousedown(a);return!1}function M(a){Ba&&(a?(J=d(S,f(S+O,G+c(K-H)*Ba*(J>G||-1))),K=e(d(A,f(A+P,H+c(J-G)/Ba*(K>H||-1)))),J=e(J)):(K=d(A,f(A+P,H+c(J-G)/Ba*(K>H||-1))),J=e(d(S,f(S+O,G+c(K-H)*Ba*(J>G||-1)))),K=e(K)))}function ba(){G=f(G,S+O);H=f(H,A+P);c(J-G)<za&&(J=G-za*(J<G||-1),J<S?G=S+za:J>S+O&&(G=S+O-za));c(K-H)<ob&&(K=H-ob*(K<H||-1),K<A?H=A+ob:K>A+P&&(H=A+P-ob));J=d(S,f(J,S+O));K=d(A,f(K,A+P));M(c(J-G)<c(K-H)*
Ba);c(J-G)>pb&&(J=G-pb*(J<G||-1),M());c(K-H)>fb&&(K=H-fb*(K<H||-1),M(!0));E={x1:t(f(G,J)),x2:t(d(G,J)),y1:r(f(H,K)),y2:r(d(H,K)),width:c(J-G),height:c(K-H)};C();h.onSelectChange(g,u())}function X(a){J=/w|e|^$/.test(V)||Ba?a.pageX-ka.left:s(E.x2);K=/n|s|^$/.test(V)||Ba?a.pageY-ka.top:q(E.y2);ba();return!1}function T(a,c){J=(G=a)+E.width;K=(H=c)+E.height;b.extend(E,{x1:t(G),y1:r(H),x2:t(J),y2:r(K)});C();h.onSelectChange(g,u())}function la(a){G=d(S,f(na+(a.pageX-ka.left),S+O-E.width));H=d(A,f(La+(a.pageY-
ka.top),A+P-E.height));T(G,H);a.preventDefault();return!1}function da(){b(document).unbind("mousemove",da);x();J=G;K=H;ba();V="";Q.is(":visible")||B.add(Q).hide().fadeIn(h.fadeSpeed||0);Ua=!0;b(document).unbind("mouseup",I).mousemove(X).one("mouseup",y);B.unbind("mousemove",z);h.onSelectStart(g,u())}function I(){b(document).unbind("mousemove",da).unbind("mouseup",I);v(B.add(Q));m(t(G),r(H),t(G),r(H));this instanceof b.imgAreaSelect||(h.onSelectChange(g,u()),h.onSelectEnd(g,u()))}function F(a){if(1!=
a.which||Q.is(":animated"))return!1;x();na=G=a.pageX-ka.left;La=H=a.pageY-ka.top;b(document).mousemove(da).mouseup(I);return!1}function ia(){w(!1)}function qa(){wa=!0;Sa(h=b.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},h));B.add(Q).css({visibility:""});h.show&&(Ua=!0,x(),C(),B.add(Q).hide().fadeIn(h.fadeSpeed||0));setTimeout(function(){h.onInit(g,u())},
0)}function Fa(a,b){for(var c in b)void 0!==h[c]&&a.css(b[c],h[c])}function Sa(c){c.parent&&(ja=b(c.parent)).append(B.add(Q));b.extend(h,c);x();if(null!=c.handles){R.remove();R=b([]);for(Pa=c.handles?"corners"==c.handles?4:8:0;Pa--;)R=R.add(a());R.addClass(h.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:fa+1||1});0<=!parseInt(R.css("width"))&&R.width(5).height(5);(Aa=h.borderWidth)&&R.css({borderWidth:Aa,borderStyle:"solid"});Fa(R,{borderColor1:"border-color",borderColor2:"background-color",
borderOpacity:"opacity"})}Ta=h.imageWidth/O||1;l=h.imageHeight/P||1;null!=c.x1&&(m(c.x1,c.y1,c.x2,c.y2),c.show=!c.hide);c.keys&&(h.keys=b.extend({shift:1,ctrl:"resize"},c.keys));Q.addClass(h.classPrefix+"-outer");ea.addClass(h.classPrefix+"-selection");for(Pa=0;4>Pa++;)b(N[Pa-1]).addClass(h.classPrefix+"-border"+Pa);Fa(ea,{selectionColor:"background-color",selectionOpacity:"opacity"});Fa(N,{borderOpacity:"opacity",borderWidth:"border-width"});Fa(Q,{outerColor:"background-color",outerOpacity:"opacity"});
(Aa=h.borderColor1)&&b(N[0]).css({borderStyle:"solid",borderColor:Aa});(Aa=h.borderColor2)&&b(N[1]).css({borderStyle:"dashed",borderColor:Aa});B.append(ea.add(N).add(ca).add(R));b.browser.msie&&((Aa=(Q.css("filter")||"").match(/opacity=(\d+)/))&&Q.css("opacity",Aa[1]/100),(Aa=(N.css("filter")||"").match(/opacity=(\d+)/))&&N.css("opacity",Aa[1]/100));c.hide?v(B.add(Q)):c.show&&wa&&(Ua=!0,B.add(Q).fadeIn(h.fadeSpeed||0),w());Ba=(ab=(h.aspectRatio||"").split(/:/))[0]/ab[1];U.add(Q).unbind("mousedown",
F);if(h.disable||!1===h.enable)B.unbind("mousemove",z).unbind("mousedown",L),b(window).unbind("resize",ia);else{if(h.enable||!1===h.disable)(h.resizable||h.movable)&&B.mousemove(z).mousedown(L),b(window).resize(ia);h.persistent||U.add(Q).mousedown(F)}h.enable=h.disable=void 0}var U=b(g),wa,B=a(),ea=a(),N=a().add(a()).add(a()).add(a()),Q=a().add(a()).add(a()).add(a()),R=b([]),ca,S,A,W={left:0,top:0},O,P,ja,ka={left:0,top:0},fa=0,db="absolute",na,La,Ta,l,V,za,ob,pb,fb,Ba,Ua,G,H,J,K,E={x1:0,y1:0,x2:0,
y2:0,width:0,height:0},ra=document.documentElement,Ia,ab,Pa,Aa,ha,Ca,$,gb=function(a){var b=h.keys,c,e=a.keyCode;c=isNaN(b.alt)||!a.altKey&&!a.originalEvent.altKey?!isNaN(b.ctrl)&&a.ctrlKey?b.ctrl:!isNaN(b.shift)&&a.shiftKey?b.shift:isNaN(b.arrows)?10:b.arrows:b.alt;if("resize"==b.arrows||"resize"==b.shift&&a.shiftKey||"resize"==b.ctrl&&a.ctrlKey||"resize"==b.alt&&(a.altKey||a.originalEvent.altKey)){switch(e){case 37:c=-c;case 39:a=d(G,J);G=f(G,J);J=d(a+c,G);M();break;case 38:c=-c;case 40:a=d(H,K);
H=f(H,K);K=d(a+c,H);M(!0);break;default:return}ba()}else switch(G=f(G,J),H=f(H,K),e){case 37:T(d(G-c,S),H);break;case 38:T(G,d(H-c,A));break;case 39:T(G+f(c,O-t(J)),H);break;case 40:T(G,H+f(c,P-r(K)));break;default:return}return!1};this.remove=function(){Sa({disable:!0});B.add(Q).remove()};this.getOptions=function(){return h};this.setOptions=Sa;this.getSelection=u;this.setSelection=m;this.cancelSelection=I;this.update=w;for(Ia=U;Ia.length;)fa=d(fa,isNaN(Ia.css("z-index"))?fa:Ia.css("z-index")),"fixed"==
Ia.css("position")&&(db="fixed"),Ia=Ia.parent(":not(body)");fa=h.zIndex||fa;b.browser.msie&&U.attr("unselectable","on");b.imgAreaSelect.keyPress=b.browser.msie||b.browser.safari?"keydown":"keypress";b.browser.opera&&(ca=a().css({width:"100%",height:"100%",position:"absolute",zIndex:fa+2||2}));B.add(Q).css({visibility:"hidden",position:db,overflow:"hidden",zIndex:fa||"0"});B.css({zIndex:fa+2||2});ea.add(N).css({position:"absolute",fontSize:0});g.complete||"complete"==g.readyState||!U.is("img")?qa():
U.one("load",qa);!wa&&b.browser.msie&&7<=b.browser.version&&(g.src=g.src)};b.fn.imgAreaSelect=function(a){a=a||{};this.each(function(){b(this).data("imgAreaSelect")?a.remove?(b(this).data("imgAreaSelect").remove(),b(this).removeData("imgAreaSelect")):b(this).data("imgAreaSelect").setOptions(a):a.remove||(void 0===a.enable&&void 0===a.disable&&(a.enable=!0),b(this).data("imgAreaSelect",new b.imgAreaSelect(this,a)))});return a.instance?b(this).data("imgAreaSelect"):this}})(e)};g();this.resolveWith(g)})})();
(function(){FD31.module("image",function(e){var g=function(){e.fn.image=function(b){return(b=e.Image[b])&&b.apply(this[0],e.makeArray(arguments).slice(1))};e.Image={get:function(b){var a="IMG"===this.nodeName,c=e(a?this:new Image),d=e.Deferred();c.load(function(){var b,e,g,h;a||c.appendTo("body");var s={width:b=c.width(),height:e=c.height(),aspectRatio:g=b/e,orientation:h=1===g?"square":1>g?"tall":"wide"};c.css({position:"absolute",left:"-99999px"}).data(s).addClass("orientation-"+h).removeAttr("style");
a||c.detach();d.resolve(c,s)}).error(function(){d.reject()}).attr("src",b);return d},aspectRatio:function(b,a){e.isPlainObject(b)&&(b=b.width,a=b.height);return b/a},orientation:function(b,a){e.isPlainObject(b)&&(b=b.width,a=b.height);return b===a?"square":b>a?"wide":"tall"},resizeProportionate:function(b,a,c,d,f){var e=b,g=a,g=c/b,e=b*g,g=a*g,h=g>d;"outer"==f&&(h=g<d);h&&(g=d/a,e=b*g,g*=a);return{top:(d-g)/2,left:(c-e)/2,width:e,height:g}},resizeWithin:function(b,a,c,d){return e.Image.resizeProportionate(b,
a,c,d,"inner")},resizeToFill:function(b,a,c,d){return e.Image.resizeProportionate(b,a,c,d,"outer")}}};g();this.resolveWith(g)})})()});
FD31.installer("EasySocial","definitions",function(h){h.module("easysocial/admin easysocial/admin/sidebar/sidebar easysocial/admin/alerts/discover easysocial/progress/progress easysocial/admin/badges/discover easysocial/admin/grid/grid easysocial/admin/grid/sort easysocial/admin/grid/publishing easysocial/admin/grid/ordering easysocial/admin/indexer/indexer easysocial/admin/mailer/mailer easysocial/admin/migrators/migrator easysocial/admin/points/discover easysocial/admin/privacy/discover easysocial/admin/profiles/avatar easysocial/uploader/uploader easysocial/uploader/queue easysocial/admin/profiles/fields easysocial/field easysocial/admin/profiles/members easysocial/admin/profiles/profile easysocial/admin/profiles/profiles easysocial/admin/reports/reporters easysocial/admin/reports/reports easysocial/admin/users/form easysocial/admin/users/privacy easysocial/admin/users/users easysocial/admin/widgets/news easysocial/albums/album easysocial/albums/browser easysocial/albums/editor easysocial/albums/editor/sortable easysocial/albums/editor/uploader easysocial/albums/uploader easysocial/albums/uploader.item easysocial/albums/item easysocial/easysocial easysocial/site/likes/likes easysocial/site/reports/reports easysocial/site/repost/repost easysocial/site/share/share easysocial/site/layout/dialog easysocial/site/layout/responsive easysocial/site/layout/elements easysocial/site/photos/photos easysocial/photos easysocial/photos/viewer easysocial/site/users/login easysocial/site/profile/popbox easysocial/site/conversations/composer easysocial/site/friends/suggest easysocial/location easysocial/site/privacy/privacy easysocial/site/locations/popbox easysocial/site/sidebar/sidebar easysocial/locations easysocial/oauth/facebook easysocial/pagination easysocial/photos/avatar easysocial/photos/browser easysocial/photos/cover easysocial/photos/editor easysocial/photos/item easysocial/photos/tags easysocial/photos/tagger easysocial/photos/navigation easysocial/privacy easysocial/sharing easysocial/site/activities/activities easysocial/site/activities/sidebar easysocial/site/activities/sidebar.item easysocial/site/activities/apps easysocial/site/activities/item easysocial/site/activities/list easysocial/site/apps/apps easysocial/site/badges/badge easysocial/site/comments/control easysocial/site/comments/frame easysocial/site/comments/item easysocial/site/conversations/api easysocial/site/conversations/conversations easysocial/site/conversations/mailbox easysocial/site/conversations/item easysocial/site/conversations/filter easysocial/site/conversations/read easysocial/site/dashboard/apps easysocial/site/dashboard/dashboard easysocial/site/dashboard/feeds easysocial/site/dashboard/sidebar easysocial/site/followers/api easysocial/site/followers/followers easysocial/site/friends/api easysocial/site/friends/friends easysocial/site/friends/list easysocial/site/friends/item easysocial/site/notifications/list easysocial/site/points/history easysocial/site/popbox/popbox easysocial/site/profile/about easysocial/site/profile/avatar easysocial/site/profile/edit easysocial/validate easysocial/site/profile/friends easysocial/site/profile/header easysocial/site/profile/subscriptions easysocial/site/profile/miniheader easysocial/site/profile/notifications easysocial/site/profile/privacy easysocial/site/profile/profile easysocial/site/registrations/registrations easysocial/site/search/item easysocial/site/search/list easysocial/site/search/search easysocial/site/search/sidebar easysocial/site/search/toolbar easysocial/site/stream/filter easysocial/site/stream/item easysocial/site/stream/sidebar easysocial/site/stream/stream easysocial/site/stream/video easysocial/site/subscriptions/follow easysocial/site/toolbar/conversations easysocial/site/toolbar/friends easysocial/site/toolbar/login easysocial/site/toolbar/notifications easysocial/site/toolbar/story easysocial/site/toolbar/system easysocial/site/toolbar/profile easysocial/site/users/users easysocial/story easysocial/story/friends easysocial/story/links easysocial/story/locations easysocial/story/photos easysocial/albums/photo easysocial/stream easysocial/comment easysocial/tab easysocial/toggle easysocial/uploader/item easysocial/utilities/alias".split(" "));h.require.template.loader("easysocial/site/loading/small easysocial/site/uploader/queue.item easysocial/admin/profiles/form.fields.editorItem easysocial/admin/profiles/form.fields.stepItem easysocial/admin/profiles/form.fields.editorPage easysocial/admin/profiles/form.fields.config easysocial/site/albums/browser.list.item easysocial/site/albums/upload.item easysocial/site/dialog/default easysocial/site/friends/suggest.item easysocial/site/location/delete.confirmation easysocial/apps/user/locations/suggestion easysocial/site/photos/tags.item easysocial/site/photos/tags.menu.item easysocial/admin/profiles/form.privacy.custom.item easysocial/site/friends/default.empty easysocial/site/friends/list.assign easysocial/site/registration/dialog.error easysocial/apps/user/links/story.attachment.item easysocial/site/likes/item easysocial/site/uploader/preview".split(" "));
h.require.language.loader("COM_EASYSOCIAL_SCAN_COMPLETED COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED COM_EASYSOCIAL_INDEXER_REINDEX_RESTART COM_EASYSOCIAL_PROFILES_FORM_FIELDS_REQUIRE_MANDATORY_FIELDS COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRM COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVED COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_PAGE COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_FIELD COM_EASYSOCIAL_PROFILES_FORM_FIELDS_UNSAVED_CHANGES COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES COM_EASYSOCIAL_CANCEL_BUTTON COM_EASYSOCIAL_ASSIGN_BUTTON COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE COM_EASYSOCIAL_CLOSE_BUTTON COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE COM_EASYSOCIAL_FRIENDS_REQUEST_SENT COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_PUBLIC COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_MEMBER COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIENDS_OF_FRIEND COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIEND COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_ONLY_ME COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_CUSTOM COM_EASYSOCIAL_AT_LOCATION COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR COM_EASYSOCIAL_COMMENTS_STATUS_LOADING COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR COM_EASYSOCIAL_COMMENTS_STATUS_DELETING COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR COM_EASYSOCIAL_LIKES_LIKE COM_EASYSOCIAL_LIKES_UNLIKE COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL COM_EASYSOCIAL_COMMENTS_STATUS_SAVING COM_EASYSOCIAL_COMMENTS_STATUS_SAVED COM_EASYSOCIAL_NO_BUTTON COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE COM_EASYSOCIAL_FRIENDS_CANCEL_REQUEST_DIALOG_CANCELLED COM_EASYSOCIAL_FRIENDS_DIALOG_CANCEL_REQUEST COM_EASYSOCIAL_YES_CANCEL_MY_REQUEST_BUTTON COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS COM_EASYSOCIAL_SUBSCRIPTION_INFO COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED COM_EASYSOCIAL_WITH_FRIENDS COM_EASYSOCIAL_AND_ONE_OTHER COM_EASYSOCIAL_AND_MANY_OTHERS COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR COM_EASYSOCIAL_STORY_SUBMIT_ERROR COM_EASYSOCIAL_STORY_CONTENT_EMPTY COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBSCRIBE COM_EASYSOCIAL_STREAM_DIALOG_FEED COM_EASYSOCIAL_STREAM_BUTTON_CLOSE".split(" "));
(function(){var e=h.stylesheet({content:""})?"resolve":"reject";h.each(["easysocial/imgareaselect/default"],function(g,b){h.require.stylesheet.loader(b)[e]()})})()});
FD31.installer("EasySocial","scripts",function(h){EasySocial.module("admin",function(e){var g=this;EasySocial.require().library("uniform","chosen","flot").script("admin/sidebar/sidebar").done(function(b){b(".uniform, .check :checkbox, .radio :radio, input:file[data-uniform], .usergroups :checkbox").uniform();b("[data-chosen]").chosen({disable_search:!0});b("[data-chosen-search]").chosen({disable_search:!1});b("[data-sidebar]").implement(EasySocial.Controller.Sidebar.Sidebar);b("[data-sidebar-menu-toggle]").on("click",
function(){var a=b(this).parent("li"),c=a.find("ul");b(this).parent("li").hasClass("active")?(a.removeClass("active"),c.removeClass("in")):(a.addClass("active"),c.addClass("in"))});g.resolve()})});EasySocial.module("admin/sidebar/sidebar",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Sidebar.Sidebar",{defaultOptions:{intervalPendingUsers:5E3,"{versionNotice}":"[data-easysocial-version]","{usersBadge}":".menu-user > a .badge","{pendingUsersBadge}":".menu-user .menu-ies-vcard > .badge"}},
function(a){return{init:function(){a.versionChecks();a.checkPendingUsers()},versionChecks:function(){EasySocial.ajax("admin/controllers/easysocial/versionChecks").done(function(c,d,f,e){d&&(b("[data-es-version-header]").removeClass("latest").addClass("outdated"),b("[data-es-version-header]").find("[data-es-outdated]").data("local-version",f).data("online-version",e));a.versionNotice().html(c).show()})},monitorPendingUsers:function(){EasySocial.debug&&console.info("Start monitoring pending users with interval of "+
a.options.intervalPendingUsers+" seconds.");a.options.state=setTimeout(a.checkPendingUsers,a.options.intervalPendingUsers)},checkPendingUsers:function(){a.stopMonitorPendingUsers();setTimeout(function(){EasySocial.ajax("admin/controllers/users/getTotalPending",{},{type:"jsonp"}).done(function(b){0<b?(a.usersBadge().html(b),a.pendingUsersBadge().html(b)):a.usersBadge().html("");a.monitorPendingUsers()})},a.options.intervalPendingUsers)},stopMonitorPendingUsers:function(){clearTimeout(a.options.state)}}});
g.resolve()})});EasySocial.module("admin/alerts/discover",function(e){var g=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(b){EasySocial.Controller("Alerts.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":"[data-alerts-discovery-start]","{progressBar}":"[data-alerts-discovery-progress]","{results}":"[data-alerts-discovery-result]"}},function(a){return{init:function(){a.initProgressBar()},reset:function(){a.results().html("");
a.options.progressController.reset()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<tr>").append(b("<td>").html(c)).appendTo(a.results())},startIterating:function(){var c=a.options.files.shift();EasySocial.ajax("admin/controllers/alerts/scan",{file:c}).always(function(c,f,e){0<a.options.files.length?(a.options.progressController.touch("..."),a.addLog(f),a.startIterating()):(a.options.progressController.touch("..."),
a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(b){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/alerts/discoverFiles",{}).done(function(b,c){a.reset();a.options.files=b;0<a.options.files.length&&(a.options.progressController.begin(a.options.files.length),a.addLog(c),a.startIterating())})}}});g.resolve()})});EasySocial.module("progress/progress",function(e){EasySocial.Controller("Progress",
{defaultOptions:{current:0,eachWidth:null,total:null,progressClass:"progress progress-info progress-striped","{progressBar}":".bar","{progressResult}":".progress-result",view:{}}},function(e){return{init:function(){},reset:function(){e.options.current=0;e.eachWidth=null;e.total=null;e.progressBar().css("width","0%").html("")},begin:function(b){e.options.total=b;e.options.eachWidth=100/b;0<b&&e.element.addClass(e.options.progressClass).show()},touch:function(b){e.options.current+=e.options.eachWidth;
100<e.options.current&&(e.options.current=100);e.progressBar().css("width",e.options.current+"%");e.progressResult().html(Math.round(e.options.current)+"%")},completed:function(b){e.options.current=100;e.progressBar().css("width",e.options.current+"%");e.progressResult().html(Math.round(e.options.current)+"%")}}});this.resolve()});EasySocial.module("admin/badges/discover",function(e){var g=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(b){EasySocial.Controller("Badges.Discover",
{defaultOptions:{files:[],progressController:null,"{startButton}":"[data-badgesDiscover-start]","{progressBar}":"[data-badgesDiscover-progress]","{results}":"[data-badgesDiscover-result]","{viewLog}":"[data-badgesDiscover-viewLog]"}},function(a){return{init:function(){a.initProgressBar();a.initLogging()},reset:function(){a.results().html("");a.initLogging();a.options.progressController.reset()},initLogging:function(){a.viewLog().hide()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);
a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<tr>").append(b("<td>").html(c)).appendTo(a.results())},startIterating:function(){var c=a.options.files.shift();EasySocial.ajax("admin/controllers/badges/scan",{file:c}).always(function(c,f){0<a.options.files.length?(a.options.progressController.touch("..."),a.addLog(f),a.startIterating()):(a.options.progressController.touch("..."),a.addLog(f),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.viewLog().show(),a.startButton().removeAttr("disabled"))})},
"{startButton} click":function(c){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/badges/discoverFiles",{}).done(function(c,f){a.options.files=c;0<a.options.files.length?(a.options.progressController.begin(a.options.files.length),a.addLog(f),a.startIterating()):(a.options.progressController.begin(1),a.options.progressController.completed("Discover Completed"),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})},"{viewLog} click":function(){a.results().toggle()}}});
g.resolve()})});EasySocial.module("admin/grid/grid",function(e){var g=this;EasySocial.require().script("admin/grid/sort","admin/grid/publishing").done(function(b){EasySocial.Controller("Grid",{defaultOptions:{"{sortColumns}":"[data-table-grid-sort]","{ordering}":"[data-table-grid-ordering]","{direction}":"[data-table-grid-direction]","{task}":"[data-table-grid-task]","{searchInput}":"[data-table-grid-search-input]","{search}":"[data-table-grid-search]","{resetSearch}":"[data-table-grid-search-reset]",
"{checkAll}":"[data-table-grid-checkall]","{checkboxes}":"[data-table-grid-id]","{publishItems}":"[data-table-grid-publishing]","{itemRow}":"tr","{boxChecked}":"[data-table-grid-box-checked]","{filters}":"[data-table-grid-filter]"}},function(a){return{init:function(){a.implementSortable();a.implementPublishing()},"{filters} change":function(){a.setTask("");a.submitForm()},"{search} click":function(){a.submitForm()},"{resetSearch} click":function(){a.searchInput().val("");a.submitForm()},submitForm:function(){a.element.submit()},
setTask:function(b){a.task().val(b)},setOrdering:function(b){a.ordering().val(b)},setDirection:function(b){a.direction().val(b)},setTotalChecked:function(b){a.boxChecked().val(b)},toggleSelectRow:function(a){a=a.find("input[name=cid\\[\\]]");!0==b(a).prop("checked")?b(a).prop("checked",!1):b(a).prop("checked",!0)},selectRow:function(a){a=a.find("input[name=cid\\[\\]]");b(a).prop("checked",!0)},implementSortable:function(){a.sortColumns().implement(EasySocial.Controller.Grid.Sort,{"{parent}":a})},
implementPublishing:function(){a.publishItems().implement(EasySocial.Controller.Grid.Publishing,{"{parent}":a})},"{checkAll} change":function(c,d){a.checkboxes().prop("checked",b(c).is(":checked"));var f=b(c).is(":checked")?a.checkboxes().length:0;a.setTotalChecked(f)}}});g.resolve()})});EasySocial.module("admin/grid/sort",function(e){EasySocial.Controller("Grid.Sort",{defaultOptions:{items:"[data-grid-sort-item]"}},function(e){return{init:function(){},"{self} click":function(){var b=e.element.data("direction"),
a=e.element.data("sort");e.parent.setOrdering(a);e.parent.setDirection(b);e.parent.setTask("");e.parent.submitForm()}}});this.resolve()});EasySocial.module("admin/grid/publishing",function(e){EasySocial.Controller("Grid.Publishing",{defaultOptions:{}},function(e){return{init:function(){},"{self} click":function(b){b=e.element.parents("tr");var a=e.element.data("task");e.parent.selectRow(b);e.parent.setTask(a);e.parent.submitForm()}}});this.resolve()});EasySocial.module("admin/grid/ordering",function(e){EasySocial.Controller("Grid.Ordering",
{defaultOptions:{"{moveUp}":"[data-grid-order-up]","{moveDown}":"[data-grid-order-down]",row:null}},function(g){return{init:function(){g.options.row=g.element.parents("tr")},selectRow:function(){var b=g.options.row.find("input[name=cid\\[\\]]");e(b).prop("checked",!0)},"{moveUp} click":function(){g.selectRow();e.Joomla("submitform",["moveUp"])},"{moveDown} click":function(){g.selectRow();e.Joomla("submitform",["moveDown"])}}});this.resolve()});EasySocial.module("admin/indexer/indexer",function(e){var g=
this;EasySocial.require().language("COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING","COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED","COM_EASYSOCIAL_INDEXER_REINDEX_RESTART").view("site/loading/small").done(function(b){EasySocial.Controller("Indexer",{defaultOptions:{"{startButton}":"[data-start-button]","{indexerBar}":"[data-indexer-bar]","{indexerResult}":"[data-indexer-result]","{indexerMessage}":"[data-indexer-message]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){},"{startButton} click":function(){a.runIndex(0);
a.indexerMessage().html(b.language("COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING"));a.indexerMessage().show();a.startButton().hide()},runIndex:function(b){EasySocial.ajax("admin/controllers/indexer/indexing",{max:b},{beforeSend:function(){}}).done(function(b,c){0>b&&(c="100");a.updateProgress(c);0<=b&&a.runIndex(b)}).fail(function(b){a.setMessage(b)}).always(function(){})},updateProgress:function(c){a.indexerBar().css("width",c+"%");a.indexerResult().html(c+"%");100==c&&(a.indexerMessage().html(b.language("COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED")),
a.startButton().html(b.language("COM_EASYSOCIAL_INDEXER_REINDEX_RESTART")),a.startButton().show())}}});g.resolve()})});EasySocial.module("admin/mailer/mailer",function(e){EasySocial.Controller("Mailer",{defaultOptions:{"{item}":"[data-mailer-item]"}},function(e){return{init:function(){e.item().implement(EasySocial.Controller.Mailer.Item)}}});EasySocial.Controller("Mailer.Item",{defaultOptions:{"{preview}":"[data-mailer-item-preview]"}},function(e){return{init:function(){e.options.id=e.element.data("id")},
"{preview} click":function(b,a){EasySocial.dialog({content:EasySocial.ajax("admin/views/mailer/preview",{id:e.options.id})});console.log(e.options.id)}}});this.resolve()});EasySocial.module("admin/migrators/migrator",function(e){var g=this;EasySocial.require().script("progress/progress").done(function(b){EasySocial.Controller("Migrators.Migrator",{defaultOptions:{component:null,processState:0,progressController:null,mapping:null,"{initiateButton}":"[data-initiate-migration]","{progressBar}":".discoverProgress",
"{results}":".scannedResult","{viewLog}":".viewLog","{customFieldsMap}":"[data-custom-fields-map]","{resultForm}":"[data-migration-result]","{startWidget}":"[data-start-widget]","{fieldItem}":"[data-field-item]","{startMigrationButton}":"[data-start-migration]","{rows}":"[data-row-item]","{selection}":"[data-field-item]","{jomsocialBackButton}":"[data-jomsocial-back-button]"}},function(a){return{init:function(){a.initProgressBar();a.initLogging()},showCustomFields:function(){a.startWidget().slideUp();
a.customFieldsMap().slideDown()},showResultForm:function(){a.customFieldsMap().slideUp();"com_community"!=a.options.component&&a.startWidget().slideUp();a.resultForm().slideDown()},startMigration:function(){a.showResultForm();1!=a.options.processState&&(a.options.processState=1,a.reset(),EasySocial.ajax("admin/controllers/migrators/check",{component:a.options.component}).done(function(b){b.isvalid?(a.options.progressController.begin(b.count),a.startIterating("")):(a.results().show(),a.addLog("Error: "+
b.message),a.options.processState=0)}))},reset:function(){a.results().html("");a.initLogging();a.options.progressController.reset()},initLogging:function(){a.viewLog().hide()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<li>").html(c).appendTo(a.results())},startIterating:function(c){null==a.options.mapping&&0<a.selection().length&&(a.options.mapping=b("#adminForm").serializeArray());
EasySocial.ajax("admin/controllers/migrators/process",{component:a.options.component,item:c,mapping:a.options.mapping}).always(function(b){b["continue"]?(a.options.progressController.touch("Discovering..."),a.addLog(b.message),a.startIterating(b.item)):(a.options.progressController.touch("Discover Completed"),a.addLog(b.message),a.addLog("migration process completed."),a.viewLog().show(),a.jomsocialBackButton().show(),a.options.processState=0)})},"{fieldItem} change":function(a){""==b(a).val()?b(a).parents("[data-row-item]").removeClass("success").addClass("error"):
b(a).parents("[data-row-item]").removeClass("error").addClass("success")},"{startMigrationButton} click":function(){0<a.selection().length&&a.selection().each(function(a,d){""==b(d).val()?b(d).parents("[data-row-item]").removeClass("success").addClass("error"):b(d).parents("[data-row-item]").removeClass("error").addClass("success")});a.rows().hasClass("error")?EasySocial.dialog({content:EasySocial.ajax("admin/views/migrators/confirmMigration"),bindings:{"{submitButton} click":function(){a.startMigration();
EasySocial.dialog().close()}}}):a.startMigration()},"{initiateButton} click":function(b){a.showCustomFields()},"{viewLog} click":function(){a.results().toggle()}}});g.resolve()})});EasySocial.module("admin/points/discover",function(e){var g=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(b){EasySocial.Controller("Points.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":"[data-points-discovery-start]","{progressBar}":".discoverProgress",
"{results}":"[data-points-discovery-result]"}},function(a){return{init:function(){a.initProgressBar()},reset:function(){a.results().html("");a.options.progressController.reset()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<tr>").append(b("<td>").html(c)).appendTo(a.results())},startIterating:function(){var c=a.options.files.shift();EasySocial.ajax("admin/controllers/points/scan",
{file:c}).always(function(c,f,e){0<a.options.files.length?(a.options.progressController.touch("..."),a.addLog(f),a.startIterating()):(a.options.progressController.touch("..."),a.addLog(f),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(c){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/points/discoverFiles",{}).done(function(c,f){a.reset();a.options.files=c;0<a.options.files.length?
(a.options.progressController.begin(a.options.files.length),a.addLog(f),a.startIterating()):(a.options.progressController.begin(1),a.options.progressController.completed("Discover Completed"),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})}}});g.resolve()})});EasySocial.module("admin/privacy/discover",function(e){var g=this;EasySocial.require().script("progress/progress").done(function(b){EasySocial.Controller("Privacy.Discover",{defaultOptions:{files:[],
progressController:null,"{startButton}":".scanRules","{progressBar}":".discoverProgress","{results}":".scannedResult","{viewLog}":".viewLog",view:{}}},function(a){return{init:function(){a.initProgressBar();a.initLogging()},reset:function(){a.results().html("");a.initLogging();a.options.progressController.reset()},initLogging:function(){a.viewLog().hide()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},
addLog:function(c){b("<li>").html(c).appendTo(a.results())},startIterating:function(){var b=a.options.files.shift();EasySocial.ajax("admin/controllers/privacy/scan",{file:b}).always(function(b){0<a.options.files.length?(a.options.progressController.touch("Discovering..."),a.addLog("Scanned "+b.file+" : "+b.rules.length+" rules installed."),a.startIterating()):(a.options.progressController.touch("Discover Completed"),a.addLog("Scanned "+b.file+" : "+b.rules.length+" rules installed."),a.addLog("Scanning completed."),
a.viewLog().show(),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(c){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/privacy/discoverFiles",{}).done(function(c){a.options.files=c;0<a.options.files.length?(a.options.progressController.begin(a.options.files.length),a.results().hide(),a.addLog("Found a total of "+c.length+" rules file in the site."),a.startIterating()):(a.options.progressController.begin(1),a.options.progressController.completed("Discover Completed"),
a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})},"{viewLog} click":function(){a.results().toggle()}}});g.resolve()})});EasySocial.module("admin/profiles/avatar",function(e){var g=this;EasySocial.require().script("uploader/uploader").done(function(){EasySocial.Controller("Profiles.Avatar",{defaultOptions:{token:null,"{fileUploader}":"[data-profile-avatars-uploader]","{startUploadButton}":"[data-profile-avatars-startupload]","{avatarList}":"[data-profile-avatars-list]",
"{avatarEmpty}":"[data-profile-avatars-empty]","{avatarItem}":"[data-profile-avatars-item]","{messagePlaceholder}":"[data-profile-avatars-message]","{removeFile}":".removeFile","{clearUploadedItems}":"[data-uploader-clear]"}},function(b){return{init:function(){b.options.id=b.element.data("id");b.initUploader();b.initAvatar()},initUploader:function(){b.fileUploader().implement(EasySocial.Controller.Uploader,{url:e.indexUrl+"?option=com_easysocial&namespace=admin/controllers/profiles/uploadDefaultAvatars&"+
b.options.token+"=1&tmpl=component&format=ajax&uid="+b.options.id})},initAvatar:function(){b.avatarItem().implement("EasySocial.Controller.Profiles.Avatar.Item",{"{parent}":b,items:b.avatarItem})},addMessage:function(a){b.clearMessage();b.setMessage(a)},"{removeFile} click":function(a,c){var d=e(a).parents("li").attr("id");b.fileUploader().controller().removeItem(d)},"{startUploadButton} click":function(){b.fileUploader().controller().startUpload()},"{fileUploader} UploadProgress":function(a,b,d){a=
d.percent;d=e("#"+d.id).find(".progressBar");d.show();d.find(".bar").css("width",a+"%")},"{fileUploader} FileUploaded":function(a,c,d,f){void 0!=f[0]&&(a=f[0].data[0],b.avatarEmpty().hide(),b.avatarList().prepend(a),b.clearUploadedItems().show(),b.initAvatar())},"{clearUploadedItems} click":function(){b.fileUploader().controller().reset();b.clearUploadedItems().hide()}}});EasySocial.Controller("Profiles.Avatar.Item",{defaultOptions:{id:null,"{deleteLink}":"[data-avatar-delete]","{setDefaultAvatar}":"[data-avatar-default]"}},
function(b){return{init:function(){b.options.id=b.element.data("id")},"{setDefaultAvatar} click":function(a,c){EasySocial.ajax("admin/controllers/avatars/setDefault",{id:b.options.id}).done(function(a){b.parent.avatarItem().removeClass("default");b.element.addClass("default");b.parent.addMessage(a)})},"{deleteLink} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/confirmDeleteAvatar"),bindings:{"{deleteButton} click":function(a,c){e(a).addClass("btn-loading");EasySocial.ajax("admin/controllers/avatars/delete",
{id:b.options.id}).done(function(a){b.element.remove();0==b.parent.avatarList().children().length&&b.parent.avatarEmpty().show();b.parent.addMessage(a);EasySocial.dialog().close()})}}})}}});g.resolve()})});EasySocial.module("uploader/uploader",function(e){var g=this;EasySocial.require().library("plupload").view("site/uploader/queue.item").script("uploader/queue").done(function(){EasySocial.Controller("Uploader",{defaults:{url:e.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+
EasySocial.getToken()+"=1",uploaded:[],query:"",plupload:"",dropArea:"uploaderDragDrop",extensionsAllowed:"jpg,jpeg,png,gif",temporaryUpload:!1,files:[],"{uploaderForm}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]","{uploadArea}":".uploadArea","{queue}":"[data-uploaderQueue]","{queueItem}":"[data-uploaderQueue-item]","{emptyFiles}":"[data-uploader-empty]","{removeFile}":"[data-uploaderQueue-remove]","{uploadCounter}":".uploadCounter",view:{queueItem:"site/uploader/queue.item"}}},
function(b){return{init:function(){b.queue().implement(EasySocial.Controller.Uploader.Queue);b.options.temporaryUpload&&(b.options.url=e.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+EasySocial.getToken()+"=1");""!=b.options.query&&(b.options.url=b.options.url+"&"+b.options.query);b.uploaderForm().implement("plupload",{settings:{url:b.options.url,drop_element:b.options.dropArea,filters:[{title:"Allowed File Type",extensions:b.options.extensionsAllowed}]},
"{uploader}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]"},function(){b.options.plupload=this.plupload})},"{uploaderForm} FilesAdded":function(a,c,d,f){b.addFiles(f);b.options.temporaryUpload&&b.startUpload()},"{uploaderForm} UploadProgress":function(a,c,d,f){b.queueItem("#"+f.id).trigger("UploadProgress",f)},"{uploaderForm} FileUploaded":function(a,c,d,f,e){b.queueItem("#"+f.id).trigger("FileUploaded",[f,e])},"{uploaderForm} UploadComplete":function(a,c,d,f){b.options.uploading=
!1},"{uploaderForm} Error":function(a,c,d,f){b.clearMessage();b.setMessage({message:f.message,type:"error"})},"{uploaderForm} FileError":function(a,c,d,f,e){b.setMessage({message:e.message,type:"error"});b.queueItem("#"+f.id).trigger("FileError",[f,e])},addFiles:function(a){e.each(a,function(a,d){d.size=b.formatSize(d.size);var f=b.view.queueItem({file:d,temporaryUpload:b.options.temporaryUpload});e(f).implement(EasySocial.Controller.Uploader.Queue.Item,{"{uploader}":b});b.options.files.push(d);b.emptyFiles().hide();
b.queue().append(f)})},formatSize:function(a){return parseInt(a/1024)},reset:function(){b.queueItem().remove()},removeItem:function(a){var c=e("#"+a),c=e(c).find("input[name=upload-id\\[\\]]").val();EasySocial.ajax("site/controllers/uploader/delete",{id:c}).done(function(){e("#"+a).remove();b.options.plupload.removeFile(b.options.plupload.getFile(a))})},startUpload:function(){b.upload()},upload:function(){0<b.options.plupload.files.length&&(b.options.uploading=!0,b.options.plupload.start())},hasFiles:function(){return 0<
b.options.files.length}}});g.resolve()})});EasySocial.module("uploader/queue",function(e){var g=this;EasySocial.require().view("site/uploader/queue.item").done(function(b){EasySocial.Controller("Uploader.Queue",{defaults:{"{item}":"[data-uploaderQueue-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Uploader.Queue.Item)}}});EasySocial.Controller("Uploader.Queue.Item",{defaultOptions:{"{delete}":"[data-uploaderQueue-remove]","{progress}":"[data-uploaderQueue-progress]",
"{progressBar}":"[data-uploaderQueue-progressBar]","{status}":"[data-uploaderQueue-status]","{id}":"[data-uploaderQueue-id]"}},function(a){return{init:function(){a.uploader.options.temporaryUpload&&(a.idTemplate=a.id().toHTML(),a.id().remove())},"{delete} click":function(){a.uploader.removeItem(a.element.attr("id"))},"{self} FileUploaded":function(c,d,f,e){a.uploader.options.temporaryUpload&&b.buildHTML(a.idTemplate).val(e.id).appendTo(a.element);5==f.status&&(a.element.addClass("is-done"),a.status().html("Done"))},
"{self} UploadProgress":function(b,d,f){a.status().html(f.percent+"%");a.progressBar().css("width",f.percent+"%")},"{self} FileError":function(){a.element.removeClass("is-done is-queue").addClass("is-error");a.progress().removeClass("progress-danger progress-success progress-info progress-warning").addClass("progress-danger");a.status().html("Error")}}});g.resolve()})});EasySocial.module("admin/profiles/fields",function(e){var g=this;EasySocial.require().library("ui/draggable","ui/sortable","ui/droppable").script("field").view("admin/profiles/form.fields.editorItem",
"admin/profiles/form.fields.stepItem","admin/profiles/form.fields.editorPage","admin/profiles/form.fields.config","admin/profiles/dialog.move.field").language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_REQUIRE_MANDATORY_FIELDS","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL",
"COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVING",
"COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVED","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_PAGE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_FIELD","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_UNSAVED_CHANGES","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES").done(function(){var b,a,c,d,f,k={},h={},p={},s={},q={},t={pages:[],fields:[]};EasySocial.Controller("Fields",{defaultOptions:{id:0,"{wrap}":"[data-fields-wrap]","{browser}":"[data-fields-browser]","{editor}":"[data-fields-editor]","{steps}":"[data-fields-steps]",
"{config}":"[data-fields-config]","{saveForm}":"[data-fields-save]",view:{config:"admin/profiles/form.fields.config"}}},function(g){return{init:function(){b=g;g.options.id=g.element.data("id");a=g.addPlugin("browser");c=g.addPlugin("editor");d=g.addPlugin("steps");e.when.apply(null,[a.state,c.state,d.state]).done(function(){b.trigger("controllersReady")})},changed:!1,change:function(){g.changed=!0},"{window} beforeunload":function(a,b){if(g.changed)return e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_UNSAVED_CHANGES")},
"{saveForm} click":function(){g.save()},save:function(a,k){var q=e.Deferred();"savecopy"===k&&(g.changed=!0);if(!g.changed)return q.resolve(),q;EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVING"),width:400,height:150});b.trigger("saving");if(f&&f.state&&!f.checkConfig())return q.reject(e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES")),q;p=e.extend(!0,{},h);var s=[];e.each(d.step(),function(a,b){b=e(b);var d=c.getPage(b.data("id"));s.push(d._export())});
if(0<e._.keys(p).length)return b.trigger("saved",[!1]),q.reject(e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_REQUIRE_MANDATORY_FIELDS")),q;b.changed=!1;s=JSON.stringify(s);EasySocial.ajax("admin/controllers/profiles/saveFields",{id:a||g.options.id,data:s,deleted:t,task:k}).done(function(a){b.trigger("saved");EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVED"),width:400,height:150});setTimeout(EasySocial.dialog().close,2E3);q.resolve()});return q},updateResult:function(a){e.each(a,
function(a,b){var f=d.step().eq(a).data("id"),e=c.getPage(f);d.updateResult(a,b.id);e.updateResult(f,b)})},"{self} doneConfiguring":function(){g.element.removeClass("editting")},loadConfiguration:function(a,b){g.element.addClass("editting");var c=e(g.view.config());f=c.addController("EasySocial.Controller.Fields.Config",{controller:{item:a}});"page"===b?a.pageHeader().append(c):a.element.append(c);g.element.trigger("loadingConfig",[b])}}});EasySocial.Controller("Fields.Browser",{defaultOptions:{"{browser}":"[data-fields-browser]",
"{mandatory}":"[data-fields-browser-group-mandatory]","{standard}":"[data-fields-browser-group-standard]","{list}":"[data-fields-browser-list]","{item}":"[data-fields-browser-item]",affixClass:"es-browser-affix"}},function(a){return{state:e.Deferred(),init:function(){a.registerApps();a.ready();a.affixHandler();a.initAffix()},ready:function(){a.state.resolve()},"{parent} controllersReady":function(){var b=d.getCurrentStep().data("id");a.initDraggable(b)},"{parent} pageChanged":function(b,c,d,f){a.item().draggable("destroy");
a.initDraggable(f)},"{parent} pageAdded":function(b,c,d,f){a.item().draggable("destroy");a.initDraggable(f)},initDraggable:function(b){a.item().draggable({revert:"invalid",helper:"clone",connectToSortable:"[data-fields-editor-page-items-"+b+"]"})},affixHandler:function(){var b=e(window),c=a.parent.wrap().offset().top,b=b.scrollTop();b>c&&!a.browser().hasClass(a.options.affixClass)&&a.browser().addClass(a.options.affixClass);b<=c&&a.browser().hasClass(a.options.affixClass)&&a.browser().removeClass(a.options.affixClass)},
initAffix:function(){e(window).scroll(a.affixHandler)},registerApps:function(){e.each(a.item(),function(a,b){b=e(b);var c=b.data("id");k[c]={id:c,element:b.data("element"),title:b.data("title"),params:b.data("params"),core:b.data("core"),unique:b.data("unique"),item:b};b.data("core")&&(h[c]=k[c])})},checkout:function(a){void 0!==p[a]&&delete p[a]},"{item} click":function(a){var b=c.currentPage();a=a.data("id");b.addNewField(a)},"{parent} fieldAdded":function(b,c,d){(b=k[d])&&b.core&&(b.item.hide(),
c=a.mandatory().find(a.item.selector).filter(":visible"),a.mandatory().toggle(0<c.length));b&&b.unique&&b.item.hide()},"{parent} fieldDeleted":function(b,c,d,f){(b=k[d])&&b.core?(b.item.show(),a.mandatory().show()):b&&b.unique&&b.item.show()}}});EasySocial.Controller("Fields.Config",{defaultOptions:{"{config}":"[data-fields-config]","{header}":"[data-fields-config-header]","{close}":"[data-fields-config-close]","{form}":"[data-fields-config-form]","{param}":"[data-fields-config-param]","{tabnav}":"[data-fields-config-tab-nav]",
"{tabcontent}":"[data-fields-config-tab-content]","{done}":"[data-fields-config-done]"}},function(a){return{init:function(){},state:!1,load:function(c){a.state=!0;c.find("[data-fields-config-param-choices]").addController("EasySocial.Controller.Config.Choices",{controller:{item:a.item}});c.find("h4").hide();a.header().html(c.find("h4").html());a.form().html(c);a.item.options.newfield&&a.param("[data-fields-config-param-field-unique_key]").attr("disabled",!0).val(e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST"));
0<a.tabnav().length&&a.tabnav().find('a[data-tabname="core"]').tab("show");a.populateConfig();c=a.element.height();b.wrap().css("padding-bottom",c+"px");b.trigger("configLoaded")},"{close} click":function(b,c){a.closeConfig()},"{done} click":function(b,c){a.closeConfig()},closeConfig:function(){var c=a.populateConfig();a.checkConfig(c)?(a.item.updateHtml(a.form().html()),a.item.content().trigger("onConfigSave",[c]),a.element.remove(),f=null,b.trigger("doneConfiguring")):EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),
width:400,height:100})},"{parent} loadingConfig":function(b,c,d){void 0!==d&&"field"!=d&&(b=e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_"+d.toUpperCase()),a.header().html(b));a.config().show();a.close().hide();a.form().html(e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING"))},"{parent} configLoaded":function(b,c){a.close().show()},"{param} change":function(b){a.paramChanged(b)},"{param} keyup":function(b){a.paramChanged(b)},paramChanged:function(c){c=c.data("name");
var d=a.getConfigValue(c);"boolean"===a.item.appParams[c].type&&(d=!!d);a.item.content().trigger("onConfigChange",[c,d]);b.change()},getConfigValue:function(b){var c=a.item.appParams[b],d=a.param().filterBy("name",b);if(0!==d.length){var f="";switch(c.type){case "choices":f=[];e.each(d.find("li"),function(a,b){b=e(b);var c=b.find("[data-fields-config-param-choice-title]"),d=b.find("[data-fields-config-param-choice-value]"),g=b.find("[data-fields-config-param-choice-default]");f.push({id:b.data("id"),
title:c.val(),value:d.val(),"default":g.val()});c.attr("value",c.val());d.attr("value",d.val());g.attr("value",g.val())});break;case "boolean":b=d.val();f="true"===b||"1"===b||1===b?1:0;d.attr("value",f);break;case "checkbox":f=[];e.each(c.option,function(a,b){var c=d.filter("[data-fields-config-param-option-"+b.name+"]");0<c.length&&c.is(":checked")?(f.push(b.name),c.attr("checked","checked")):c.removeAttr("checked")});break;case "list":case "select":case "dropdown":f=0<d.length?d.val():c["default"]||
"";d.find("option").prop("selected",!1);d.find('option[value="'+f+'"]').prop("selected",!0);break;default:f=0<d.length?d.val():c["default"]||"",d.attr("value",f)}return f}},populateConfig:function(){var b={};e.each(a.item.appParams,function(c,d){var f=a.getConfigValue(c);if(void 0===f)return!1;b[c]=f});a.item.trigger("onPopulateConfig",[b]);return b},checkConfig:function(b){void 0===b&&(b=a.populateConfig());var c=!0;e.each(b,function(b,d){switch(a.item.appParams[b].type){case "choices":var f=[];
e.each(d,function(a,b){e.isEmpty(b.value)&&!e.isEmpty(b.title)&&(b.value=b.title.toLowerCase().replace(" ",""));if(!e.isEmpty(b.value)&&-1<e.inArray(b.value,f))return c=!1;f.push(b.value)})}if(!1===c)return!1});return c},"{parent} fieldDeleted":function(){a.state&&b.trigger("doneConfiguring")},"{parent} pageDeleted":function(){a.state&&b.trigger("doneConfiguring")},"{parent} pageAdded":function(){a.state&&b.trigger("doneConfiguring")},"{parent} pageChanged":function(){a.state&&b.trigger("doneConfiguring")}}});
EasySocial.Controller("Fields.Steps",{defaultOptions:{"{steps}":"[data-fields-step]","{step}":"[data-fields-step-item]","{stepLink}":"[data-fields-step-item-link]","{add}":"[data-fields-step-add]",view:{stepItem:"admin/profiles/form.fields.stepItem"}}},function(a){return{state:e.Deferred(),init:function(){a.ready()},ready:function(){a.state.resolve()},"{parent} controllersReady":function(){a.initSort()},initSort:function(){a.steps().sortable({items:a.step.selector,placeholder:"ui-state-highlight",
cursor:"move",helper:"clone",forceHelperSize:!0,stop:function(){e(".tooltip-es").remove()}})},"{parent} pageDeleted":function(b,c,f){a.deleteStep(f);0<d.step().length&&d.stepLink(":first").tab("show")},"{step} click":function(a,d){if(!a.hasClass("active")){var f=a.data("id");b.trigger("pageChanged",[c.getPage(f),f])}},"{add} click":function(){var b=e.uid("step");a.addStep(b);c.addPage(b);a.stepLink(":last").tab("show")},addStep:function(b){a.add().before(a.view.stepItem({uid:b}))},getStep:function(b){return a.step().filterBy("id",
b)},getStepLink:function(b){return a.stepLink().filterBy("id",b)},deleteStep:function(b){a.getStep(b).remove()},getCurrentStep:function(){return a.step(".active")},currentStepIndex:function(){return a.step().index(a.step(".active"))+1},updateResult:function(b,c){var d=a.step(":eq("+b+")");if(d.data("id")!=c){var f=d.data("id");d.removeAttr("data-fields-step-item-"+f);d.attr("data-fields-step-item-"+c,!0);d.data("id",c);d.attr("data-id",c);d=a.stepLink().eq(b);d.removeAttr("data-fields-step-item-link-"+
f);d.attr("data-fields-step-item-link-"+c,!0);d.attr("href","#formStep_"+c)}},toObject:function(){var b=[];e.each(a.stepLink(),function(a,c){c=e(c);b.push({uid:c.data("id"),title:c.text(),description:c.attr("data-original-title")})});return b}}});EasySocial.Controller("Fields.Editor",{defaultOptions:{"{editor}":"[data-fields-editor]","{page}":"[data-fields-editor-page]","{items}":"[data-fields-editor-page-items]","{item}":"[data-fields-editor-page-item]",view:{editorPage:"admin/profiles/form.fields.editorPage"}}},
function(a){return{state:e.Deferred(),init:function(){a.ready()},ready:function(){a.state.resolve()},"{parent} controllersReady":function(){a.page().addController("EasySocial.Controller.Fields.Editor.Page")},currentPage:function(){return a.page(".active").controller()},addPage:function(c){var d=a.view.editorPage({uid:c});d.addController("EasySocial.Controller.Fields.Editor.Page",{uid:c,newpage:!0});a.editor().append(d);a.page().trigger("pageAdded",[d,c]);b.change()},getPage:function(b){return a.page().filterBy("id",
b).controller()},"{parent} saving":function(b,c){a.element.addClass("saving")},"{parent} saved":function(b,c,d){a.element.removeClass("saving")}}});EasySocial.Controller("Fields.Editor.Page",{defaultOptions:{pageid:0,uid:0,newpage:!1,"{items}":"[data-fields-editor-page-items]","{item}":"[data-fields-editor-page-item]","{pageHeader}":"[data-fields-editor-page-header]","{content}":"[data-fields-editor-page-header]","{pageTitle}":"[data-fields-editor-page-title]","{pageDescription}":"[data-fields-editor-page-description]",
"{inputTitle}":"[data-fields-editor-page-title-input]","{inputDescription}":"[data-fields-editor-page-description-input]","{pageVisibleRegistration}":"[data-fields-editor-page-visible-registration]","{pageVisibleEdit}":"[data-fields-editor-page-visible-edit]","{pageVisibleView}":"[data-fields-editor-page-visible-view]","{pageDelete}":"[data-fields-editor-page-delete]","{pageEdit}":"[data-fields-editor-page-edit]","{pageInfo}":"[data-fields-editor-page-info]","{pageInfoDone}":"[data-fields-editor-page-done]",
view:{editorItem:"admin/profiles/form.fields.editorItem"}}},function(g){return{init:function(){g.options.newpage||(g.options.uid=g.options.pageid=g.element.data("id"));g.registerPage();g.item().addController("EasySocial.Controller.Fields.Editor.Item",{pageid:g.options.uid});g.checkPageDeleteButton();g.initSort()},fields:{},getStep:function(){return d.getStep(g.options.uid)},registerPage:function(){q[g.options.uid]=g},initSort:function(){g.items().sortable({items:g.item.selector,handle:"[data-fields-editor-page-item-handle]",
placeholder:"ui-state-highlight",cursor:"move",helper:"clone",forceHelperSize:!0,stop:function(b,c){if(c.item.is(a.item.selector)){var d=c.item.data("id"),f=g.createPlaceholder();c.item.replaceWith(f);g.createNewField(d,f)}}})},addNewField:function(a){var c=g.createPlaceholder();g.items().append(c);e.scrollTo(c,200);g.createNewField(a,c);b.change()},createPlaceholder:function(){var a=e.uid("newfield");return g.view.editorItem({uid:a})},createNewField:function(a,c){b.trigger("fieldAdded",[a]);g.getFieldHtml(a).done(function(b){b=
e.parseHTML(b,document,!0);b=e(b);c.replaceWith(b);b.filter('[data-appid="'+a+'"]').addController("EasySocial.Controller.Fields.Editor.Item",{controller:{page:g},appid:a,pageid:g.options.uid,newfield:!0})}).fail(function(a){c.html(a)})},getFieldHtml:function(a){var c=e.Deferred();void 0===k[a].html?EasySocial.ajax("admin/controllers/fields/renderSample",{appid:a,profileid:b.options.id}).done(function(b){k[a].html=b;c.resolve(b)}).fail(function(a){c.reject(a)}):c.resolve(k[a].html);return c},"{pageHeader} click":function(a,
b){if(e(b.target).not("[data-fields-editor-page-delete]")&&!a.hasClass("editting")){if(f&&f.state)if(f.checkConfig())f.closeConfig();else{EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),width:400,height:100});return}g.loadConfiguration()}},loadConfiguration:function(){b.loadConfiguration(g,"page");g.pageHeader().addClass("editting");g.getPageConfig().done(function(){var a=e(g.html);f.load(a)}).fail(function(a){f.load(a)})},updateHtml:function(a){g.html=
a},getPageConfig:function(){var a=e.Deferred();e.isEmptyObject(g.params)?EasySocial.ajax("admin/controllers/profiles/getPageConfig",{pageid:g.options.pageid}).done(function(b,c,d){g.params=b;g.values=c;g.html=d;g.appParams=b;a.resolve()}).fail(function(b){a.reject(b)}):a.resolve();return a},getConfigValues:function(){return g.values},"{content} onConfigChange":function(a,c,f,e){g.values[f]=e;a=d.getStepLink(g.options.uid);"title"===f&&(a.text(e),g.pageTitle().html(e));"description"===f&&(a.attr("data-original-title",
e),g.pageDescription().html(e));b.change()},"{pageDelete} click":function(a){if(a.enabled()){a.disabled(!0);if(1==c.page().length)return a.enabled(!0),!1;EasySocial.dialog({width:400,height:150,title:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE"),content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION"),showOverlay:!1,buttons:[{name:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL"),classNames:"btn btn-es",click:function(){a.enabled(!0);
EasySocial.dialog().close()}},{name:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM"),classNames:"btn btn-es-danger",click:function(){EasySocial.dialog().update({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING")});g.deletePage();EasySocial.dialog().close()}}]})}},deletePage:function(){g.item().trigger("pageDeleted");b.trigger("pageDeleted",[g.options.uid]);delete q[g.options.uid];g.options.newpage||t.pages.push(g.options.uid);g.element.remove();
e.each(c.page(),function(a,b){e(b).controller().checkPageDeleteButton()});b.change()},_export:function(){var a=[];e.each(g.item(),function(b,c){c=e(c).controller();void 0!==c&&a.push(c._export())});var b={fields:a,newpage:g.options.newpage,id:g.options.uid};void 0!==g.values&&(b=e.extend(b,g.values));return b},updateResult:function(a,b){g.options.newpage&&(g.element.attr("id","formStep_"+b.id),g.element.removeAttr("data-fields-editor-page-"+a),g.element.attr("data-fields-editor-page-"+b.id,!0),g.options.pageid=
g.options.uid=b.id,q[b.id]=e.extend(!0,{},q[a]),delete q[a],g.options.newpage=!1);void 0!==b.fields&&e.each(b.fields,function(a,b){g.item().eq(a).controller().updateResult(b)})},"{self} pageAdded":function(a,c,d){g.checkPageDeleteButton();b.change()},checkPageDeleteButton:function(){1<c.page().length?g.pageDelete().show():g.pageDelete().hide()},"{parent} loadingConfig":function(){g.pageHeader().removeClass("editting");g.item().removeClass("editting")},"{parent} doneConfiguring":function(){g.pageHeader().removeClass("editting");
g.item().removeClass("editting")}}});EasySocial.Controller("Fields.Editor.Item",{defaultOptions:{appid:0,fieldid:0,pageid:0,newfield:!1,"{edit}":"[data-fields-editor-page-item-edit]","{deleteButton}":"[data-fields-editor-page-item-delete]","{moveButton}":"[data-fields-editor-page-item-move]","{content}":"[data-fields-editor-page-item-content]","{config}":"[data-fields-config]","{closeConfig}":"[data-fields-config-close]",view:{moveDialog:"admin/profiles/dialog.move.field"}}},function(g){return{app:{},
field:{id:0,appid:0,params:{}},state:e.Deferred(),appParams:{},init:function(){0==g.options.appid&&void 0!==g.element.data("appid")&&(g.options.appid=g.element.data("appid"));void 0!==k[g.options.appid]&&(g.app=k[g.options.appid]);0==g.options.fieldid&&void 0!==g.element.data("id")&&(g.options.fieldid=g.element.data("id"));g.registerFields();g.uniqueid=e.uid(g.app.id+"_");g.loadedInit()},registerFields:function(){0!=g.options.fieldid&&(s[g.options.fieldid]={id:g.options.fieldid,appid:g.options.appid,
params:g.field.params||{}},g.field=s[g.options.fieldid])},loadedInit:function(){g.element.addController("EasySocial.Controller.Field.Base",{mode:"sample",element:g.app.element,"{field}":g.content.selector});g.content().addController("EasySocial.Controller.Fields.Editor.Item.Config")},_export:function(){a.checkout(g.options.appid);var b={fieldid:g.options.fieldid,appid:g.options.appid,newfield:g.options.newfield};return b=e.extend(b,g.expandConfig(g.field.params))},"{self} click":function(a,b){var c=
e(b.target);if(!(c.is(g.deleteButton.selector)||c.is(g.moveButton.selector)||c.is(g.config.selector)||c.is(g.closeConfig.selector)||a.hasClass("editting"))){if(f&&f.state)if(f.checkConfig())f.closeConfig();else{EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),width:400,height:100});return}g.loadConfiguration()}},loadConfiguration:function(){b.loadConfiguration(g,"field");g.element.addClass("editting");g.getAppParams().done(function(){var a=e(g.field.html);
f.load(a)}).fail(function(){})},updateHtml:function(a){g.field.html=a},getAppParams:function(){var a=e.Deferred();g.field.html?a.resolve():EasySocial.ajax("admin/controllers/fields/renderConfiguration",{appid:g.options.appid,fieldid:g.options.fieldid}).done(function(b,c,d){g.app.params=b;g.field.params=c;g.field.html=d;g.populateAppParams();a.resolve()}).fail(function(b){a.reject(b)});return a},populateAppParams:function(){e.each(g.app.params,function(a,b){e.each(b.fields,function(a,b){b.subfields?
e.each(b.subfields,function(b,c){g.appParams[a+"_"+b]=c}):g.appParams[a]=b})})},getConfigValues:function(){return g.field.params},expandConfig:function(){var a={params:{},choices:{}};e.each(g.field.params,function(b,c){var d=g.appParams[b];if(!d)return!1;a["choices"==d.type?"choices":"params"][b]=c});g.options.newfield&&(a.params.unique_key="");return a},"{moveButton} click":function(a){var f=d.toObject(),k=a.parents(c.page.selector).data("id"),h=[];e.each(f,function(a,b){b.uid!=k&&h.push(b)});EasySocial.dialog({content:g.view.moveDialog(!0,
{pages:h}),selectors:{"{selection}":"[data-move-selection]","{confirmButton}":"[data-move-confirm]","{cancelButton}":"[data-move-cancel]"},bindings:{"{cancelButton} click":function(){EasySocial.dialog().close()},"{confirmButton} click":function(){var a=this.selection().val();c.getPage(a).items().append(g.element);b.change();EasySocial.dialog().close()}}})},"{deleteButton} click":function(a){a.enabled()&&(a.disabled(!0),EasySocial.dialog({width:400,height:150,title:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE"),
content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION"),showOverlay:!1,buttons:[{name:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL"),classNames:"btn btn-es",click:function(){a.enabled(!0);EasySocial.dialog().close()}},{name:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM"),classNames:"btn btn-es-danger",click:function(){EasySocial.dialog().update({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING")});
g.deleteField();EasySocial.dialog().close()}}]}))},deleteField:function(){b.trigger("fieldDeleted",[g.options.appid,g.options.fieldid]);g.options.newfield||(delete s[g.options.fieldid],t.fields.push(g.options.fieldid));g.element.remove();b.change()},"{self} pageDeleted":function(){g.deleteField()},"{content} onConfigChange":function(a,b,c,d){g.field.params[c]=d},"{self} onPopulateConfig":function(a,b,c){g.field.params=c},updateResult:function(a){g.field.params.unique_key=a.unique_key;g.itemParam("[data-fields-config-param-field-unique_key]").val(a.unique_key);
g.options.newfield&&(g.options.newfield=!1,g.options.fieldid=a.fieldid,g.element.data("id",a.fieldid),g.itemParam("[data-fields-editor-page-item-param-field-unique_key]").removeAttr("disabled"),g.registerFields());void 0!==a.choices&&e.each(a.choices,function(a,b){var c=g.itemParam("[data-fields-config-param-field-"+a+"]");e.each(b,function(a,b){var d=c.find("li").eq(a);d.data("id")||(d.attr("data-id",b.id),d.data("id",b.id))})})}}});EasySocial.Controller("Config.Choices",{defaultOptions:{"{choiceItems}":"[data-fields-config-param-choice]",
unique:1}},function(a){return{init:function(){a.options.unique=void 0!==a.element.data("unique")?a.element.data("unique"):1;a.choiceItems().implement(EasySocial.Controller.Config.Choices.Choice,{controller:{item:a.item,choices:a}});a.initSortable()},initSortable:function(){a.element.sortable({items:a.choiceItems.selector,placeholder:"ui-state-highlight",cursor:"move",forceHelperSize:!0,handle:"[data-fields-config-param-choice-drag]",stop:function(){e(".tooltip-es").remove()}})}}});EasySocial.Controller("Config.Choices.Choice",
{defaultOptions:{"{choiceValue}":"[data-fields-config-param-choice-value]","{choiceTitle}":"[data-fields-config-param-choice-title]","{choiceDefault}":"[data-fields-config-param-choice-default]","{addChoice}":"[data-fields-config-param-choice-add]","{removeChoice}":"[data-fields-config-param-choice-remove]","{setDefault}":"[data-fields-config-param-choice-setdefault]","{defaultIcon}":"[data-fields-config-param-choice-defaulticon]"}},function(a){return{init:function(){},"{choiceTitle} keyup":e._.debounce(function(c,
d){var f=a.element.index();a.item.content().trigger("onChoiceTitleChanged",[f,c.val()]);b.change()},500),"{choiceValue} keyup":e._.debounce(function(c,d){var f=a.element.index();a.item.content().trigger("onChoiceValueChanged",[f,c.val()]);b.change()},500),"{addChoice} click":function(){var c=a.element.clone(),d=c.find('input[type="text"]');d.attr("value","");d.val("");d=c.find('input[type="hidden"]');d.attr("value",0);d.val(0);c.find("[data-fields-config-param-choice-defaulticon]").removeClass("es-state-featured").addClass("es-state-default");
c.attr("data-id",0);c.data("id",0);c.implement(EasySocial.Controller.Config.Choices.Choice,{controller:{item:a.item,choices:a.choices}});a.element.after(c);c=c.index();a.item.content().trigger("onChoiceAdded",[c]);b.change()},"{removeChoice} click":function(){if(1<=a.choices.choiceItems().length-1){var c=a.element.index();a.item.content().trigger("onChoiceRemoved",[c]);a.element.remove();e(".tooltip-es").remove()}b.change()},"{setDefault} click":function(){var c=a.element.index();a.choiceTitle().val();
a.choiceValue().val();a.choices.choiceItems().trigger("toggleDefault",[c]);a.item.content().trigger("onChoiceToggleDefault",[c,parseInt(a.choiceDefault().val())]);b.change()},"{self} toggleDefault":function(b,c,d){b=a.element.index();c=parseInt(a.choiceDefault().val());b===d?c?(a.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),a.choiceDefault().val(0)):(a.defaultIcon().removeClass("es-state-default").addClass("es-state-featured"),a.choiceDefault().val(1)):a.choices.options.unique&&
(a.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),a.choiceDefault().val(0))}}});EasySocial.Controller("Fields.Editor.Item.Config",{defaultOptions:{"{required}":"[data-required]","{title}":"[data-title]","{description}":"[data-description]","{displayTitle}":"[data-display-title]","{displayDescription}":"[data-display-description]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,f){switch(d){case "display_title":a.displayTitle().toggle(!!f);
break;case "title":a.title().text(f);break;case "display_description":a.displayDescription().toggle(!!f);break;case "description":a.description().text(f);break;case "required":a.required().toggle(!!f)}}}});g.resolve()})});EasySocial.module("field",function(e){EasySocial.Controller("Field.Base",{defaultOptions:{regPrefix:"easysocial/",modPrefix:"field.",ctrlPrefix:"EasySocial.Controller.Field.",fieldname:"",element:null,id:null,userid:null,required:!1,mode:"edit","{field}":"[data-field]","{notice}":"[data-check-notice]"}},
function(g){return{init:function(){g.options.fieldname=g.element.data("fieldname");g.options.element=g.options.element||g.element.data("element");g.options.id=g.element.data("id");g.options.required=!!g.element.data("required");g.initHandler();g.initMode()},initHandler:function(){var b=g.options.modPrefix+g.options.element,a=g.options.regPrefix+b,c=g.options.ctrlPrefix+e.String.capitalize(g.options.element);void 0!==e.module.registry[a]&&EasySocial.module(b).done(function(a){a=a||{};if(e.isController(c))g.field().addController(c,
{required:g.options.required,fieldname:g.options.fieldname,id:g.options.id,userid:g.options.userid,mode:g.options.mode});else if(e.isFunction(a))a(g.field());else if(e.isPlainObject(a))g.field().on(a)})},initMode:function(){switch(g.options.mode){case "register":g.field().trigger("onRegister");break;case "edit":g.field().trigger("onEdit");break;case "adminedit":g.field().trigger("onAdminEdit");break;case "sample":g.field().trigger("onSample");break;case "display":g.field().trigger("onDisplay")}},
"{field} error":function(b,a,c,d){c=void 0!==c?c:!0;e.isString(c)&&(d=c,c=!0);e.isBoolean(c)&&g.field().toggleClass("error",c);void 0!==d&&g.notice().html(d)},"{field} clear":function(b,a){g.field().removeClass("error")},"{self} show":function(){g.field().trigger("onShow")}}});this.resolve()});EasySocial.module("admin/profiles/members",function(e){var g=this;EasySocial.require().language("COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_ASSIGN_BUTTON","COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE").done(function(b){EasySocial.Controller("Profiles.Members",
{defaultOptions:{"{addUser}":"[data-profiles-addUser]","{row}":"[data-profiles-members-row]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{memberList} userSelected":function(b,d,f,e){EasySocial.ajax("admin/controllers/profiles/insertMember",{id:f,profile_id:a.options.id}).done(function(b){a.row().append(b);EasySocial.dialog().close()})},"{addUser} click":function(){var c=b.callback(function(b){a.addPlugin("memberList",b)}),c=b.indexUrl+"?option=com_easysocial&view=users&tmpl=component&callback="+
c;EasySocial.dialog({title:b.language("COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE"),content:c,showOverlay:!1,width:700,height:600,buttons:[{name:b.language("COM_EASYSOCIAL_CANCEL_BUTTON"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("admin/profiles/profile",function(e){var g=this;EasySocial.require().script("utilities/alias").view("admin/profiles/dialog.delete.profileavatar").language("COM_EASYSOCIAL_PROFILES_FORM_CLEAR_AVATAR").done(function(b){EasySocial.Controller("Profiles.Profile",
{defaultOptions:{id:null,hasAvatar:!1,defaultAvatar:null,"{profileAvatar}":"[data-profile-avatar]","{profileAvatarImage}":"[data-profile-avatar-image]","{profileAvatarRemoveWrap}":"[data-profile-avatar-remove-wrap]","{profileAvatarRemoveButton}":"[data-profile-avatar-remove-button]","{profileAvatarUpload}":"[data-profile-avatar-upload]",view:{deleteProfileAvatar:"admin/profiles/dialog.delete.profileavatar"}}},function(a){return{init:function(){a.element.addController("EasySocial.Controller.Utilities.Alias",
{"{source}":"#title","{target}":"#alias"});a.options.hasAvatar=a.profileAvatar().data("hasavatar");a.options.defaultAvatar=a.profileAvatar().data("defaultavatar")},"{profileAvatarUpload} change":function(c){c=c.val();b.isEmpty(c)?a.options.hasAvatar||a.profileAvatarRemoveWrap().hide():a.profileAvatarRemoveWrap().show()},"{profileAvatarRemoveButton} click":function(c){a.options.hasAvatar?EasySocial.dialog({content:a.view.deleteProfileAvatar(!0),bindings:{"{deleteButton} click":function(){var c=this.parent;
c.loading(!0);EasySocial.ajax("admin/controllers/profiles/deleteProfileAvatar",{id:a.options.id}).done(function(){c.loading(!1);c.close();a.profileAvatarImage().attr("src",a.options.defaultAvatar);a.profileAvatarRemoveWrap().hide();a.profileAvatarRemoveButton().text(b.language("COM_EASYSOCIAL_PROFILES_FORM_CLEAR_AVATAR"));a.options.hasAvatar=!1})}}}):a.profileAvatarUpload().val("").trigger("change")}}});g.resolve()})});EasySocial.module("admin/profiles/profiles",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Profiles",
{defaultOptions:{"{updateOrdering}":"[data-profiles-update-ordering]","{item}":"[data-profiles-item]",view:{deleteConfirmation:"admin/profiles/dialog.delete.confirm"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Profiles.Item)},"{updateOrdering} click":function(){b("[data-table-checkall]").prop("checked",!0).trigger("change");b.Joomla("submitform",["updateOrdering"])}}});EasySocial.Controller("Profiles.Item",{defaultOptions:{"{insertLink}":"[data-profile-insert]"}},
function(a){return{init:function(){a.options.title=a.element.data("title");a.options.id=a.element.data("id")},"{insertLink} click":function(){a.trigger("profileSelected",[a.options.id,a.options.title])}}});g.resolve()})});EasySocial.module("admin/reports/reporters",function(e){EasySocial.Controller("Reports.Reporters",{defaultOptions:{"{item}":"[data-reporters-item]"}},function(e){return{init:function(){e.item().implement(EasySocial.Controller.Reports.Reporters.Item,{"{parent}":e})}}});EasySocial.Controller("Reports.Reporters.Item",
{defaultOptions:{"{removeItem}":"[data-remove-item]"}},function(e){return{init:function(){e.options.id=e.element.data("id")},"{removeItem} click":function(){e.parent.clearMessage();EasySocial.ajax("admin/controllers/reports/removeItem",{id:e.options.id}).done(function(b){e.parent.setMessage(b.message,b.type);e.element.remove()})}}});this.resolve()});EasySocial.module("admin/reports/reports",function(e){var g=this;EasySocial.require().language("COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_CLOSE_BUTTON",
"COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE","COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE").done(function(b){EasySocial.Controller("Reports",{defaultOptions:{"{item}":"[data-reports-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Reports.Item)}}});EasySocial.Controller("Reports.Item",{defaultOptions:{"{action}":"[data-reports-item-view-actions]","{viewReports}":"[data-reports-item-view-reports]"}},function(a){return{init:function(){a.options.id=a.element.data("id");
a.options.extension=a.element.data("extension");a.options.uid=a.element.data("uid");a.options.type=a.element.data("type")},"{viewReports} click":function(){EasySocial.dialog({title:b.language("COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE"),content:EasySocial.ajax("admin/controllers/reports/getReporters",{id:a.options.id}),width:600,height:450})},"{action} click":function(){EasySocial.dialog({title:b.language("COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE"),content:"<div>Perform some actions on the item</div>",
width:500,height:250,buttons:[{name:b.language("COM_EASYSOCIAL_CLOSE_BUTTON"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("admin/users/form",function(e){var g=this;EasySocial.require().script("field").done(function(b){EasySocial.Controller("Users.Form",{defaultOptions:{userid:null,mode:"adminedit","{selectProfile}":"[data-user-select-profile]","{content}":"[data-user-new-content]","{profileTitle}":"[data-profile-title]","{fieldItem}":"[data-profile-adminedit-fields-item]",
"{tabnav}":"[data-tabnav]","{tabcontent}":"[data-tabcontent]","{stepnav}":"[data-stepnav]","{stepcontent}":"[data-stepcontent]",view:{loading:"site/loading/large"}}},function(a){return{init:function(){window.selectedProfile=a.selectedProfile;a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:a.options.userid,mode:a.options.mode})},selectedProfile:function(a){EasySocial.dialog().close();window.location.href="index.php?option=com_easysocial&view=users&layout=form&profileId="+a},
"{selectProfile} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/browse")})},errorFields:[],"{fieldItem} error":function(c,d){var f=c.data("id");0>b.inArray(f,a.errorFields)&&a.errorFields.push(f);f=c.parents(a.stepcontent.selector).data("for");a.stepnav().filterBy("for",f).trigger("error");f=c.parents(a.tabcontent.selector).data("for");a.tabnav().filterBy("for",f).trigger("error")},"{fieldItem} clear":function(c,d){var f=c.data("id");a.errorFields=b.without(a.errorFields,
f);f=c.parents(a.stepcontent.selector).data("for");a.stepnav().filterBy("for",f).trigger("clear");f=c.parents(a.tabcontent.selector).data("for");a.tabnav().filterBy("for",f).trigger("clear")},"{stepnav} error":function(a){a.addClass("error")},"{tabnav} error":function(a){a.addClass("error")},"{stepnav} clear":function(b){1>a.errorFields.length&&b.removeClass("error")},"{tabnav} clear":function(b){1>a.errorFields.length&&b.removeClass("error")}}});g.resolve()})});EasySocial.module("admin/users/privacy",
function(e){var g=this;EasySocial.require().library("textboxlist").view("site/loading/small").done(function(b){EasySocial.Controller("Profile.Privacy",{defaultOptions:{userId:"","{privacyItem}":"[data-privacy-item]","{privacyForm}":"[data-profile-privacy-form]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.privacyItem().implement(EasySocial.Controller.Profile.Privacy.Item,{"{parent}":a})}}});EasySocial.Controller("Profile.Privacy.Item",{defaultOptions:{"{selection}":"[data-privacy-select]",
"{hiddenCustom}":"[data-hidden-custom]","{customForm}":"[data-privacy-custom-form]","{customTextInput}":"[data-textfield]","{customItems}":"input[]","{customHideBtn}":"[data-privacy-custom-hide-button]","{customInputItem}":"[data-textboxlist-item]","{customEditBtn}":"[data-privacy-custom-edit-button]"}},function(a){return{init:function(){a.customTextInput().textboxlist({unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:2,cache:!1,query:function(b){var d=a.getTaggedUsers();return EasySocial.ajax("site/views/privacy/getfriends",
{q:b,userid:a.parent.options.userId,exclude:d})}}}});a.textboxlistLib=a.customTextInput().textboxlist("controller")},getTaggedUsers:function(){var c=[],d=a.customInputItem();0<d.length&&b.each(d,function(a,d){c.push(b(d).data("id"))});return c},"{customTextInput} addItem":function(b,d,f){b=a.hiddenCustom().val();d="";""==b?d=f.id:(b=b.split(","),b.push(f.id),d=b.join(","));a.hiddenCustom().val(d)},"{customTextInput} removeItem":function(b,d,f){b="";b=[];d=a.hiddenCustom().val().split(",");for(var e=
0;e<d.length;e++)d[e]!=f.id&&b.push(d[e]);b=0>=b.length?"":b.join(",");a.hiddenCustom().val(b)},"{customEditBtn} click":function(b){a.customForm().toggle()},"{selection} change":function(b){"custom"==b.val()?(a.customForm().show(),a.customEditBtn().show()):(a.customForm().hide(),a.customEditBtn().hide())},"{customHideBtn} click":function(){a.customForm().hide();a.customEditBtn().show();a.textboxlistLib.autocomplete.hide()}}});g.resolve()})});EasySocial.module("admin/users/users",function(e){var g=
this;EasySocial.require().library("expanding").done(function(b){EasySocial.Controller("Users",{defaultOptions:{"{item}":"[data-user-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Item)}}});EasySocial.Controller("Users.Item",{defaultOptions:{"{insertLink}":"[data-user-item-insertLink]"}},function(a){return{init:function(){a.options.name=a.element.data("name");a.options.avatar=a.element.data("avatar");a.options.email=a.element.data("email");a.options.id=a.element.data("id")},
"{insertLink} click":function(){a.trigger("userSelected",[a.options.id,a.options.name,a.options.avatar,a.options.email])}}});EasySocial.Controller("Users.Pending",{defaultOptions:{"{item}":"[data-pending-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Pending.Item)}}});EasySocial.Controller("Users.Pending.Item",{defaultOptions:{"{approve}":"[data-pending-approve]","{reject}":"[data-pending-reject]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},
"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmApprove",{id:a.options.id}),bindings:{"{approveButton} click":function(){b("[data-users-approve-form]").submit()}}})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmReject",{id:a.options.id})})}}});g.resolve()})});EasySocial.module("admin/widgets/news",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("News",{defaultOptions:{loadOnInit:!0,
"{items}":"[widget-news-items]","{placeholder}":"[widget-news-placeholder]"}},function(a){return{init:function(){a.options.loadOnInit&&a.getNews()},getNews:function(){EasySocial.ajax("admin/controllers/news/getnews").done(function(b){a.items().append(b);a.placeholder().remove()})}}});g.resolve()})});EasySocial.module("albums/album",function(e){var g=this;EasySocial.require().library("tinyscrollbar").done(function(){EasySocial.Controller("Albums.Album",{defaultOptions:{"{title}":"[data-album-title]",
"{count}":"[data-album-count]","{privacy}":"[data-album-privacy]","{cover}":"[data-album-cover]","{coverImage}":"[data-album-cover-image]","{link}":"[data-album-link]","{menu}":"[data-album-menu]","{menuActions}":"[data-album-menu-actions]","{shareButton}":"[data-album-share-button]","{shareContent}":"[data-sharing]","{followButton}":"[data-album-follow-button]","{reportButton}":"[data-album-report-button]","{deleteButton}":"[data-album-delete-button]","{likeButton}":"[data-album-like-button]","{commentButton}":"[data-album-comment-button]",
"{countsButton}":"[data-album-counts-button]","{commentCount}":"[data-album-comment-count]","{likeCount}":"[data-album-like-count]","{actions}":"[data-item-actions]","{actionContent}":"[data-item-action-content]","{actionCloseButton}":"[data-item-action-close-button]","{actionsMenu}":"[data-item-actions-menu]","{likesHolder}":"[data-album-likes-holder]","{commentsHolder}":"[data-album-comments-holder]","{responseHolder}":"[data-album-response-holder]","{comments}":"[data-comments]"}},function(b){return{init:function(){b.id=
b.element.data("album-id");b.actionContent().tinyscrollbar();b.actions().hasClass("open")&&(b.loadResponse(),b.element.addClass("show-all"))},remove:function(){b.element.remove()},"{coverImage} click":function(){window.location=b.link().attr("href")},"{shareButton} click":function(){b.shareContent().show()},"{deleteButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/albums/confirmDelete",{id:b.id})})},like:function(){EasySocial.ajax("site/controllers/albums/like",{id:b.id}).done(function(a){b.likeCount().html(a.count);
a.state?b.likeButton().addClass("liked"):b.likeButton().removeClass("liked");b.likesHolder().html(a.html)})},loadResponse:function(){var a=b.loadResponse.loader;a&&"rejected"!=a.state()||(b.loadResponse.loader=EasySocial.ajax("site/views/albums/response",{id:b.id}).done(function(a){b.responseHolder().html(a);b.actionContent().removeClass("loading").tinyscrollbar_update()}))},getButton:function(a){a=e(a);var c=b.countsButton(),d=b.commentButton();return a.is(c)||0<a.parents().filter(c).length?c:a.is(d)||
0<a.parents().filter(d).length?d:e()},lastButton:e(),"{actions} dropdownOpen":function(a,c,d){b.loadResponse();b.element.addClass("show-all");a=b.actionContent();d=b.lastButton=b.getButton(d);d=d.position().left+d.width()/2-a.width()/2;a.css("margin-left",d).tinyscrollbar_update()},"{actions} dropdownClose":function(a,c,d){b.element.removeClass("show-all");var f=b.getButton(d);f.is(b.lastButton)||setTimeout(function(){f.trigger("click")},0)},"{actionCloseButton} click":function(a){b.hideActionContent()},
"{likeButton} click":function(){b.like()},"{comments} newCommentSaved":function(){var a=b.comments().controller("EasySocial.Controller.Comments.Stat");b.commentCount().html(a.total());b.actionContent().tinyscrollbar_update("bottom")},"{comments} commentDeleted":function(){var a=b.comments().controller("EasySocial.Controller.Comments.Stat");b.commentCount().html(a.total());b.actionContent().tinyscrollbar_update()},"{actionsMenu} dropdownOpen":function(){b.element.addClass("show-all")},"{actionsMenu} dropdownClose":function(){b.element.removeClass("show-all")}}});
g.resolve()})});EasySocial.module("albums/browser",function(e){var g=this;EasySocial.require().library("history").view("site/albums/browser.list.item").done(function(){EasySocial.Controller("Albums.Browser",{hostname:"browser",defaultOptions:{view:{listItem:"site/albums/browser.list.item"},itemRenderOptions:{},"{sidebar}":"[data-album-browser-sidebar]","{content}":"[data-album-browser-content]","{createAlbumButton}":"[data-album-create-button]","{createAlbumButtonLink}":"[data-album-create-button] > a",
"{listItemGroup}":"[data-album-list-item-group]","{listItemRegularGroup}":"[data-album-list-item-group=regular]","{listItemCoreGroup}":"[data-album-list-item-group=core]","{listItem}":"[data-album-list-item]","{listItemLink}":"[data-album-list-item] > a","{listItemTitle}":"[data-album-list-item-title]","{listItemCover}":"[data-album-list-item-cover]","{listItemCount}":"[data-album-list-item-count]","{albumItem}":"[data-album-item]","{photoBrowser}":"[data-photo-browser]"}},function(b){return{init:function(){b.albumItem().each(function(){b.addSubscriber(e(this).controller("EasySocial.Controller.Albums.Item"))})},
setLayout:function(a){b.element.hasClass("layout-dialog")||b.element.data("layout",a).switchClass("layout-"+a)},open:function(a){var c=e.makeArray(arguments);b.trigger("contentload",c);var d="view"+e.String.capitalize(a),d=b[d].apply(b,c.slice(1));d.done(b.displayContent(function(){b.trigger("contentdisplay",c);return arguments})).fail(function(){b.trigger("contentfail",c)}).always(function(){b.trigger("contentcomplete",c)});return d},"{self} contentdisplay":function(a,c,d){/album|albumform/gi.test(d)&&
b.setLayout("album");/photo/gi.test(d)&&b.setLayout("photo")},displayContent:e.Enqueue(function(a){var c=[];a=e(e.buildFragment([a],document,c));b.content().html(a);e(c).remove()}),viewAlbum:function(a){b.listItem().removeClass("active loading");var c=b.getListItem(a).addClass("active loading");"dialog"!==b.element.data("layout")&&c.find("> a").route();return EasySocial.ajax("site/views/albums/item",{id:a,renderOptions:b.options.itemRenderOptions}).fail(function(){}).always(function(){c.removeClass("loading")})},
viewAlbumForm:function(){b.listItem().removeClass("active loading");var a=b.view.listItem({}).addClass("active loading new").prependTo(b.listItemRegularGroup());return EasySocial.ajax("site/views/albums/form").fail(function(){}).always(function(){a.removeClass("loading")})},viewPhoto:function(a){return EasySocial.ajax("site/views/photos/item",{id:a,browser:1}).fail(function(){}).always(function(){})},"{listItem} click":function(a){a.hasClass("new")||(a=a.data("albumId"),b.open("Album",a))},"{listItemLink} click":function(a,
b){b.preventDefault();a.blur()},"{createAlbumButton} click":function(){b.open("AlbumForm");"dialog"!==b.element.data("layout")&&b.createAlbumButtonLink().route()},"{createAlbumButtonLink} click":function(a,b){b.preventDefault()},"{albumItem} init.albums.item":function(a,c,d){b.addSubscriber(d)},getListItem:function(a,c){var d=a?b.listItem().filterBy("albumId",a):b.listItem(".new");return c?d.find(b["listItem"+e.String.capitalize(c)].selector):d},updateListItemCount:function(a,c,d){a=b.getListItem(a,
"count");0>a.length||(c=d?(parseInt(a.text())||0)+(parseInt(c)||0):c,0>c&&(c=0),a.text(c))},"{albumItem} albumSave":function(a,c,d){d.done(function(a){b.getListItem().attr("data-album-id",a.id).removeClass("new");b.getListItem(a.id).find("> a").attr({href:a.permalink,title:a.title}).route();b.getListItem(a.id,"title").html(a.title)})},"{albumItem} titleChange":function(a,c,d,f){b.getListItem(f.id,"title").html(e.trim(d)||"&nbsp;")},"{albumItem} coverChange":function(a,c,d,f){b.getListItem(f.id,"cover").css("backgroundImage",
e.cssUrl(d.sizes.thumbnail.url))},"{albumItem} coverRemove":function(a,c,d){b.getListItem(d.id,"cover").css("backgroundImage","")},"{albumItem} photoAdd":function(a,c,d,f,e){b.updateListItemCount(e.id,1,!0)},"{albumItem} photoMove":function(a,c,d,f){d.done(function(){b.updateListItemCount(f.album.id,-1,!0)})},"{albumItem} photoDelete":function(a,c,d,f){d.done(function(){b.updateListItemCount(f.album.id,-1,!0)})},"{photoBrowser} init.photos.browser":function(a,c,d){b.addSubscriber(d)},"{self} contentload":function(){b.listItem(".new").remove()}}});
g.resolve()})});EasySocial.module("albums/editor",function(e){EasySocial.require().script("albums/editor/sortable","albums/editor/uploader").done();var g=EasySocial.Controller("Albums.Editor",{hostname:"editor",defaultOptions:{view:{uploadItem:"site/albums/upload.item"},canReorder:!1,canUpload:!0,"{titleField}":"[data-album-title-field]","{captionField}":"[data-album-caption-field]","{coverField}":"[data-album-cover-field]","{location}":"[data-album-location]","{locationCaption}":"[data-album-location-caption]",
"{addLocationButton}":"[data-album-addLocation-button]","{date}":"[data-album-date]","{dateCaption}":"[data-album-date-caption]","{addDateCaption}":"[data-album-addDate-button]","{privacy}":"[data-album-privacy]","{uploadButton}":"[data-album-upload-button]","{deleteButton}":"[data-album-delete-button]","{moreButton}":"[data-album-more-button]","{privacy}":"[data-privacy-hidden]","{privacycustom}":"[data-privacy-custom-hidden]","{uploadItem}":"[data-photo-upload-item]","{dateDay}":"[data-date-day]",
"{dateMonth}":"[data-date-month]","{dateYear}":"[data-date-year]","{editButton}":"[data-album-edit-button]","{editButtonLink}":"[data-album-edit-button] > a","{doneButton}":"[data-album-done-button]","{doneButtonLink}":"[data-album-done-button] > a","{locationWidget}":".es-album-location-form .es-location","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]"}},function(b){return{init:function(){b.id=b.element.data("album-id");var a=b.options;a.canReorder&&EasySocial.module("albums/sortable").done(function(a){b.addPlugin("sortable",
a)});a.canUpload&&EasySocial.module("albums/editor/uploader").done(function(a){b.uploader=b.addPlugin("uploader",a)});b.id?(b.createAlbum.task=e.Deferred().resolve(),b.createStream=0):b.createStream=1},data:function(){var a=b.titleField().val(),c=b.captionField().val(),d=b.formatDate(),f=b.locationCaption().html(),e=b.latitude().val(),g=b.longitude().val(),h=b.privacy().val(),s=b.privacycustom().val();return{id:b.id,title:a,caption:c,date:d,address:f,latitude:e,longitude:g,privacy:h,privacycustom:s,
createStream:b.createStream}},createAlbum:function(){var a=b.createAlbum.task;a||(a=b.createAlbum.task=b.save({createStream:0}).done(function(a){b.deleteButton().disabled(!1);b.element.attr("data-album-id",b.id=a.id)}).fail(function(a,d){b.setMessage(a,d)}));return a},save:function(a){b.trigger("beforeAlbumSave",[b]);a=e.extend(b.data(),a);a.photos=e.map(b.album.photoItem(),function(a,b){var f=e(a).controller("EasySocial.Controller.Photos.Editor");return f?f.data():null});b.clearMessage();a=EasySocial.ajax("site/controllers/albums/store",
a);b.trigger("albumSave",[a,b]);return a},"{self} photoAdd":function(a,c,d,f){1>=b.album.photoItem().length&&b.changeCover(f)},setCover:function(a){return EasySocial.ajax("site/controllers/albums/setCover",{albumId:b.id,coverId:a}).done(function(a){b.changeCover(a)}).fail(function(){})},removeCover:function(){b.trigger("coverRemove",[b.album])},changeCover:function(a){b.trigger("coverChange",[a,b])},"{self} coverChange":function(a,c,d){b.coverField().removeClass("no-cover").css("backgroundImage",
e.cssUrl(d.sizes.thumbnail.url))},"{self} coverRemove":function(){b.coverField().addClass("no-cover").css("backgroundImage","")},"{editButton} click":function(){b.album.setLayout("form");b.editButtonLink().route()},"{editButtonLink} click":function(a,b){b.preventDefault()},"{doneButton} click":function(){b.save().done(function(a,c){e.buildHTML(c).replaceAll(b.element)}).progress(function(a,c){b.setMessage(a,c)})},"{doneButtonLink} click":function(a,b){b.preventDefault()},"{deleteButton} click":function(a){a.disabled()||
EasySocial.dialog({content:EasySocial.ajax("site/views/albums/confirmDelete",{id:b.id})})},formatDate:function(){var a=b.dateDay().val()||b.dateDay().data("date-default"),c=b.dateMonth().val()||b.dateMonth().data("date-default");return(b.dateYear().val()||b.dateYear().data("date-default"))+"-"+c+"-"+a},updateDate:function(){b.date().addClass("has-data");var a=b.dateDay().val()+" "+e.trim(b.dateMonth().find(":selected").html())+" "+b.dateYear().val();b.dateCaption().html(a)},"{dateDay} keyup":function(){b.updateDate()},
"{dateMonth} change":function(){b.updateDate()},"{dateYear} keyup":function(){b.updateDate()},"{titleField} keyup":function(a){b.trigger("titleChange",[a.val(),b])},"{locationWidget} locationChange":function(a,c,d){a=d.formatted_address;b.locationCaption().html(a);b.location().addClass("has-data")}}});this.resolve(g)});EasySocial.module("albums/editor/sortable",function(e){var g=this;EasySocial.require().library("ui/sortable").done(function(){var b=EasySocial.Controller("Albums.Editor.Sortable",{defaultOptions:{}},
function(a){return{init:function(){},getPhotoOrdering:function(){var b={};a.photoItem().each(function(a){var f=e(this).data("photoId");b[f]=a});return b},"{parent.photoItemGroup} sortstart":function(b,d,f){f.item.addClass("dragging");b.addClass("ordering");a.setLayout()},"{parent.photoItemGroup} sortchange":function(b,d,f){a.setLayout()},"{parent.photoItemGroup} sortstop":function(b,d,f){f.item.removeClass("dragging");b.removeClass("ordering");a.setLayout();EasySocial.ajax("site/controllers/photos/reorder",
{id:f.item.controller().id,order:f.item.index()})}}});g.resolve(b)})});EasySocial.module("albums/editor/uploader",function(e){var g=this;EasySocial.require().script("albums/uploader").view("site/albums/upload.item").done(function(){var b=EasySocial.Controller("Albums.Editor.Uploader",{defaultOptions:{}},function(a){return{init:function(){a.album=a.editor.album;a.uploader=a.addPlugin("uploader",EasySocial.Controller.Albums.Uploader,{settings:a.album.options.uploader,"{uploadButton}":a.editor.uploadButton.selector,
"{uploadItemGroup}":a.album.photoItemGroup.selector,"{uploadDropsite}":a.album.content.selector})},setLayout:function(){a.album.setLayout_()},"{self} beforeAlbumSave":function(){a.uploader.stop()},"{self} albumSave":function(b,d,f){f.done(function(b){b=e.uri(a.uploader.settings("url")).replaceQueryParam("albumId",b.id).toString();a.uploader.settings("url",b)})},"{self} layoutChange":function(b,d,f){a.uploader.stop();a.uploader.clear();b=e.uri(a.uploader.settings("url")).replaceQueryParam("createStream",
"form"==f?0:1).replaceQueryParam("layout",f).toString();a.uploader.settings("url",b)},"{self} QueueCreated":function(b,d,f){"form"==a.album.currentLayout()&&f.element.addClass("layout-form");a.setLayout()},startUpload:e.Enqueue(),"{uploader} FilesAdded":function(b,d,f,e){a.id?a.uploader.start():a.editor.createAlbum().done(a.startUpload(function(){a.uploader.start()}));a.setLayout()},"{uploader} FilesRemoved":function(){a.setLayout()},"{uploader} FileUploaded":function(b,d,f,g,h){b=a.uploader.getItem(g);
var p=e.buildHTML(h.html);h=h.data;p.addClass("new-item").insertAfter(b.element);setTimeout(function(){p.removeClass("new-item")},1);a.uploader.removeItem(g.id);a.trigger("photoAdd",[p,h,a.album]);a.setLayout()}}});g.resolve(b)})});EasySocial.module("albums/uploader",function(e){var g=this;EasySocial.require().library("plupload").script("albums/uploader.item").view("site/albums/upload.item").done(function(){EasySocial.Controller("Albums.Uploader",{defaultOptions:{view:{uploadItem:"site/albums/upload.item"},
"{uploadButton}":"[data-upload-button]","{uploadItemGroup}":"[data-upload-item-group]","{uploadItem}":"[data-upload-item]","{uploadDropsite}":"[data-upload-dropsite]"}},function(b){return{init:function(){var a=b.element;b.pluploadController=b.element.addController("plupload",e.extend({"{uploadButton}":b.uploadButton.selector,"{uploadDropsite}":b.uploadDropsite.selector},b.options.settings));b.plupload=b.pluploadController.plupload;e.IE||"html5"!=b.plupload.runtime||a.addClass("can-drop-file");a.addClass("can-upload")},
setLayout:function(){b.uploadItemGroup().toggleClass("no-upload-items",1>b.uploadItem().length)},items:{},getItem:function(a){var c;e.isString(a)&&(c=a);a&&a.id&&(c=a.id);return b.items[c]},createItem:function(a){var c=b.view.uploadItem({file:a}).addController("EasySocial.Controller.Albums.Uploader.Item",{"{uploader}":b,file:a});c.element.prependTo(b.uploadItemGroup());b.items[a.id]=c;b.setLayout();b.trigger("QueueCreated",[c]);return c},settings:function(a,c){var d=b.plupload.settings;void 0!==c&&
(d[a]=c);return a?d[a]:d},start:function(){return b.plupload.start()},stop:function(){return b.plupload.stop()},"{self} FilesAdded":function(a,c,d,f){try{f.reverse(),e.each(f,function(a,c){b.getItem(c)||b.createItem(c)})}catch(g){console.error(g)}},"{self} BeforeUpload":function(a,c,d,f){(a=b.getItem(f))&&a.setState("preparing")},"{self} UploadFile":function(a,c,d,f){(a=b.getItem(f))&&a.setState("uploading")},"{self} UploadProgress":function(a,c,d,f){if(a=b.getItem(f))a.setState("uploading"),a.setProgress()},
"{self} FileUploaded":function(a,c,d,f,g){(a=b.getItem(f))&&(e.isPlainObject(g)?a.setState("done"):a.setState("failed"))},"{self} FileError":function(a,c,d,f,e){(a=b.getItem(f))||(a=b.createItem(f));a.setState("failed");a.setMessage(e.message)},"{self} Error":function(a,c,d,f){f.file&&(a=f.file,(c=b.getItem(a))||(c=b.createItem(a)),c.setState("failed"),c.setMessage(f.message))},removeItem:function(a){var c=b.getItem(a);c&&(b.plupload.removeFile(c.file()),c.element.remove(),delete b.items[a],b.setLayout())},
clear:function(a){e.each(b.items,function(a,d){b.plupload.removeFile(d.file());d.element.remove();delete b.items[a]});b.items={}}}});g.resolve()})});EasySocial.module("albums/uploader.item",function(e){EasySocial.Controller("Albums.Uploader.Item",{defaultOptions:{"{status}":".upload-status","{filename}":".upload-filename","{progressBar}":".upload-progress-bar","{percentage}":".upload-percentage","{filesizeTotal}":".upload-filesize-total","{filesizeLeft}":".upload-filesize-left","{details}":".upload-details",
"{detailsButton}":".upload-details-button","{removeButton}":".upload-remove-button","{message}":".upload-message"}},function(g){return{init:function(){g.id=g.element.attr("id");var b=g.file();g.filename().html(b.name);g.setState("pending");g.setProgress();b="html4"==g.uploader.plupload.runtime;(10>e.IE||b)&&g.element.addClass("indefinite-progress");b&&g.element.addClass("no-filesize")},file:function(){var b=g.uploader.plupload.getFile(g.id)||g.options.file;if(b){var a=void 0===b.size||"N/A"==b.size;
b.percentage=b.percent+"%";b.filesize=a?"":e.plupload.formatSize(b.size);b.remaining=a?"":e.plupload.formatSize(b.size-(b.loaded||0))}return b},setProgress:function(){var b=g.file();g.progressBar().width(b.percentage);g.percentage().html(b.percentage);g.filesizeTotal().html(b.filesize);g.filesizeLeft().html(b.remaining)},setState:function(b){g.element.removeClass("pending preparing uploading failed done").addClass(b);g.state=b},setMessage:function(b){g.detailsButton().attr("data-popbox",b)},"{removeButton} click":function(b,
a){g.uploader.removeItem(g.id)}}});this.resolve()});EasySocial.module("albums/item",function(e){var g=this;EasySocial.require().script("albums/editor").done();EasySocial.require().library("masonry").done(function(){EasySocial.Controller("Albums.Item",{hostname:"album",defaultOptions:{tilesPerRow:4,editable:!1,multipleSelection:!1,"{header}":"[data-album-header]","{content}":"[data-album-content]","{footer}":"[data-album-footer]","{info}":"[data-album-info]","{title}":"[data-album-title]","{caption}":"[data-album-caption]",
"{location}":"[data-album-location]","{date}":"[data-album-date]","{cover}":"[data-album-cover]","{photoItemGroup}":"[data-photo-item-group]","{photoItem}":"[data-photo-item]","{photoImage}":"[data-photo-image]","{featuredItem}":"[data-photo-item].featured","{featuredImage}":"[data-photo-item].featured [data-photo-image]","{uploadItem}":"[data-photo-upload-item]","{moreButton}":"[data-album-more-button]","{viewButton}":"[data-album-view-button]","{share}":"[data-repost-action]","{likes}":"[data-likes-action]",
"{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{counterBar}":"[data-stream-counter]"}},function(b){return{init:function(){b.id=b.element.data("album-id");b.nextStart=b.element.data("album-nextstart")||-1;b.options.editable&&EasySocial.module("albums/editor").done(function(a){b.editor=b.addPlugin("editor",a)});b.setLayout();setTimeout(function(){b.content().addClass("ready")},1);b.addSubscriber(b.photoItem().controllers("EasySocial.Controller.Photos.Item"))},"{window} resize":e.debounce(function(){b.setLayout()},
250),currentLayout:function(){return b.element.data("albumLayout")},setLayout_:e.debounce(function(){b.setLayout()},100),setLayout:function(a){var c=b.photoItemGroup(),d=b.currentLayout();a=a||d;var f=b.setLayout.seed,g=f==c.width()&&d==a;hasPhotoItem=0<b.photoItem().length;hasUploadItem=0<b.uploadItem().length;hasItem=hasPhotoItem||hasUploadItem;masonry=c.data("masonry");layout={currentLayout:d,seed:f,intact:g,hasPhotoItem:hasPhotoItem,hasUploadItem:hasUploadItem,hasItem:hasItem,masonry:masonry};
g||(b.element.data("albumLayout",a).switchClass("layout-"+a),b.photoItem().switchClass("layout-"+a),b.setLayout.seed=layout.seed=null,b.trigger("layoutChange",[a,layout]));b.element.toggleClass("has-photos",hasItem);hasItem||c.css("opacity",1);a="set"+e.String.capitalize(a)+"Layout";b[a](layout);b.setLayout.seed=c.width()},setItemLayout:function(a){if(a.intact)a.masonry&&a.masonry.reload();else{var c=4;e("#es-wrap").hasClass("w600")&&(c=2);e("#es-wrap").hasClass("w320")&&(c=1);var d=b.photoItemGroup(),
f=b.photoItem();a=d.width();a=Math.floor(a/c)*c/c;var g=f.outerWidth(!0)-f.width(),h=f.outerHeight(!0)-f.height(),f=a-g,p=a-h;4<=c?(c=2*a-g,g=2*a-h):(c=f,g=p);var h=c,s=g;b.photoItem.css({width:f,height:p});b.photoImage.css({width:f,height:p});b.featuredItem.css({width:c,height:g});b.featuredImage.css({width:h,height:s});b.uploadItem.css({width:f,height:p});d.masonry({columnWidth:a});setTimeout(function(){d.addTransitionClass("no-transition").masonry("reload")},1)}},setFormLayout:function(a){a.masonry&&
a.masonry.destroy();b.clearLayout()},setDialogLayout:function(){layout.masonry&&layout.masonry.destroy();b.clearLayout()},setThumbnailLayout:function(){},setRowLayout:function(){b.clearLayout()},clearLayout:function(){b.photoItemGroup().addClass("no-transition");b.photoItem.css().remove();b.photoImage.css().remove();b.featuredItem.css().remove();b.featuredImage.css().remove();b.uploadItem.css().remove();b.setLayout.seed=null},getSelectedItems:function(){var a=[];b.photoItem(".selected").each(function(b,
d){a.push(e(d).controller("EasySocial.Controller.Photos.Item").data())});return a},"{photoItem} init.photos.item":function(a,c,d){b.addSubscriber(d)},"{photoItem} destroyed":function(){b.setLayout()},"{photoItem} activate":function(a,c,d){if(d)switch(b.currentLayout()){case "item":case "row":a.addClass("loading");b.browser?(b.browser.open("photo",d.id).always(function(){a.removeClass("loading")}),d.imageLink().route()):window.location=d.imageLink().attr("href");break;case "dialog":c=b.photoItem(".selected"),
b.options.multipleSelection?a.toggleClass("selected"):(d=a.hasClass("selected"),c.removeClass("selected"),a.toggleClass("selected",!d))}},"{photoItem} photoFeature":function(a,c,d,f,e){b.setLayout();d.fail(function(){b.setLayout()})},"{photoItem} photoMove":function(a,c,d,f,e){b.clearMessage();d.done(function(){f.element.remove();b.setLayout();1>b.photoItem().length&&b.trigger("coverRemove",[b])}).fail(function(a,c){b.setMessage(a,c)})},"{photoItem} photoDelete":function(a,c,d,f){b.clearMessage();
d.done(function(){f.element.remove();b.setLayout();1>b.photoItem().length&&b.trigger("coverRemove",[b])}).fail(function(a,c){b.setMessage(a,c)})},"{self} albumSave":function(a,c,d){d.done(function(a){b.id=a.id})},"{self} coverChange":function(a,c,d,f){b.cover().css("backgroundImage",e.cssUrl(d.sizes.thumbnail.url))},"{self} coverRemove":function(){b.cover().css("backgroundImage","")},"{viewButton} click":function(a,c){b.browser&&(c.preventDefault(),b.element.addClass("loading"),b.browser.open("Album",
b.id))},"{moreButton} click":function(a){-1==b.nextStart||a.disabled()||(a.disabled(!0),EasySocial.ajax("site/controllers/albums/loadMore",{albumId:b.id,start:b.nextStart,layout:b.currentLayout()}).done(function(c,d){b.nextStart=d;var f=b.photoItemGroup();e.each(c,function(a,b){e.buildHTML(b).appendTo(f)});0>d&&a.hide();b.setLayout()}).always(function(){a.disabled(!1)}))},"{share} create":function(a,c,d){b.counterBar().removeClass("hide")},"{likes} onLiked":function(a,c,d){b.counterBar().removeClass("hide")},
"{likes} onUnliked":function(a,c,d){a=b.likeContent().hasClass("hide");c=b.repostContent().hasClass("hide");a&&c&&b.counterBar().addClass("hide")}}});g.resolve()})});EasySocial.require().script("site/likes/likes","site/reports/reports","site/repost/repost","site/share/share","site/layout/dialog","site/layout/responsive","site/layout/elements","site/photos/photos","site/users/login","site/profile/popbox","site/privacy/privacy","site/locations/popbox","site/sidebar/sidebar","site/friends/api","site/conversations/api",
"site/followers/api","site/popbox/popbox","site/stream/video","oauth/facebook").done();EasySocial.module("site/likes/likes",function(e){e(document).on("click.es.likes.action","[data-likes-action]",function(){var g=e(this),b={id:g.data("id"),type:g.data("type"),group:g.data("group")},a=b.type+"-"+b.group+"-"+b.id;EasySocial.ajax("site/controllers/likes/toggle",b).done(function(c,d,f,k,h){g.text(d);e("[data-likes-"+a+"]").html(c).toggleClass("hide",f).toggle(!f);b.uid=b.id;b.count=h;g.trigger("like"==
k?"onLiked":"onUnliked",[b])}).fail(function(a){console.log(a)})}).on("click.es.likes.others","[data-likes-others]",function(){var g=e(this),b=g.parents("[data-likes-content]"),g={uid:b.data("id"),type:b.data("type"),exclude:g.data("authors")};EasySocial.dialog({content:EasySocial.ajax("site/controllers/likes/showOthers",g)})});this.resolve()});EasySocial.module("site/reports/reports",function(e){e(document).on("click.es.reports.link","[data-reports-link]",function(){var g=e(this),b={};e.each("url extension uid type object title description".split(" "),
function(a,c){b[c]=g.data(c)});EasySocial.dialog({content:EasySocial.ajax("site/views/reports/confirmReport",{title:b.title,description:b.description}),selectors:{"{message}":"[data-reports-message]","{reportButton}":"[data-report-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{reportButton} click":function(){var a=this.message().val();EasySocial.dialog({content:EasySocial.ajax("site/controllers/reports/store",{url:b.url,extension:b.extension,uid:b.uid,type:b.type,title:b.object,message:a})})},
"{cancelButton} click":function(){EasySocial.dialog().close()}}})});this.resolve()});EasySocial.module("site/repost/repost",function(e){e(document).on("click.es.repost.action","[data-repost-action]",function(){var g=e(this),b={id:g.data("id"),element:g.data("element"),group:g.data("group")},a=b.element+"-"+b.group+"-"+b.id;EasySocial.dialog({content:EasySocial.ajax("site/views/repost/form",b),bindings:{"{sendButton} click":function(c){var d=this.parent;c=e.trim(this.repostContent().val());b.content=
c;d.loading(!0);EasySocial.ajax("site/controllers/repost/share",b).done(function(b,c,d,h){b=e.buildHTML(b);actionContent=e("[data-repost-"+a+"]").toggleClass("hide",c).toggle(!c);actionContent.find("span.repost-counter").html(b);g.trigger("create",[h])}).fail(function(a){d.clearMessage();d.setMessage(a)}).always(function(){d.loading(!1);d.close()})}}})});EasySocial.module("repost/authors",function(){this.resolve(function(e){e=e.button.parents("[data-repost-content]");data={id:e.data("id"),element:e.data("element")};
return{content:EasySocial.ajax("site/controllers/repost/getSharers",data),id:"es-wrap",type:"repost",position:"bottom-right"}})});this.resolve()});EasySocial.module("site/share/share",function(e){e(document).on("click.es.share.button","[data-es-share-button]",function(){var g=e(this);EasySocial.dialog({title:g.text(),content:EasySocial.ajax("site/views/sharing/shareDialog",{url:g.data("url"),title:g.data("title")})})});this.resolve()});EasySocial.module("site/layout/dialog",function(e){var g=this;
EasySocial.require().library("dialog").view("site/dialog/default").done(function(b){EasySocial.dialog=function(a,c){if(window.parentDialog)return window.parentDialog.update(a);if("string"===typeof a||b.isDeferred(a))a={content:a,afterShow:b.isFunction(c)?c:b.noop};var d=b("#es-wrap.es-dialog.global");1>d.length&&(d=b(EasySocial.View("site/dialog/default")).addClass("global").appendTo("body"));a=b.extend({showOverlay:!1},a);var f=d.controller("Dialog");f?f.update(a):f=d.addController("Dialog",a);return f};
g.resolve()})});EasySocial.module("site/layout/responsive",function(e){e(function(){e(".es-responsive").responsive([{at:1200,switchTo:"wide"},{at:960,switchTo:"wide w960"},{at:818,switchTo:"wide w960 w768"},{at:600,switchTo:"wide w960 w768 w600"},{at:560,switchTo:"wide w960 w768 w600 w480"},{at:480,switchTo:"wide w960 w768 w600 w480 w320"}])});this.resolve()});EasySocial.module("site/layout/elements",function(e){e(document).on("click.button.data-fd-api","[data-fd-toggle-value]",function(){var g=e(this).parents('[data-foundry-toggle="buttons-radio"]');
if(!g.hasClass("disabled")&&0<g.length){var b=e(this).data("fd-toggle-value");g.find("input[type=hidden]").val(b).trigger("change")}});e(document).on("mouseover.tooltip.data-es-api","[data-es-provide=tooltip]",function(){e(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div class="tooltip tooltip-es"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")});e(document).on("mouseover.popover.data-es-api","[data-es-provide=popover]",
function(){e(this).popover({delay:{show:200,hide:100},animation:!1,trigger:"hover",container:"body"}).popover("show")});e(document).on("keyup","[data-date-form] [data-date-day]",function(){if(e.trim(e(this).val())){var g=parseInt(e(this).siblings("[data-date-year]").val()||e(this).siblings("[data-date-year]").data("dateDefault")),b=parseInt(e(this).siblings("[data-date-month]").val()||e(this).siblings("[data-date-month]").data("dateDefault")),a=parseInt(e(this).val()||e(this).data("dateDefault")),
c=/1|3|5|7|8|10|12/.test(b)?31:30;2==b&&(c=(g%400?g%100&&!(g%4):1)?29:28);1>a&&(a=1);a>c&&(a=c);e.isNumeric(a)?e(this).val(a):e(this).val("")}});e(document).on("keyup","[data-date-form] [data-date-year]",function(){if(e.trim(e(this).val())){var g=parseInt(e(this).val());1>g&&(g=1);e.isNumeric(g)?e(this).val(g):e(this).val("")}});this.resolve()});EasySocial.module("site/photos/photos",function(e){var g=this;EasySocial.require().script("photos").done(function(){EasySocial.photos=e("body").addController("EasySocial.Controller.Photos");
g.resolve()})});EasySocial.module("photos",function(e){var g=this;EasySocial.require().done(function(){EasySocial.Controller("Photos",{defaultOptions:{view:{popup:"site/photos/popup",viewer:"site/photos/popup.viewer"},"{photo}":"[data-es-photo]","{popup}":"[data-photo-popup]","{viewer}":"[data-photo-viewer]","{closeButton}":"[data-popup-close-button]"},photo:{data:{},image:{},content:null,tags:[]}},function(b){return{init:function(){},createAvatar:function(a,b){if(void 0!==a){b||(b={});var d={id:a};
b.redirect&&(d.redirect=b.redirect,delete b.redirect);b.uid&&(d.uid=b.uid,delete b.uid);EasySocial.dialog(e.extend({content:EasySocial.ajax("site/views/photos/avatar",d)},b))}},selectPhoto:function(a){var b=e.Deferred(),d=EasySocial.ajax("site/views/albums/dialog"),f=EasySocial.require().script("albums/browser").done();EasySocial.dialog(e.extend({content:b},a));e.when(f,d).done(function(){d.done(function(a){b.resolve(a)})})},display:function(a,c,d){a+="";var f=b.popup();b.viewer().remove();b.show();
b.currentViewer=b.view.viewer().appendTo(f).addController("EasySocial.Controller.Photos.Viewer",e.extend({mode:"popup",initialPhoto:a,playlist:c},d))},albums:{},albumLoaders:{},getAlbum:function(a,c){a+="";var d=b.albumLoaders,f=d[a];if(c||!f||"failed"==f.state())f=d[a]=EasySocial.ajax("site/controllers/albums/getAlbum",{id:a}).done(function(c){b.albums[a]=c});return f.promise()},photos:{},photoLoaders:{},getPhoto:function(a,c){a+="";var d=b.photoLoaders,f=d[a];if(c||!f||"failed"==f.state())f=d[a]=
EasySocial.ajax("site/controllers/photos/getPhoto",{id:a,attr:["content","tags"]}).done(function(c){b.photos[a]=c;var d=c.content;c.content={};e.each(d,function(a,d){c.content[a]=e(e.trim(d)).appendTo(b.element).detach()})});return f.promise()},images:{},imageLoaders:{},getImage:function(a,c,d){a+="";var f=b.imageLoaders,f=f[a]||(f[a]={}),g=f[c];if(d||!g||"failed"==g.state())g=f[c]=e.Deferred(),b.getPhoto(a).done(function(d){e.Image.get(d.sizes[c].url).done(function(d){var f=b.images;(f[a]||(f[a]=
{}))[c]=d;g.resolve(d)}).fail(g.reject)}).fail(g.reject);return g.promise()},show:function(){b.popupElement.appendTo("body").addClass("active").trigger("show")},hide:function(){b.popupElement.removeClass("active").trigger("hide").detach()},"{self} click":function(a,c){c.target===b.popup()[0]&&b.hide()},"{photo} click":function(a,c){var d=a.data("es-photo"),f=a.parents("[data-es-album]");if(0<f.length)return f=f.data("es-album"),b.display(d,f),c.preventDefault();f=a.parents("[data-es-photos]");if(0<
f.length){var g=f.data("es-photos");if(""!==g&&void 0!==g)return g=g.split(","),b.display(d,g),c.preventDefault();g=[];f.find("[data-es-photo]").each(function(a,b){g.push(e(this).data("es-photo"))});b.display(d,g);return c.preventDefault()}},"{closeButton} click":function(){b.hide()},like:function(a){return EasySocial.ajax("site/controllers/photos/like",{id:a})}}});g.resolve()})});EasySocial.module("site/users/login",function(e){var g=this;EasySocial.require().library("dialog").done(function(){EasySocial.login=
function(){EasySocial.dialog({content:EasySocial.ajax("site/views/login/form",{})})};g.resolve()})});EasySocial.module("site/profile/popbox",function(e){EasySocial.require().library("popbox").done(function(){EasySocial.module("profile/popbox",function(e){this.resolve(function(b){var a=b.button.data("userId");b=b.button.attr("data-popbox-position")||"top-left";return{content:EasySocial.ajax("site/views/profile/popbox",{id:a}),id:"es-wrap",type:"profile",position:b}})})});EasySocial.require().script("site/conversations/composer").done();
EasySocial.Controller("Profile.Popbox",{defaultOptions:{id:null,"{addButton}":"[data-popbox-friends-add]","{friendsButton}":"[data-popbox-friends-friends]","{respondButton}":"[data-popbox-friends-respond]","{requestedButton}":"[data-popbox-friends-requested]","{messageButton}":"[data-popbox-message]","{friendsSubmenu}":"[data-friends-submenu]","{cancelFriend}":"[data-popbox-friends-friends-cancel]","{cancelFriendRequest}":"[data-popbox-friends-requested-cancel]","{approveFriend}":"[data-popbox-friends-respond-approve]",
"{rejectFriend}":"[data-popbox-friends-respond-reject]"}},function(g){return{init:function(){g.options.id=g.element.find("[data-user-id]").data("userId");EasySocial.module("site/conversations/composer").done(function(){g.messageButton().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:g.options.id}})})},"{self} popboxActivate":function(){g.friendsSubmenu().parent().removeClass("open")},"{addButton} click":function(){EasySocial.ajax("site/controllers/friends/request",{id:g.options.id}).done(function(){EasySocial.ajax("site/views/profile/getButton",
{button:"button.requested",id:g.options.id}).done(function(b){g.addButton().replaceWith(b)})})},"{cancelFriend} click":function(b,a){var c=e(b).data("friendid");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmRemoveFriend",{id:g.options.id}),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:c}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/friendRemoved",{id:g.options.id})});EasySocial.ajax("site/views/profile/getButton",
{button:"button.add"}).done(function(a){g.friendsSubmenu().remove();g.friendsButton().replaceWith(a)})})}}})},"{cancelFriendRequest} click":function(b,a){var c=e(b).data("friendid");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmCancelRequest",{id:c}),bindings:{"{confirmButton} click":function(){EasySocial.dialog().close();EasySocial.ajax("site/controllers/friends/cancelRequest",{id:c}).done(function(){EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){g.friendsSubmenu().remove();
g.requestedButton().replaceWith(a)})})}}})},"{approveFriend} click":function(b,a){var c=e(b).data("friendid");EasySocial.ajax("site/controllers/friends/approve",{id:c}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmFriends",{id:g.options.id})});EasySocial.ajax("site/views/profile/getButton",{button:"button.friends"}).done(function(a){g.friendsSubmenu().remove();g.respondButton().replaceWith(a)})})},"{rejectFriend} click":function(b,a){var c=e(b).data("friendid");
EasySocial.ajax("site/controllers/friends/reject",{id:c}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/rejected",{id:g.options.id})});EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){g.friendsSubmenu().remove();g.respondButton().replaceWith(a)})})}}});e(document).on("mouseover.es.profile.popbox","[data-popbox-tooltip=profile]",function(){e(this).addController("EasySocial.Controller.Profile.Popbox")});this.resolve()});EasySocial.module("site/conversations/composer",
function(e){var g=this;EasySocial.require().library("expanding").script("site/friends/suggest","uploader/uploader","location").language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS","COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE").done(function(b){EasySocial.Controller("Conversations.Composer",{defaultOptions:{attachments:!0,location:!0,extensionsAllowed:"","{uploader}":"[data-composer-attachment]","{location}":"[data-composer-location]","{editor}":"[data-composer-editor]","{friendSuggest}":"[data-friends-suggest]",
"{recipients}":"input[name=uid\\[\\]],input[name=list_id\\[\\]]","{recipientRow}":"[data-composer-recipients]","{messageRow}":"[data-composer-message]","{submit}":"[data-composer-submit]"}},function(a){return{init:function(){a.initSuggest();a.initEditor();a.options.attachments&&a.initUploader();a.options.location&&a.initLocation()},initLocation:function(){a.location().implement(EasySocial.Controller.Location.Form)},resetForm:function(){a.editor().val("")},initUploader:function(){a.uploader().implement(EasySocial.Controller.Uploader,
{temporaryUpload:!0,query:"type=conversations",type:"conversations",extensionsAllowed:a.options.extensionsAllowed});"development"==EasySocial.environment&&(console.log("Extensions Allowed: "+a.options.extensionsAllowed),console.log("Maximum individual file size: "+a.options.maxSize))},initSuggest:function(){a.friendSuggest().addController(EasySocial.Controller.Friends.Suggest,{friendList:!0,friendListName:"list_id[]"})},initEditor:function(){a.editor().expandingTextarea()},checkErrors:function(){if(0>=
a.recipients().length)return a.recipientRow().addClass("error"),a.clearMessage(),a.setMessage(b.language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS"),"error"),!0;a.recipientRow().removeClass("error");if(""==a.editor().val())return a.messageRow().addClass("error"),a.clearMessage(),a.setMessage(b.language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE"),"error"),!0;a.messageRow().removeClass("error");return!1},"{submit} click":function(b,d){d.preventDefault();if(a.checkErrors())return!1;
if(a.options.attachments){var f=a.uploader().controller();if(f.options.uploading&&f.hasFiles())return!1}a.element.submit()}}});EasySocial.Controller("Conversations.Composer.Dialog",{defaultOptions:{recipient:{}}},function(a){return{init:function(){},"{self} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/composer",{id:a.options.recipient.id}),bindings:{"{sendButton} click":function(){var c=b("[data-composer-recipient]").val(),d=b("[data-composer-message]").val();
EasySocial.ajax("site/controllers/conversations/store",{uid:c,message:d}).done(function(b){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sent",{id:a.options.recipient.id}),bindings:{"{viewButton} click":function(){document.location=b}}})}).fail(function(b){a.setMessage(b)})}}})}}});g.resolve()})});EasySocial.module("site/friends/suggest",function(e){var g=this;EasySocial.require().view("site/friends/suggest.item").library("textboxlist").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT").done(function(b){EasySocial.Controller("Friends.Suggest.User",
{defaultOptions:{"{addButton}":"[data-friend-suggest-add]","{button}":"[data-friend-suggest-button]"}},function(a){return{init:function(){},"{addButton} click":function(c){EasySocial.ajax("site/controllers/friends/request",{id:a.element.data("uid")}).done(function(c){a.button().html(b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT"))}).fail(function(b){a.button().html(b)})}}});EasySocial.Controller("Friends.Suggest",{defaultOptions:{max:null,exclusive:!0,exclusion:[],minLength:1,highlight:!0,name:"uid[]",
friendList:!1,friendListName:"",view:{suggestItem:"site/friends/suggest.item"}}},function(a){return{init:function(){var b=a.options;a.element.textboxlist({name:b.name,max:b.max,plugin:{autocomplete:{exclusive:b.exclusive,minLength:b.minLength,highlight:b.highlight,showLoadingHint:!0,showEmptyHint:!0,query:function(a){return b.friendList?EasySocial.ajax("site/controllers/friends/suggestWithList",{search:a,inputName:b.name,friendListName:b.friendListName}):EasySocial.ajax("site/controllers/friends/suggest",
{search:a})}}}}).textboxlist("enable")},"{self} filterItem":function(b,d,f){if(!a.options.friendList)return b=a.view.suggestItem(!0,{item:f,name:a.options.name}),f.title=f.screenName,f.menuHtml=b,f.html=b,f},"{self} filterMenu":function(c,d,f,e,g,h){if(!a.options.friendList){c=h.getAddedItems();var s=b.pluck(c,"id"),s=s.concat(a.options.exclusion);e.each(function(){var a=b(this),c=a.data("item");a.toggleClass("hidden",-1<b.inArray(c.id.toString(),s))})}}}});g.resolve()})});EasySocial.module("location",
function(e){var g=this;EasySocial.require().library("ui/autocomplete").view("site/location/delete.confirmation").done(function(){EasySocial.Controller("Location.Form",{defaultOptions:{language:"en",initialLocation:null,mapType:"ROADMAP",staticMap:"https://www.google.com/maps?q=",showTip:!0,"{locationInput}":"[data-locationForm-input]","{locationCoordinates}":"[data-locationForm-coordinates]","{locationLatitude}":"[data-locationForm-latitude]","{locationLongitude}":"[data-locationForm-longitude]",
"{latitudeDisplay}":"[data-locationForm-latitudeDisplay]","{longitudeDisplay}":"[data-locationForm-longitudeDisplay]","{locationMap}":"[data-locationForm-map]","{locationMapWrapper}":".locationMapWrapper","{viewStaticMap}":".viewStaticMap","{editGeographic}":"[data-locationForm-edit]","{updateGeographic}":"[data-locationForm-update]","{cancelUpdateGeographic}":"[data-locationForm-cancel]","{searchButton}":"[data-locationForm-searchAddress]","{autoDetectButton}":"[data-locationForm-autodetect]","{clearLocation}":"[data-locationForm-clear]"}},
function(b){return{init:function(){var a=e.uid("ext");window[a]=function(){e.___GoogleMaps.resolve()};e.___GoogleMaps||(e.___GoogleMaps=e.Deferred(),EasySocial.require().script({prefetch:!1},"http://maps.googleapis.com/maps/api/js?sensor=true&language="+b.options.language+"&callback="+a));e.___GoogleMaps.done(function(){b._init()})},_init:function(){b.geocoder=new google.maps.Geocoder;b.hasGeolocation=void 0!==navigator.geolocation;b.hasGeolocation?b.autoDetectButton().show():b.autoDetectButton().remove();
b.locationInput().autocomplete({delay:300,minLength:0,source:b.retrieveSuggestions,select:function(a,d){b.locationInput().autocomplete("close");b.setLocation(d.item.location)}}).prop("disabled",!1);b.autocomplete=b.locationInput().autocomplete("widget");b.autocomplete.addClass("location-suggestion");var a=e.trim(b.options.initialLocation);a&&b.getLocationByAddress(a,function(a){b.setLocation(a[0])});b.busy(!1)},busy:function(a){b.locationInput().toggleClass("loading",a)},getUserLocations:function(a){b.getLocationAutomatically(function(c){b.userLocations=
b.buildDataset(c);a&&a(c)})},getLocationByAddress:function(a,c){b.geocoder.geocode({address:a},c)},getLocationByCoords:function(a,c,d){b.geocoder.geocode({location:new google.maps.LatLng(a,c)},d)},getLocationAutomatically:function(a,c){if(!navigator.geolocation)return c("ERRCODE","Browser does not support geolocation or do not have permission to retrieve location data.");navigator.geolocation.getCurrentPosition(function(c){b.getLocationByCoords(c.coords.latitude,c.coords.longitude,a)},c)},renderMap:function(a,
c){b.busy(!0);b.locationMapWrapper().show();var d=new google.maps.Map(b.locationMap()[0],{zoom:15,center:a.geometry.location,mapTypeId:google.maps.MapTypeId[b.options.mapType],disableDefaultUI:!0}),f=new google.maps.Marker({draggable:!0,position:a.geometry.location,center:a.geometry.location,title:a.formatted_address,map:d});if(b.showTip){var e=new google.maps.InfoWindow({content:c});google.maps.event.addListener(d,"tilesloaded",function(){e.open(d,f);b.busy(!1)})}google.maps.event.addListener(f,
"dragend",function(a){b.getLocationByCoords(this.getPosition().lat(),this.getPosition().lng(),function(a){b.userLocations=b.buildDataset(a);b.suggestUserLocations()});b.locationLatitude().val(this.getPosition().lat());b.locationLongitude().val(this.getPosition().lng());b.latitudeDisplay().html(this.getPosition().lat());b.longitudeDisplay().html(this.getPosition().lng())})},setLocation:function(a){a&&(b.locationResolved=!0,b.lastResolvedLocation=a,b.locationInput().val(a.formatted_address),b.locationLatitude().val(a.geometry.location.lat()),
b.locationLongitude().val(a.geometry.location.lng()),b.latitudeDisplay().html(a.geometry.location.lat()),b.longitudeDisplay().html(a.geometry.location.lng()),b.renderMap(a,a.formatted_address),b.trigger("locationSelected",[a]))},removeLocation:function(){b.locationResolved=!1;b.locationInput().val("");b.locationLatitude().val("");b.locationLongitude().val("");b.latitudeDisplay().html("");b.longitudeDisplay().html("");b.locationMapWrapper().hide();b.locationCoordinates().hide()},buildDataset:function(a){return e.map(a,
function(a){return{label:a.formatted_address,value:a.formatted_address,location:a}})},retrieveSuggestions:function(a,c){b.busy(!0);var d=a.term,f=function(a){c(a);b.busy(!1)};""==d?f(b.userLocations||[]):b.getLocationByAddress(d,function(a){f(b.buildDataset(a))})},suggestUserLocations:function(){b.hasGeolocation&&b.userLocations&&b.locationInput().autocomplete("search","");b.busy(!1)},"{locationInput} blur":function(){setTimeout(function(){var a=e.trim(b.locationInput().val());""==a?b.removeLocation():
b.locationResolved?a!=b.lastResolvedLocation.formatted_address&&b.setLocation(b.lastResolvedLocation):b.removeLocation()},250)},"{self} locationSelected":function(a,c,d){b.locationCoordinates().show();b.options.onLocationSelected&&b.options.onLocationSelected(d);b.viewStaticMap().attr("href",b.options.staticMap+encodeURIComponent(d.formatted_address))},"{cancelUpdateGeographic} click":function(){b.editGeographic().click()},"{editGeographic} click":function(){b.locationCoordinates().toggleClass("editMode")},
"{updateGeographic} click":function(){b.editGeographic().click()},"{clearLocation} click":function(){b.removeLocation()},"{autoDetectButton} click":function(){b.busy(!0);b.hasGeolocation&&!b.userLocations?b.getUserLocations(b.suggestUserLocations):b.suggestUserLocations()}}});EasySocial.Controller("Location.Map",{defaultOptions:{animation:"drop",language:"en",useStaticMap:!1,disableMapsUI:!0,showTip:!0,zoom:5,fitBounds:null,minZoom:null,maxZoom:null,center:null,locations:[],mapType:"ROADMAP",width:500,
height:400,"{locationMap}":".locationMap","{locationMapWrapper}":".locationMapWrapper","{removeUserLocation}":".removeUserLocation",view:{deleteConfirmation:"site/location/delete.confirmation"}}},function(b){return{init:function(){b.mapLoaded=!1;var a=e.uid("ext");window[a]=function(){e.___GoogleMaps.resolve()};if(!0==b.options.useStaticMap){var c="&language="+String(b.options.language),d="&size="+String(b.options.width)+"x"+String(b.options.height),a="&zoom="+String(b.options.zoom),f="&center="+
String(parseFloat(b.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(b.options.locations[0].longitude).toFixed(6)),g="&maptype="+google.maps.MapTypeId[b.options.mapType],h="&markers=",c="http://maps.googleapis.com/maps/api/staticmap?sensor=false"+c+d;if(1==b.options.locations.length)h+=String(parseFloat(b.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(b.options.locations[0].longitude).toFixed(6)),c+=a+f+g+h;else{var p=[];e.each(b.options.locations,function(a,b){p.push(String(parseFloat(b.latitude).toFixed(6))+
","+String(parseFloat(b.longitude).toFixed(6)))});h+=p.join("|");c+=h+g}b.locationMap().html('<img src="'+c+'" />');b.locationMapWrapper().show();b.busy(!1)}else a=e.uid("ext"),window[a]=function(){e.___GoogleMaps.resolve()},e.___GoogleMaps||(e.___GoogleMaps=e.Deferred(),EasySocial.require().script({prefetch:!1},"http://maps.googleapis.com/maps/api/js?sensor=true&language="+b.options.language+"&callback="+a)),e.___GoogleMaps.done(function(){b._init()})},_init:function(){null===b.options.fitBounds&&
(b.options.fitBounds=1==b.options.locations.length?!1:!0);b.options.disableMapsUI=Boolean(b.options.disableMapsUI);b.locations=[];e.each(b.options.locations,function(a,c){"null"!=c.latitude&&"null"!=c.longitude&&b.locations.push(new google.maps.LatLng(c.latitude,c.longitude))});0<b.locations.length&&b.renderMap();b.busy(!1)},busy:function(a){b.locationMap().toggleClass("loading",a)},renderMap:function(){b.busy(!0);b.locationMapWrapper().show();var a;a=b.options.center?new google.maps.LatLng(center.latitude,
center.longitude):b.locations[0];b.map=new google.maps.Map(b.locationMap()[0],{zoom:parseInt(b.options.zoom),minZoom:parseInt(b.options.minZoom),maxZoom:parseInt(b.options.maxZoom),center:a,mapTypeId:google.maps.MapTypeId[b.options.mapType],disableDefaultUI:b.options.disableMapsUI});google.maps.event.addListener(b.map,"tilesloaded",function(){!1==b.mapLoaded&&(b.mapLoaded=!0,b.loadLocations())})},loadLocations:function(){b.bounds=new google.maps.LatLngBounds;b.infoWindow=[];setTimeout(function(){e.each(b.locations,
function(a,c){b.bounds.extend(c);setTimeout(function(){b.addMarker(c,b.options.locations[a])},100*(a+1))});b.options.fitBounds&&b.map.fitBounds(b.bounds)},500)},addMarker:function(a,c){if(a){var d=new google.maps.Marker({position:a,map:b.map});d.setAnimation(google.maps.Animation.DROP);b.addInfoWindow(d,c)}},addInfoWindow:function(a,c){if(b.showTip){var d=c.content;d||(d=c.address);var f=new google.maps.InfoWindow;f.setContent(d);b.infoWindow.push(f);1<b.options.locations.length?google.maps.event.addListener(a,
"click",function(){e.each(b.infoWindow,function(a,b){b.close()});f.open(b.map,a)}):(google.maps.event.addListener(a,"click",function(){f.open(b.map,a)}),f.open(b.map,a))}},"{removeUserLocation} click":function(){var a=b.element.data("id");content=b.view.deleteConfirmation({});e.dialog({content:content,buttons:[{name:e.language("COM_EASYSOCIAL_YES_BUTTON"),click:function(){EasySocial.ajax("site/controllers/location/delete",{id:a},function(){e.dialog().close();b.element.remove()})}},{name:e.language("COM_EASYSOCIAL_CANCEL_BUTTON"),
click:function(){e.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("site/privacy/privacy",function(e){var g=this;EasySocial.require().library("textboxlist").language("COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_PUBLIC","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_MEMBER","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIENDS_OF_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_ONLY_ME","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_CUSTOM").done(function(b){EasySocial.Controller("Privacy",
{defaultOptions:{"{menu}":"[data-privacy-menu]","{item}":"[data-privacy-item]","{icon}":"[data-privacy-icon]","{button}":"[data-privacy-toggle]","{tooltip}":"[data-original-title]","{key}":"[data-privacy-hidden]"}},function(a){return{init:function(){a.instanceId=b.uid();a.addPlugin("custom")},getData:function(a){return b._.pick(a.data(),"uid","utype","value","pid","icon")},"{self} click":function(c,d){var f=b(d.target),e=a.button();0<f.parents().andSelf().filter(e).length&&a.toggle()},"{item} click":function(b){b=
a.getData(b);a.trigger("privacyChange",[b]);b.preventSave||(a.save(b),a.deactivate())},"{self} privacyChange":function(b,d,f){a.item().removeClass("active").filter("[data-value="+f.value+"]").addClass("active")},toggle:function(){var b=a.element.hasClass("active");a[b?"deactivate":"activate"]()},activate:function(){a.element.addClass("active");a.trigger("activate",[a]);b(window).trigger("activatePrivacy",[a]);var c="click.privacy."+a.instanceId;b(document).on(c,function(d){d=b(d.target);0<d.parents().andSelf().filter(a.element).length||
0<d.parents("[data-textboxlist-autocomplete]").length||0<d.parents("[data-textboxlist-item]").length||(b(document).off(c),a.deactivate())})},deactivate:function(){a.element.removeClass("active");a.trigger("deactivate",[a]);b(window).trigger("deactivatePrivacy",[a])},"{window} activatePrivacy":function(b,d,f){f!==a&&a.deactivate()},save:function(c){a.key().val(c.value);a.icon().attr("class",c.icon);a.trigger("privacySave",[c]);a.element.attr("data-original-title",b.language("COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_"+
c.value.toUpperCase()));"ajax"==a.element.data("privacyMode")&&EasySocial.ajax("site/controllers/privacy/update",{uid:c.uid,utype:c.utype,value:c.value,pid:c.pid,custom:c.custom}).done(function(){}).fail(function(){})}}});EasySocial.Controller("Privacy.Custom",{defaultOptions:{"{textField}":"[data-textfield]","{saveButton}":"[data-save-button]","{cancelButton}":"[data-cancel-button]","{customItem}":"[data-privacy-item][data-value=custom]","{customKey}":"[data-privacy-custom-hidden]"}},function(a){return{init:function(){a.textField().textboxlist({unique:!0,
plugin:{autocomplete:{exclusive:!0,minLength:1,cache:!1,query:function(b){var d=a.getIds();return EasySocial.ajax("site/views/privacy/getfriends",{q:b,exclude:d})}}}});a.textboxlist=a.textField().controller("TextboxList")},getIds:function(){var c=a.textField().textboxlist("controller").getAddedItems();return b.map(c,function(a,b){return a.id})},updateIds:function(){var b=a.getIds();a.customKey().val(b.join(","))},"{parent} privacyChange":function(b,d,f){b="custom"==f.value;a.element.toggleClass("custom-privacy",
b);b?f.preventSave=!0:a.textField().textboxlist("controller").clearItems()},"{parent} privacySave":function(a,b,f){},"{parent} deactivate":function(){a.textboxlist.autocomplete.hide()},"{cancelButton} click":function(){a.element.removeClass("custom-privacy");a.textboxlist.autocomplete.hide()},"{saveButton} click":function(){var b=a.parent,d=a.customItem(),b=b.getData(d);b.custom=a.customKey().val();a.parent.save(b);a.parent.deactivate()},"{textField} addItem":function(){a.updateIds()},"{textField} removeItem":function(){a.updateIds()}}});
b(document).on("click.es.privacy","[data-es-privacy-container]",function(){var a=b(this);a.hasController("EasySocial.Controller.Privacy")||a.addController("EasySocial.Controller.Privacy").toggle()});g.resolve()})});EasySocial.module("site/locations/popbox",function(e){EasySocial.module("locations/popbox",function(e){this.resolve(function(b){var a=b.button;b=a.data("lat");a=a.data("lng");return{id:"es-wrap",type:"location",position:"bottom",content:'<a href="'+("//maps.google.com/?q="+b+","+a)+'" target="_blank"><img src="'+
("//maps.googleapis.com/maps/api/staticmap?size=400x200&sensor=true&zoom=15&center="+b+","+a+"&markers="+b+","+a)+'" width="400" height="200" /></a>'}})});this.resolve()});EasySocial.module("site/sidebar/sidebar",function(e){e(function(){e("[data-sidebar-toggle]").on("click",function(){var g=e("[data-sidebar]");g.toggleClass("sidebar-open");g.trigger("sidebarToggle")})});this.resolve()});EasySocial.module("locations",function(e){var g=this;EasySocial.require().library("gmaps").done();EasySocial.require().library("scrollTo").view("apps/user/locations/suggestion").language("COM_EASYSOCIAL_AT_LOCATION").done(function(){EasySocial.Controller("Locations",
{defaultOptions:{view:{suggestion:"apps/user/locations/suggestion"},map:{lat:0,lng:0},"{textField}":"[data-location-textField]","{detectLocationButton}":"[data-detect-location-button]","{suggestions}":"[data-location-suggestions]","{suggestion}":"[data-story-location-suggestion]","{mapPreview}":"[data-location-map]","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]"}},function(b){return{init:function(){navigator.geolocation&&b.detectLocationButton().show();EasySocial.require().library("gmaps").done(function(){b.textField().removeAttr("disabled")})},
navigate:function(a,c){var d=b.mapPreview(),f=b.map;void 0===f&&(f=b.map=d.show().gmaps(b.options.map));f.setCenter(a,c);f.removeMarkers();f.addMarker({lat:a,lng:c})},locations:{},lastQueryAddress:null,"{textField} keypress":function(a,c){switch(c.keyCode){case 38:var d=e(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);b.suggestion().removeClass("active");d.addClass("active").trigger("activate");b.suggestions().scrollTo(d,{offset:-1*d.height()});c.preventDefault();
break;case 40:d=e(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active");d.addClass("active").trigger("activate");b.suggestions().scrollTo(d,{offset:-1*d.height()});c.preventDefault();break;case 13:d=b.suggestion(".active").data("location"),b.set(d),b.suggestions().hide()}},"{textField} keyup":function(a,c){switch(c.keyCode){case 38:case 40:case 13:case 27:break;default:var d=e.trim(a.val());""===d&&b.suggestions().hide();if(d==b.lastQueryAddress)break;
var f=b.locations[d];f?(b.suggest(f),b.lastQueryAddress=d):b.lookup(d)}},lookup:e._.debounce(function(a){e.GMaps.geocode({address:a,callback:function(c,d){"OK"==d&&(b.locations[a]=c,b.suggest(c),b.lastQueryAddress=a)}})},250),suggest:function(a){var c=b.suggestions();c.hide().empty();e.each(a,function(a,f){b.view.suggestion({location:f}).data("location",f).appendTo(c)});c.show()},"{suggestion} activate":function(a,c){var d=a.data("location");b.navigate(d.geometry.location.lat(),d.geometry.location.lng())},
"{suggestion} mouseover":function(a){b.suggestion().removeClass("active");a.addClass("active").trigger("activate")},"{suggestion} click":function(a,c){var d=a.data("location");b.set(d);b.suggestions().hide()},set:function(a){b.currentLocation=a;var c=a.formatted_address;b.textField().val(c);b.latitude().val(a.geometry.location.lat());b.longitude().val(a.geometry.location.lng());b.trigger("locationChange",[a])},"{detectLocationButton} click":function(){e.GMaps.geolocate({success:function(a){e.GMaps.geocode({lat:a.coords.latitude,
lng:a.coords.longitude,callback:function(a,d){"OK"==d&&(b.suggest(a),b.textField().focus())}})},error:function(a){},always:function(){}})},"{story} save":function(a,c,d){(a=b.currentLocation)&&d.addData(b,{short_address:a.address_components[0].long_name,formatted_address:a.formatted_address,lat:a.geometry.location.lat(),lng:a.geometry.location.lng()})},"{story} clear":function(){b.unset()}}});g.resolve()})});EasySocial.module("oauth/facebook",function(e){e(document).on("click","[data-oauth-facebook-login]",
function(){var g=e(this),b=g.parents("[data-oauth-facebook]");1>b.length||b.hasController("EasySocial.Controller.OAuth.Facebook")||b.addController("EasySocial.Controller.OAuth.Facebook",{url:g.data("oauth-facebook-url"),appId:g.data("oauth-facebook-appid")}).openDialog()});EasySocial.Controller("OAuth.Facebook",{defaultOptions:{appId:null,url:"","{login}":"[data-oauth-facebook-login]","{revoke}":"[data-oauth-facebook-revoke]","{pushInput}":"[data-oauth-facebook-push]"}},function(g){return{init:function(){},
openDialog:function(){window.open(g.options.url,"","scrollbars=no,resizable=no,width=300,height=300,left="+(screen.width/2-150)+",top="+(screen.height/2-150))},"{pushInput} change":function(b){b=e(b).val();1==b&&g.options.requestPush&&g.openDialog(g.options.addPublishURL);0==b&&g.openDialog(g.options.revokePublishURL)},"{login} click":function(){g.openDialog()},"{revoke} click":function(){var b=g.element.data("callback");EasySocial.dialog({content:EasySocial.ajax("site/views/oauth/confirmRevoke",
{client:"facebook",callbackUrl:b})})}}});this.resolve()});EasySocial.module("pagination",function(){var e=this;EasySocial.require().done(function(g){EasySocial.Controller("Pagination",{defaultOptions:{"{pages}":".pageItem","{limitstart}":"#limitstart","{previousItem}":".previousItem","{nextItem}":".nextItem"}},function(b){return{init:function(){b.pages().implement(EasySocial.Controller.Pagination.Page,{pagination:b})},"{previousItem} click":function(a){var c=g(a).data("limitstart");g(a).hasClass("disabled")||
b.submitForm(c)},"{nextItem} click":function(a){var c=g(a).data("limitstart");g(a).hasClass("disabled")||b.submitForm(c)},submitForm:function(a){b.limitstart().val(a);Joomla.submitform()}}});EasySocial.Controller("Pagination.Page",{defaultOptions:{pagination:null,limitstart:0}},function(b){return{init:function(){b.options.limitstart=b.element.data("limitstart")},"{self} click":function(){if(b.element.hasClass("active"))return!1;b.options.pagination.submitForm(b.options.limitstart)}}});e.resolve()})});
EasySocial.module("photos/avatar",function(e){var g=this;EasySocial.require().library("imgareaselect").stylesheet("imgareaselect/default").done(function(){EasySocial.Controller("Photos.Avatar",{defaultOptions:{view:{selection:"site/photos/avatar.selection"},redirect:!0,"{image}":"[data-photo-image]","{viewport}":"[data-photo-avatar-viewport]","{photoId}":"[data-photo-id]","{userId}":"[data-user-id]","{createButton}":"[data-create-button]","{selection}":"[data-selection-box]","{loadingIndicator}":"[data-photos-avatar-loading]"}},
function(b){return{init:function(){b.setLayout()},data:function(){var a=b.viewport(),c=a.width(),d=a.height(),a=a.imgAreaSelect({instance:!0}).getSelection();return{id:b.photoId().val(),uid:b.userId().val(),top:a.y1/d,left:a.x1/c,width:a.width/c,height:a.height/d}},imageLoaders:{},setLayout:function(){var a=b.image(),c=e.uri(a.css("backgroundImage")).extract(0);(b.imageLoaders[c]||(b.imageLoaders[c]=e.Image.get(c))).done(function(c,f){var g=e.Image.resizeWithin(f.width,f.height,a.width(),a.height()),
h=Math.min(g.width,g.height),p=Math.floor((g.width-h)/2),s=Math.floor((g.height-h)/2),q=p+h,h=s+h;b.viewport().css(g).imgAreaSelect({handles:!0,aspectRatio:"1:1",parent:b.image(),x1:p,y1:s,x2:q,y2:h,onSelectEnd:function(a,c){var d=!("0"==c.width&&"0"==c.height);b.createButton().enabled(d)}})})},"{createButton} click":function(a){a=b.data();var c=EasySocial.ajax("site/controllers/photos/createAvatar",a).done(function(a,c,e){b.options.redirect&&(window.location=e)}).fail(function(a,c){b.setMessage(a,
c)});b.trigger("avatarCreate",[c,a,b])}}});g.resolve()})});EasySocial.module("photos/browser",function(e){var g=this;EasySocial.require().library("masonry").done();EasySocial.require().library("history").done(function(){EasySocial.Controller("Photos.Browser",{defaultOptions:{tilesPerRow:4,"{sidebar}":"[data-photo-browser-sidebar]","{content}":"[data-photo-browser-content]","{backButton}":"[data-photo-back-button]","{backButtonLink}":"[data-photo-back-button-link]","{listItemGroup}":"[data-photo-list-item-group]",
"{listItem}":"[data-photo-list-item]","{listItemLink}":"[data-photo-list-item] > a","{listItemTitle}":"[data-photo-list-item-title]","{listItemCover}":"[data-photo-list-item-cover]","{listItemImage}":"[data-photo-list-item-image]","{featuredListItem}":"[data-photo-list-item].featured","{featuredListItemImage}":"[data-photo-list-item].featured [data-photo-list-item-image]","{photoItem}":"[data-photo-item]"}},function(b){return{init:function(){e.module("masonry").done(function(){b.setLayout()})},setLayout:function(){var a=
b.listItemGroup().addClass("masonry"),c=b.setLayout.seed==a.width();hasPhotoItem=0<b.listItem().length;masonry=a.data("masonry");if(c)masonry&&masonry.reload();else{var a=b.listItemGroup(),d=b.listItem(),c=b.options.tilesPerRow,f=a.width(),c=Math.floor(f/c)*c/c,e=d.outerWidth(!0)-d.width(),g=d.outerHeight(!0)-d.height(),d=c-e,f=c-g,e=2*c-e,g=2*c-g;b.listItem.css({width:d,height:f});b.listItemImage.css({width:d,height:f});b.featuredListItem.css({width:e,height:g});b.featuredListItemImage.css({width:e,
height:g});a.masonry({columnWidth:c}).masonry("reload")}b.setLayout.seed=a.width()},open:function(a){var c=e.makeArray(arguments);b.trigger("contentLoad",c);var d="view"+e.String.capitalize(a),d=b[d].apply(b,c.slice(1));d.done(b.displayContent(function(){b.trigger("contentDisplay",c);return arguments})).fail(function(){b.trigger("contentFail",c)}).always(function(){b.trigger("contentComplete",c)});return d},displayContent:e.Enqueue(function(a){var c=[];a=e(e.buildFragment([a],document,c));b.content().html(a);
e(c).remove()}),viewPhoto:function(a){var c=b.listItem().removeClass("active loading").filterBy("photoId",a).addClass("active loading");return EasySocial.ajax("site/views/photos/item",{id:a,browser:!1}).fail(function(){}).always(function(){c.removeClass("loading")})},"{listItem} click":function(a){var c=a.data("photoId");b.open("Photo",c);a.find("> a").route()},"{listItemLink} click":function(a,b){b.preventDefault();a.blur()},"{backButtonLink} click":function(a,c){var d=b.browser;if(d){var e=b.element.data("albumId");
d.open("album",e);c.preventDefault();a.route()}},getListItem:function(a,c){var d=a?b.listItem().filterBy("photoId",a):b.listItem(".new");return c?d.find(b["listItem"+e.String.capitalize(c)].selector):d},getNextListItem:function(a){a=b.getListItem(a).next(b.listItem.selector);1>a.length&&(a=b.listItem(":first"));return a},getPrevListItem:function(a){a=b.getListItem(a).prev(b.listItem.selector);1>a.length&&(a=b.listItem(":last"));return a},removeListItem:function(a,c){var d=b.getListItem(a),e=b.getPrevListItem(a);
d.remove();b.setLayout();if(1>b.listItem().length)return b.element.addClass("loading"),window.location=b.backButtonLink().attr("href");c&&e.click()},"{photoItem} init.photos.item":function(a,c,d){b.addSubscriber(d)},"{photoItem} photoSave":function(a,c,d){d.done(function(a,c){b.getListItem(a.id,"title").html(a.title)})},"{photoItem} photoNext":function(a,c,d){b.getNextListItem(d.id).click()},"{photoItem} photoPrev":function(a,c,d){b.getPrevListItem(d.id).click()},"{photoItem} photoMove":function(a,
c,d,e,g){d.done(function(){b.removeListItem(e.id,!0)})},"{photoItem} photoDelete":function(a,c,d,e){d.done(function(){b.removeListItem(e.id,!0)})},"{photoItem} photoFeature":function(a,c,d,e,g){var h=b.getListItem(e.id);h.toggleClass("featured",g);b.setLayout();d.fail(function(){h.toggleClass("featured",!g);b.setLayout()})}}});g.resolve()})});EasySocial.module("photos/cover",function(e){var g=this;EasySocial.require().library("image").done(function(){EasySocial.Controller("Photos.Cover",{defaultOptions:{"{image}":"[data-cover-image]",
"{editButton}":"[data-cover-edit-button]","{doneButton}":"[data-cover-done-button]","{cancelButton}":"[data-cover-cancel-button]","{uploadButton}":"[data-cover-upload-button]","{selectButton}":"[data-cover-select-button]","{removeButton}":"[data-cover-remove-button]","{menu}":"[data-cover-menu]"}},function(b){return{init:function(){b.setLayout();b.element.hasClass("editing")&&b.enable()},"{window} resize":e.debounce(function(){b.setLayout()},250),"{editButton} click":function(){b.enable()},"{cancelButton} click":function(){b.disable()},
ready:!1,disabled:!0,toggle:function(){b[b.disabled?"enable":"disable"]()},enable:function(){b.setLayout();b.disabled=!1;b.element.addClass("editing")},disable:function(){b.disabled=!0;b.element.removeClass("editing");var a=e.uri(window.location.href).deleteQueryParam("cover_id").toString();History.pushState({state:0},window.title,a)},imageLoaders:{},setLayout:function(){var a=b.image(),c=b.setLayout.image,d=b.element.width()/3;b.element.height(d);if(c){var d=c.data("width"),f=c.data("height"),c=
a.width(),a=a.height(),d=e.Image.resizeProportionate(d,f,c,a,"outer");b.availableWidth=c-d.width;b.availableHeight=a-d.height}else if(a=e.uri(a.css("backgroundImage")).extract(0))d=b.imageLoaders,(d[a]||(d[a]=e.Image.get(a))).done(function(a){b.setLayout.image=a;b.setLayout()})},setCover:function(a,c){b.element.addClass("loading");e.Image.get(c).done(function(){b.image().data("photoId",a).css({backgroundImage:e.cssUrl(c),backgroundPosition:"50% 50%"});b.x=0.5;b.y=0.5;b.enable()}).fail(function(){b.disable()}).always(function(){b.element.removeClass("loading")})},
drawing:!1,moveCover:function(a,c,d){d||(d=b.image());var e=b.availableWidth,g=b.availableHeight;a=0==e?0:b.x+(a/e||0);c=0==g?0:b.y+(c/g||0);0>a&&(a=0);1<a&&(a=1);0>c&&(c=0);1<c&&(c=1);d.css("backgroundPosition",100*(b.x=a)+"% "+100*(b.y=c)+"% ")},x:0.5,y:0.5,"{image} mousedown":function(a,c){if(!b.disabled){c.target===b.image()[0]&&c.preventDefault();b.drawing=!0;b.element.addClass("active");var d=b.image(),f=b.image().css("backgroundPosition").split(" ");b.x=parseInt(f[0])/100;b.y=parseInt(f[1])/
100;var g=c.pageX,h=c.pageY;e(document).on("mousemove.movingCover mouseup.movingCover",function(a){b.drawing&&b.moveCover(-1*(g-(g=a.pageX)),-1*(h-(h=a.pageY)),d)}).on("mouseup.movingCover",function(){e(document).off("mousemove.movingCover mouseup.movingCover");b.element.removeClass("active")})}},save:function(){var a=b.image().data("photoId");return EasySocial.ajax("site/controllers/photos/createCover",{id:a,x:b.x,y:b.y}).done(function(a){b.element.css({backgroundImage:e.cssUrl(a.url),backgroundPosition:a.position}).removeClass("no-cover");
b.disable()})},"{doneButton} click":function(){b.save()},"{menu} dropdownOpen":function(){b.element.addClass("show-all")},"{menu} dropdownClose":function(){b.element.removeClass("show-all")},"{selectButton} click":function(){EasySocial.photos.selectPhoto({bindings:{"{self} photoSelected":function(a,c,d){if(a=d[0])b.setCover(a.id,a.sizes.large),this.parent.close()}}})},"{uploadButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/uploadCover"),bindings:{"{self} upload":function(a,
c,d,e){d.done(function(a){b.setCover(a.id,a.sizes.large.url)})}}})},"{removeButton} click":function(){EasySocial.ajax("site/controllers/photos/removeCover").done(function(a){b.element.css({backgroundImage:e.cssUrl(a),backgroundPosition:"50% 50%"}).addClass("no-cover");b.disable()})}}});g.resolve()})});EasySocial.module("photos/editor",function(e){var g=this;EasySocial.require().done(function(){var b=EasySocial.Controller("Photos.Editor",{defaultOptions:{view:{uploadItem:"upload.item",photoForm:"site/albums/photo.form"},
"{titleField}":"[data-photo-title-field]","{captionField}":"[data-photo-caption-field]","{location}":"[data-photo-location]","{locationCaption}":"[data-photo-location-caption]","{addLocationButton}":"[data-photo-addLocation-button]","{date}":"[data-photo-date]","{dateCaption}":"[data-photo-date-caption]","{addDateCaption}":"[data-photo-adddate-button]","{locationWidget}":".es-photo-location-form .es-location","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]","{dateDay}":"[name=date-day]",
"{dateMonth}":"[name=date-month]","{dateYear}":"[name=date-year]","{actionsMenu}":"[data-item-actions-menu]","{featureButton}":"[data-photo-feature-button]","{coverButton}":"[data-photo-cover-button]","{editButton}":"[data-photo-edit-button]","{editButtonLink}":"[data-photo-edit-button] > a","{doneButton}":"[data-photo-done-button]","{doneButtonLink}":"[data-photo-done-button] > a","{moveButton}":"[data-photo-move-button]","{deleteButton}":"[data-photo-delete-button]","{rotateLeftButton}":"[data-photo-rotateLeft-button]",
"{rotateRightButton}":"[data-photo-rotateRight-button]","{profileAvatarButton}":"[data-photo-profileAvatar-button]","{profileCoverButton}":"[data-photo-profileCover-button]"}},function(a){return{init:function(){},data:function(){return{id:a.photo.id,title:a.titleField().val(),caption:a.captionField().val(),date:a.formatDate(),address:a.locationCaption().html(),latitude:a.latitude().val(),longitude:a.longitude().val()}},save:function(){var b=a.data();a.clearMessage();b=EasySocial.ajax("site/controllers/photos/update",
b).done(function(b){a.photo.setLayout("item")}).fail(function(){a.setMessage(message,"error")}).progress(function(b,c){"success"==c&&a.setMessage(b)});a.trigger("photoSave",[b,a]);return b},enable:function(){a.photo.setLayout("form");a.photo.album&&a.element.addClass("active");a.trigger("enabled",[a])},disable:function(){a.photo.setLayout("item");a.photo.album&&a.element.removeClass("active");a.trigger("disabled",[a])},setImage:function(b){var d=a.photo.image();b=a.photo[b+"Image"]();var f=b.data("src"),
g=b.data("loader");g||(g=e.Image.get(f),b.data("loader",g));g.done(function(){d.css("backgroundImage","url("+f+")")});return g},"{featureButton} click":function(b,d){d.stopPropagation();var e=a.element.hasClass("featured");a.element.addTransitionClass("featuring",800).toggleClass("featured",!e);setTimeout(function(){a.setImage(e?"thumbnail":"featured")},1E3);var g=EasySocial.ajax("site/controllers/photos/feature",{id:a.photo.id}).done(function(a,d){b.toggleClass("btn-es-primary",d)}).fail(function(){a.element.addTransitionClass("featuring",
800).toggleClass("featured",e);setTimeout(function(){a.setImage(e?"featured":"thumbnail")},1E3)});a.trigger("photoFeature",[g,a.photo,!e])},"{coverButton} click":function(){var b=a.photo.album;b&&b.editor&&b.editor.setCover(a.photo.id)},"{dateDay} keyup":function(){a.updateDate()},"{dateMonth} change":function(){a.updateDate()},"{dateYear} keyup":function(){a.updateDate()},updateDate:function(){setTimeout(function(){a.date().addClass("has-data");var b=a.dateDay().val()+" "+e.trim(a.dateMonth().find(":selected").text()+
" "+a.dateYear().val());a.dateCaption().html(b)},1)},formatDate:function(){var b=a.dateDay().val()||a.dateDay().data("date-default"),d=a.dateMonth().val()||a.dateMonth().data("date-default");return(a.dateYear().val()||a.dateYear().data("date-default"))+"-"+d+"-"+b},"{locationWidget} locationChange":function(b,d,e){b=e.formatted_address;a.locationCaption().html(b);a.location().addClass("has-data")},rotate:function(b){var d=a.photo;d.content().addClass("loading");var f=EasySocial.ajax("site/controllers/photos/rotate",
{id:d.id,angle:b}).done(function(b){b=a.photo.album?b.sizes.thumbnail.url:b.sizes.large.url;d.image().css({backgroundImage:e.cssUrl(b)});a.element.addTransitionClass("rotating-ready",150).removeClass("rotating-right rotating-left")}).fail(function(b,c){a.setMessage(b,c)}).always(function(){d.content().removeClass("loading")});a.trigger("photoRotate",[f,b,d])},"{rotateRightButton} click":function(){a.element.addClass("rotating-right");a.rotate(90)},"{rotateLeftButton} click":function(){a.element.addClass("rotating-left");
a.rotate(-90)},"{moveButton} click":function(){var b=a.photo,d=EasySocial.dialog({content:EasySocial.ajax("site/views/photos/moveToAnotherAlbum",{id:b.id}),bindings:{"{moveButton} click":function(){var e=this.albumSelection().val(),g=EasySocial.ajax("site/controllers/photos/move",{id:b.id,albumId:e}).always(function(){d.close()});a.trigger("photoMove",[g,b,e])}}})},"{deleteButton} click":function(){var b=a.photo;EasySocial.dialog({content:EasySocial.ajax("site/views/photos/confirmDelete",{id:b.id}),
bindings:{"{deleteButton} click":function(d){var e=this.parent;d.disabled(!0);d=EasySocial.ajax("site/controllers/photos/delete",{id:b.id}).always(function(){e.close()});a.trigger("photoDelete",[d,b])}}})},"{editButton} click":function(){a.photo.setLayout("form");a.editButtonLink().route()},"{editButtonLink} click":function(a,b){b.preventDefault()},"{doneButton} click":function(){a.save().done(function(){a.photo.setLayout("item");a.doneButtonLink().route()}).fail(function(){})},"{doneButtonLink} click":function(a,
b){b.preventDefault()},"{profileAvatarButton} click":function(){EasySocial.photos.createAvatar(a.photo.id)}}});g.resolve(b)})});EasySocial.module("photos/item",function(e){var g=this;EasySocial.require().script("photos/tags","photos/editor","photos/tagger","photos/navigation").done();EasySocial.require().library("image").done(function(){var b=EasySocial.Controller("Photos.Item",{hostname:"photo",defaultOptions:{editable:!1,taggable:!1,navigation:!1,"{header}":"[data-photo-header]","{content}":"[data-photo-content]",
"{footer}":"[data-photo-footer]","{info}":"[data-photo-info]","{title}":"[data-photo-title]","{titleLink}":"[data-photo-title-link]","{caption}":"[data-photo-caption]","{image}":"[data-photo-image]","{imageLink}":"[data-photo-image-link]","{thumbnailImage}":"[data-photo-image-thumbnail]","{featuredImage}":"[data-photo-image-featured]","{largeImage}":"[data-photo-image-large]","{menu}":"[data-photo-menu]","{actions}":"[data-item-actions]","{actionsMenu}":"[data-item-actions-menu]","{comments}":"[data-comments]",
"{share}":"[data-repost-action]","{likes}":"[data-likes-action]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{counterBar}":"[data-stream-counter]","{privacy}":"[data-es-privacy-container]","{likeCount}":"[data-photo-like-count]","{commentCount}":"[data-photo-comment-count]","{tagCount}":"[data-photo-tag-count]"}},function(a){return{init:function(){a.id=a.element.data("photoId");EasySocial.module("photos/tags").done(function(b){a.tags=a.addPlugin("tags",b)});a.options.editable&&
EasySocial.module("photos/editor").done(function(b){a.editor=a.addPlugin("editor",b)});a.options.taggable&&EasySocial.module("photos/tagger").done(function(b){a.tagger=a.addPlugin("tagger",b)});a.options.navigation&&EasySocial.module("photos/navigation").done(function(b){a.navigation=a.addPlugin("navigation",b)})},data:function(){return{id:a.id,title:e.trim(a.title().text()),caption:e.trim(a.caption().text()),sizes:{thumbnail:a.thumbnailImage().data("src"),featured:a.featuredImage().data("src"),large:a.largeImage().data("src")}}},
setLayout:function(b){a.element.data("photoLayout",b).switchClass("layout-"+b);a.trigger("layoutChange",[b,a])},"{self} click":function(b,d){var f=e(d.target),g=a.menu();0<f.parents().andSelf().filter(g).length||a.trigger("activate",[a])},"{self} photoSave":function(b,d,e){e.done(function(b,c){a.info().replaceWith(c)})},"{self} photoDelete":function(b,d,e){e.done(function(){}).fail(function(b,c){a.setMessage(b,c)})},"{imageLink} click":function(a,b){b.preventDefault()},"{titleLink} click":function(a,
b){},"{self} dropdownOpen":function(){a.element.addClass("show-all")},"{self} dropdownClose":function(){a.element.removeClass("show-all")},"{share} create":function(b,d,e){a.counterBar().removeClass("hide")},"{likes} onLiked":function(b,d,e){a.counterBar().removeClass("hide");a.count("like",1,!0)},"{likes} onUnliked":function(b,d,e){b=a.likeContent().hasClass("hide");d=a.repostContent().hasClass("hide");b&&d&&a.counterBar().addClass("hide");a.count("like",-1,!0)},"{self} tagAdd":function(){a.count("tag",
1,!0)},"{self} tagRemove":function(){a.count("tag",-1,!0)},"{comments} newCommentSaved":function(){a.count("comment",1,!0)},"{comments} commentDeleted":function(){a.count("comment",-1,!0)},"{privacy} activate":function(){setTimeout(function(){a.element.addClass("show-all")},0)},"{privacy} deactivate":function(){a.element.removeClass("show-all")},count:function(b,d,f){b=a[b+"Count"];e.isFunction(b)&&(b=b(),0>b.length||(d=f?(parseInt(b.text())||0)+(parseInt(d)||0):d,0>d&&(d=0),b.text(d)))}}});g.resolve(b)})});
EasySocial.module("photos/tags",function(e){var g=this;EasySocial.require().library("scrollTo").done();EasySocial.require().done(function(){var b=EasySocial.Controller("Photos.Tags",{hostname:"tags",defaultOptions:{"{viewport}":"[data-photo-tag-viewport]","{tagItem}":"[data-photo-tag-item]","{tagButton}":"[data-photo-tag-button]","{tagListItemGroup}":"[data-photo-tag-list-item-group]","{tagListItem}":"[data-photo-tag-list-item]"}},function(a){return{init:function(){a.setLayout()},imageLoaders:{},
setLayout:function(b){var d=a.photo.image(),f=e.uri(d.css("backgroundImage")).extract(0);(a.imageLoaders[f]||(a.imageLoaders[f]=e.Image.get(f))).done(function(f,g){a.viewport().css(e.Image.resizeWithin(g.width,g.height,d.width(),d.height()));b&&b()})},getTagItem:function(b){return a.tagItem().filterBy("photoTagId",b)},getTagListItem:function(b){return a.tagListItem().filterBy("photoTagId",b)},getTaggedUsers:function(){var b=[];a.tagListItem("[data-photo-tag-uid]").each(function(){b.push(e(this).data("photoTagUid"))});
return e.uniq(b)},activateTag:function(b){a.getTagItem(b).addClass("active");a.getTagListItem(b).addClass("active")},deactivateTag:function(b){a.getTagItem(b).removeClass("active");a.getTagListItem(b).removeClass("active")},"{tagListItem} click":function(b){var d=(b.hasClass("active")?"deactivate":"activate")+"Tag";b=b.data("photoTagId");a[d](b)},"{tagListItem} mouseover":function(b){a.getTagItem(b.data("photoTagId")).addClass("focus")},"{tagListItem} mouseout":function(b){a.getTagItem(b.data("photoTagId")).removeClass("focus")},
"{self} tagRemove":function(b,d,e,g){e.done(function(){a.getTagItem(g).remove();a.getTagListItem(g).remove()})},"{self} photoRotate":function(b,d,f,g,h){f.done(function(b,c){setTimeout(function(){a.setLayout(function(){var b=a.tagItem();e.each(c,function(a,c){b.filterBy("photoTagId",c.id).css({width:100*c.width+"%",height:100*c.height+"%",top:100*c.top+"%",left:100*c.left+"%"})})})},1)})}}});g.resolve(b)})});EasySocial.module("photos/tagger",function(e){var g=this;EasySocial.require().library("scrollTo").done();
EasySocial.require().view("site/photos/tags.item","site/photos/tags.menu.item").done(function(){var b=EasySocial.Controller("Photos.Tagger",{hostname:"tagger",defaultOptions:{view:{tagItem:"site/photos/tags.item"},width:100,height:100,drawTolerance:30,"{viewport}":"[data-photo-tag-viewport]","{tagItem}":"[data-photo-tag-item]","{tagSelection}":"[data-photo-tag-item].new","{tagButton}":"[data-photo-tag-button]","{tagListItemGroup}":"[data-photo-tag-list-item-group]","{tagListItem}":"[data-photo-tag-list-item]",
"{tagRemoveButton}":"[data-photo-tag-remove-button]"}},function(a){return{init:function(){},newTagItem:function(){var b=a.viewport(),d=a.tagItem(".new");1>d.length&&(d=a.view.tagItem().addClass("new").appendTo(b),a.addSubscriber(d.addController("EasySocial.Controller.Photos.Tag")));return d},"{tagButton} click":function(b){a[b.data("photoTagButton")||"toggle"]()},disabled:!0,enable:function(){a.disabled=!1;a.element.addClass("tagging");e.scrollTo&&e.scrollTo(a.photo.content(),250,{offset:{top:-100}});
a.trigger("tagEnter")},disable:function(){a.tagSelection().remove();a.tagItem(".focus").removeClass("focus");a.disabled=!0;a.element.removeClass("tagging");a.trigger("tagLeave")},toggle:function(){a[a.disabled?"enable":"disable"]()},area:{},calculateArea:function(b,d){b||(b="clip");d||(d={x:0,y:0});var e=a.viewport(),g=e.offset();g.width=e.width();g.height=e.height();g.right=g.width+g.left;g.bottom=g.height+g.top;e=a.area;e.top=(e.startY<=e.endY?e.startY:e.endY)+d.y;e.left=(e.startX<=e.endX?e.startX:
e.endX)+d.x;e.width=Math.abs(e.endX-e.startX);e.height=Math.abs(e.endY-e.startY);e.right=e.width+e.left;e.bottom=e.height+e.top;"clip"==b&&(e.top<=g.top&&(e.top=g.top),e.bottom>=g.bottom&&(e.bottom=g.bottom),e.left<=g.left&&(e.left=g.left),e.right>=g.right&&(e.right=g.right),e.width=e.right-e.left,e.height=e.bottom-e.top);"flip"==b&&(e.top<=g.top&&(e.top=g.top),e.left<=g.left&&(e.left=g.left),e.right>=g.right&&(e.right=g.right,e.left=e.right-e.width),e.bottom>=g.bottom&&(e.bottom=g.bottom,e.top=e.bottom-
e.height));e.pixel={top:e.top-g.top,left:e.left-g.left,width:e.width,height:e.height};e.decimal={top:e.pixel.top/g.height,left:e.pixel.left/g.width,width:e.width/g.width,height:e.height/g.height};e.percentage={top:100*e.decimal.top+"%",left:100*e.decimal.left+"%",width:100*e.decimal.width+"%",height:100*e.decimal.height+"%"};g=a.options.drawTolerance;a.autodraw=e.width<g&&e.height<g;return e},setPivot:function(b,d,e){var g=a.area;g[b+"X"]=d;g[b+"Y"]=e},drawing:!1,autodraw:!1,drawTag:function(){var b=
a.calculateArea();options=a.options;a.autodraw&&(b.endX=b.startX+options.width,b.endY=b.startY+options.height,a.calculateArea("flip",{x:options.width/-2,y:options.height/-2}));a.newTagItem().css(b.percentage).trigger("focusInput")},"{viewport} mousedown":function(b,d){a.disabled||d.target!==b[0]||(d.preventDefault(),a.tagItem(".focus").removeClass("focus"),a.drawing=!0,a.setPivot("start",d.pageX,d.pageY),e(document).on("mousemove.tagger",function(b){a.drawing&&(a.setPivot("end",b.pageX,b.pageY),a.drawTag())}).on("mouseup.tagger",
function(b){a.setPivot("end",b.pageX,b.pageY);a.drawTag();e(document).off("mousemove.tagger mouseup.tagger")}))},createTag:function(b){b=e.extend({photo_id:a.photo.id},b,a.area.decimal);var d=EasySocial.ajax("site/controllers/photos/createTag",b);a.trigger("tagCreate",[d,b,a]);return d},removeTag:function(b){var d=EasySocial.ajax("site/controllers/photos/removeTag",{id:b});a.trigger("tagRemove",[d,b,a]);return d},addTag:function(b,d,f){d=e.buildHTML(d).addClass("focus").appendTo(a.viewport());f=e.buildHTML(f).appendTo(a.tagListItemGroup());
a.trigger("tagAdd",[b,d,f,a])},"{self} avatarEnter":function(){a.tagItem().hide();a.disable()},"{self} avatarLeave":function(){a.tagItem().show()},"{tagRemoveButton} click":function(b,d){var e=b.data("photoTagId");a.removeTag(e);d.stopPropagation()},"{tagRemoveButton} mouseover":function(){a.viewport().addClass("active")},"{tagRemoveButton} mouseout":function(){a.viewport().removeClass("active")}}});EasySocial.Controller("Photos.Tag",{defaultOptions:{view:{menuItem:"site/photos/tags.menu.item"},"{form}":"[data-photo-tag-form]",
"{title}":"[data-photo-tag-title]","{removeButton}":"[data-photo-tag-remove-button]","{textField}":"[data-photo-tag-input]","{menu}":"[data-photo-tag-menu]","{menuItem}":"[data-photo-tag-menu-item]"}},function(a){return{init:function(){a.data=a.options.data},"{self} focusInput":function(){a.textField().focus()},"{textField} keyup":e._.debounce(function(b,d){var f=e.trim(a.textField().val());switch(d.keyCode){case 38:case 40:case 13:case 27:break;default:var g=a.tagger.photo.tags.getTaggedUsers();
EasySocial.ajax("site/controllers/friends/suggestPhotoTagging",{search:f,exclude:g,includeme:"1"}).done(a.render())}},250),"{textField} keypress":function(b,d){var f=e.trim(a.textField().val()),g=a.menuItem(".active");switch(d.keyCode){case 38:a.menuItem().removeClass("active");1>g.length?a.menuItem(":last").addClass("active"):g.prev(a.menuItem.selector).addClass("active");d.preventDefault();break;case 40:a.menuItem().removeClass("active");1>g.length?a.menuItem(":first").addClass("active"):g.next(a.menuItem.selector).addClass("active");
d.preventDefault();break;case 13:0<g.length?g.trigger("click"):a.create({type:"label",label:f});a.menu().hide();break;case 27:a.menu().hide()}},"{menuItem} mouseover":function(b){a.menuItem().removeClass("active");b.addClass("active")},"{menuItem} mouseout":function(b){a.menuItem().removeClass("active")},render:e.Enqueue(function(b){var d=a.menu();!b||1>b.length?d.hide():(d.empty(),e.each(b,function(b,c){a.view.menuItem({item:c}).data("item",c).appendTo(d);d.show()}))}),create:function(b){var d=a.element;
a.data=b;a.title().html(b.label);""!==e.trim(b.label)&&a.tagger.createTag(b).done(function(b,c,d){a.tagger.addTag(b,c,d);a.element.remove()}).fail(function(){d.remove()})},remove:function(){var b=a.element,d=(a.data||{}).id;if(!d)return b.remove();a.tagger.removeTag(d).done(function(){b.remove()})},"{menuItem} click":function(b){b=b.data("item");a.create({uid:b.id,type:"person",label:b.screenName})},"{removeButton} click":function(){a.remove()}}});g.resolve(b)})});EasySocial.module("photos/navigation",
function(e){e.fn.intersectsWith=function(b,a,c,d){var e=this.offset(),e={top:e.top,left:e.left,bottom:e.top+(sourceHeight=this.height()),right:e.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight};b={top:b,left:a,bottom:b+(d||(d=0)),right:a+(c||(c=0)),width:c,height:d};return e.left<=b.right&&b.left<=e.right&&e.top<=b.bottom&&b.top<=e.bottom?{reference:e,subject:b}:!1};var g=EasySocial.Controller("Photos.Navigation",{hostname:"navigation",defaultOptions:{"{navButton}":".es-photo-nav-button",
"{nextButton}":"[data-photo-next-button]","{prevButton}":"[data-photo-prev-button]"}},function(b){return{init:function(){b.setDirection(window.esPhotosNavigationLastDirection)},disabled:!1,disable:function(){b.disabled=!0},enable:function(){b.disabled=!1},setDirection:function(a){b.navButton().removeClass("active");(window.esPhotosNavigationLastDirection=b.currentDirection=a)&&b[a+"Button"]().addClass("active")},"{window} mousemove":function(a,c){if(!(b.disabled||(b.setDirection(null),1>e(c.target).parents().filter(b.photo.content.selector).length))){var d=
b.photo.content().intersectsWith(c.pageY,c.pageX);d&&b.setDirection(d.subject.left<d.reference.right-d.reference.width/2?"prev":"next")}},"{self} tagEnter":function(){b.disable()},"{self} tagLeave":function(){b.enable()},"{self} click":function(a,c){if(!(b.disabled||1>e(c.target).parents().filter(b.photo.content.selector).length)){var d=b.currentDirection;d&&b.trigger("photo"+e.String.capitalize(d),[b.photo])}},"{self} photoNext":function(){},"{self} photoPrev":function(){}}});this.resolve(g)});EasySocial.module("privacy",
function(e){var g=this;EasySocial.require().library("dialog").view("admin/profiles/form.privacy.custom.item").done(function(b){EasySocial.Controller("Profiles.Form.Privacy",{defaultOptions:{path:"admin","{selection}":".privacySelection","{browseButton}":".browseButton","{userDeleteButton}":".userDeleteButton","{customContainer}":".customContainer",view:{customItem:"admin/profiles/form.privacy.custom.item"}}},function(a){return{init:function(){},"{selection} change":function(c,d){var e=b(c).val();
b(c).attr("name");"custom"==e?a.customContainer().show():a.customContainer().hide()},"{userDeleteButton} click":function(a,d){b(a).parents("li").remove()},"{browseButton} click":function(c,d){var e=b(c).attr("id"),g=b(c).data("index"),h=b.rootPath+"administrator/index.php?option=com_easysocial&view=users&layout=listing&show=iframe";"site"==a.options.path&&(h=b.rootPath+"index.php?option=com_easysocial&view=friends&layout=listing&show=iframe");b.dialog({title:"Browse Users & Groups",content:h,body:{css:{width:400,
height:300}},buttons:[{name:"Assign",click:function(){var c=b(".foundryDialog").find("iframe").contents().find("input:checked");if(0<c.length)for(var d=0;d<c.length;d++)if("toggle"!=b(c[d]).attr("name")){var h=b(c[d]).val(),n=b(".foundryDialog").find("iframe").contents().find('input[name="user_'+h+'"]').val(),r=b("ul#privacy_ul"+g+" input:hidden"),u=!0;if(0<r.length)for(var m=0;m<r.length;m++)if(b(r[m]).val()==h){u=!1;break}u&&(html=a.view.customItem({userName:n,eleName:e,userId:h}),b("ul#privacy_ul"+
g).append(html))}b.dialog().close()}},{name:"Close",click:function(){b.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("sharing",function(e){var g=this;EasySocial.require().library("textboxlist").done(function(){EasySocial.Controller("Sharing",{defaultOptions:{"{vendors}":"[data-sharing-vendor]","{emailForm}":"[data-sharing-email]"}},function(b){return{init:function(){b.initLinks();b.initEmail()},initLinks:function(){e.each(b.vendors(),function(a,b){b=e(b);if(!b.data("loaded")){var d=
b.attr("href");b.data("href",d);b.attr("href","javascript:void(0);");b.attr("loaded",!0)}})},initEmail:function(){e.each(b.emailForm(),function(a,c){c=e(c);c.data("loaded")||(b.addPlugin("email"),c.attr("loaded",!0))})},"{vendors} click":function(a,b){var d=a.data("options")||"";window.open(a.data("href"),"",d)}}});e.template("sharing/recipientContent",'[%= title %]<input type="hidden" name="items" value="[%= title %]" />');EasySocial.Controller("Sharing.Email",{defaultOptions:{token:"","{container}":"[data-sharing-email]",
"{frames}":"[data-sharing-email-frame]","{recipients}":"[data-sharing-email-recipients]","{input}":"[data-sharing-email-input]","{content}":"[data-sharing-email-content]","{send}":"[data-sharing-email-send]","{frames}":"[data-sharing-email-frame]","{frameForm}":"[data-sharing-email-form]","{frameSending}":"[data-sharing-email-sending]","{frameDone}":"[data-sharing-email-done]","{frameFail}":"[data-sharing-email-fail]","{failMsg}":"[data-sharing-email-fail-msg]"}},function(b){return{init:function(){b.options.token=
b.container().data("token");b.recipients().textboxlist({view:{itemContent:"sharing/recipientContent"}});b.originalPosition=b.container().css("position")},getRecipients:function(){var a=b.recipients().controller("textboxlist").getAddedItems(),c=[];e.each(a,function(a,b){c.push(b.title)});a=b.input().val();1>c.length&&!e.isEmpty(a)&&c.push(a);return c},getContent:function(){return b.content().val()},"{send} click":function(a,c){if(a.enabled()){a.disabled(!0);b.frames().hide();b.frameSending().show();
var d=b.options.token,e=b.getRecipients(),g=b.getContent();b.submitForm(d,e,g).done(function(){b.frames().hide();b.frameDone().show();setTimeout(function(){b.recipients().controller("textboxlist").clearItems();b.content().val("");b.frameDone().hide();b.frameForm().show()},1E3)}).fail(function(a){b.frames().hide();b.frameFail().show();b.frameForm().show();void 0!==a&&b.failMsg().html(a)}).always(function(){a.enabled(!0)})}},"{input} keypress":function(a,c){if(44===c.which)return b.recipients().controller("textboxlist").addItem(a.val()),
a.val(""),!1},submitForm:function(a,b,d){return EasySocial.ajax("site/controllers/sharing/send",{token:a,recipients:b,content:d})}}});g.resolve()})});EasySocial.module("site/activities/activities",function(e){var g=this;EasySocial.require().script("site/activities/sidebar","site/activities/sidebar.item").view("site/loading/small").done(function(b){EasySocial.Controller("Activities",{defaultOptions:{items:null,"{container}":"[data-activities]","{contentTitle}":"[data-activities-content-title]","{content}":"[data-activities-content]",
"{sidebar}":"[data-activities-sidebar]","{sidebarItem}":"[data-sidebar-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Activities.Sidebar,{"{parent}":a});a.sidebarItem().implement(EasySocial.Controller.Activities.Sidebar.Item,{"{parent}":a})},updatingContents:function(){a.content().html(a.view.loadingContent())},updateContent:function(b,d){a.content().html(b);a.contentTitle().html(d)}}});g.resolve()})});EasySocial.module("site/activities/sidebar",
function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Activities.Sidebar",{defaultOptions:{"{menuItem}":"[data-sidebar-menu]"}},function(a){return{init:function(){},"{menuItem} click":function(c,d){a.menuItem().removeClass("active");b(c).addClass("active")}}});g.resolve()})});EasySocial.module("site/activities/sidebar.item",function(e){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Activities.Sidebar.Item",{defaultOptions:{}},
function(a){return{init:function(){},"{self} click":function(b,d){var e=a.element.data("type"),g=a.element.data("url"),h=a.element.data("title");a.element.data("description");History.pushState({state:1},h,g);a.parent.updatingContents();EasySocial.ajax("site/controllers/activities/getActivities",{type:e}).done(function(b){a.parent.updateContent(b,h)}).fail(function(a){console.log(a)});a.parent.updateContent()}}});g.resolve()})});EasySocial.module("site/activities/apps",function(e){var g=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY").done(function(b){EasySocial.Controller("Activities.Apps.List",
{defaultOptions:{"{item}":"[data-hidden-app-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Activities.Apps.Item)}}});EasySocial.Controller("Activities.Apps.Item",{defaultOptions:{id:"",context:"","{unhideLink}":"[data-hidden-app-unhide]","{content}":"[data-hidden-app-content]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.context=a.element.data("context")},
"{unhideLink} click":function(){EasySocial.ajax("site/controllers/activities/unhideapp",{context:a.options.context,id:a.options.id}).done(function(){a.content().html(b.language("COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY"))}).fail(function(a){console.log(a)})}}});g.resolve()})});EasySocial.module("site/activities/item",function(e){var g=this;EasySocial.require().script().done(function(b){EasySocial.Controller("Activities.Item",{defaultOptions:{"{toggle}":"[data-activity-toggle]","{deleteBtn}":"[data-activity-delete]"}},
function(a){return{init:function(){},"{toggle} click":function(c,d){EasySocial.ajax("site/controllers/activities/toggle",{id:a.element.data("id"),curState:a.element.data("current-state")}).done(function(d,e){b(c).text(d);a.element.data("current-state",e);e?a.element.children("div.es-stream").addClass("isHidden"):a.element.children("div.es-stream").removeClass("isHidden")}).fail(function(a){console.log(a)})},"{deleteBtn} click":function(){var b=a.element.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/activities/confirmDelete"),
bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/activities/delete",{id:b}).done(function(b){a.element.fadeOut();EasySocial.dialog().close()})}}})}}});g.resolve()})});EasySocial.module("site/activities/list",function(e){var g=this;EasySocial.require().view("site/loading/small").script("site/activities/item").done(function(b){b.fn.visible=function(a){var c=b(this),d=b(window),e=d.scrollTop(),d=e+d.height(),g=c.offset().top,c=g+c.height();return(!0===a?g:c)<=d&&(!0===a?
c:g)>=e};EasySocial.Controller("Activities.List",{defaultOptions:{"{item}":"[data-activity-item]","{pagination}":"[data-activity-pagination]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Activities.Item);a.on("scroll.activities",window,b._.debounce(function(){a.loading||a.pagination().visible()&&a.loadMore()},250))},loadMore:function(){var c=b("[data-sidebar-menu].active").data("type"),d=a.pagination().data("startlimit");
""!=d&&(a.loading=!0,EasySocial.ajax("site/controllers/activities/getActivities",{limitstart:d,loadmore:"1",type:c},{beforeSend:function(){a.pagination().html(a.view.loadingContent())}}).done(function(b,c){a.pagination().data("startlimit",c);a.pagination().before(b);a.item().implement(EasySocial.Controller.Activities.Item)}).fail(function(a){return a}).always(function(){a.loading=!1;a.pagination().html("")}))}}});g.resolve()})});EasySocial.module("site/apps/apps",function(e){var g=this;EasySocial.require().library("history").view("site/loading/small").done(function(b){EasySocial.Controller("Apps",
{defaultOptions:{requireTerms:!0,"{content}":"[data-apps-listing]","{sort}":"[data-apps-sort]","{filter}":"[data-apps-filter]","{item}":"[data-apps-item]","{sorting}":"[data-apps-sorting]","{title}":"[data-page-apps-title]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.initAppItem()},initAppItem:function(){a.item().implement(EasySocial.Controller.Apps.Item,{requireTerms:a.options.requireTerms})},"{filter} click":function(c,d){a.sort().removeClass("active");a.filter().removeClass("active");
b(c).addClass("active");var e=b(c).data("apps-filter-type"),g=b(c).data("apps-filter-url"),h=b(c).data("apps-title");a.title().html(h);a.options.filter=e;History.pushState({state:1},"",g);"mine"==e?a.sorting().hide():a.sorting().show();EasySocial.ajax("site/controllers/apps/getApps",{filter:e},{beforeSend:function(){a.sort(".alphabetical").addClass("active");a.content().html(a.view.loading())}}).done(function(b){a.content().html(b);a.initAppItem()})},"{sort} click":function(c,d){var e=b(c).data("apps-sort-type"),
g=b(c).data("apps-sort-url");History.pushState({state:1},"",g);a.sort().removeClass("active");b(c).addClass("active");EasySocial.ajax("site/controllers/apps/getApps",{sort:e,filter:a.options.filter},{beforeSend:function(){a.content().html(a.view.loading())}}).done(function(b){a.content().html(b);a.initAppItem()})}}});EasySocial.Controller("Apps.Item",{defaultOptions:{id:null,requireTerms:!0,"{install}":"[data-apps-item-install]","{installed}":"[data-apps-item-installed]","{settings}":"[data-apps-item-settings]",
view:{installAppForm:"site/apps/dialog.install",uninstallAppForm:"site/apps/dialog.uninstall"}}},function(a){return{init:function(){a.element.data("id")&&(a.options.id=a.element.data("id"))},"{install} click":function(b){EasySocial.dialog({content:EasySocial.ajax("site/views/apps/getTnc"),bindings:{"{cancelButton} click":function(){EasySocial.dialog().close()},"{installButton} click":function(){!a.options.requireTerms||this.agreeCheckbox().is(":checked")?(this.termsError().hide(),a.installApp()):
this.termsError().show()}}})},installApp:function(){var b=EasySocial.ajax("site/controllers/apps/installApp",{id:a.options.id});EasySocial.dialog({content:b,bindings:{"{closeButton} click":function(){EasySocial.dialog().close()}}});b.done(function(){a.install().enabled(!0);a.install().hide();a.installed().show();a.settings().hide()})},"{settings} click":function(b,d){EasySocial.dialog({content:EasySocial.ajax("site/views/apps/settings",{id:a.options.id}),bindings:{}})},"{installed} click":function(b){b.enabled()&&
(b.disabled(!0),EasySocial.dialog({content:EasySocial.ajax("site/views/apps/confirmUninstall"),bindings:{"{parent.closeButton} click":function(){a.installed().enabled(!0)},"{cancelButton} click":function(){a.installed().enabled(!0);EasySocial.dialog().close()},"{uninstallButton} click":function(){a.uninstallApp()}}}))},uninstallApp:function(){var b=EasySocial.ajax("site/controllers/apps/uninstallApp",{id:a.options.id});EasySocial.dialog({content:b,bindings:{"{closeButton} click":function(){EasySocial.dialog().close()}}});
b.done(function(){a.installed().enabled(!0);a.installed().hide();a.settings().hide();a.install().show()})}}});g.resolve()})});EasySocial.module("site/badges/badge",function(e){EasySocial.Controller("Badges.Badge",{defaultOptions:{id:0,total:0,"{achieversList}":"[data-badge-achievers-list]","{achiever}":"[data-badge-achievers-achiever]","{loadIndicator}":"[data-badge-achievers-loading]","{loadButton}":"[data-badge-achievers-load]"}},function(e){return{init:function(){e.options.id=e.element.data("id");
e.options.total=e.element.data("total-achievers")},"{loadButton} click":function(b){var a=e.achiever().length;b.enabled()&&a<e.options.total&&(b.disabled(!0),b.hide(),e.loadIndicator().show(),EasySocial.ajax("site/controllers/badges/loadAchievers",{id:e.options.id,start:a}).done(function(a){e.achieversList().append(a);b.enabled(!0);e.loadIndicator().hide();e.achiever().length<e.options.total&&b.show()}).fail(function(a){}))},loadAchievers:function(){}}});this.resolve()});EasySocial.module("site/comments/control",
function(e){var g=this;EasySocial.Controller("CommentsControl",{defaultOptions:{interval:30}},function(b){return{init:function(){b.startUpdate()},$Blocks:{},startUpdate:function(){b.options.monitoring=!0;b.updateBlocks()},stopUpdate:function(){b.options.monitoring=!1},updateBlocks:function(){(b.updateBlocks=e._.debounce(function(){var a=b.populate();if(!b.options.monitoring)return!1;EasySocial.ajax("site/controllers/comments/getUpdates",{data:a}).done(function(a){e.each(a,function(a,c){e.each(c,function(c,
e){var f=b.$Blocks[a][c];f._destroyed||f.updateComment(e)})})}).always(function(){b.updateBlocks()})},1E3*b.options.interval))()},register:function(a){var c=a.options.uid,d=a.options.element+"."+a.options.group;void 0===b.$Blocks[d]&&(b.$Blocks[d]={});b.$Blocks[d][c]=a;a.trigger("commentBlockRegistered")},populate:function(){var a={};e.each(b.$Blocks,function(b,d){a[b]={};e.each(d,function(d,e){a[b][d]=e._export()})});return a}}});EasySocial.ready(function(){EasySocial.Comments=e("body").addController("EasySocial.Controller.CommentsControl");
g.resolve()})});EasySocial.module("site/comments/frame",function(e){var g=this;EasySocial.require().library("expanding").script("site/comments/item").language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL","COM_EASYSOCIAL_COMMENTS_STATUS_SAVING","COM_EASYSOCIAL_COMMENTS_STATUS_SAVED").done(function(){EasySocial.Controller("Comments",{defaultOptions:{group:"user",element:"stream",uid:0,url:"","{actionContent}":"[data-action-contents-comments]","{actionLink}":"[data-stream-action-comments]","{stat}":"[data-comments-stat]",
"{load}":"[data-comments-load]","{list}":"[data-comments-list]","{item}":"[data-comments-item]","{form}":"[data-comments-form]"}},function(b){return{init:function(){b.options.uid=b.element.data("uid")||b.options.uid;b.options.element=b.element.data("element")||b.options.element;b.options.group=b.element.data("group")||b.options.group;b.options.url=b.element.data("url")||b.options.url;b.$Stat=b.addPlugin("stat");b.$Load=b.addPlugin("load");b.$List=b.addPlugin("list");b.$Form=b.addPlugin("form");EasySocial.require().script("site/comments/control").done(function(){EasySocial.Comments.register(b)});
b.trigger("commentInit",[b])},$Comments:{},registerComment:function(a){b.$Comments[a.options.id]=a},"{actionLink} click":function(){b.actionContent().toggle()},_export:function(){return{total:b.$Stat.total(),count:b.$Stat.count(),ids:e._.keys(b.$Comments)}},updateComment:function(a){var c=[];e.each(a.ids,function(a,f){if(!0!==f)if(!1===f)b.trigger("commentDeleted",[a]);else{var g=!1;e.each(b.$Comments,function(c,e){if(c>a)return b.$List.addToList(f,c,!1),g=!0,!1});g||b.$List.addToList(f,"append",
!1);c.push(f)}});b.$Stat.total(a.total);b.trigger("oldCommentsLoaded",[c])}}});EasySocial.Controller("Comments.List",{defaultOptions:{"{list}":"[data-comments-list]","{item}":"[data-comments-item]"}},function(b){return{init:function(){b.initItemController(b.item(),!1)},initItemController:function(a,c){a.addController("EasySocial.Controller.Comments.Item",{controller:{parent:b.parent},isNew:c});return a},"{parent} newCommentSaved":function(a,c,d){b.addToList(d)},addToList:function(a,c,d){c=void 0===
c?"append":c;d=void 0===d?!0:d;a=e(a);b.initItemController(a,d);if("append"==c||"prepend"==c)if(d="append"==c?":last":":first",c="append"==c?"after":"before",0===b.item().length)b.list().html(a);else b.item(d)[c](a);else c=b.parent.$Comments[c],void 0!==c&&c.element.before(a);b.parent.actionContent().show()},"{parent} commentDeleted":function(a,c,d){void 0!==b.parent.$Comments[d]&&(b.parent.$Comments[d].element.remove(),delete b.parent.$Comments[d])}}});EasySocial.Controller("Comments.Stat",{defaultOptions:{"{stats}":"[data-comments-stats]",
count:0,total:0,limit:10}},function(b){return{init:function(){b.options.count=b.element.data("count");b.options.total=b.element.data("total")},total:function(a){void 0!==a&&(b.options.total=parseInt(a),b.stats().text(e.language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL",b.count(),b.total())));return b.options.total},count:function(a){void 0!==a&&(b.options.count=parseInt(a),b.stats().text(e.language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL",b.count(),b.total())));return b.options.count},getNextCycle:function(){var a=
Math.max(b.total()-b.count()-b.options.limit,0),c=b.total()-b.count()-a;return{start:a,limit:c}},"{parent} oldCommentsLoaded":function(a,c,d){a=d.length;b.count(b.count()+a)},"{parent} newCommentSaved":function(){b.total(b.total()+1);b.count(b.count()+1)},"{parent} commentDeleted":function(){b.total(b.total()-1);b.count(b.count()-1)}}});EasySocial.Controller("Comments.Load",{defaultOptions:{"{load}":"[data-comments-load]","{loadMore}":"[data-comments-load-loadMore]"}},function(b){return{init:function(){},
"{loadMore} click":function(a,c){if(a.enabled()){a.disabled(!0);var d=b.parent.$Stat.getNextCycle();if(0==d.limit)return!1;b.loadComments(d.start,d.limit).done(function(c){var g=c.slice().reverse();e.each(g,function(a,c){b.parent.$List.addToList(c,"prepend",!1)});b.parent.trigger("oldCommentsLoaded",[c]);a.enabled(!0);0==d.start&&b.load().hide()}).fail(function(a){b.parent.trigger("oldCommentsLoadError",[a])})}},loadComments:function(a,c){return EasySocial.ajax("site/controllers/comments/load",{uid:b.parent.options.uid,
element:b.parent.options.element,group:b.parent.options.group,start:a,length:c||10})}}});EasySocial.Controller("Comments.Form",{defaultOptions:{"{input}":"[data-comments-form-input]","{submit}":"[data-comments-form-submit]","{status}":"[data-comments-form-status]"}},function(b){return{init:function(){var a=b.input();a.one("click",function(){a.expandingTextarea()})},"{input} keypress":function(a,c){13!=c.keyCode||c.shiftKey||c.altKey||c.ctrlKey||c.metaKey||b.submitComment()},"{submit} click":function(a,
c){a.enabled()&&b.submitComment()},submitComment:function(){var a=b.input().val();if(""==e.trim(a))return!1;b.parent.trigger("newCommentSaving");b.save().done(function(a){b.parent.trigger("newCommentSaved",[a]);b.submit().enabled(!0)}).fail(function(a){b.parent.trigger("newCommentSaveError",[a.message])})},save:function(){var a={url:b.parent.options.url};return EasySocial.ajax("site/controllers/comments/save",{uid:b.parent.options.uid,element:b.parent.options.element,group:b.parent.options.group,
input:b.input().val(),data:a})},disableForm:function(){b.input().attr("disabled",!0);b.submit().disabled(!0)},enableForm:function(){b.input().removeAttr("disabled");b.submit().enabled(!0)},"{parent} newCommentSaving":function(){b.status().show();b.status().removeClass("label-important label-success label-info");b.status().addClass("label-info");b.status().text(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVING"));b.disableForm()},"{parent} newCommentSaved":function(){b.status().show();b.status().text(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVED"));
b.status().removeClass("label-important label-success label-info");b.status().addClass("label-success");setTimeout(function(){b.status().fadeOut("fast")},2E3);b.enableForm();b.input().val("");b.input().expandingTextarea("resize")},"{parent} newCommentSaveError":function(a,c,d){b.status().show();b.status().removeClass("label-important label-success label-info");b.status().addClass("label-important");b.status().text(d);b.enableForm()}}});g.resolve()})});EasySocial.module("site/comments/item",function(e){var g=
this;EasySocial.require().language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_LOADING","COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_DELETING","COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR","COM_EASYSOCIAL_LIKES_LIKE","COM_EASYSOCIAL_LIKES_UNLIKE").done(function(){EasySocial.Controller("Comments.Item",{defaultOptions:{id:0,isNew:!1,"{frame}":"[data-comments-item-frame]","{avatar}":"[data-comments-item-avatar]","{commentFrame}":"[data-comments-item-commentFrame]",
"{author}":"[data-comments-item-author]","{action}":"[data-comments-item-actions]","{edit}":"[data-comments-item-actions-edit]","{delete}":"[data-comments-item-actions-delete]","{spam}":"[data-comments-item-actions-spam]","{comment}":"[data-comments-item-comment]","{meta}":"[data-comments-item-meta]","{date}":"[data-comments-item-date] a","{like}":"[data-comments-item-like]","{likeCount}":"[data-comments-item-likeCount]","{editFrame}":"[data-comments-item-editFrame]","{editInput}":"[data-comments-item-edit-input]",
"{editSubmit}":"[data-comments-item-edit-submit]","{editStatus}":"[data-comments-item-edit-status]","{statusFrame}":"[data-comments-item-statusFrame]"}},function(b){return{init:function(){b.options.id=b.element.data("id");b.parent.registerComment(b);b.status=b.element.addController("EasySocial.Controller.Comments.Item.Status",{controller:{parent:b.parent,item:b}})},"{like} click":function(a){a.enabled()&&(a.disabled(!0),b.likeComment().done(function(c,d,f){a.enabled(!0);b.likeCount().text(d);f=e("<div></div>").html(f).text();
b.likeCount().attr("data-original-title",f);b.like().find("a").text(e.language(c?"COM_EASYSOCIAL_LIKES_UNLIKE":"COM_EASYSOCIAL_LIKES_LIKE"))}).fail(function(){}))},likeComment:function(){return EasySocial.ajax("site/controllers/comments/like",{id:b.options.id})},"{likeCount} click":function(){EasySocial.dialog({content:b.getLikedUsers()})},getLikedUsers:function(){return EasySocial.ajax("site/controllers/comments/likedUsers",{id:b.options.id})},"{edit} click":function(a){a.enabled()&&(a.disabled(!0),
b.trigger("commentEditLoading",[b.options.id]),b.getRawComment().done(function(a){b.trigger("commentEditLoaded",[b.options.id],a);b.editInput().val(a);b.editInput().focus();b.editInput().expandingTextarea()}).fail(function(a){b.trigger("commentEditLoadError",[b.options.id,a])}))},getRawComment:function(){return EasySocial.ajax("site/controllers/comments/getRawComment",{id:b.options.id})},"{editInput} keyup":function(a,c){if(13==c.which||27==c.which){switch(c.which){case 13:c.shiftKey||c.ctrlKey||
c.altKey||c.metaKey||b.submitEdit();break;case 27:b.trigger("commentEditCancel",[b.options.id])}b.edit().enabled(!0)}},"{editSubmit} click":function(){b.submitEdit()},submitEdit:function(){var a=e.trim(b.editInput().val());if(""==a)return!1;b.trigger("commentEditSaving",[b.options.id,a]);b.saveEdit(a).done(function(a){b.trigger("commentEditSaved",[b.options.id,a]);b.comment().html(a);b.edit().enabled(!0)}).fail(function(a){b.trigger("commentEditSaveError",[b.options.id,a])})},saveEdit:function(a){return EasySocial.ajax("site/controllers/comments/update",
{id:b.options.id,input:a})},"{delete} click":function(a){a.enabled()&&(a.disabled(!0),b.frame().hide(),b.commentFrame().show(),b.element.clone(),EasySocial.dialog({content:EasySocial.ajax("site/views/comments/confirmDelete",{id:b.options.id}),selectors:{"{deleteButton}":"[data-delete-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{deleteButton} click":function(){EasySocial.dialog().close();b.parent.trigger("commentDeleting",[b.options.id]);b.trigger("commentDeleting");b.deleteComment().done(function(){b.parent.trigger("commentDeleted",
[b.options.id]);a.enabled(!0)}).fail(function(a){b.parent.trigger("commentDeleteError",[b.options.id,a]);b.trigger("commentDeleteError",[b.options.id,a])})},"{cancelButton} click":function(){EasySocial.dialog().close();a.enabled(!0)}}}))},deleteComment:function(){return EasySocial.ajax("site/controllers/comments/delete",{id:b.options.id})}}});EasySocial.Controller("Comments.Item.Status",{defaultOptions:{"{frame}":"[data-comments-item-frame]","{statusFrame}":"[data-comments-item-statusFrame] div",
"{commentFrame}":"[data-comments-item-commentFrame]","{editFrame}":"[data-comments-item-editFrame]"}},function(b){return{init:function(){},setStatus:function(a){b.frame().hide();b.statusFrame().html(a);b.statusFrame().show()},"{self} commentEditLoading":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_LOADING"))},"{self} commentEditLoaded":function(){b.frame().hide();b.editFrame().show()},"{self} commentEditLoadError":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR"))},
"{self} commentEditCancel":function(){b.frame().hide();b.commentFrame().show()},"{self} commentEditSaving":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVING"))},"{self} commentEditSaved":function(){b.frame().hide();b.commentFrame().show()},"{self} commentEditSaveError":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR"))},"{self} commentDeleting":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_DELETING"))},"{self} commentDeleteError":function(a,
c,d,f){f=f||e.language("COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR");b.setStatus(f)}}});g.resolve()})});EasySocial.module("site/conversations/api",function(e){var g=this;EasySocial.require().library("dialog").done(function(){e(document).on("click.es.conversations.compose","[data-es-conversations-compose]",function(){var b=e(this),a=b.data("es-conversations-id"),c=b.data("es-conversations-listid");EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/composer",{id:a,listId:c}),bindings:{"{sendButton} click":function(){var b=
e("input[name=recipient\\[\\]]"),f=e("[data-composer-message]").val(),g=[];e(b).each(function(){g.push(e(this).val())});EasySocial.ajax("site/controllers/conversations/store",{uid:g,message:f}).done(function(b){a&&EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sent",{id:a}),bindings:{"{viewButton} click":function(){document.location=b}}});c&&EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sentList",{id:c}),bindings:{"{viewButton} click":function(){document.location=
b}}})}).fail(function(a){self.setMessage(a)})}}})});g.resolve()})});EasySocial.module("site/conversations/conversations",function(e){var g=this;EasySocial.require().script("site/conversations/mailbox","site/conversations/item","site/conversations/filter").language("COM_EASYSOCIAL_NO_BUTTON").done(function(b){EasySocial.Controller("Conversations",{defaultOptions:{"{mailbox}":"[data-conversations-mailbox]","{list}":"[data-conversations-list]","{content}":"[data-conversations-content]","{item}":"[data-conversations-item]",
"{actions}":"[data-conversations-actions]","{filterItem}":"[data-conversations-filter]","{checkAll}":"[data-conversations-checkAll]","{checkbox}":"[data-conversationItem-checkbox]","{delete}":"[data-conversations-delete]","{archive}":"[data-conversations-archive]","{unarchive}":"[data-conversations-unarchive]","{unread}":"[data-conversations-unread]","{read}":"[data-conversations-read]"}},function(a){return{init:function(){a.mailbox().implement(EasySocial.Controller.Conversations.Mailbox,{"{parent}":a});
a.item().implement(EasySocial.Controller.Conversations.Item,{"{parent}":a});a.filterItem().implement(EasySocial.Controller.Conversations.Filter,{"{parent}":a})},"{filterItem} click":function(c){a.filterItem().removeClass("active");b(c).addClass("active")},"{checkbox} change":function(b){if(0>=a.checkbox(":checked").length&&!b.is(":checked"))return a.actions().removeClass("is-checked");a.actions().addClass("is-checked")},"{checkAll} click":function(c){if(0>=a.checkbox().length)return b(c).prop("checked",
!1),!1;c.is(":checked")?a.checkbox(":not(:checked)").click():a.checkbox(":checked").click()},showEmpty:function(){a.content().addClass("is-empty")},hideEmpty:function(){a.content().removeClass("is-empty")},toggleLoading:function(){a.content().removeClass("is-empty").toggleClass("is-loading")},updateContent:function(b,d){void 0!=d?a.content().addClass("layout-"+d):a.content().removeClass("layout-archives");a.actions().removeClass("is-checked");a.checkAll().removeAttr("checked");a.list().html(b)},getSelectedConversations:function(){if(0>=
a.checkbox(":checked").length)return!1;var c=[];a.checkbox(":checked").each(function(a,e){c.push(b(e).val())});return c},"{archive} click":function(){var c=a.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmArchive",{ids:c}),bindings:{"{confirmButton} click":function(){b("[data-conversation-archive-form]").submit()}}})},"{unarchive} click":function(){var c=a.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmUnarchive",
{ids:c}),bindings:{"{confirmButton} click":function(){b("[data-conversation-archive-form]").submit()}}})},"{delete} click":function(){var c=a.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDelete",{ids:c}),bindings:{"{deleteButton} click":function(){b("[data-conversation-delete-form]").submit()}}})},"{read} click":function(){if(0>=a.checkbox(":checked").length)return!1;var c=[];a.checkbox(":checked").each(function(a,e){c.push(b(e).val())});EasySocial.ajax("site/controllers/conversations/markRead",
{ids:c}).done(function(){a.checkbox().parents("[data-conversations-item]").removeClass("unread").addClass("read");a.mailbox().controller().updateCounters()}).fail(function(b){a.setMessage(b)})},"{unread} click":function(){if(0>=a.checkbox(":checked").length)return!1;var c=[];a.checkbox(":checked").each(function(a,e){c.push(b(e).val())});EasySocial.ajax("site/controllers/conversations/markUnread",{ids:c}).done(function(){a.checkbox().parents("[data-conversations-item]").removeClass("read").addClass("unread");
a.mailbox().controller().updateCounters()}).fail(function(a){console.log(a)})}}});g.resolve()})});EasySocial.module("site/conversations/mailbox",function(e){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Conversations.Mailbox",{defaultOptions:{"{item}":"[data-mailboxItem]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Conversations.Mailbox.Item,{"{parent}":a})},updateCounters:function(){a.item(".active").controller().updateCounter()},
updateContent:function(b,d){a.parent.updateContent(b,d)},showEmpty:function(){a.parent.showEmpty()},hideEmpty:function(){a.parent.hideEmpty()},toggleLoading:function(){a.parent.toggleLoading()}}});EasySocial.Controller("Conversations.Mailbox.Item",{defaultOptions:{"{counter}":"[data-mailboxItem-counter]",view:{emptyTemplate:"site/conversations/default.item.empty"}}},function(a){return{init:function(){},updateCounter:function(){EasySocial.ajax("site/controllers/conversations/getCount",{mailbox:a.element.data("mailbox")}).done(function(b){0>=
b?a.counter().html(""):a.counter().html("("+b+")")})},toggleLoading:function(){a.element.toggleClass("loading")},"{self} click":function(){var b=a.element.data("url"),d=a.element.data("title"),e=a.element.data("mailbox");a.parent.item().removeClass("active");a.element.addClass("active");History.pushState({state:1},d,b);EasySocial.ajax("site/views/conversations/getItems",{mailbox:e,limitstart:0},{beforeSend:function(){a.toggleLoading();a.parent.toggleLoading()}}).done(function(b,c){a.toggleLoading();
a.parent.toggleLoading();if(0>=b.length)return a.parent.updateContent(""),a.parent.showEmpty();a.parent.hideEmpty();a.parent.updateContent(b,a.element.data("mailbox"))})}}});g.resolve()})});EasySocial.module("site/conversations/item",function(e){var g=this;EasySocial.require().script("site/conversations/mailbox").done(function(b){EasySocial.Controller("Conversations.Item",{defaultOptions:{"{checkbox}":"[data-conversationItem-checkbox]"}},function(a){return{init:function(){},"{checkbox} change":function(c){return b(c).is(":checked")?
a.element.addClass("selected"):a.element.removeClass("selected")}}});g.resolve()})});EasySocial.module("site/conversations/filter",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Conversations.Filter",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(){var c=a.element.data("filter");a.parent.item("."+c);if(1==b("[data-mailboxitem]").filter(".active").length){var d=b("[data-mailboxitem]").filter(".active"),e=d.data("url"),g=d.data("title"),
h=d.data("mailbox");History.pushState({state:1},g,e);EasySocial.ajax("site/views/conversations/getItems",{mailbox:h,filter:c,limitstart:0},{beforeSend:function(){a.parent.toggleLoading()}}).done(function(b,c){a.parent.toggleLoading();if(0>=b.length)return a.parent.updateContent(""),a.parent.showEmpty();a.parent.hideEmpty();a.parent.updateContent(b,h)})}}}});g.resolve()})});EasySocial.module("site/conversations/read",function(e){var g=this;EasySocial.require().library("dialog").script("site/conversations/composer",
"site/friends/suggest").language("COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY","COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY").done(function(b){EasySocial.Controller("Conversations.Read",{defaultOptions:{id:"",attachments:!0,location:!1,maxSize:"3mb",extensionsAllowed:"",attachmentController:null,composerController:null,"{item}":"[data-readConversation-item]","{items}":"[data-readConversation-items]","{composer}":"[data-readConversation-composer]","{replyButton}":"[data-readConversation-replyButton]",
"{addParticipant}":"[data-readConversation-addParticipant]","{leaveConversation}":"[data-readConversation-leaveConversation]","{delete}":"[data-readConversation-delete]","{attachments}":"[data-uploaderQueue-id]","{replyNotice}":"[data-readConversation-replyNotice]","{readLoadMore}":"[data-readconversation-load-more]",view:{messageItem:"site/conversations/read.message"}}},function(a){return{init:function(){a.composer().implement(EasySocial.Controller.Conversations.Composer,{"{uploader}":"[data-readConversation-attachment]",
"{location}":"[data-readConversation-location]",maxSize:a.options.maxSize,extensionsAllowed:a.options.extensionsAllowed});a.options.composerController=a.composer().controller();a.options.attachments&&(a.options.attachmentController=a.options.composerController.uploader().controller());a.options.location&&(a.options.locationController=a.options.composerController.location().controller());a.item().implement(EasySocial.Controller.Conversations.Read.Item);a.options.id=a.element.data("id")},resetForm:function(){a.options.composerController.resetForm();
a.options.location&&a.options.locationController.removeLocation();a.options.attachments&&a.options.attachmentController.reset()},"{readLoadMore} click":function(c){var d=b(c).data("id"),e=b(c).data("limitstart");a.readLoadMore().hide();b(".loading-indicator").show();EasySocial.ajax("site/controllers/conversations/loadPrevious",{id:d,limitstart:e}).done(function(d,e){b.buildHTML(d).prependTo(a.items()).addController("EasySocial.Controller.Conversations.Read.Item");0==e?a.readLoadMore().hide():(a.readLoadMore().show(),
b(c).data("limitstart",e))}).always(function(){b(".loading-indicator").hide()})},"{replyButton} click":function(c,d){d.preventDefault();var e=a.options.composerController.editor().val(),g=[];if(0>=e.length)return a.replyNotice().html(b.language("COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY")).addClass("alert alert-error").removeClass("alert-success"),!1;a.options.attachments&&a.attachments().each(function(a,c){g.push(b(c).val())});e={id:a.options.id,message:e};a.options.attachments&&(e["upload-id"]=
g);a.options.location&&(e.address=a.options.locationController.locationInput().val(),e.latitude=a.options.locationController.locationLatitude().val(),e.longitude=a.options.locationController.locationLongitude().val());a.replyButton().attr("disabled",!0);EasySocial.ajax("site/controllers/conversations/reply",e).done(function(c){a.replyNotice().html(b.language("COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY")).addClass("alert alert-success").removeClass("alert-error");c=b(c);c.implement(EasySocial.Controller.Conversations.Read.Item);
a.items().append(c);a.resetForm()}).always(function(){a.replyButton().attr("disabled",!1)});return!1},"{leaveConversation} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmLeave",{id:a.options.id})})},"{addParticipant} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/addParticipantsForm",{id:a.options.id})})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDelete",
{ids:[a.options.id]}),bindings:{"{deleteButton} click":function(){b("[data-conversation-delete-form]").submit()}}})},addItem:function(b){a.messageList().append(a.view.messageItem({item:b}));a.textMessage().val("").focus()}}});EasySocial.Controller("Conversations.Read.Item",{defaultOptions:{id:null,"{attachmentsWrapper}":"[data-conversation-attachment-wrapper]","{attachments}":"[data-conversation-attachment]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.attachments().implement(EasySocial.Controller.Conversations.Read.Item.Attachment,
{"{parent}":a})},removeAttachment:function(c,d){b(c).remove();0==a.attachments().length&&a.attachmentsWrapper().hide()}}});EasySocial.Controller("Conversations.Read.Item.Attachment",{defaultOptions:{"{deleteAttachment}":"[data-attachment-delete]"}},function(a){return{init:function(){},"{deleteAttachment} click":function(c,d){var e=b(c).data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDeleteAttachment",{id:e}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/conversations/deleteAttachment",
{id:e}).done(function(){a.parent.removeAttachment(a.element);EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/attachmentDeleted",{})})}).fail(function(b){a.setMessage(b)})}}})}}});g.resolve()})});EasySocial.module("site/dashboard/apps",function(e){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Dashboard.Apps",{defaultOptions:{parent:null,pageTitle:null,"{item}":"[data-dashboardApps-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Dashboard.Apps.Item,
{"{parent}":a,"{dashboard}":a.parent,pageTitle:a.options.pageTitle})}}});EasySocial.Controller("Dashboard.Apps.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(c,d){d.preventDefault();var e=a.element.data("layout"),g=a.element.data(e+"-url"),h=a.element.data("title"),p=a.element.data("description"),s=a.element.data("id");"canvas"==e?window.location=g:(h=b._.isEmpty(a.options.pageTitle)?h:a.options.pageTitle,History.pushState({state:1},h,g),a.dashboard.content().html(""),
a.dashboard.updatingContents(),a.element.addClass("loading"),EasySocial.ajax("site/controllers/dashboard/getAppContents",{appId:s}).done(function(b){a.dashboard.updateHeading(h,p);a.dashboard.updateContents(b)}).fail(function(a){return a}).always(function(){a.element.removeClass("loading")}))}}});g.resolve()})});EasySocial.module("site/dashboard/dashboard",function(e){var g=this;EasySocial.require().script("site/dashboard/apps","site/dashboard/feeds","site/dashboard/sidebar","site/stream/filter").done(function(b){EasySocial.Controller("Dashboard",
{defaultOptions:{"{heading}":"[data-dashboard-heading]","{sidebar}":"[data-dashboard-sidebar]","{content}":"[data-dashboard-real-content]","{feeds}":"[data-dashboard-feeds]","{apps}":"[data-dashboard-apps]","{saveHashTag}":"[data-hashtag-filter-save]"}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Dashboard.Sidebar,{"{parent}":a});a.feedsController=a.feeds().addController(EasySocial.Controller.Dashboard.Feeds,{"{parent}":a});a.apps().implement(EasySocial.Controller.Dashboard.Apps,
{"{parent}":a,pageTitle:a.options.pageTitle})},updateHeading:function(b,d){a.heading().find("[data-heading-title]").html(b);a.heading().find("[data-heading-desc]").html(d)},updatingContents:function(){a.element.addClass("loading")},updateContents:function(b){a.element.removeClass("loading");a.content().html(b)},"{saveHashTag} click":function(c){var d=c.data("tag");EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmSaveFilter",{tag:d}),bindings:{"{saveButton} click":function(){this.inputWarning().hide();
filterName=this.inputTitle().val();""==filterName?this.inputWarning().show():EasySocial.ajax("site/controllers/stream/addFilter",{title:filterName,tag:d}).done(function(c,d){var e=b.buildHTML(c);a.feedsController.addFilterItem(e);EasySocial.dialog(d);setTimeout(function(){EasySocial.dialog().close()},2E3)})}}})}}});g.resolve()})});EasySocial.module("site/dashboard/feeds",function(e){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Dashboard.Feeds",{defaultOptions:{"{item}":"[data-dashboardFeeds-item]",
"{filter}":"[data-dashboardFeeds-Filter-edit]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Dashboard.Feeds.Item,{"{parent}":a,"{dashboard}":a.parent})},addFilterItem:function(b){b.find("[data-dashboardFeeds-item]").implement(EasySocial.Controller.Dashboard.Feeds.Item,{"{parent}":a,"{dashboard}":a.parent});b.appendTo(a.element)}}});EasySocial.Controller("Dashboard.Feeds.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(){b(".es-streams").removeClass("no-stream");
var c=a.element.data("type"),d=a.element.data("id"),e=a.element.data("url"),g=a.element.data("title"),h=a.element.data("description");a.element.removeClass("has-notice");History.pushState({state:1},g,e);a.dashboard.content().html("");a.dashboard.updatingContents();a.element.addClass("loading");EasySocial.ajax("site/controllers/dashboard/getStream",{type:c,id:d,view:"dashboard"}).done(function(c,d){a.dashboard.updateHeading(g,h);0==d&&b(".es-streams").addClass("no-stream");a.dashboard.updateContents(c)}).fail(function(a){return a}).always(function(){a.element.removeClass("loading")})}}});
g.resolve()})});EasySocial.module("site/dashboard/sidebar",function(e){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Dashboard.Sidebar",{defaultOptions:{"{menuItem}":"[data-dashboardSidebar-menu]","{filterBtn}":"[data-stream-filter-button]","{editIcon}":"[data-dashboardFeeds-Filter-edit]"}},function(a){return{init:function(){},"{menuItem} click":function(c,d){a.menuItem().removeClass("active");b(c).addClass("active")},"{editIcon} click":function(c,d){d.preventDefault();
b(c).route();var e=c.data("id");a.parent.content().html("");a.parent.updatingContents();EasySocial.ajax("site/controllers/stream/getFilter",{id:e}).done(function(b){a.parent.updateContents(b)}).fail(function(a){return a}).always(function(){})},"{filterBtn} click":function(c,d){d.preventDefault();b(c).route();a.parent.content().html("");a.parent.updatingContents();EasySocial.ajax("site/controllers/stream/getFilter",{id:0}).done(function(b){a.parent.updateContents(b)}).fail(function(a){return a}).always(function(){})}}});
g.resolve()})});EasySocial.module("site/followers/api",function(e){var g=this;EasySocial.require().library("dialog","popbox").done(function(){e(document).on("click.es.followers.follow","[data-es-followers-follow]",function(){var b=e(this),a=b.data("es-followers-id"),c=e.Deferred();b.popbox({content:c,id:"es-wrap",type:"followers",toggle:"click"});b.popbox("show");EasySocial.ajax("site/controllers/profile/follow",{id:a,type:"user"}).done(function(b){EasySocial.ajax("site/views/profile/popboxFollow",
{id:a}).done(function(a){c.resolve(a)})})});e(document).on("click.es.followers.unfollow","[data-es-followers-unfollow]",function(){var b=e(this),a=b.data("es-followers-id"),c=e.Deferred();b.popbox({content:c,id:"es-wrap",type:"followers",toggle:"click"});b.popbox("show");EasySocial.ajax("site/controllers/profile/unfollow",{id:a,type:"user"}).done(function(b){EasySocial.ajax("site/views/profile/popboxUnfollow",{id:a}).done(function(a){c.resolve(a)})})});g.resolve()})});EasySocial.module("site/followers/followers",
function(e){var g=this;EasySocial.require().view("site/loading/small").script("site/conversations/composer").done(function(b){EasySocial.Controller("Followers",{defaultOptions:{"{content}":"[data-followers-content]","{filter}":"[data-followers-filter]","{items}":"[data-followers-item]","{followingCounter}":"[data-following-count]",view:{loader:"site/loading/small"}}},function(a){return{init:function(){a.initItemController()},initItemController:function(){a.items().implement(EasySocial.Controller.Followers.Item,
{"{parent}":a})},updateFollowingCounter:function(b){var d=a.followingCounter().html();b=parseInt(d)+b;a.followingCounter().html(b)},updateContents:function(b){a.content().html(b)},"{filter} click":function(b,d){var e=b.data("followers-filter-type"),g=b.data("followers-filter-title"),h=b.data("followers-filter-id"),p=b.data("followers-filter-url");a.filter().removeClass("active");b.addClass("active");History.pushState({state:1},g,p);EasySocial.ajax("site/controllers/followers/filter",{id:h,type:e}).done(function(b){a.updateContents(b);
a.initItemController()})}}});EasySocial.Controller("Followers.Item",{defaultOptions:{"{unfollowButton}":"[data-followers-item-unfollow]","{composer}":"[data-followers-item-compose]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.initComposer()},initComposer:function(){a.composer().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id}})},"{unfollowButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/followers/confirmUnfollow",
{id:a.options.id}),bindings:{"{unfollowButton} click":function(){EasySocial.ajax("site/controllers/followers/unfollow",{id:a.options.id}).done(function(){a.parent.updateFollowingCounter(-1);a.element.remove();EasySocial.dialog().close()})}}})}}});g.resolve()})});EasySocial.module("site/friends/api",function(e){var g=this;EasySocial.require().library("dialog","popbox").done(function(){e(document).on("click.es.friends.cancel","[data-es-friends-cancel]",function(){var b=e(this).data("es-friends-id");
EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancel"),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:b}).done(function(){EasySocial.dialog().close()})}}})});e(document).on("click.es.friends.add","[data-es-friends-add]",function(){var b=e(this),a=b.data("es-friends-id"),c=e.Deferred();b.popbox({content:c,id:"es-wrap",type:"friends",toggle:"click"});b.popbox("show");EasySocial.ajax("site/controllers/friends/request",
{viewCallback:"popboxRequest",id:a}).done(function(a){c.resolve(a)})});g.resolve()})});EasySocial.module("site/friends/friends",function(e){var g=this;EasySocial.require().script("site/friends/list","site/friends/item","site/friends/suggest","site/conversations/composer").view("site/loading/small","site/friends/default.empty","site/friends/list.assign").done(function(b){EasySocial.Controller("Friends.Birthday",{defaultOptions:{"{messageButton}":"[data-upcoming-birthday-message-button]"}},function(a){return{init:function(){a.options.id=
a.element.data("id");a.options.name=a.element.data("name");a.options.avatar=a.element.data("avatar");a.messageButton().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id,name:a.options.name,avatar:a.options.avatar}})}}});EasySocial.Controller("Friends",{defaultOptions:{activeList:null,"{friendList}":"[data-friends-list]","{content}":"[data-friends-content]","{friendItems}":"[data-friends-items]","{friendItem}":"[data-friends-item]","{emptyList}":"[data-friends-emptyItems]",
"{activeTitle}":"[data-friends-activeTitle]","{filterItem}":"[data-friends-filter]","{friendListActions}":"[data-friendList-actions]","{addFriendToList}":"[data-friends-add]","{friendsCounter}":"[data-total-friends]","{pendingCounter}":"[data-total-friends-pending]","{suggestionCounter}":"[data-total-friends-suggestion]","{requestCount}":"[data-frields-request-sent-count]",view:{loader:"site/loading/small",emptyFriendItems:"site/friends/default.empty",addUserForm:"site/friends/list.assign"}}},function(a){return{init:function(){a.friendList().implement(EasySocial.Controller.Friends.List,
{"{parent}":a});a.initFriendItems()},initFriendItems:function(){a.friendListActions().implement(EasySocial.Controller.Friends.List.Actions,{"{parent}":a});a.friendItem().implement(EasySocial.Controller.Friends.Item,{"{parent}":a})},updateFriendsCounter:function(){EasySocial.ajax("site/controllers/friends/getCounters").done(function(b,d,e,g){a.friendsCounter().html(b);a.pendingCounter().html(d);a.requestCount().html(e);a.suggestionCounter().html(g)})},updateListCounters:function(){EasySocial.ajax("site/controllers/friends/getListCounts",
{}).done(function(a){b(a).each(function(a,c){b("[data-list-"+c.id+"]").controller().updateCounter(c.count)})})},insertItem:function(c){a.emptyList().hide();a.updateListCounters();b(c).implement(EasySocial.Controller.Friends.Item,{"{parent}":a}).prependTo(a.friendItems())},removeItem:function(b){a.friendItem("[data-friendItem-"+b+"]").remove();0>=a.friendItem().length&&a.emptyList().show();a.updateListCounters()},updateFriendRequestCount:function(b){curCount=parseInt(a.requestCount().text(),10);NaN!=
curCount&&(curCount+=b,a.requestCount().text(curCount))},updateContent:function(b){a.content().html(b);a.initFriendItems()},removeActiveFilter:function(){a.filterItem().removeClass("active")},"{filterItem} click":function(b,d){var e=b.data("filter"),g=b.data("title"),h=b.data("userid"),p=b.data("url");0<a.friendList().length&&a.friendList().controller().removeActiveList();a.filterItem().removeClass("active");b.addClass("active");History.pushState({state:1},g,p);b.addClass("loading");EasySocial.ajax("site/controllers/friends/filter",
{filter:e,userid:h}).done(function(b){a.updateContent(b)}).always(function(){b.removeClass("loading")})}}});g.resolve()})});EasySocial.module("site/friends/list",function(e){var g=this;EasySocial.require().view("site/loading/small").library("history").script("site/friends/suggest").done(function(b){EasySocial.Controller("Friends.List",{defaultOptions:{parent:null,"{item}":"[data-friends-listItem]","{items}":"[data-friends-listItems]","{loadMoreButton}":".loadMoreButton","{loadMore}":".loadMore",view:{loader:"site/loading/small",
items:"site/friends/default.lists"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Friends.List.Item,{"{parent}":a})},removeActiveList:function(){a.item().removeClass("active")},setDefault:function(b){a.item().removeClass("default");a.item(".item-"+b).addClass("default")},"{item} click":function(c){var d=b(c).data("title"),e=b(c).data("url");History.pushState({state:1},d,e);a.parent.removeActiveFilter();a.item().removeClass("active");a.item(c).addClass("active");d=b(c).data("id");
a.parent.options.activeList=d;EasySocial.ajax("site/controllers/friends/getListFriends",{id:d},{beforeSend:function(){b(c).addClass("loading")}}).done(function(d){b(c).removeClass("loading");a.parent.updateContent(d)})},"{loadMoreButton} click":function(){var b=a.loadMoreButton().data("limitstart");a.loadMore().html(a.view.loader());EasySocial.ajax("site/controllers/friends/getLists",{limitstart:b}).done(function(b){a.loadMore().hide();a.view.items({items:b}).appendTo(a.items())})}}});EasySocial.Controller("Friends.List.Item",
{defaultOptions:{id:null,"{counter}":"[data-list-counter]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},updateCounter:function(b){a.counter().html(b)}}});EasySocial.Controller("Friends.List.Actions",{defaultOptions:{"{delete}":"[data-friendListActions-delete]","{add}":"[data-friendListActions-add]","{default}":"[data-friendListActions-default]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.title=a.element.data("title");a.options.userId=
a.element.data("userid")},"{default} click":function(){EasySocial.ajax("site/controllers/friends/setDefault",{id:a.options.id}).done(function(){a.parent.friendList().controller().setDefault(a.options.id)})},"{add} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/assignList",{id:a.options.id}),bindings:{"{insertButton} click":function(){var c=this.suggest().textboxlist("controller").getAddedItems();EasySocial.ajax("site/controllers/friends/assign",{uid:b.pluck(c,"id"),
userId:a.options.userId,listId:a.options.id}).done(function(c){b("[data-assignFriends-notice]").hide();b(c).each(function(b,c){a.parent.insertItem(c);EasySocial.dialog().close()})}).fail(function(a){b("[data-assignFriends-notice]").addClass("alert alert-error").html(a.message)})}}})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmDeleteList",{id:a.options.id}),bindings:{"{deleteButton} click":function(){b("[data-friends-list-delete-form]").submit()}}})}}});
g.resolve()})});EasySocial.module("site/friends/item",function(e){var g=this;EasySocial.require().script("site/conversations/composer").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL","COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE","COM_EASYSOCIAL_FRIENDS_CANCEL_REQUEST_DIALOG_CANCELLED").done(function(b){EasySocial.Controller("Friends.Item",{defaultOptions:{id:null,name:null,friendId:null,"{removeFromList}":"[data-lists-removeFriend]","{unfriend}":"[data-friends-unfriend]","{addfriend}":"[data-friends-addfriend]",
"{block}":"[data-friends-block]","{message}":"[data-friendItem-message]","{reject}":"[data-friendItem-reject]","{approve}":"[data-friendItem-approve]","{cancelRequest}":"[data-friendItem-cancel-request]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.name=a.element.data("name");a.options.friendId=a.element.data("friendid");a.options.avatar=a.element.data("avatar");a.initConversation()},initConversation:function(){a.message().implement(EasySocial.Controller.Conversations.Composer.Dialog,
{recipient:{name:a.options.name,id:a.options.id,avatar:a.options.avatar}})},"{removeFromList} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmRemoveFromList",{id:a.options.id}),bindings:{"{removeButton} click":function(){EasySocial.ajax("site/controllers/friends/removeFromList",{listId:a.parent.options.activeList,userId:a.options.id}).done(function(){a.parent.removeItem(a.options.id);EasySocial.dialog({title:"User removed from list",content:"The user has been removed from the list.",
buttons:[{name:"Done",classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}).fail(function(a){console.log(a)})}}})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmReject",{id:a.options.id}),bindings:{"{rejectButton} click":function(){EasySocial.ajax("site/controllers/friends/reject",{id:a.options.friendId}).done(function(){a.parent.removeItem(a.options.id);a.parent.updateFriendsCounter();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRejected")})})}}})},
"{unfriend} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmUnfriend",{id:a.options.id}),bindings:{"{unfriendButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:a.options.friendId}).done(function(){a.parent.removeItem(a.options.id);a.parent.updateFriendsCounter();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRemoved",{id:a.options.id})})})}}})},"{cancelRequest} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancelRequest",
{id:a.options.id}),bindings:{"{cancelRequestButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:a.options.friendId}).done(function(){a.parent.removeItem(a.options.id);a.parent.updateFriendRequestCount(-1);EasySocial.dialog({content:EasySocial.ajax("site/views/friends/requestCancelled",{id:a.options.id})})})}}})},"{approve} click":function(b){EasySocial.ajax("site/controllers/friends/approve",{id:a.options.friendId}).done(function(){a.parent.updateFriendsCounter();
a.element.remove()})},"{addfriend} click":function(c){EasySocial.ajax("site/controllers/friends/request",{id:a.options.id}).done(function(c){a.parent.updateFriendRequestCount(1);EasySocial.dialog({title:b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE"),content:b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL",a.options.name)});a.parent.removeItem(a.options.id)}).fail(function(a){EasySocial.dialog({title:"Info",content:a})})},"{block} click":function(){console.log("block")}}});
g.resolve()})});EasySocial.module("site/notifications/list",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("NotificationsList",{defaultOptions:{"{item}":"[data-notifications-list-item]","{list}":"[data-notifications-list]","{allread}":"[data-notification-all-read]","{allclear}":"[data-notification-all-clear]","{notiLoadMoreBtn}":"[data-notification-loadmore-btn]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.NotificationsList.Item,
{"{parent}":a})},"{allread} click":function(){EasySocial.ajax("site/controllers/notifications/setAllState",{state:"read"}).done(function(){a.item().removeClass("is-read is-hidden is-unread").addClass("is-read")})},"{allclear} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/notifications/clearAllConfirm"),bindings:{"{clearButton} click":function(){EasySocial.ajax("site/controllers/notifications/setAllState",{state:"clear"}).done(function(){a.item().removeClass("is-read is-hidden is-unread is-read").addClass("is-remove");
EasySocial.dialog().close()})}}})},"{notiLoadMoreBtn} click":function(c,d){var e=b(c).data("startlimit");0>e||EasySocial.ajax("site/controllers/notifications/loadmore",{startlimit:e}).done(function(d,e){b(c).data("startlimit",e);console.log(e);0<d.length&&(b.buildHTML(d).insertBefore(a.notiLoadMoreBtn()),a.item().implement(EasySocial.Controller.NotificationsList.Item));0>e&&a.notiLoadMoreBtn().hide()}).fail(function(a){return a}).always(function(){})}}});EasySocial.Controller("NotificationsList.Item",
{defaultOptions:{"{unread}":"[data-notifications-list-item-unread]","{read}":"[data-notifications-list-item-read]","{delete}":"[data-notifications-list-item-delete]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{unread} click":function(){EasySocial.ajax("site/controllers/notifications/setState",{id:a.options.id,state:"unread"}).done(function(){a.element.removeClass("is-read is-hidden is-unread").addClass("is-unread\t")})},"{read} click":function(){EasySocial.ajax("site/controllers/notifications/setState",
{id:a.options.id,state:"read"}).done(function(){a.element.removeClass("is-read is-hidden is-unread").addClass("is-read")})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/notifications/clearConfirm"),bindings:{"{clearButton} click":function(){EasySocial.ajax("site/controllers/notifications/setState",{id:a.options.id,state:"clear"}).done(function(){a.element.removeClass("is-read is-hidden is-unread is-read").addClass("is-remove");EasySocial.dialog().close()}).fail(function(a){EasySocial.dialog({content:a.message})})}}})}}});
g.resolve()})});EasySocial.module("site/points/history",function(){var e=this;EasySocial.require().done(function(g){EasySocial.Controller("Points.History",{defaultOptions:{"{loadMore}":"[data-points-history-pagination]","{timeline}":"[data-points-history-timeline]"}},function(b){return{init:function(){},"{loadMore} click":function(a,c){var d=g(a).data("current");EasySocial.ajax("site/views/points/getHistory",{limitstart:d,id:b.options.id}).done(function(c,d,e){b.timeline().append(c);g(a).data("current",
d);e&&g(a).hide()})}}});e.resolve()})});EasySocial.module("notifications/popbox",function(e){this.resolve(function(e){return{content:EasySocial.ajax("site/controllers/notifications/getSystemItems",{layout:"popbox.notifications"}),id:"es-wrap",type:"notifications",cache:!1}})});EasySocial.module("conversations/popbox",function(e){this.resolve(function(e){return{content:EasySocial.ajax("site/controllers/notifications/getConversationItems",{usemax:"1",layout:"popbox.conversations"}),id:"es-wrap",type:"notifications",
cache:!1}})});EasySocial.module("friends/popbox",function(e){this.resolve(function(e){return{content:EasySocial.ajax("site/controllers/notifications/friendsRequests",{layout:"popbox.friends"}),id:"es-wrap",type:"notifications",cache:!1}})});EasySocial.module("site/profile/about",function(e){var g=this;EasySocial.require().script("field").done(function(b){EasySocial.Controller("Profile.About",{defaultOptions:{userid:null,"{stepItem}":"[data-profile-about-step-item]","{stepContent}":"[data-profile-about-step-content]",
"{fieldItem}":"[data-profile-about-fields-item]"}},function(a){return{init:function(){a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:a.options.userid,mode:"display"})},"{stepItem} click":function(b,d){var e=b.data("for");a.stepItem().removeClass("active");b.addClass("active");a.stepContent().trigger("activateTab",[e])},"{stepContent} activateTab":function(a,b,e){b=a.data("id");a.toggleClass("active",e==b)}}});g.resolve()})});EasySocial.module("site/profile/avatar",function(e){EasySocial.Controller("Profile.Avatar",
{defaultOptions:{"{menu}":"[data-avatar-menu]","{uploadButton}":"[data-avatar-upload-button]","{selectButton}":"[data-avatar-select-button]","{removeButton}":"[data-avatar-remove-button]"}},function(e){return{init:function(){},"{uploadButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/uploadAvatar")})},"{selectButton} click":function(){EasySocial.photos.selectPhoto({bindings:{"{self} photoSelected":function(b,a,c){(b=c[0])&&EasySocial.photos.createAvatar(b.id)}}})},
"{menu} dropdownOpen":function(){e.element.addClass("show-all")},"{menu} dropdownClose":function(){e.element.removeClass("show-all")},"{removeButton} click":function(){}}});this.resolve()});EasySocial.module("site/profile/edit",function(e){var g=this;EasySocial.require().script("validate","field","oauth/facebook").done(function(b){EasySocial.Controller("Profile.Edit",{defaultOptions:{userid:null,"{stepContent}":"[data-profile-edit-fields-content]","{stepItem}":"[data-profile-edit-fields-step]","{profileForm}":"[data-profile-fields-form]",
"{profileContent}":"[data-profile-edit-fields]","{fieldItem}":"[data-profile-edit-fields-item]","{save}":"[data-profile-fields-save]","{deleteProfile}":"[data-profile-edit-delete]"}},function(a){return{init:function(){a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:a.options.userid,mode:"edit"})},errorFields:[],"{fieldItem} error":function(b,d){a.triggerStepError(b)},"{fieldItem} clear":function(b,d){a.clearStepError(b)},"{fieldItem} onError":function(b,d){a.triggerStepError(b)},
triggerStepError:function(c){var d=c.data("id");c=c.parents(a.stepContent.selector).data("id");0>b.inArray(d,a.errorFields)&&a.errorFields.push(d);a.stepItem().filterBy("for",c).trigger("error")},clearStepError:function(c){var d=c.data("id");c=c.parents(a.stepContent.selector).data("id");a.errorFields=b.without(a.errorFields,d);a.stepItem().filterBy("for",c).trigger("clear")},"{stepItem} click":function(c,d){var e=b(c).data("for");a.profileContent().show();a.stepContent().hide();a.stepItem().removeClass("active");
a.stepItem(c).addClass("active");e=a.stepContent(".step-"+e);e.show();e.find(a.fieldItem.selector).trigger("show")},"{stepItem} error":function(a){a.addClass("error")},"{stepItem} clear":function(b){1>a.errorFields.length&&b.removeClass("error")},"{tabItem} click":function(c,d){var e=b(c).data("for");a.tabHeaderItem().hide();a.tabHeaderItem("."+e+"Header").show().addClass("active")},"{save} click":function(c,d){d.preventDefault();b(c).addClass("btn-loading");a.profileForm().validate().fail(function(){b(c).removeClass("btn-loading");
EasySocial.dialog({content:EasySocial.ajax("site/views/profile/showFormError")})}).done(function(){a.profileForm().submit()});return!1},"{deleteProfile} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmDelete")})}}});g.resolve()})});EasySocial.module("validate",function(e){e.isController("EasySocial.Controller.Validator")||EasySocial.Controller("Validator",{defaultOptions:{checks:["required","validate"],typeAttr:"data-check-type",formatAttr:"data-check-format",
modifierAttr:"data-check-modifier",errorTrigger:"onError",submitTrigger:"onSubmit","{container}":"[data-check]","{notice}":"[data-check-notice]","{required}":"[data-check-required]","{validate}":"[data-check-validate]"}},function(g){return{vars:{},register:[],deferreds:[],errors:[],state:e.Deferred(),init:function(){},reset:function(){g.vars={};g.register=[];g.deferreds=[];g.errors=[];g.state=e.Deferred();g.container().removeClass("error")},start:function(){g.reset();e.each(g.container(),function(b,
a){g.vars.container=a=e(a);a.trigger(g.options.submitTrigger,[g.register]);e.each(g.getFields(),function(a,b){g.vars.field=b=e(b);e.each(g.options.checks,function(a,b){g.vars.check=b;g[b+"Check"]()})})});e.each(g.register,function(b,a){if(e.isDeferred(a))g.deferreds.push(a);else if(!a)return g.errors.push(b),!0});0<g.errors.length?g.state.reject():0<g.deferreds.length?e.when.apply(null,g.deferreds).done(function(){g.state.resolve()}).fail(function(){g.state.reject()}):g.state.resolve();return g.state},
getFields:function(){return e.merge(g.vars.container.find(g.required.selector),g.vars.container.find(g.validate.selector))},requiredCheck:function(){if(g.vars.field.is(g.required.selector)){var b=g.vars.field.attr(g.options.typeAttr)||g.vars.field.attr("type")||"text";"text"===b&&""==e.trim(g.vars.field.val())&&g.raiseError();"checkbox"===b&&1>g.vars.field.find('input[type="checkbox"]').filter(":checked").length&&g.raiseError()}},validateCheck:function(){if(void 0!==g.vars.field.attr(g.options.formatAttr)){var b=
g.vars.field.attr(g.options.formatAttr)||"",a=g.vars.field.attr(g.options.modifierAttr)||"";RegExp(b,a).test(g.vars.field.val())||g.raiseError()}},raiseError:function(){g.vars.container.addClass("error");g.vars.container.trigger(g.options.errorTrigger,[g.vars.check,g.vars.field]);g.register.push(!1)}}});e.fn.validate=function(e){return 0<this.length?this.addController("EasySocial.Controller.Validator",e).start():!1};this.resolve()});EasySocial.module("site/profile/friends",function(e){var g=this;
EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_FRIENDS_DIALOG_CANCEL_REQUEST","COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_YES_CANCEL_MY_REQUEST_BUTTON").done(function(b){EasySocial.Controller("Profile.Friends.Request",{defaultOptions:{id:null,callback:null,"{addButton}":"[data-profileFriends-add]","{manageButton}":"[data-profileFriends-manage]","{pendingButton}":"[data-profileFriends-pending]","{respondButton}":"[data-profileFriends-respond]","{cancelRequest}":"[data-profileFriends-cancelRequest]",
"{unfriend}":"[data-profile-friends-unfriend]","{approve}":"[data-friends-response-approve]","{reject}":"[data-friends-response-reject]","{button}":"[data-profileFriends-button]","{dropdown}":"[data-profileFriends-dropdown]",view:{loader:"site/loading/small"}}},function(a){return{init:function(){a.options.id=a.element.data("friend");a.options.target=a.element.data("id");a.options.callback=a.element.data("callback")},showDropDown:function(){a.element.addClass("open")},hideDropDown:function(){a.element.removeClass("open")},
"{addButton} click":function(b){var d=a.button();d.addClass("loading");EasySocial.ajax("site/controllers/friends/request",{id:a.options.target}).done(function(b,c){a.dropdown().remove();a.options.id=b;a.button().replaceWith(c)}).fail(function(){d.removeClass("loading")})},"{cancelRequest} click":function(b,d){a.hideDropDown();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancel"),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",
{id:a.options.id}).done(function(b){a.dropdown().remove();a.button().replaceWith(b);EasySocial.dialog().close()})}}})},"{unfriend} click":function(c,d){var e=b(c).data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmUnfriend",{id:e}),bindings:{"{unfriendButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:a.options.id}).done(function(b){a.dropdown().remove();a.button().replaceWith(b);EasySocial.dialog().close()})}}})},"{approve} click":function(b,
d){var e=a.options.id;a.dropdown().remove();EasySocial.ajax("site/controllers/friends/approve",{id:e}).done(function(b){a.button().replaceWith(b)})},"{reject} click":function(b,d){var e=a.options.id;a.dropdown().remove();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmReject"),bindings:{"{rejectButton} click":function(){EasySocial.ajax("site/controllers/friends/reject",{id:e}).done(function(b){a.button().replaceWith(b);EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRejected")})})}}})},
"{dropdown} click":function(a,b){b.stopPropagation()},"{approveRequest} click":function(){a.respondForm().find("input[name=task]").val("approve");a.respondForm().find("input[name=id]").val(a.options.friendId);a.respondForm().find("input[name=return]").val(a.options.callback);a.respondForm().submit()}}});g.resolve()})});EasySocial.module("site/profile/header",function(e){var g=this;EasySocial.require().script("site/profile/friends","site/profile/subscriptions","site/conversations/composer").done(function(b){EasySocial.Controller("Profile.Header",
{defaultOptions:{id:null,"{friendRequest}":"[data-profile-friends]","{subscribe}":"[data-profile-followers]","{conversation}":"[data-profile-conversation]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.name=a.element.data("name");a.options.avatar=a.element.data("avatar");a.friendRequest().implement(EasySocial.Controller.Profile.Friends.Request,{"{parent}":a});a.subscribe().implement(EasySocial.Controller.Profile.Subscriptions,{"{parent}":a});a.conversation().implement(EasySocial.Controller.Conversations.Composer.Dialog,
{recipient:{id:a.options.id,name:a.options.name,avatar:a.options.avatar}})}}});g.resolve()})});EasySocial.module("site/profile/subscriptions",function(e){EasySocial.Controller("Profile.Subscriptions",{defaultOptions:{id:null,"{follow}":"[data-subscription-follow]","{unfollow}":"[data-subscription-unfollow]","{message}":"[data-subscription-message]","{button}":"[data-subscription-button]"}},function(e){return{init:function(){e.options.id=e.element.data("id")},toggleDropDown:function(){e.element.toggleClass("open")},
"{unfollow} click":function(){e.toggleDropDown();EasySocial.ajax("site/controllers/profile/unfollow",{id:e.options.id,type:"user"}).done(function(b){e.button().replaceWith(b)})},"{follow} click":function(){e.toggleDropDown();EasySocial.ajax("site/controllers/profile/follow",{id:e.options.id,type:"user"}).done(function(b){e.button().replaceWith(b)})}}});this.resolve()});EasySocial.module("site/profile/miniheader",function(e){var g=this;EasySocial.require().library("scrollTo").done(function(b){EasySocial.Controller("Profile.MiniHeader",
{defaultOptions:{"{viewport}":"[data-appscroll-viewport]","{content}":"[data-appscroll-content]","{apps}":"[data-appscroll-content] li","{buttons}":"[data-appscroll-buttons]","{nextButton}":"[data-appscroll-next-button]","{prevButton}":"[data-appscroll-prev-button]"}},function(a){return{init:function(){a.setLayout();a.viewport().scrollTo(0)},"{window} resize":b.debounce(function(){a.setLayout()},300),setLayout:function(){var c=a.viewport(),d=5;b("#es-wrap.es-main").hasClass("w480")?(a.content().css({width:"auto"}),
a.enabled=!1):(a.apps().each(function(){d+=b(this).outerWidth(!0)}),d>c.width()&&(a.content().css({width:d,float:"none"}),a.buttons().css("opacity",1),a.enabled=!0))},enabled:!1,"{nextButton} click":function(){if(a.enabled){var b=a.viewport(),d=b.width()-80;b.scrollTo("+="+d+"px",800,{axis:"x",easing:"easeInOutCubic"})}},"{prevButton} click":function(){if(a.enabled){var b=a.viewport(),d=b.width()-80;b.scrollTo("-="+d+"px",800,{axis:"x",easing:"easeInOutCubic"})}}}});g.resolve()})});EasySocial.module("site/profile/notifications",
function(e){var g=this;EasySocial.require().script("site/profile/header").done(function(){EasySocial.Controller("Profile.Notifications",{defaultOptions:{"{sidebarItem}":"[data-notification-item]","{contentItem}":"[data-notification-content]","{notificationForm}":"[data-notifications-form]"}},function(b){return{init:function(){},"{sidebarItem} click":function(a,c){b.sidebarItem().removeClass("active");a.addClass("active");b.contentItem().hide();var d=a.data("alert-element");b.contentItem('[data-alert-element="'+
d+'"]').show()}}});g.resolve()})});EasySocial.module("site/profile/privacy",function(e){var g=this;EasySocial.require().script("site/profile/header").library("history","textboxlist").view("site/loading/small").done(function(b){EasySocial.Controller("Profile.Privacy",{defaultOptions:{"{sidebarItem}":"[data-profile-privacy-item]","{contentItem}":"[data-privacy-content]","{privacyItem}":"[data-privacy-item]","{privacyForm}":"[data-profile-privacy-form]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.sidebarItem().implement(EasySocial.Controller.Profile.Privacy.Sidebar,
{"{parent}":a});a.privacyItem().implement(EasySocial.Controller.Profile.Privacy.Item,{"{parent}":a})},updateContent:function(c){a.contentItem().hide();b(".privacy-content-"+c).show()}}});EasySocial.Controller("Profile.Privacy.Sidebar",{defaultOptions:{"{sidebarItem}":"[data-profile-privacy-item]"}},function(a){return{init:function(){},"{self} click":function(c){b("[data-profile-privacy-item]").removeClass("active");b(c).addClass("active");c=a.element.data("group");a.parent.updateContent(c)}}});EasySocial.Controller("Profile.Privacy.Item",
{defaultOptions:{"{selection}":"[data-privacy-select]","{hiddenCustom}":"[data-hidden-custom]","{customForm}":"[data-privacy-custom-form]","{customTextInput}":"[data-textfield]","{customItems}":"input[]","{customHideBtn}":"[data-privacy-custom-hide-button]","{customInputItem}":"[data-textboxlist-item]","{customEditBtn}":"[data-privacy-custom-edit-button]"}},function(a){return{init:function(){a.customTextInput().textboxlist({unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:2,cache:!1,query:function(b){var d=
a.getTaggedUsers();return EasySocial.ajax("site/views/privacy/getfriends",{q:b,exclude:d})}}}});a.textboxlistLib=a.customTextInput().textboxlist("controller")},getTaggedUsers:function(){var c=[],d=a.customInputItem();0<d.length&&b.each(d,function(a,d){c.push(b(d).data("id"))});return c},"{customTextInput} addItem":function(b,d,e){b=a.hiddenCustom().val();d="";""==b?d=e.id:(b=b.split(","),b.push(e.id),d=b.join(","));a.hiddenCustom().val(d)},"{customTextInput} removeItem":function(b,d,e){b="";b=[];
d=a.hiddenCustom().val().split(",");for(var g=0;g<d.length;g++)d[g]!=e.id&&b.push(d[g]);b=0>=b.length?"":b.join(",");a.hiddenCustom().val(b)},"{customEditBtn} click":function(b){a.customForm().toggle()},"{selection} change":function(b){"custom"==b.val()?(a.customForm().show(),a.customEditBtn().show()):(a.customForm().hide(),a.customEditBtn().hide())},"{customHideBtn} click":function(){a.customForm().hide();a.customEditBtn().show();a.textboxlistLib.autocomplete.hide()}}});g.resolve()})});EasySocial.module("site/profile/profile",
function(e){var g=this;EasySocial.require().script("site/profile/header").library("history").done(function(b){EasySocial.Controller("Profile",{defaultOptions:{id:null,"{header}":"[data-profile-header]","{app}":"[data-profile-apps-item]","{action}":"[data-profile-apps-menu]","{contents}":"[data-profile-real-content]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.header().implement(EasySocial.Controller.Profile.Header,{"{parent}":a});a.app().implement(EasySocial.Controller.Profile.Apps.Item,
{"{parent}":a})},"{app} click":function(c){a.app().removeClass("active");b(c).addClass("active")},updateContent:function(b){a.element.removeClass("loading");a.contents().html(b)},loading:function(){a.contents().html("");a.element.addClass("loading")}}});EasySocial.Controller("Profile.Apps.Item",{defaultOptions:{}},function(a){return{init:function(){a.options.layout=a.element.data("layout");a.options.id=a.element.data("id");a.options.url=a.element.data(a.options.layout+"-url");a.options.namespace=
a.element.data("namespace");a.options.title=a.element.data("title");a.options.description=a.element.data("description");a.options.appId=a.element.data("app-id")},"{self} click":function(b,d){d.preventDefault();"canvas"==a.options.layout?window.location=a.options.url:(History.pushState({state:1},a.options.title,a.options.url),EasySocial.ajax(a.options.namespace,{id:a.options.id,view:"profile",appId:a.options.appId},{beforeSend:function(){a.parent.loading()}}).done(function(b){a.parent.updateContent(b)}).fail(function(a){return a}))}}});
g.resolve()})});EasySocial.module("site/registrations/registrations",function(e){var g=this;EasySocial.require().script("validate","field").view("site/registration/dialog.error").language("COM_EASYSOCIAL_CLOSE_BUTTON","COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE").done(function(b){EasySocial.Controller("Registrations.Form",{defaultOptions:{previousLink:null,"{submit}":"[data-registration-submit]","{field}":"[data-registration-fields-item ]","{previous}":"[data-registration-previous]",view:{formError:"site/registration/dialog.error"}}},
function(a){return{init:function(){a.field().addController("EasySocial.Controller.Field.Base",{mode:"register"})},"{previous} click":function(b,d){d.preventDefault();window.location.href=a.options.previousLink;return!1},"{submit} click":function(c,d){d.preventDefault();b(c).addClass("btn-loading");b(a.element).validate().fail(function(){b(c).removeClass("btn-loading");EasySocial.dialog({title:b.language("COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE"),content:a.view.formError({}),width:400,height:150,
buttons:[{name:b.language("COM_EASYSOCIAL_CLOSE_BUTTON"),classNames:"btn btn-es-primary",click:function(){EasySocial.dialog().close()}}]})}).done(function(){a.element.submit()});return!1}}});g.resolve()})});EasySocial.module("site/search/item",function(e){var g=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE").done(function(b){EasySocial.Controller("Search.Item",{defaultOptions:{"{toggle}":"[data-activity-toggle]","{deleteBtn}":"[data-activity-delete]",
"{addFriendButton}":"[data-search-friend-button]","{pendingFriendButton}":"[data-search-friend-pending-button]","{dropdown}":"[data-profileFriends-dropdown]",view:{loader:"site/loading/small"}}},function(a){return{init:function(){null},"{pendingFriendButton} click":function(c){a.dropdown().html(b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE"))},"{addFriendButton} click":function(c){var d=a.element.data("friend-uid");b(c).addClass("btn-loading");EasySocial.ajax("site/controllers/friends/request",
{viewCallback:"usersRequest",id:d}).done(function(d){b(c).replaceWith(d);a.dropdown().remove();b(c).removeClass("btn-loading")}).fail(function(b){a.dropdown().html(b)})}}});g.resolve()})});EasySocial.module("site/search/list",function(e){var g=this;EasySocial.require().view("site/loading/small").script("site/search/item").language("COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS").done(function(b){EasySocial.Controller("Search.List",{defaultOptions:{"{item}":"[data-search-item]","{pagination}":"[data-search-pagination]",
"{loadmorebutton}":"[data-search-loadmore-button]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Search.Item);a.on("scroll.search",window,b._.debounce(function(){a.loading||a.pagination().visible()&&a.loadMore()},250))},"{loadmorebutton} click":function(){a.loadMore()},loadMore:function(){var c=b("[data-search-query]").val(),d=b("[data-sidebar-menu].active").data("type"),e=a.pagination().data("last-limit"),g=a.pagination().data("last-type");
"-1"==e?a.loadmorebutton.hide():(a.loading=!0,EasySocial.ajax("site/controllers/search/getItems",{next_limit:e,last_type:g,type:d,q:c,loadmore:"1"},{beforeSend:function(){a.pagination().html(a.view.loadingContent())}}).done(function(c,d,e){a.pagination().data("last-limit",e);a.pagination().data("last-type",d);a.pagination().before(c);a.item().implement(EasySocial.Controller.Search.Item);"-1"==e?a.pagination().html(""):(link='<a class="btn btn-es-primary btn-stream-updates" href="javascript:void(0);" data-search-loadmore-button><i class="ies-refresh"></i>\t'+
b.language("COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS")+"</a>",a.pagination().html(link))}).fail(function(a){return a}).always(function(){a.loading=!1}))}}});g.resolve()})});EasySocial.module("site/search/search",function(e){var g=this;EasySocial.require().library("history").script("site/search/sidebar","site/profile/friends").view("site/loading/small").done(function(b){EasySocial.Controller("Search",{defaultOptions:{items:null,"{container}":"[data-search]","{contentTitle}":"[data-search-content-title]",
"{content}":"[data-search-content]","{sidebar}":"[data-search-sidebar]","{sidebarItem}":"[data-sidebar-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Search.Sidebar,{"{parent}":a});a.sidebarItem().implement(EasySocial.Controller.Search.Sidebar.Item,{"{parent}":a})},updatingContents:function(){a.content().html(a.view.loadingContent())},updateContent:function(b){a.content().html(b)}}});g.resolve()})});EasySocial.module("site/search/sidebar",
function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Search.Sidebar",{defaultOptions:{"{menuItem}":"[data-sidebar-menu]"}},function(a){return{init:function(){},"{menuItem} click":function(c,d){a.menuItem().removeClass("active");b(c).addClass("active")}}});EasySocial.Controller("Search.Sidebar.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(c,d){var e=a.element.data("type"),g=a.element.data("url"),h=b("[data-search-query]").val();
History.pushState({state:1},"",g);a.parent.updatingContents();EasySocial.ajax("site/controllers/search/getItems",{type:e,q:h}).done(function(b){a.parent.updateContent(b)}).fail(function(a){console.log(a)});a.parent.updateContent()}}});g.resolve()})});EasySocial.module("site/search/toolbar",function(e){var g=this;EasySocial.require().library("history").view("site/loading/small").done(function(b){EasySocial.Controller("Search.Toolbar",{defaultOptions:{items:null,"{searchInput}":"[data-nav-search-input]",
"{seachDropdown}":"[data-nav-search-dropdown]","{searchResult}":"li.navSearchItem",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){b(document).on("click.toolbar.search",function(c){c=c.target;c==a.element[0]||0<b(c).parents(a.element.data("directSelector")).length||a.seachDropdown().hide()})},"{self} destroy":function(){b(document).off("click.toolbar.search")},"{searchInput} keyup":b._.debounce(function(b,d){if(!a.loading){var e=b.val();3<=e.length&&(a.loading=!0,EasySocial.ajax("site/controllers/search/getItems",
{q:e,mini:"1"},{beforeSend:function(){a.seachDropdown().show();a.seachDropdown().html(a.view.loadingContent())}}).done(function(b){a.seachDropdown().html(b)}).fail(function(a){console.log(a)}).always(function(){a.loading=!1}))}},250),"{searchInput} focus":function(){cnt=a.searchResult().length;0<cnt&&a.seachDropdown().show()}}});g.resolve()})});EasySocial.module("site/stream/filter",function(e){var g=this;EasySocial.require().script("site/stream/sidebar").language("COM_EASYSOCIAL_STREAM_FILTER_WARNING_TITLE_EMPTY",
"COM_EASYSOCIAL_STREAM_FILTER_WARNING_HASHTAG_EMPTY").done(function(b){EasySocial.Controller("Stream.Filter",{defaultOptions:{"{heading}":"[data-filter-heading]","{sidebar}":"[data-sidebar-item]","{content}":"[data-filter-real-content]"}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Stream.Filter.Sidebar,{"{parent}":a})},updateHeading:function(b,d){a.heading().find("[data-heading-title]").html(b);a.heading().find("[data-heading-desc]").html(d)},updatingContents:function(){a.element.addClass("loading")},
updateContents:function(b){a.element.removeClass("loading");a.content().html(b)}}});EasySocial.Controller("Stream.Filter.Item",{defaultOptions:{"{title}":"[data-filter-name]","{hashtag}":"[data-filter-hashtag]","{saveBtn}":"[data-stream-filter-save]","{deleteBtn}":"[data-stream-filter-delete]","{form}":"[data-filter-inputForm]","{notice}":"[filter-form-notice]"}},function(a){return{init:function(){},"{deleteBtn} click":function(b){var d=b.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmFilterDelete"),
bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/stream/deleteFilter",{id:d}).done(function(b){a.element.fadeOut();EasySocial.dialog().close()})}}})},"{saveBtn} click":function(){b("div.control-group").removeClass("error");a.notice().html();a.notice().hide();if(""==a.title().val())return a.title().parents("div.control-group").addClass("error"),a.notice().html(b.language("COM_EASYSOCIAL_STREAM_FILTER_WARNING_TITLE_EMPTY")),a.notice().show(),!1;if(""==a.hashtag().val())return a.hashtag().parents("div.control-group").addClass("error"),
a.notice().html(b.language("COM_EASYSOCIAL_STREAM_FILTER_WARNING_HASHTAG_EMPTY")),a.notice().show(),!1;a.form().submit()}}});g.resolve()})});EasySocial.module("site/stream/item",function(){var e=this;EasySocial.require().library("dialog").done(function(g){EasySocial.Controller("Stream.Item",{defaultOptions:{id:"",context:"","{deleteFeed}":"[data-stream-delete]","{hideLink}":"[data-stream-hide]","{unHideLink}":"[data-stream-show]","{hideAppLink}":"[data-stream-hide-app]","{unHideAppLink}":"[data-stream-show-app]",
"{hideNotice}":"[data-stream-hide-notice]","{actions}":"[data-streamItem-actions]","{contents}":"[data-streamItem-contents]","{streamData}":"[data-stream-item]","{likes}":"[data-likes-action]","{counterBar}":"[data-stream-counter]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{share}":"[data-repost-action]","{streamCommentLink}":"[data-stream-action-comments]","{streamCommentBlock}":"[data-comments]"}},function(b){return{init:function(){b.options.id=b.element.data("id");
b.options.context=b.element.data("context");b.options.ishidden=b.element.data("ishidden")},plugins:{},"{likes} onLiked":function(a,c,d){b.counterBar().removeClass("hide")},"{likes} onUnliked":function(a,c,d){a=b.likeContent().hasClass("hide");c=b.repostContent().hasClass("hide");a&&c&&b.counterBar().addClass("hide")},"{share} create":function(a,c,d){b.counterBar().removeClass("hide")},"{streamCommentLink} click":function(){b.streamCommentBlock().toggle()},"{actions} click":function(a,c){b.actions().removeClass("active");
g(a).addClass("active")},"{deleteFeed} click":function(){var a=b.options.id;EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmDelete"),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/stream/delete",{id:a}).done(function(a){EasySocial.dialog({content:a});b.element.fadeOut()}).fail(function(a){EasySocial.dialog({content:a})})}}})},"{hideLink} click":function(){b.streamData().addClass("es-feed-loading");EasySocial.ajax("site/controllers/stream/hide",{id:b.options.id}).done(function(a){b.streamData().removeClass("es-feed-loading");
b.streamData().hide();b.element.append(a)}).fail(function(a){})},"{hideAppLink} click":function(){EasySocial.ajax("site/controllers/stream/hideapp",{context:b.options.context}).done(function(a){b.streamData().hide();g(".stream-context-"+b.options.context).addClass("hide-stream");b.element.append(a)}).fail(function(a){console.log(a)})},"{unHideLink} click":function(){EasySocial.ajax("site/controllers/stream/unhide",{id:b.options.id}).done(function(){b.hideNotice().remove();b.streamData().show()}).fail(function(a){console.log(a)})},
"{unHideAppLink} click":function(){EasySocial.ajax("site/controllers/stream/unhideapp",{context:b.options.context}).done(function(){b.hideNotice().remove();b.streamData().show();g(".stream-context-"+b.options.context).removeClass("hide-stream")}).fail(function(a){console.log(a)})}}});e.resolve()})});EasySocial.module("site/stream/sidebar",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Stream.Filter.Sidebar",{defaultOptions:{}},function(a){return{init:function(){},
"{self} click":function(){b("[data-sidebar-item]").removeClass("active loading");a.element.addClass("active");var c=a.element.data("id"),d=a.element.data("url"),e=a.element.data("title");History.pushState({state:1},e,d);a.parent.content().html("");a.parent.updatingContents();a.element.addClass("loading");EasySocial.ajax("site/controllers/stream/getFilter",{id:c}).done(function(b){a.parent.updateContents(b)}).fail(function(a){return a}).always(function(){a.element.removeClass("loading")})}}});g.resolve()})});
EasySocial.module("site/stream/stream",function(){var e=this;EasySocial.require().script("site/stream/item").view("site/loading/small").language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS").done(function(g){EasySocial.Controller("Stream",{defaultOptions:{interval:30,checknew:null,source:null,sourceId:null,autoload:!0,"{story}":"[data-story]","{share}":"[data-repost-action]","{list}":"[data-stream-list]","{newNotiBar}":"[data-stream-notification-bar]","{newNotiButton}":"[data-stream-notification-button]",
"{item}":"[data-streamItem]","{pagination}":"[data-stream-pagination]","{paginationGuest}":"[data-stream-pagination-guest]",view:{loadingContent:"site/loading/small"}}},function(b){return{init:function(){b.item().addController(EasySocial.Controller.Stream.Item);"stream"!=b.options.source&&"unity"!=b.options.source&&!0==b.options.checknew&&b.startMonitoring();if(!0==b.options.autoload)b.on("scroll.stream",window,g._.debounce(function(){b.loading||("unity"==b.options.source?b.paginationGuest().visible()&&
b.loadMoreGuest():b.pagination().visible()&&b.loadMore())},250));b.setLayout()},setLayout:function(){b.element.find("[data-es-cover]").each(function(){var a=g(this);a.height(a.width()/3)})},"{window} resize":g.debounce(function(){b.setLayout()},500),"{story} create":function(a,c,d,e){g.buildHTML(d).prependTo(b.list()).addController("EasySocial.Controller.Stream.Item");b.list().children("li.empty").remove();b.updateCurrentDate();""!=e&&b.updateExcludeIds(e)},"{share} create":function(a,c,d){g.buildHTML(d).prependTo(b.list()).addController("EasySocial.Controller.Stream.Item");
b.list().children("li.empty").remove();b.updateCurrentDate()},updateCurrentDate:function(){EasySocial.ajax("site/controllers/stream/getCurrentDate",{}).done(function(a){b.element.data("currentdate",a)}).fail(function(a){})},updateExcludeIds:function(a){ids=b.element.data("excludeids");newIds="";newIds=""!=ids&&void 0!=ids?ids+","+a:a;b.element.data("excludeids",newIds)},clearExcludeIds:function(){b.element.data("excludeids","")},startMonitoring:function(){if(b._destroyed)return b.stopMonitoring();
b.options.state=setTimeout(b.check,1E3*b.options.interval)},stopMonitoring:function(){clearTimeout(b.options.state)},"{self} destroyed":function(){b.stopMonitoring()},check:function(){b.stopMonitoring();var a=g("[data-dashboardSidebar-menu].active").data("type"),c=g("[data-dashboardSidebar-menu].active").data("id"),d=b.element.data("currentdate"),e=b.element.data("excludeids");g.trim(b.newNotiBar().html());void 0==a&&void 0==c&&"profile"==b.options.source&&(a="me",c=b.options.sourceId);EasySocial.ajax("site/controllers/stream/checkUpdates",
{type:a,id:c,currentdate:d,exclude:e,source:b.options.source,view:b.options.source},{type:"jsonp"}).done(function(a,c,d){if(b._destroyed)return b.stopMonitoring();if(0<a.length){for(d=0;d<a.length;d++)if(item=a[d],0<item.cnt){var e="[data-stream-counter-"+item.type+"]";g(e).html(item.cnt);g(e).parents("li").addClass("has-notice")}c=g.trim(c);0<c.length&&b.newNotiBar().html(c)}b.startMonitoring()})},"{newNotiButton} click":function(a,c){var d=g(a).data("type"),e=g(a).data("uid"),h=g(a).data("since");
EasySocial.ajax("site/controllers/stream/getUpdates",{type:d,id:e,currentdate:h,source:b.options.source,view:b.options.source}).done(function(a,c){var h="[data-stream-counter-",h="list"==d?h+d+"-"+e:h+d;g(h+"]").parents("li").removeClass("has-notice");b.newNotiBar().html("");g.buildHTML(a).prependTo(b.list()).addController("EasySocial.Controller.Stream.Item");b.clearExcludeIds();b.element.data("currentdate",c)})},"{paginationGuest} click":function(){b.loadMoreGuest()},loadMoreGuest:function(){var a=
b.paginationGuest(),c=a.data("nextlimit"),d=b.options.source;c&&(b.loading=!0,a.html(b.view.loadingContent({content:""})),EasySocial.ajax("site/controllers/stream/loadmoreGuest",{startlimit:c,view:d}).done(function(c,d){a.data({nextlimit:d});c=g.buildHTML(c);c.insertBefore(a).filter(b.item.selector).addController("EasySocial.Controller.Stream.Item");""==d?a.html(""):(link='<a class="btn btn-es-primary btn-stream-updates" href="javascript:void(0);"><i class="ies-refresh"></i> '+g.language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS")+
"</a>",a.html(link))}).fail(function(a){return a}).always(function(){b.loading=!1}))},"{pagination} click":function(){b.loadMore()},loadMore:function(){var a=g("[data-dashboardSidebar-menu].active"),c=a.data("type"),d=a.data("id");tag=a.data("tag");var e=b.pagination(),a=e.data("startdate"),h=e.data("enddate"),n=b.options.source;a&&(void 0==c&&void 0==d&&"profile"==b.options.source&&(c="me",d=b.options.sourceId),b.loading=!0,e.html(b.view.loadingContent({content:""})),EasySocial.ajax("site/controllers/stream/loadmore",
{id:d,type:c,startdate:a,enddate:h,view:n,tag:tag}).done(function(a,c,d){e.data({startdate:c,enddate:d});a=g.buildHTML(a);a.insertBefore(e).filter(b.item.selector).addController("EasySocial.Controller.Stream.Item");b.setLayout();""==c?e.html(""):(link='<a class="btn btn-es-primary btn-stream-updates" href="javascript:void(0);"><i class="ies-refresh"></i> '+g.language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS")+"</a>",e.html(link))}).fail(function(a){return a}).always(function(){b.loading=
!1}))}}});e.resolve()})});EasySocial.module("site/stream/video",function(e){e(document).on("click","[data-es-links-embed-item]",function(){var g=e(this),b='<div class="video-container mb-15 mt-15">'+e("<div>").html(g.data("es-stream-embed-player")).html()+"</div>";g.replaceWith(b)});this.resolve()});EasySocial.module("site/subscriptions/follow",function(){var e=this;EasySocial.require().language("COM_EASYSOCIAL_SUBSCRIPTION_INFO").done(function(g){EasySocial.Controller("Follow",{defaultOptions:{}},
function(b){return{init:function(){},"{self} click":function(){EasySocial.ajax("site/controllers/subscriptions/toggle",{uid:b.element.data("id"),type:b.element.data("type"),notify:"1"}).done(function(a,c){b.element.text(c);EasySocial.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_INFO"),content:a})}).fail(function(a){b.setMessage(a,"error")})}}});e.resolve()})});EasySocial.module("site/toolbar/conversations",function(e){var g=this;EasySocial.require().library("tinyscrollbar").done(function(b){EasySocial.Controller("Notifications.Conversations",
{defaultOptions:{interval:30,"{counter}":"[data-notificationConversation-counter]"}},function(a){return{init:function(){a.startMonitoring()},startMonitoring:function(){a.options.state=setTimeout(a.check,1E3*a.options.interval)},stopMonitoring:function(){clearTimeout(a.options.state)},check:function(){a.stopMonitoring();setTimeout(function(){EasySocial.ajax("site/controllers/notifications/getConversationCounter",{},{type:"jsonp"}).done(function(b){0<b?(a.element.addClass("has-notice"),a.counter().html(b)):
a.element.removeClass("has-notice");a.startMonitoring()})},1E3*a.options.interval)}}});g.resolve()})});EasySocial.module("site/toolbar/friends",function(e){var g=this;EasySocial.require().library("tinyscrollbar").language("COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED").done(function(b){EasySocial.Controller("Notifications.Friends",{defaultOptions:{interval:3,returnURL:"","{counter}":"[data-notificationFriends-counter]","{loadRequestsButton}":".loadRequestsButton"}},function(a){return{init:function(){a.startMonitoring()},
startMonitoring:function(){a.options.state=setTimeout(a.check,1E3*a.options.interval)},stopMonitoring:function(){clearTimeout(a.options.state)},check:function(){a.stopMonitoring();setTimeout(function(){EasySocial.ajax("site/controllers/notifications/friendsCounter",{},{type:"jsonp"}).done(function(b){0<b?(a.element.addClass("has-notice"),a.counter().html(b)):a.element.removeClass("has-notice");a.startMonitoring()})},1E3*a.options.interval)}}});EasySocial.Controller("Notifications.Friends.Item",{defaultOptions:{"{actionsWrapper}":"[data-friend-item-actions]",
"{acceptFriend}":"[data-friend-item-accept]","{rejectFriend}":"[data-friend-item-reject]","{actions}":"[data-friend-item-action]","{title}":"[data-friend-item-title]","{mutual}":"[data-friend-item-mutual]",view:{loader:"site/loading/small"}}},function(a){return{init:function(){},"{acceptFriend} click":function(c,d){d.stopPropagation();a.actionsWrapper().addClass("friend-adding");EasySocial.ajax("site/controllers/friends/approve",{viewCallback:"notificationsApprove",id:b(c).data("id")}).done(function(b,
c){a.actionsWrapper().removeClass("friend-adding").addClass("added-friends");a.title().html(b);a.mutual().html(c)}).fail(function(b){a.element.html(b.message)})},"{rejectFriend} click":function(c,d){d.stopPropagation();EasySocial.ajax("site/controllers/friends/reject",{id:b(c).data("id")}).done(function(c){a.actionsWrapper().html(b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED"))}).fail(function(b){a.element.html(b.message)})}}});g.resolve()})});EasySocial.module("site/toolbar/login",function(e){var g=
this;EasySocial.require().library("popbox").done(function(b){EasySocial.Controller("Toolbar.Login",{defaultOptions:{"{dropdown}":"[data-toolbar-login-dropdown]"}},function(a){return{init:function(){var b=a.dropdown().html();a.dropdown().remove();a.element.popbox({content:b,id:"es-wrap",type:"toolbar",toggle:"click",position:"bottom-right",collision:"flip none"}).attr("data-popbox","")},"{self} popboxActivate":function(a,d,e){b(e.tooltip).find("label").on("click",function(a){a.stopPropagation()})}}});
g.resolve()})});EasySocial.module("site/toolbar/notifications",function(e){var g=this;EasySocial.require().script("site/toolbar/friends","site/toolbar/story","site/toolbar/system","site/toolbar/profile","site/toolbar/login","site/toolbar/conversations").done(function(b){EasySocial.Controller("Notifications",{defaultOptions:{friendsInterval:30,systemInterval:30,"{friendNotifications}":"[data-notifications-friends]","{conversationNotifications}":"[data-notifications-conversations]","{systemNotifications}":"[data-notifications-system]",
"{profileItem}":"[data-toolbar-profile]","{storyForm}":"[data-toolbar-story]","{login}":"[data-toolbar-login]","{item}":"[data-toolbar-item]"}},function(a){return{init:function(){a.login().addController(EasySocial.Controller.Toolbar.Login);a.profileItem().addController(EasySocial.Controller.Toolbar.Profile,{interval:a.options.systemInterval});a.systemNotifications().addController(EasySocial.Controller.Notifications.System,{interval:a.options.systemInterval});a.friendNotifications().addController(EasySocial.Controller.Notifications.Friends,
{interval:a.options.friendsInterval});a.conversationNotifications().addController(EasySocial.Controller.Notifications.Conversations,{interval:a.options.friendsInterval});a.storyForm().addController(EasySocial.Controller.Notifications.Story);a.setLayout();b("body").on("click.out-of-dropdown",function(){a.item().removeClass("open")})},"{window} resize":b.debounce(function(){a.setLayout()},250),setLayout:function(){var c=a.element,d=c.outerWidth(!0)-80,e=0;a.item().each(function(){e+=b(this).outerWidth(!0)});
d=e>d;c.toggleClass("narrow",d).toggleClass("wide",!d)}}});g.resolve()})});EasySocial.module("site/toolbar/story",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Notifications.Story",{defaultOptions:{"{loadFormButton}":".loadFormButton","{dropdown}":".dropdown-menu"}},function(a){return{init:function(){},"{dropdown} click":function(a,b){},"{self} hideDropdown":function(){},"{dropdown} click":function(a,b){b.stopPropagation()}}});g.resolve()})});EasySocial.module("site/toolbar/system",
function(e){var g=this;EasySocial.require().view("site/notifications/system.empty").library("tinyscrollbar").done(function(b){EasySocial.Controller("Notifications.System",{defaultOptions:{interval:30,"{counter}":"[data-notificationSystem-counter]"}},function(a){return{init:function(){a.startMonitoring()},startMonitoring:function(){a.options.state=setTimeout(a.check,1E3*a.options.interval)},stopMonitoring:function(){clearTimeout(a.options.state)},check:function(){a.stopMonitoring();setTimeout(function(){EasySocial.ajax("site/controllers/notifications/getSystemCounter",
{},{type:"jsonp"}).done(function(b){0<b?(a.element.addClass("has-notice"),a.counter().html(b)):a.element.removeClass("has-notice");a.startMonitoring()})},1E3*a.options.interval)},"{window} easysocial.clearSystemNotification":function(){a.element.removeClass("has-notice");a.counter().html(0)}}});EasySocial.Controller("Notifications.System.Popbox",{defaultOptions:{"{readall}":"[data-notificationsystem-readall]","{items}":"[data-notificationsystem-items]",view:{empty:"site/notifications/system.empty"}}},
function(a){return{init:function(){},"{readall} click":function(){EasySocial.ajax("site/controllers/notifications/setAllState",{state:"read"}).done(function(){a.items().html("");a.items().append(a.view.empty());b(window).trigger("easysocial.clearSystemNotification")})}}});g.resolve()})});EasySocial.module("site/toolbar/profile",function(e){var g=this;EasySocial.require().library("popbox").done(function(b){EasySocial.Controller("Toolbar.Profile",{defaultOptions:{"{dropdown}":"[data-toolbar-profile-dropdown]"}},
function(a){return{init:function(){var b=a.dropdown().html();a.element.popbox({content:b,id:"es-wrap",type:"toolbar",toggle:"click",position:"bottom-right",collision:"flip none"}).attr("data-popbox","")},"{self} popboxActivate":function(a,d,e){b(e.tooltip).implement(EasySocial.Controller.Toolbar.Profile.Logout)}}});EasySocial.Controller("Toolbar.Profile.Logout",{defaultOptions:{"{logoutForm}":"[data-toolbar-logout-form]","{logoutButton}":"[data-toolbar-logout-button]"}},function(a){return{logout:function(){a.logoutForm().submit()},
"{logoutButton} click":function(){a.logout()}}});g.resolve()})});EasySocial.module("site/users/users",function(e){var g=this;EasySocial.require().library("history").view("site/loading/small").done(function(b){EasySocial.Controller("Users",{defaultOptions:{"{content}":"[data-users-content]","{listing}":"[data-users-listing]","{sort}":"[data-users-sort]","{filter}":"[data-users-filter]","{items}":"[data-users-item]","{pagination}":"[data-users-pagination]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.initUserController()},
initUserController:function(){a.items().implement(EasySocial.Controller.Users.Item,{"{parent}":a})},"{filter} click":function(c,d){d.preventDefault();a.sort().removeClass("active");a.filter().each(function(){b(this).parent().removeClass("active")});b(c).parent().addClass("active");var e=b(c).data("filter");a.options.filter=e;b(c).route();a.listing().html(a.view.loading());a.sort(":first").addClass("active");EasySocial.ajax("site/controllers/users/getUsers",{filter:e,showpagination:1}).done(function(b){a.content().html(b);
a.initUserController()})},"{sort} click":function(c,d){d.preventDefault();var e=b(c).data("type");b("<a>").attr({title:document.title,href:b(c).attr("href")}).route();a.sort().removeClass("active");b(c).addClass("active");a.listing().html(a.view.loading());a.pagination().remove();EasySocial.ajax("site/controllers/users/getUsers",{sort:e,filter:a.options.filter,isSort:!0,showpagination:1}).done(function(b){a.listing().html(b);a.initUserController()})}}});EasySocial.Controller("Users.Item",{defaultOptions:{id:null,
"{addFriend}":"[data-users-add-friend]","{friendsButton}":"[data-users-friends-button]","{compose}":"[data-users-friends-compose]","{unfriend}":"[data-users-friends-unfriend]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{addFriend} click":function(c,d){b(c).addClass("btn-loading");EasySocial.ajax("site/controllers/friends/request",{viewCallback:"usersRequest",id:a.options.id}).done(function(a){b(c).replaceWith(a);b(c).removeClass("btn-loading")})}}});g.resolve()})});EasySocial.module("story",
function(e){var g=this;EasySocial.require().language("COM_EASYSOCIAL_WITH_FRIENDS","COM_EASYSOCIAL_AND_ONE_OTHER","COM_EASYSOCIAL_AND_MANY_OTHERS","COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR").view("apps/user/links/story/attachment.item","apps/user/locations/suggestion","site/albums/upload.item","site/friends/suggest.item","site/friends/suggest.hint.search","site/friends/suggest.hint.empty").done();EasySocial.require().library("mentions").script("site/stream/item").language("COM_EASYSOCIAL_STORY_SUBMIT_ERROR",
"COM_EASYSOCIAL_STORY_CONTENT_EMPTY","COM_EASYSOCIAL_STORY_NOT_ON_STREAM_FILTER").done(function(){EasySocial.Controller("Story",{defaultOptions:{view:{suggestItem:"site/friends/suggest.item"},plugin:{},attachment:{limit:1,lifo:!0},"{header}":"[data-story-header]","{body}":"[data-story-body]","{footer}":"[data-story-footer]","{form}":"[data-story-form]","{textbox}":"[data-story-textbox]","{textField}":"[data-story-textField]","{target}":"[data-story-target]","{submitButton}":"[data-story-submit]",
"{resetButton}":"[data-story-reset]","{privacyButton}":"[data-story-privacy]","{panelContents}":"[data-story-panel-contents]","{panelContent}":"[data-story-panel-content]","{panelButton}":"[data-story-panel-button]","{attachmentContainer}":"[data-story-attachment-container]","{attachmentIcon}":"[data-story-attachment-icon]","{attachmentButtons}":"[data-story-attachment-buttons]","{attachmentButton}":"[data-story-attachment-button]","{attachmentItems}":"[data-story-attachment-items]","{attachmentItem}":"[data-story-attachment-item]",
"{attachmentContent}":"[data-story-attachment-content]","{attachmentToolbar}":"[data-story-attachment-toolbar]","{attachmentDragHandle}":"[data-story-attachment-drag-handle]","{attachmentRemoveButton}":"[data-story-attachment-remove-button]","{attachmentClearButton}":"[data-story-attachment-clear-button]","{attachmentPanelIcon}":"[data-story-attachment-panel-icon]","{attachmentPanelCaption}":"[data-story-attachment-panel-caption]","{streamContainer}":"[data-streams]","{streamItem}":"[data-streamItem]"},
hostname:"story"},function(b,a,c){return{init:function(){c=b.element;window.___story=b;b.id=b.element.data("story");e.each(b.options.plugin,function(a,c){var e=b.plugins[a]=c;"attachment"==e.type&&b.attachments.max++;e.selector=b.getPluginSelector(a)});b.setMentionsLayout();e.module("story-"+b.id).resolve(b)},"{self} click":function(a,c){0<e(c.target).parents().andSelf().filter(b.resetButton()[0]).length||b.expand()},"{textField} touchstart":function(){b.expand()},"{textField} keydown":function(a,
c){b.expand()},"{textField} click":function(){b.expand()},"{textField} mousedown":function(a,c){b.expand()},expand:e.debounce(function(){c.hasClass("active")?b.submitButton().removeAttr("data-disabled"):(c.addClass("active"),setTimeout(function(){c.addTransitionClass("no-transition").addClass("expanded");b.setMentionsLayout();b.submitButton().removeAttr("data-disabled");b.textField().focus()},500))},1),collapse:function(){b.submitButton().attr("data-disabled","true");c.addTransitionClass("no-transition").removeClass("expanded");
setTimeout(function(){c.removeClass("active")},0)},setMentionsLayout:function(){var a=b.textbox(),c=a.controller("mentions");if(c)c.cloneLayout();else{var g=b.header();a.mentions({triggers:{"@":{type:"entity",wrap:!1,stop:"",allowSpace:!0,finalize:!0,query:{emptyHint:!0,loadingHint:!0,searchHint:!0,data:function(a){var c=e.Deferred();EasySocial.ajax("site/controllers/friends/suggest",{search:a}).done(function(a){e.isArray(a)||c.reject();a=e.map(a,function(a){a.title=a.screenName;a.type="user";a.menuHtml=
b.view.suggestItem(!0,{item:a,name:"uid[]"});return a});c.resolve(a)}).fail(c.reject);return c}}},"#":{type:"hashtag",wrap:!0,stop:" #",allowSpace:!1}},plugin:{autocomplete:{id:"es-wrap",position:{my:"left top",at:"left bottom",of:g,collision:"none"},size:{width:function(){return g.width()}},view:{searchHint:"easysocial/site/friends/suggest.hint.search",emptyHint:"easysocial/site/friends/suggest.hint.empty"}}}})}},plugins:{},getPluginName:function(a){return e(a).data("story-plugin-name")},getPluginSelector:function(a){return"[data-story-plugin-name="+
a+"]"},hasPlugin:function(a,c){var e=b.plugins[a];return e?c?e.type===c:!0:!1},buildPluginSelectors:function(a,c,g){var h={};e.each(a,function(a,d){var e=b[d].selector+c.selector;"function"==g?h[d]=function(){return b.find(e)}:h["{"+d+"}"]=e});return h},"{self} addPlugin":function(a,c,g,h,p,s){if(b.hasPlugin(g)){a=b.plugins[g];c={};switch(a.type){case "attachment":c=b.buildPluginSelectors("attachmentIcon attachmentButton attachmentItem attachmentContent attachmentToolbar attachmentDragHandle attachmentRemoveButton".split(" "),
a,s);break;case "panel":c=b.buildPluginSelectors(["panelButton","panelContent"],a,s)}e.extend(p,c)}},"{self} registerPlugin":function(a,c,e,g){b.hasPlugin(e)&&(b.plugins[e].instance=g)},panels:{},currentPanel:null,getPanel:function(a){if(b.hasPlugin(a,"panel"))return a=b.plugins[a],b.panels[a.name]||(b.panels[a.name]={plugin:a,button:b.panelButton(a.selector),content:b.panelContent(a.selector)})},togglePanel:function(a){var c=b.currentPanel;c&&b.deactivatePanel(c);c!==a&&b.activatePanel(a)},activatePanel:function(a){var c=
b.getPanel(a);if(c){b.deactivatePanel(b.currentPanel);var e=b.panelContents();e.addClass("active");c.button.addClass("active");c.content.appendTo(e).addClass("active");b.invokePlugin(a,"activatePanel",[c]);b.trigger("activatePanel",[a])}},deactivatePanel:function(a){var c=b.getPanel(a);c&&(c.button.removeClass("active"),c.content.removeClass("active"),b.panelContents().removeClass("active"),b.invokePlugin(a,"deactivatePanel",[c]),b.trigger("deactivatePanel",[a]))},addPanelCaption:function(a,c){var e=
b.getPanel(a);e&&e.button.addClass("has-data").find(".with-data").html(c)},removePanelCaption:function(a){(a=b.getPanel(a))&&a.button.removeClass("has-data").find(".with-data").empty()},"{self} activatePanel":function(a,c,e){b.currentPanel=e},"{self} deactivatePanel":function(a,c,e){b.currentPanel===e&&(b.currentPanel=null)},"{panelButton} click":function(a,c){var e=b.getPluginName(a);b.togglePanel(e)},attachments:{length:0,max:0},currentAttachment:null,getAttachment:function(a){if(b.hasPlugin(a,
"attachment"))return b.attachments[a]},addAttachment:function(a){if(!b.hasPlugin(a,"attachment"))return!1;var c=b.plugins[a],e=b.attachments,g=e[a];if(g)return g;var h=function(){var g={plugin:c,button:b.attachmentButton(c.selector),icon:b.attachmentIcon(c.selector)};g.item=b.attachmentItem(c.selector).prependTo(b.attachmentItems());e[c.name]=g;e.length++;b.invokePlugin(a,"addAttachment",[g]);b.trigger("addAttachment",[g])},s=b.options.attachment,q=s.lifo;if(0<s.limit&&e.length>=s.limit)return q?
(h(),h=b.getPluginName(b.attachmentItem(":last")),b.removeAttachment(h),g):!1;h();return g},removeAttachment:function(a){var c=b.getAttachment(a);if(c)return b.invokePlugin(a,"removeAttachment",[c]),b.trigger("removeAttachment",[c]),c.icon.removeClass("active"),c.button.removeClass("active"),setTimeout(function(){c.item.removeClass("active")},0),delete b.attachments[a],b.attachments.length--,b.invokePlugin(a,"destroyAttachment",[c]),b.trigger("destroyAttachment",[c]),c},clearAttachment:function(){var a=
e.map(b.attachments,function(a,c){if(!/length|max/.test(c))return b.removeAttachment(c),c});b.trigger("clearAttachment",[a])},activateAttachment:function(a){var c=b.getAttachment(a);c&&(b.deactivateAttachment(b.currentAttachment),c.icon.addClass("active"),c.button.addClass("active"),setTimeout(function(){c.item.addClass("active")},0),b.invokePlugin(a,"activateAttachment",[c]),b.trigger("activateAttachment",[c]))},deactivateAttachment:function(a){var c=b.attachments[a];c&&(c.icon.removeClass("active"),
c.button.removeClass("active"),setTimeout(function(){c.item.removeClass("active")},0),b.invokePlugin(a,"deactivateAttachment",[c]),b.trigger("deactivateAttachment",[c]))},"{self} activateAttachment":function(a,c,e){a=e.plugin.name;b.currentAttachment=a;b.body().addClass("active");b.element.addClass("attaching-"+a);a=b.getPanel("attachments");c=e.button.find("[data-story-attachment-icon]").attr("class");attachmentCaption=e.button.find("[data-story-attachment-caption]").text();a.button.addClass("has-data");
b.attachmentPanelIcon().attr("class",c);b.attachmentPanelCaption().text(attachmentCaption)},"{self} deactivateAttachment":function(a,c,e){a=e.plugin.name;b.currentAttachment===a&&(b.currentAttachment=null);b.body().removeClass("active");b.element.removeClass("attaching-"+a)},"{attachmentButton} click":function(a,c){var e=b.getPluginName(a);"attachments"==b.currentPanel&&b.deactivatePanel("attachments");(b.getAttachment(e)||b.addAttachment(e))&&b.activateAttachment(e)},"{attachmentClearButton} click":function(){b.clearAttachment();
b.textField().focus()},"{self} addAttachment":function(a,c,e){b.activateAttachment(e.plugin.name)},"{self} removeAttachment":function(a,c,e){b.element.removeClass("attaching-"+e.plugin.name)},"{self} destroyAttachment":function(a,c,e){1>b.attachments.length&&(b.body().removeClass("active"),a=b.getPanel("attachments"),c=b.attachmentPanelIcon(),e=b.attachmentPanelCaption(),a.button.removeClass("has-data"),c.attr("class",c.data("defaultIcon")),e.text(""))},"{self} clearAttachment":function(){"attachments"==
b.currentPanel&&b.deactivatePanel("attachments")},"{attachmentRemoveButton} click":function(a,c){var e=b.getPluginName(a);b.removeAttachment(e)},saving:!1,save:function(){if(!b.saving){b.saving=!0;var a=e.Deferred();a.data={};a.tasks=[];a.addData=function(c,g){var h=c.options.name;if("attachment"==c.options.type){if(h!==b.currentAttachment)return;a.data.attachment=b.currentAttachment}e.isPlainObject(g)?e.each(g,function(b,c){a.data[h+"_"+b]=c}):a.data[h]=g};a.addTask=function(b){var c=e.Deferred();
c.name=b;c.save=a;a.tasks.push(c);return c};a.process=function(){"pending"===a.state()&&e.when.apply(e,a.tasks).done(function(){e.trim(a.data.content)||a.data.attachment?a.resolve():a.reject(e.language("COM_EASYSOCIAL_STORY_CONTENT_EMPTY"),"warning")}).fail(a.reject);return a};b.trigger("save",[a]);b.element.addClass("saving");a.process().done(function(){var c=b.textbox().mentions("controller").toArray(),g=b.element.data("storyHashtags"),g=g?g.split(","):[],h=!1;0<g.length&&(h=1>e.map(c,function(a){if("hashtag"===
a.type&&-1<e.inArray(a.value,g))return a}).length);EasySocial.ajax("site/controllers/story/create",a.data).done(function(a,c){h&&(a=b.setMessage(e.language("COM_EASYSOCIAL_STORY_NOT_ON_STREAM_FILTER")));b.trigger("create",[a,c]);b.clear()}).fail(function(a){b.trigger("fail",arguments);a&&b.setMessage(a.message,a.type)}).always(function(){b.element.removeClass("saving");b.saving=!1})}).fail(function(a,c){a||(a=e.language("COM_EASYSOCIAL_STORY_SUBMIT_ERROR"),c="error");b.setMessage(a,c);b.element.removeClass("saving");
b.saving=!1})}},clear:function(){b.textField().val("");b.trigger("clear");b.clearMessage();b.clearAttachment();b.deactivatePanel(b.currentPanel);var a=b.textbox().mentions("controller");a.reset();setTimeout(function(){a.cloneLayout()},500);b.textField().focus()},"{self} save":function(a,c,e){a=b.textField().val();e=e.data;e.content=a;e.target=b.target().val();e.privacy=b.find("[data-privacy-hidden]").val();e.privacyCustom=b.find("[data-privacy-custom-hidden]").val();e.mentions=b.textbox().mentions("controller").toArray(!0)},
"{submitButton} click":function(a,c){a.attr("data-disabled")?b.expand():b.save()},"{resetButton} click":function(){b.clear();""===b.textField().val()&&b.collapse()},"{privacyButton} click":function(a){setTimeout(function(){var c=a.find("[data-es-privacy-container]").hasClass("active");b.footer().toggleClass("allow-overflow",c)},1)}}});g.resolve()})});EasySocial.module("story/friends",function(e){var g=this;EasySocial.require().library("textboxlist").language("COM_EASYSOCIAL_WITH_FRIENDS","COM_EASYSOCIAL_AND_ONE_OTHER",
"COM_EASYSOCIAL_AND_MANY_OTHERS").done(function(){EasySocial.Controller("Story.Friends",{defaultOptions:{"{friendList}":".es-story-friends-textbox",showSummary:!1,summarizeNamesAfter:2,concatNamesWith:", "}},function(b){return{init:function(){b.friendList().textboxlist({plugin:{autocomplete:{exclusive:!0,cache:!1,query:b.search,filterItem:b.createMenuItem}}})},search:function(a){var c=b.getTaggedUsers();return EasySocial.ajax("site/controllers/friends/suggest",{search:a,exclude:c})},getTaggedUsers:function(){var a=
[],b=e("[data-textboxlist-item]");0<b.length&&e.each(b,function(b,c){a.push(e(c).data("id"))});return a},createMenuItem:function(a,b){a.title=a.screenName;var d=e(new Image).addClass("textboxlist-menu-avatar").attr({src:a.avatar}).toHTML();a.html=d+" "+a.title;a.menuHtml=d+" "+a.title;return a},updatePanelCaption:function(){var a=b.options,c=b.friendList().controller("textboxlist").getAddedItems(),d=c.length,f=a.summarizeNamesAfter,g=Math.max(f-1,d-1),f=d-f;a.showFriendSummary&&(d=e.language("COM_EASYSOCIAL_WITH_FRIENDS",
e.map(c.slice(0,g),function(a){return a.screenName}).join(a.concatNamesWith)),1==f&&(d+=e.language("COM_EASYSOCIAL_AND_ONE_OTHER")),1<f&&(d+=e.language("COM_EASYSOCIAL_AND_MANY_OTHERS",f)));b.story.addPanelCaption("friends",d)},"{friendList} addItem":function(){b.updatePanelCaption()},"{friendList} removeItem":function(){b.updatePanelCaption()},mention:function(a,c,d){b.search(c).done(function(a){var b=[];e.each(a,function(a,c){b.push({id:c.id,name:c.screenName,avatar:c.avatar,type:"contact"})});
d(b)})},"{story} save":function(a,c,d){a=b.friendList().controller("textboxlist").getAddedItems().map(function(a){return a.id});d.addData(b,{tags:a})},"{story} clear":function(){b.friendList().controller("textboxlist").clearItems()}}});g.resolve()})});EasySocial.module("story/links",function(e){var g=this;EasySocial.require().view("apps/user/links/story/attachment.item").done(function(){EasySocial.Controller("Story.Links",{defaultOptions:{view:{linkItem:"apps/user/links/story/attachment.item"},urlParser:/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi,
"{linkForm}":"[data-story-link-form]","{linkInput}":"[data-story-link-input]","{linkContent}":"[data-story-link-content]","{linkItem}":"[data-story-link-item]","{linkTitle}":"[data-story-link-title]","{linkDescription}":"[data-story-link-description]","{linkImages}":"[data-story-link-images]","{linkImage}":"[data-story-link-image]","{linkVideo}":"[data-story-link-video]","{titleTextfield}":"[data-story-link-title-textfield]","{descriptionTextfield}":"[data-story-link-description-textfield]","{attachButton}":"[data-story-link-attach-button]",
"{removeButton}":"[data-story-link-remove-button]","{removeThumbnail}":"[data-story-link-remove-image]"}},function(b){return{init:function(){},activateAttachment:function(){b.doNotFocus||setTimeout(function(){b.linkInput().focus();b.doNotFocus=!1},500)},links:{},currentLink:null,crawling:!1,extractUrls:function(a){a=a.match(b.options.urlParser);return e.isArray(a)?e.map(a,function(a,b){return e.trim(a)}):[]},fixUrl:function(a){a=e.uri(a);/http|https/.test(a.protocol())||a.setProtocol("http");return a.toString()},
getLink:function(a){e.isString(a)&&(a=b.extractUrls(a));if(!(0>a.length))return a=a[0],link=b.links[a]||b.createLink(a)},createLink:function(a){var c=b.links[a]=e.Deferred();c.url=a;b.crawling=!0;EasySocial.ajax("site/controllers/crawler/fetch",{urls:[a]}).done(function(d){(d=d[a])||c.reject();c.info=d;var e=d.opengraph||{},g=d.oembed||{};c.data={title:g.title||e.title||d.title,desc:g.description||e.desc||d.description,url:a,images:(g.thumbnail?[g.thumbnail]:d.images)||(e.image?[e.image]:d.images)||
[],video:e.video?e.video:d.videos};c.item=b.view.linkItem(c.data).data("link",c);c.item.addController("EasySocial.Controller.Story.Links.Item");c.resolve(c)}).fail(function(){c.reject()}).always(function(){b.crawling=!1});return c},addLink:function(a){b.linkContent().empty().append(a.item);b.linkForm().hide();b.currentLink=a},removeLink:function(){b.linkItem().detach();b.linkForm().show();b.currentLink=null},"{attachButton} click":function(){b.linkInput();var a=b.linkForm(),c=e.trim(b.linkInput().val());
""!==c&&(c=b.fixUrl(c),b.linkInput().val(c),a.addClass("busy"),b.getLink(c).done(function(a){b.addLink(a)}).always(function(){a.removeClass("busy")}))},"{removeButton} click":function(a){b.currentLink.disabled=!0;b.removeLink()},"{story.textField} input":e._.debounce(function(a,c){if(!b.currentLink&&!b.crawling){var d=a.val(),d=b.extractUrls(d);if(d=d[d.length-1]){var d=b.fixUrl(d),e=b.links[d];e&&e.disabled||(b.linkInput().val(d),b.doNotFocus=!0,b.attachmentButton().click(),b.attachButton().click())}}},
750),"{story} save":function(a,c,d){b.currentLink&&(a={title:b.titleTextfield().val(),description:b.descriptionTextfield().val(),url:b.currentLink.url,video:b.linkVideo().val()},b.removeThumbnail().is(":checked")||(a.image=b.linkImage(".active").attr("src")),d.addData(b,a))},"{story} clear":function(){b.linkInput().val("");b.removeLink()}}});EasySocial.Controller("Story.Links.Item",{defaultOptions:{"{previousImage}":"[data-story-link-image-prev]","{nextImage}":"[data-story-link-image-next]","{image}":"[data-story-link-image]",
"{imagesWrapper}":"[data-story-link-images]","{imageIndex}":"[data-story-link-image-index]","{removeThumbnail}":"[data-story-link-remove-image]","{title}":"[data-story-link-title]","{description}":"[data-story-link-description]","{titleTextfield}":"[data-story-link-title-textfield]","{descriptionTextfield}":"[data-story-link-description-textfield]"}},function(b){return{init:function(){},"{removeThumbnail} click":function(){var a=b.removeThumbnail().is(":checked");a?b.imagesWrapper().hide():b.imagesWrapper().show();
b.element.toggleClass("has-images",!a)},"{previousImage} click":function(){var a=b.image(".active").prev(),c=b.image(".active"),d=parseInt(b.imageIndex().html())-1;0<a.length&&(e(c).removeClass("active"),e(a).addClass("active"),b.imageIndex().html(d))},"{nextImage} click":function(){var a=b.image(".active").next(),c=b.image(".active"),d=parseInt(b.imageIndex().html())+1;0<a.length&&(e(c).removeClass("active"),e(a).addClass("active"),b.imageIndex().html(d))},"{title} click":function(){var a=b.element.hasClass("editing-title");
b.element.toggleClass("editing-title",!a);a||b.editTitle()},editTitleEvent:"click.es.story.editLinkTitle",editTitle:function(){b.element.addClass("editing-title");setTimeout(function(){b.titleTextfield().val(b.title().text()).focus()[0].select();e(document).on(b.editTitleEvent,function(a){a.target!==b.titleTextfield()[0]&&b.saveTitle("save")})},1)},saveTitle:function(a){a||(a=save);var c=b.titleTextfield().val();switch(a){case "save":""===c&&(c=b.title().data("default")),b.title().html(c)}b.element.removeClass("editing-title");
e(document).off(b.editTitleEvent)},"{titleTextfield} keyup":function(a,c){27==c.keyCode&&b.saveTitle("revert")},"{description} click":function(){var a=b.element.hasClass("editing-description");b.element.toggleClass("editing-description",!a);a||b.editDescription()},editDescriptionEvent:"click.es.story.editLinkDescription",editDescription:function(){b.element.addClass("editing-description");setTimeout(function(){var a=b.description().clone(),c=a.hasClass("no-description");a.wrapInner(b.descriptionTextfield());
c&&b.descriptionTextfield().val("");b.descriptionTextfield().expandingTextarea();b.descriptionTextfield().focus()[0].select();e(document).on(b.editDescriptionEvent,function(a){a.target!==b.descriptionTextfield()[0]&&b.saveDescription("save")})},1)},saveDescription:function(a){a||(a=save);var c=b.descriptionTextfield().val().replace(/\n/g,"<br//>");switch(a){case "save":a=""===c,b.description().toggleClass("no-description",a),a&&(c=b.descriptionTextfield().attr("placeholder")),b.description().html(c)}b.descriptionTextfield().expandingTextarea("destroy");
b.element.find(".textareaClone").remove();b.element.removeClass("editing-description");e(document).off(b.editDescriptionEvent)},"{descriptionTextfield} keyup":function(a,c){27==c.keyCode&&b.saveDescription("revert")}}});g.resolve()})});EasySocial.module("story/locations",function(e){var g=this;EasySocial.require().library("gmaps","scrollTo").view("apps/user/locations/story/suggestion").language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR","COM_EASYSOCIAL_LOCATION_TIMEOUT_ERROR","COM_EASYSOCIAL_LOCATION_UNAVAILABLE_ERROR").done(function(){EasySocial.Controller("Story.Locations",
{defaultOptions:{view:{suggestion:"apps/user/locations/suggestion"},map:{lat:0,lng:0},"{form}":"[data-story-location-form]","{textField}":"[data-story-location-textField]","{detectButton}":"[data-story-location-detect-button]","{autocomplete}":"[data-story-location-autocomplete]","{suggestions}":"[data-story-location-suggestions]","{suggestion}":"[data-story-location-suggestion]","{viewport}":"[data-story-location-viewport]","{textbox}":"[data-story-location-textbox]","{removeButton}":"[data-story-location-remove-button]"}},
function(b){return{init:function(){navigator.geolocation&&b.detectButton().show();b.textField().removeAttr("disabled")},"{window} resize":e.debounce(function(){var a=b.currentLocation;if(a){var c=b.viewport();c.data("width")!==c.width()&&(c=a.geometry.location,a=c.lat(),c=c.lng(),b.navigate(a,c))}},250),navigate:function(a,c){var d=b.viewport(),f=d.width(),d=d.height(),g=e.GMaps.staticMapURL({size:[f,d],lat:a,lng:c,markers:[{lat:a,lng:c}]});b.viewport().css({backgroundImage:e.cssUrl(g)}).data({width:f,
height:d});b.form().addClass("has-location")},locations:{},lastQueryAddress:null,"{textField} keypress":function(a,c){switch(c.keyCode){case 38:var d=e(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);b.suggestion().removeClass("active");d.addClass("active").trigger("activate");b.suggestions().scrollTo(d,{offset:-1*d.height()});c.preventDefault();break;case 40:d=e(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active");
d.addClass("active").trigger("activate");b.suggestions().scrollTo(d,{offset:-1*d.height()});c.preventDefault();break;case 13:d=b.suggestion(".active").data("location");b.set(d);b.hideSuggestions();break;case 27:b.hideSuggestions()}},"{textField} keyup":function(a,c){switch(c.keyCode){case 38:case 40:case 37:case 39:case 13:case 27:break;default:var d=e.trim(a.val());""===d&&(b.form().removeClass("has-location"),b.hideSuggestions());var f=b.locations[d];f?(b.lastQueryAddress=d,b.suggest(f)):b.lookup(d)}},
lookup:e._.debounce(function(a){b.textbox().addClass("busy");e.GMaps.geocode({address:a,callback:function(c,d){b.textbox().removeClass("busy");"OK"==d&&(b.locations[a]=c,b.suggest(c),b.lastQueryAddress=a)}})},250),suggest:function(a){var c=b.suggestions();c.empty();0>a.length||(e.each(a,function(a,e){b.view.suggestion({location:e}).data("location",e).appendTo(c)}),b.showSuggestions())},showSuggestions:function(){b.focusSuggestion=!0;b.element.find(".es-story-footer").addClass("swap-zindex");setTimeout(function(){b.autocomplete().addClass("active")},
500)},hideSuggestions:function(){b.focusSuggestion=!1;b.autocomplete().removeClass("active");setTimeout(function(){b.focusSuggestion||b.element.find(".es-story-footer").removeClass("swap-zindex")},500)},"{suggestion} activate":function(a,c){var d=a.data("location");b.navigate(d.geometry.location.lat(),d.geometry.location.lng())},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active");a.addClass("active").trigger("activate")},"{suggestion} click":function(a,c){var d=a.data("location");
b.set(d);b.hideSuggestions()},set:function(a){b.currentLocation=a;b.navigate(a.geometry.location.lat(),a.geometry.location.lng());var c=a.formatted_address;b.textField().val(c);b.lastQueryAddress=c;b.story.addPanelCaption("locations",a.formatted_address);b.form().addClass("has-location")},unset:function(){b.currentLocation=null;b.textField().val("");b.story.removePanelCaption("locations");b.viewport().css("backgroundImage","");b.form().removeClass("has-location")},activatePanel:function(){setTimeout(function(){b.textField().focus()},
500)},deactivatePanel:function(){var a=b.currentLocation;a&&b.set(a)},detectTimer:null,"{detectButton} click":function(){var a=b.story,c=b.textbox();c.addClass("busy");clearTimeout(b.detectTimer);b.detectTimer=setTimeout(function(){a.setMessage(e.language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR"));c.removeClass("busy")},8E3);e.GMaps.geolocate({success:function(c){a.clearMessage();e.GMaps.geocode({lat:c.coords.latitude,lng:c.coords.longitude,callback:function(a,c){"OK"==c&&(b.suggest(a),b.textField().focus())}})},
error:function(b){var c="";switch(b.code){case 1:c=e.language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR");break;case 2:c=e.language("COM_EASYSOCIAL_LOCATION_TIMEOUT_ERROR");break;default:c=e.language("COM_EASYSOCIAL_LOCATION_UNAVAILABLE_ERROR")}a.setMessage(c)},always:function(){clearTimeout(b.detectTimer);c.removeClass("busy")}})},"{removeButton} click":function(){b.unset();b.hideSuggestions()},"{story} save":function(a,c,d){(a=b.currentLocation)&&d.addData(b,{short_address:a.address_components[0].long_name,
formatted_address:a.formatted_address,lat:a.geometry.location.lat(),lng:a.geometry.location.lng()})},"{story} clear":function(){b.unset();b.hideSuggestions()}}});g.resolve()})});EasySocial.module("story/photos",function(e){var g=this;EasySocial.require().script("albums/uploader").done(function(){EasySocial.Controller("Story.Photos",{defaultOptions:{"{albumView}":"[data-album-view]","{albumContent}":"[data-album-content]","{uploadButton}":"[data-album-upload-button]","{photoItemGroup}":"[data-photo-item-group]",
"{photoItem}":"[data-photo-item]","{photoImage}":"[data-photo-image]","{photoRemoveButton}":"[data-photo-remove-button]","{uploadItem}":"[data-photo-upload-item]"}},function(b){return{init:function(){b.uploader=b.albumView().addController(EasySocial.Controller.Albums.Uploader,e.extend({"{uploadButton}":b.uploadButton.selector,"{uploadItemGroup}":b.photoItemGroup.selector,"{uploadDropsite}":b.albumContent.selector},{settings:b.options.uploader}));b.photoItemGroup().css("opacity",1);b.addPlugin("uploader",
b.uploader);b.setLayout()},hasItems:function(){var a=0<b.photoItem().length,c=0<b.uploadItem().length;return a||c},setLayout:function(){b.albumView().toggleClass("has-photos",b.hasItems())},activateAttachment:function(){},removePhoto:function(a){b.photoItem().filterBy("photoId",a).remove();b.setLayout()},clearPhoto:function(){b.photoItem().remove();b.setLayout()},"{uploader} FilesAdded":function(){b.setLayout();b.uploader.start()},"{uploader} FileUploaded":function(a,c,d,f,g){a=b.uploader.getItem(f);
var h=e(e.parseHTML(e.trim(g.html)));photoData=g.data;h.data("photo",photoData).addClass("new-item").insertAfter(a.element);b.uploader.removeItem(f.id);b.setLayout();setTimeout(function(){h.removeClass("new-item")},1);b.save()},"{uploader} FileError":function(a,c,d,e,g){b.story.setMessage(g.message,"error");if(a=b.uploadingPhoto)a.reject(),delete b.uploadingPhoto},"{uploader} Error":function(a,c,d,e){b.story.setMessage(e.message,"error");if(a=b.uploadingPhoto)a.reject(),delete b.uploadingPhoto},"{photoRemoveButton} click":function(a){a=
a.parent(b.photoItem.selector).data("photoId");b.removePhoto(a)},"{story} save":function(a,c,d){b.hasItems()&&(b.uploadingPhoto=d.addTask("uploadingPhoto"),b.save())},save:function(){var a=b.uploadingPhoto;if(a&&1>b.uploadItem().length){var c=[],d=a.save;b.photoItem().each(function(){c.push(e(this).data("photoId"))});d.addData(b,c);a.resolve();delete b.uploadingPhoto}},"{story} clear":function(){b.clearPhoto()}}});g.resolve()})});EasySocial.module("stream",function(){var e=this;EasySocial.require().library("dialog").script("comment").view("site/likes/item").language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE",
"COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBSCRIBE","COM_EASYSOCIAL_STREAM_DIALOG_FEED","COM_EASYSOCIAL_STREAM_BUTTON_CLOSE").done(function(g){EasySocial.Controller("Stream.Item",{defaultOptions:{id:"","{streamItem}":".streamItem",
"{streamData}":".streamData","{streamResponds}":".stream-responds","{likeItem}":".likeItem","{likeItemList}":".likeItemList","{commentLink}":".commentLink","{commentFrame}":".commentFrame","{commentInput}":".commentInput","{followItem}":".followItem","{unfollowItem}":".unfollowItem","{hideItem}":".hideItem","{unhideItem}":".unhideItem"}},function(b){return{init:function(){b.commentFrame().implement("EasySocial.Controller.Comments",{uid:b.element.data("id"),pagination:new CommentPagination({total:b.commentFrame().data("total")}),
commentlist:new Comment.List})},"{likeItem} click":function(){EasySocial.ajax("site:/controllers/likes/toggle",{id:b.element.data("id"),type:"stream"},{success:function(a){var c="";0<a.likeCount&&(c=b.view.likeitem({likeCount:a.likeCount}),c.find(".likeText").html(a.message));b.likeItemList().html(c);b.likeItem().text(a.label)},fail:function(){}})},"{unfollowItem} click":function(){var a=b.element.data("sid");a&&g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE"),content:g.language("COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE"),
buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE"),click:function(){EasySocial.ajax("site:/controllers/subscriptions/remove",{id:a},{success:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK"),click:function(){b.unfollowItem().removeClass("unfollowItem");g.dialog().close()}}]})},fail:function(){}})}},{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),
click:function(){g.dialog().close()}}]})},"{followItem} click":function(){EasySocial.ajax("site:/controllers/subscriptions/form",{contentId:b.element.data("id"),contentType:"stream"},{success:function(a){""!=a.message?g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),click:function(){g.dialog().close()}}]}):g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:a.htmlform,
buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT"),click:function(){var a=g("#esfullname").val(),d=g("#email").val();EasySocial.ajax("site:/controllers/subscriptions/add",{contentId:b.element.data("id"),contentType:"stream",esfullname:a,email:d},{success:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK"),click:function(){b.followItem().removeClass("followItem");
g.dialog().close()}}]})},fail:function(){}})}},{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),click:function(){g.dialog().close()}}]})},fail:function(){}})},"{hideItem} click":function(){EasySocial.ajax("site:/controllers/stream/hide",{id:b.element.data("id")},{success:function(a){a="<div>"+a.message+"</div>";b.streamData().hide();b.element.append(a)},fail:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_STREAM_DIALOG_FEED"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_STREAM_BUTTON_CLOSE"),
click:function(){g.dialog().close()}}]})}})},"{unhideItem} click":function(){EasySocial.ajax("site:/controllers/stream/unhide",{id:b.element.data("id")},{success:function(a){b.streamData().show();b.element.children().last().remove()},fail:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_STREAM_DIALOG_FEED"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_STREAM_BUTTON_CLOSE"),click:function(){g.dialog().close()}}]})}})},"{commentLink} click":function(){b.commentInput().focus()}}});
e.resolve()})});EasySocial.module("tab",function(e){EasySocial.Controller("Tab",{defaultOptions:{view:{},"{tabs}":"","{tabsContent}":"","{defaultActive}":""}},function(g){return{init:function(){console.log("Tabs loaded");g.defaultActive().click()},"{tabs} click":function(b){if(e(b).hasClass("inactive"))return!1;g.tabs(".active").removeClass("active");e(b).addClass("active");g.tabsContent().hide();b=".tab-"+e(b).attr("id");g.tabsContent(b).show()}}});this.resolve()});EasySocial.module("toggle",function(e){EasySocial.Controller("Toggle",
{defaultOptions:{view:{},"{selector}":""}},function(g){return{init:function(){console.log("Toggle loaded")},"{selector} click":function(b){e(b).next().toggle();e(b).toggleClass("this-closed")}}});this.resolve()});EasySocial.module("uploader/item",function(e){EasySocial.require().view("site/uploader/preview").done(function(e){EasySocial.Controller("Uploader.Item",{defaults:{"{uploadItem}":".uploadItem","{uploadItemPreview}":".uploadItem.preview a.itemLink","{itemLink}":".itemLink","{itemDelete}":".itemDelete",
view:{preview:"site/uploader/preview"}}},function(b){return{init:function(){},"{itemDelete} click":function(a){var b=e(a).data("id");EasySocial.ajax("site:/controllers/uploader/delete",{id:b},function(){e(a).parents("li.uploadItem").remove()})},"{uploadItemPreview} click":function(a){var b=e(a).data("uri");a=e(a).data("title");e.dialog({title:a,content:e.Image.get(b)})}}})});this.resolve()});EasySocial.module("utilities/alias",function(e){EasySocial.Controller("Utilities.Alias",{defaultOptions:{"{target}":"",
"{source}":""}},function(e){return{init:function(){},convertToPermalink:function(b){return b.replace(/\s/g,"-").replace(/[^\w/-]/g,"").toLowerCase()},"{source} keyup":function(){e.target().val(e.convertToPermalink(e.source().val()))},"{target} keyup":function(){e.target().val(e.convertToPermalink(e.target().val()))}}});this.resolve()})});