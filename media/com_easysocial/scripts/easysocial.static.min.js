/*
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>

 Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(h,e){function g(a){var b=a.length,c=m.type(a);return m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"===typeof b&&0<b&&b-1 in a)}function b(a){var b=I[a]={};m.each(a.match(ma)||[],function(a,c){b[c]=!0});return b}function a(a,b,c,d){if(m.acceptData(a)){var f=m.expando,k="string"===typeof b,g=a.nodeType,n=g?m.cache:a,p=g?a[f]:a[f]&&f;if(p&&n[p]&&(d||n[p].data)||!k||c!==e){p||(g?a[f]=p=P.pop()||m.guid++:p=f);n[p]||(n[p]={},g||(n[p].toJSON=m.noop));if("object"===
typeof b||"function"===typeof b)d?n[p]=m.extend(n[p],b):n[p].data=m.extend(n[p].data,b);a=n[p];d||(a.data||(a.data={}),a=a.data);c!==e&&(a[m.camelCase(b)]=c);k?(c=a[b],null==c&&(c=a[m.camelCase(b)])):c=a;return c}}}function c(a,b,c){if(m.acceptData(a)){var d,e,k,g=a.nodeType,n=g?m.cache:a,p=g?a[m.expando]:m.expando;if(n[p]){if(b&&(d=c?n[p]:n[p].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" "));e=0;for(k=b.length;e<k;e++)delete d[b[e]];if(!(c?
f:m.isEmptyObject)(d))return}if(!c&&(delete n[p].data,!f(n[p])))return;g?m.cleanData([a],!0):m.support.deleteExpando||n!=n.window?delete n[p]:n[p]=null}}}function d(a,b,c){if(c===e&&1===a.nodeType)if(c="data-"+b.replace(C,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:K.test(c)?m.parseJSON(c):c}catch(d){}m.data(a,b,c)}else c=e;return c}function f(a){for(var b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;
return!0}function k(){return!1}function n(){return!0}function p(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function s(a,b,c){b=b||0;if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return m.grep(a,function(a){return a===b===c});if("string"===typeof b){var d=m.grep(a,function(a){return 1===a.nodeType});if(Kb.test(b))return m.filter(b,d,!c);b=m.filter(b,d)}return m.grep(a,function(a){return 0<=m.inArray(a,b)===c})}function q(a){var b=pb.split("|");a=a.createDocumentFragment();
if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function u(a){var b=a.getAttributeNode("type");a.type=(b&&b.specified)+"/"+a.type;return a}function r(a){var b=db.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function t(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function l(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,f;d=m._data(a);var e=m._data(b,d),k=d.events;if(k)for(c in delete e.handle,e.events={},k)for(d=0,
f=k[c].length;d<f;d++)m.event.add(b,c,k[c][d]);e.data&&(e.data=m.extend({},e.data))}}function v(a,b){var c,d,f=0,k="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(b||"*"):e;if(!k)for(k=[],c=a.childNodes||a;null!=(d=c[f]);f++)!b||m.nodeName(d,b)?k.push(d):m.merge(k,v(d,b));return b===e||b&&m.nodeName(a,b)?m.merge([a],k):k}function z(a){eb.test(a.type)&&(a.defaultChecked=a.checked)}function A(a,b){if(b in a)return b;
for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,f=fb.length;f--;)if(b=fb[f]+c,b in a)return b;return d}function w(a,b){a=b||a;return"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)}function B(a,b){for(var c,d=[],f=0,e=a.length;f<e;f++)c=a[f],c.style&&(d[f]=m._data(c,"olddisplay"),b?(d[f]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&w(c)&&(d[f]=m._data(c,"olddisplay",N(c.nodeName)))):d[f]||w(c)||m._data(c,"olddisplay",m.css(c,"display")));for(f=0;f<e;f++)c=a[f],
!c.style||b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?d[f]||"":"none");return a}function x(a,b,c){return(a=gb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function Q(a,b,c,d,f){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=m.css(a,c+ua[b],!0,f)),d?("content"===c&&(e-=m.css(a,"padding"+ua[b],!0,f)),"margin"!==c&&(e-=m.css(a,"border"+ua[b]+"Width",!0,f))):(e+=m.css(a,"padding"+ua[b],!0,f),"padding"!==c&&(e+=m.css(a,"border"+ua[b]+
"Width",!0,f)));return e}function R(a,b,c){var d=!0,f="width"===b?a.offsetWidth:a.offsetHeight,e=Ya(a),k=m.support.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e);if(0>=f||null==f){f=Oa(a,b,e);if(0>f||null==f)f=a.style[b];if(ia.test(f))return f;d=k&&(m.support.boxSizingReliable||f===a.style[b]);f=parseFloat(f)||0}return f+Q(a,b,c||(k?"border":"content"),d,e)+"px"}function N(a){var b=y,c=hb[a];c||(c=$(a,b),"none"!==c&&c||(Ia=(Ia||m("<iframe frameborder='0' width='0' height='0'/>").css("cssText",
"display:block !important")).appendTo(b.documentElement),b=(Ia[0].contentWindow||Ia[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=$(a,b),Ia.detach()),hb[a]=c);return c}function $(a,b){var c=m(b.createElement(a)).appendTo(b.body),d=m.css(c[0],"display");c.remove();return d}function J(a,b,c,d){var f;if(m.isArray(b))m.each(b,function(b,f){c||Zb.test(a)?d(a,f):J(a+"["+("object"===typeof f?b:"")+"]",f,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(f in b)J(a+"["+
f+"]",b[f],c,d)}function L(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,f=0,e=b.toLowerCase().match(ma)||[];if(m.isFunction(c))for(;d=e[f++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function U(a,b,c,d){function f(g){var n;e[g]=!0;m.each(a[g]||[],function(a,Ha){var g=Ha(b,c,d);if("string"===typeof g&&!k&&!e[g])return b.dataTypes.unshift(g),f(g),!1;if(k)return!(n=g)});return n}var e={},k=a===Pa;return f(b.dataTypes[0])||!e["*"]&&f("*")}function H(a,
b){var c,d,f=m.ajaxSettings.flatOptions||{};for(c in b)b[c]!==e&&((f[c]?a:d||(d={}))[c]=b[c]);d&&m.extend(!0,a,d);return a}function ha(){try{return new h.XMLHttpRequest}catch(a){}}function Aa(){setTimeout(function(){Qa=e});return Qa=m.now()}function aa(a,b){m.each(b,function(b,c){for(var d=(ib[b]||[]).concat(ib["*"]),f=0,e=d.length;f<e&&!d[f].call(a,b,c);f++);})}function ra(a,b,c){var d,f=0,e=Ra.length,k=m.Deferred().always(function(){delete g.elem}),g=function(){if(d)return!1;for(var b=Qa||Aa(),
b=Math.max(0,n.startTime+n.duration-b),c=1-(b/n.duration||0),f=0,e=n.tweens.length;f<e;f++)n.tweens[f].run(c);k.notifyWith(a,[n,c,b]);if(1>c&&e)return b;k.resolveWith(a,[n]);return!1},n=k.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Qa||Aa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,n.opts,b,c,n.opts.specialEasing[b]||n.opts.easing);n.tweens.push(d);return d},stop:function(b){var c=0,f=b?
n.tweens.length:0;if(d)return this;for(d=!0;c<f;c++)n.tweens[c].run(1);b?k.resolveWith(a,[n,b]):k.rejectWith(a,[n,b]);return this}});c=n.props;for(Sa(c,n.opts.specialEasing);f<e;f++)if(b=Ra[f].call(n,a,c,n.opts))return b;aa(n,c);m.isFunction(n.opts.start)&&n.opts.start.call(a,n);m.fx.timer(m.extend(g,{anim:n,queue:n.opts.queue,elem:a}));return n.progress(n.opts.progress).done(n.opts.done,n.opts.complete).fail(n.opts.fail).always(n.opts.always)}function Sa(a,b){var c,d,f,e,k;for(c in a)if(d=m.camelCase(c),
f=b[d],e=a[c],m.isArray(e)&&(f=e[1],e=a[c]=e[0]),c!==d&&(a[d]=e,delete a[c]),(k=m.cssHooks[d])&&"expand"in k)for(c in e=k.expand(e),delete a[d],e)c in a||(a[c]=e[c],b[c]=f);else b[d]=f}function O(a,b,c,d,f){return new O.prototype.init(a,b,c,d,f)}function na(a,b){var c,d={height:a},f=0;for(b=b?1:0;4>f;f+=2-b)c=ua[f],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function F(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var X,T,y=h.document,V=h.location,
oa={},P=[],S=P.concat,Y=P.push,M=P.slice,da=P.indexOf,ja=oa.toString,ga=oa.hasOwnProperty,pa="1.9.0pre".trim,m=function(a,b){return new m.fn.init(a,b,X)},ba=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ma=/\S+/g,va=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,jb=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,ca=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,kb=/^[\],:{}\s]*$/,lb=/(?:^|:|,)(?:\s*\[)+/g,mb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Za=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,wa=/^-ms-/,$a=/-([\da-z])/gi,
G=function(a,b){return b.toUpperCase()},E=function(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",E,!1),m.ready()):"complete"===y.readyState&&(y.detachEvent("onreadystatechange",E),m.ready())};m.fn=m.prototype={jquery:"1.9.0pre",constructor:m,init:function(a,b,c){var d;if(!a)return this;if("string"===typeof a){d="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:jb.exec(a);if(!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=
b instanceof m?b[0]:b,m.merge(this,m.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),ca.test(d[1])&&m.isPlainObject(b))for(d in b)if(m.isFunction(this[d]))this[d](b[d]);else this.attr(d,b[d])}else{if((b=y.getElementById(d[2]))&&b.parentNode){if(b.id!==d[2])return c.find(a);this.length=1;this[0]=b}this.context=y;this.selector=a}return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(m.isFunction(a))return c.ready(a);a.selector!==e&&(this.selector=a.selector,this.context=
a.context);return m.makeArray(a,this)},selector:"",length:0,size:function(){return this.length},toArray:function(){return M.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){a=m.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,b){return m.each(this,a,b)},ready:function(a){m.ready.promise().done(a);return this},slice:function(){return this.pushStack(M.apply(this,arguments))},first:function(){return this.eq(0)},
last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:[].sort,splice:[].splice};m.fn.init.prototype=m.fn;m.extend=m.fn.extend=function(){var a,b,c,d,f,k=arguments[0]||{},n=1,g=arguments.length,p=!1;"boolean"===typeof k&&(p=k,k=arguments[1]||{},n=2);"object"===typeof k||
m.isFunction(k)||(k={});g===n&&(k=this,--n);for(;n<g;n++)if(null!=(a=arguments[n]))for(b in a)c=k[b],d=a[b],k!==d&&(p&&d&&(m.isPlainObject(d)||(f=m.isArray(d)))?(f?(f=!1,c=c&&m.isArray(c)?c:[]):c=c&&m.isPlainObject(c)?c:{},k[b]=m.extend(p,c,d)):d!==e&&(k[b]=d));return k};m.extend({noConflict:function(){return m},isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(!0===a?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0;!0!==a&&
0<--m.readyWait||(T.resolveWith(y,[m]),m.fn.trigger&&m(y).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?oa[ja.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==m.type(a)||a.nodeType||
m.isWindow(a))return!1;try{if(a.constructor&&!ga.call(a,"constructor")&&!ga.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var c in a);return c===e||ga.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||y;var d=ca.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=m.buildFragment([a],b,c);c&&m(c).remove();return m.merge([],
d.childNodes)},parseJSON:function(a){if(h.JSON&&h.JSON.parse)return h.JSON.parse(a);if(null===a)return a;if("string"===typeof a&&(a=m.trim(a))&&kb.test(a.replace(mb,"@").replace(Za,"]").replace(lb,"")))return(new Function("return "+a))();m.error("Invalid JSON: "+a)},parseXML:function(a){var b,c;if(!a||"string"!==typeof a)return null;try{h.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(d){b=e}b&&b.documentElement&&
!b.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+a);return b},noop:function(){},globalEval:function(a){a&&m.trim(a)&&(h.execScript||function(a){h.eval.call(h,a)})(a)},camelCase:function(a){return a.replace(wa,"ms-").replace($a,G)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,f=0,e=a.length;d=g(a);if(c)if(d)for(;f<e&&(d=b.apply(a[f],c),!1!==d);f++);else for(f in a){if(d=b.apply(a[f],c),!1===d)break}else if(d)for(;f<
e&&(d=b.call(a[f],f,a[f]),!1!==d);f++);else for(f in a)if(d=b.call(a[f],f,a[f]),!1===d)break;return a},trim:pa&&!pa.call("\ufeff\u00a0")?function(a){return null==a?"":pa.call(a)}:function(a){return null==a?"":(a+"").replace(va,"")},makeArray:function(a,b){var c=b||[];null!=a&&(g(Object(a))?m.merge(c,"string"===typeof a?[a]:a):Y.call(c,a));return c},inArray:function(a,b,c){var d;if(b){if(da)return da.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},
merge:function(a,b){var c=b.length,d=a.length,f=0;if("number"===typeof c)for(;f<c;f++)a[d++]=b[f];else for(;b[f]!==e;)a[d++]=b[f++];a.length=d;return a},grep:function(a,b,c){var d,f=[],e=0,k=a.length;for(c=!!c;e<k;e++)d=!!b(a[e],e),c!==d&&f.push(a[e]);return f},map:function(a,b,c){var d,f=0,e=a.length,k=[];if(g(a))for(;f<e;f++)d=b(a[f],f,c),null!=d&&(k[k.length]=d);else for(f in a)d=b(a[f],f,c),null!=d&&(k[k.length]=d);return S.apply([],k)},guid:1,proxy:function(a,b){var c,d;"string"===typeof b&&
(c=a[b],b=a,a=c);if(!m.isFunction(a))return e;d=M.call(arguments,2);c=function(){return a.apply(b||this,d.concat(M.call(arguments)))};c.guid=a.guid=a.guid||m.guid++;return c},access:function(a,b,c,d,f,k,n){var g=0,p=a.length,h=null==c;if("object"===m.type(c))for(g in f=!0,c)m.access(a,b,g,c[g],!0,k,n);else if(d!==e&&(f=!0,m.isFunction(d)||(n=!0),h&&(n?(b.call(a,d),b=null):(h=b,b=function(a,b,c){return h.call(m(a),c)})),b))for(;g<p;g++)b(a[g],c,n?d:d.call(a[g],g,b(a[g],c)));return f?a:h?b.call(a):
p?b(a[0],c):k},now:function(){return(new Date).getTime()}});m.ready.promise=function(a){if(!T)if(T=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",E,!1),h.addEventListener("load",m.ready,!1);else{y.attachEvent("onreadystatechange",E);h.attachEvent("onload",m.ready);var b=!1;try{b=null==h.frameElement&&y.documentElement}catch(c){}b&&b.doScroll&&function ac(){if(!m.isReady){try{b.doScroll("left")}catch(a){return setTimeout(ac,
50)}m.ready()}}()}return T.promise(a)};m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){oa["[object "+b+"]"]=b.toLowerCase()});X=m(y);var I={};m.Callbacks=function(a){a="string"===typeof a?I[a]||b(a):m.extend({},a);var c,d,f,k,n,g,p=[],h=!a.once&&[],l=function(b){c=a.memory&&b;d=!0;g=k||0;k=0;n=p.length;for(f=!0;p&&g<n;g++)if(!1===p[g].apply(b[0],b[1])&&a.stopOnFalse){c=!1;break}f=!1;p&&(h?h.length&&l(h.shift()):c?p=[]:q.disable())},q={add:function(){if(p){var b=
p.length;(function bc(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&q.has(c)||p.push(c):c&&c.length&&"string"!==d&&bc(c)})})(arguments);f?n=p.length:c&&(k=b,l(c))}return this},remove:function(){p&&m.each(arguments,function(a,b){for(var c;-1<(c=m.inArray(b,p,c));)p.splice(c,1),f&&(c<=n&&n--,c<=g&&g--)});return this},has:function(a){return-1<m.inArray(a,p)},empty:function(){p=[];return this},disable:function(){p=h=c=e;return this},disabled:function(){return!p},lock:function(){h=
e;c||q.disable();return this},locked:function(){return!h},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];!p||d&&!h||(f?h.push(b):l(b));return this},fire:function(){q.fireWith(this,arguments);return this},fired:function(){return!!d}};return q};m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){f.done(arguments).fail(arguments);
return this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,e){var k=e[0],n=m.isFunction(a[b])&&a[b];f[e[1]](function(){var a=n&&n.apply(this,arguments);if(a&&m.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[k+"With"](this===d?c.promise():this,n?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},f={};d.pipe=d.then;m.each(b,function(a,e){var k=e[2],n=e[3];d[e[1]]=k.add;n&&k.add(function(){c=
n},b[a^1][2].disable,b[2][2].lock);f[e[0]]=function(){f[e[0]+"With"](this===f?d:this,arguments);return this};f[e[0]+"With"]=k.fireWith});d.promise(f);a&&a.call(f,f);return f},when:function(a){var b=0,c=M.call(arguments),d=c.length,f=1!==d||a&&m.isFunction(a.promise)?d:0,e=1===f?a:m.Deferred(),k=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?M.call(arguments):d;c===n?e.notifyWith(b,c):--f||e.resolveWith(b,c)}},n,g,p;if(1<d)for(n=Array(d),g=Array(d),p=Array(d);b<d;b++)c[b]&&m.isFunction(c[b].promise)?
c[b].promise().done(k(b,p,c)).fail(e.reject).progress(k(b,g,n)):--f;f||e.resolveWith(p,c);return e.promise()}});m.support=function(){var a,b,c,d,f,e,k,n=y.createElement("div");n.setAttribute("className","t");n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";b=n.getElementsByTagName("*");c=n.getElementsByTagName("a")[0];if(!b||!c||!b.length)return{};d=y.createElement("select");f=d.appendChild(y.createElement("option"));b=n.getElementsByTagName("input")[0];c.style.cssText=
"top:1px;float:left;opacity:.5";a={getSetAttribute:"t"!==n.className,leadingWhitespace:3===n.firstChild.nodeType,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(c.getAttribute("style")),hrefNormalized:"/a"===c.getAttribute("href"),opacity:/^0.5/.test(c.style.opacity),cssFloat:!!c.style.cssFloat,checkOn:!!b.value,optSelected:f.selected,enctype:!!y.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,
boxModel:"CSS1Compat"===y.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};b.checked=!0;a.noCloneChecked=b.cloneNode(!0).checked;d.disabled=!0;a.optDisabled=!f.disabled;try{delete n.test}catch(g){a.deleteExpando=!1}b=y.createElement("input");b.setAttribute("value","");a.input=""===b.getAttribute("value");b.value="t";b.setAttribute("type","radio");a.radioValue="t"===b.value;b.setAttribute("checked",
"t");b.setAttribute("name","t");c=y.createDocumentFragment();c.appendChild(b);a.appendChecked=b.checked;a.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked;n.attachEvent&&(n.attachEvent("onclick",function(){a.noCloneEvent=!1}),n.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})n.setAttribute(c="on"+k,"t"),a[k+"Bubbles"]=c in h||!1===n.attributes[c].expando;n.style.backgroundClip="content-box";n.cloneNode(!0).style.backgroundClip="";a.clearCloneStyle="content-box"===n.style.backgroundClip;
m(function(){var b,c,d=y.getElementsByTagName("body")[0];d&&(b=y.createElement("div"),b.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",d.appendChild(b).appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=n.getElementsByTagName("td"),c[0].style.cssText="padding:0;margin:0;border:0;display:none",e=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",a.reliableHiddenOffsets=e&&0===c[0].offsetHeight,n.innerHTML="",
n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",a.boxSizing=4===n.offsetWidth,a.doesNotIncludeMarginInBodyOffset=1!==d.offsetTop,h.getComputedStyle&&(a.pixelPosition="1%"!==(h.getComputedStyle(n,null)||{}).top,a.boxSizingReliable="4px"===(h.getComputedStyle(n,null)||{width:"4px"}).width,c=n.appendChild(y.createElement("div")),c.style.cssText=n.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
c.style.marginRight=c.style.width="0",n.style.width="1px",a.reliableMarginRight=!parseFloat((h.getComputedStyle(c,null)||{}).marginRight)),"undefined"!==typeof n.style.zoom&&(n.innerHTML="",n.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",a.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.innerHTML="<div></div>",n.firstChild.style.width="5px",a.shrinkWrapBlocks=
3!==n.offsetWidth,d.style.zoom=1),d.removeChild(b),n=null)});b=d=c=f=c=b=null;return a}();var K=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,C=/([A-Z])/g;m.extend({cache:{},expando:"jQuery"+("1.9.0pre"+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?m.cache[a[m.expando]]:a[m.expando];return!!a&&!f(a)},data:function(b,c,d){return a(b,c,d,!1)},removeData:function(a,b){return c(a,b,!1)},_data:function(b,c,d){return a(b,
c,d,!0)},_removeData:function(a,b){return c(a,b,!0)},acceptData:function(a){var b=a.nodeName&&m.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}});m.fn.extend({data:function(a,b){var c,f,k=this[0],n=0,g=null;if(a===e){if(this.length&&(g=m.data(k),1===k.nodeType&&!m._data(k,"parsedAttrs"))){for(c=k.attributes;n<c.length;n++)f=c[n].name,f.indexOf("data-")||(f=m.camelCase(f.substring(5)),d(k,f,g[f]));m._data(k,"parsedAttrs",!0)}return g}return"object"===typeof a?this.each(function(){m.data(this,
a)}):m.access(this,function(b){if(b===e)return k?d(k,a,m.data(k,a)):null;this.each(function(){m.data(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){m.removeData(this,a)})}});m.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,f=c.shift(),e=m._queueHooks(a,b),k=function(){m.dequeue(a,
b)};"inprogress"===f&&(f=c.shift(),d--);if(e.cur=f)"fx"===b&&c.unshift("inprogress"),delete e.stop,f.call(a,k,e);!d&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue");m._removeData(a,c)})})}});m.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?m.queue(this[0],a):b===e?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,
a);"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},delay:function(a,b){a=m.fx?m.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,f=m.Deferred(),k=this,n=this.length,g=function(){--d||f.resolveWith(k,[k])};"string"!==typeof a&&(b=a,a=e);for(a=a||"fx";n--;)(c=m._data(k[n],a+
"queueHooks"))&&c.empty&&(d++,c.empty.add(g));g();return f.promise(b)}});var Da,Ba,ab=/[\t\r\n]/g,Ta=/\r/g,sa=/^(?:input|select|textarea|button|object)$/i,xa=/^(?:a|area)$/i,W=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Ua=/^(?:checked|selected)$/i,Ea=m.support.getSetAttribute,Xa=m.support.input;m.fn.extend({attr:function(a,b){return m.access(this,m.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,
a)})},prop:function(a,b){return m.access(this,m.prop,a,b,1<arguments.length)},removeProp:function(a){a=m.propFix[a]||a;return this.each(function(){try{this[a]=e,delete this[a]}catch(b){}})},addClass:function(a){var b,c,d,f,e,k=0,n=this.length;b="string"===typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ma)||[];k<n;k++)if(c=this[k],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){for(e=
0;f=b[e++];)0>d.indexOf(" "+f+" ")&&(d+=f+" ");c.className=m.trim(d)}return this},removeClass:function(a){var b,c,d,f,e,k=0,n=this.length;b=0===arguments.length||"string"===typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ma)||[];k<n;k++)if(c=this[k],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){for(e=0;f=b[e++];)for(;0<=d.indexOf(" "+f+" ");)d=d.replace(" "+f+" "," ");c.className=
a?m.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return m.isFunction(a)?this.each(function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var f,e=0,k=m(this),n=b,g=a.match(ma)||[];f=g[e++];)n=d?n:!k.hasClass(f),k[n?"addClass":"removeClass"](f);else if("undefined"===c||"boolean"===c)this.className&&m._data(this,"__className__",this.className),this.className=this.className||!1===a?"":m._data(this,"__className__")||
""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(ab," ").indexOf(a))return!0;return!1},val:function(a){var b,c,d,f=this[0];if(arguments.length)return d=m.isFunction(a),this.each(function(c){var f=m(this);1===this.nodeType&&(c=d?a.call(this,c,f.val()):a,null==c?c="":"number"===typeof c?c+="":m.isArray(c)&&(c=m.map(c,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],
b&&"set"in b&&b.set(this,c,"value")!==e||(this.value=c))});if(f){if((b=m.valHooks[f.type]||m.valHooks[f.nodeName.toLowerCase()])&&"get"in b&&(c=b.get(f,"value"))!==e)return c;c=f.value;return"string"===typeof c?c.replace(Ta,""):null==c?"":c}}});m.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,f=(a="select-one"===a.type||0>d)?null:[],e=a?d+1:c.length,k=0>d?e:a?d:0;k<e;k++)if(b=
c[k],!(!b.selected&&k!==d||(m.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&m.nodeName(b.parentNode,"optgroup"))){b=m(b).val();if(a)return b;f.push(b)}return f},set:function(a,b){var c=m.makeArray(b);m(a).find("option").each(function(){this.selected=0<=m.inArray(m(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attr:function(a,b,c){var d,f,k;k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if("undefined"===typeof a.getAttribute)return m.prop(a,b,c);if(k=
1!==k||!m.isXMLDoc(a))b=b.toLowerCase(),f=m.attrHooks[b]||(W.test(b)?Ba:Da);if(c!==e)if(null===c)m.removeAttr(a,b);else{if(f&&k&&"set"in f&&(d=f.set(a,c,b))!==e)return d;a.setAttribute(b,c+"");return c}else{if(f&&k&&"get"in f&&null!==(d=f.get(a,b)))return d;"undefined"!==typeof a.getAttribute&&(d=a.getAttribute(b));return null==d?e:d}}},removeAttr:function(a,b){var c,d,f=0,e=b&&b.match(ma);if(e&&1===a.nodeType)for(;c=e[f++];)d=m.propFix[c]||c,W.test(c)?!Ea&&Ua.test(c)?a[m.camelCase("default-"+c)]=
a[d]=!1:a[d]=!1:m.attr(a,c,""),a.removeAttribute(Ea?c:d)},attrHooks:{type:{set:function(a,b){if(!m.support.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,
b,c){var d,f,k;k=a.nodeType;if(a&&3!==k&&8!==k&&2!==k){if(k=1!==k||!m.isXMLDoc(a))b=m.propFix[b]||b,f=m.propHooks[b];return c!==e?f&&"set"in f&&(d=f.set(a,c,b))!==e?d:a[b]=c:f&&"get"in f&&null!==(d=f.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):sa.test(a.nodeName)||xa.test(a.nodeName)&&a.href?0:e}}}});Ba={get:function(a,b){var c=m.prop(a,b),d="boolean"===typeof c&&a.getAttribute(b);return(c="boolean"===typeof c?
Xa&&Ea?null!=d:Ua.test(b)?a[m.camelCase("default-"+b)]:!!d:a.getAttributeNode(b))&&!1!==c.value?b.toLowerCase():e},set:function(a,b,c){!1===b?m.removeAttr(a,c):Xa&&Ea||!Ua.test(c)?a.setAttribute(!Ea&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0;return c}};Xa&&Ea||(m.attrHooks.value={get:function(a,b){var c=a.getAttributeNode(b);return m.nodeName(a,"input")?a.defaultValue:c&&c.specified?c.value:e},set:function(a,b,c){if(m.nodeName(a,"input"))a.defaultValue=b;else return Da&&Da.set(a,b,c)}});
Ea||(Da=m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&("id"===b||"name"===b||"coords"===b?""!==c.value:c.specified)?c.value:e},set:function(a,b,c){var d=a.getAttributeNode(c);d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c));d.value=b+="";return"value"===c||b===a.getAttribute(c)?b:e}},m.attrHooks.contenteditable={get:Da.get,set:function(a,b,c){Da.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]=m.extend(m.attrHooks[b],{set:function(a,
c){if(""===c)return a.setAttribute(b,"auto"),c}})}));m.support.hrefNormalized||(m.each(["href","src","width","height"],function(a,b){m.attrHooks[b]=m.extend(m.attrHooks[b],{get:function(a){a=a.getAttribute(b,2);return null==a?e:a}})}),m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}));m.support.style||(m.attrHooks.style={get:function(a){return a.style.cssText||e},set:function(a,b){return a.style.cssText=b+""}});m.support.optSelected||(m.propHooks.selected=
m.extend(m.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));m.support.enctype||(m.propFix.enctype="encoding");m.support.checkOn||m.each(["radio","checkbox"],function(){m.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});m.each(["radio","checkbox"],function(){m.valHooks[this]=m.extend(m.valHooks[this],{set:function(a,b){if(m.isArray(b))return a.checked=0<=m.inArray(m(a).val(),b)}})});
var bb=/^(?:input|select|textarea)$/i,Lb=/^key/,Mb=/^(?:mouse|contextmenu)|click/,Ab=/^(?:focusinfocus|focusoutblur)$/,qb=/^([^.]*)(?:\.(.+)|)$/;m.event={add:function(a,b,c,d,f){var k,n,g,p,h,l,q,r,s=0;if(3!==a.nodeType&&8!==a.nodeType&&b&&c&&(k=m._data(a))){c.handler&&(l=c,c=l.handler,f=l.selector);c.guid||(c.guid=m.guid++);g=k.events;g||(k.events=g={});n=k.handle;n||(k.handle=n=function(a){return"undefined"===typeof m||a&&m.event.triggered===a.type?e:m.event.dispatch.apply(n.elem,arguments)},n.elem=
a);for(b=(b||"").match(ma)||[""];s<b.length;s++)p=qb.exec(b[s])||[],k=p[1],h=(p[2]||"").split(".").sort(),r=m.event.special[k]||{},k=(f?r.delegateType:r.bindType)||k,r=m.event.special[k]||{},p=m.extend({type:k,origType:p[1],data:d,handler:c,guid:c.guid,selector:f,needsContext:f&&m.expr.match.needsContext.test(f),namespace:h.join(".")},l),q=g[k],q||(q=g[k]=[],q.delegateCount=0,r.setup&&!1!==r.setup.call(a,d,h,n)||(a.addEventListener?a.addEventListener(k,n,!1):a.attachEvent&&a.attachEvent("on"+k,n))),
r.add&&(r.add.call(a,p),p.handler.guid||(p.handler.guid=c.guid)),f?q.splice(q.delegateCount++,0,p):q.push(p),m.event.global[k]=!0;a=null}},global:{},remove:function(a,b,c,d,f){var e,k,n,g,p,h,l,q,r,s=0,t=m.hasData(a)&&m._data(a);if(t&&(h=t.events)){for(b=(b||"").match(ma)||[""];s<b.length;s++)if(e=qb.exec(b[s])||[],k=n=e[1],e=e[2],k){l=m.event.special[k]||{};k=(d?l.delegateType:l.bindType)||k;q=h[k]||[];g=q.length;e=e?RegExp("(^|\\.)"+e.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(p=
0;p<q.length;p++)r=q[p],!f&&n!==r.origType||c&&c.guid!==r.guid||e&&!e.test(r.namespace)||d&&!(d===r.selector||"**"===d&&r.selector)||(q.splice(p--,1),r.selector&&q.delegateCount--,l.remove&&l.remove.call(a,r));0===q.length&&g!==q.length&&(l.teardown&&!1!==l.teardown.call(a,e,t.handle)||m.removeEvent(a,k,t.handle),delete h[k])}else for(k in h)m.event.remove(a,k+b[s],c,d,!0);m.isEmptyObject(h)&&(delete t.handle,m._removeData(a,"events"))}},trigger:function(a,b,c,d){var f,k,n,g,p,l,q=a.type||a;k=a.namespace?
a.namespace.split("."):[];c=c||y;if(3!==c.nodeType&&8!==c.nodeType&&!Ab.test(q+m.event.triggered)&&(0<=q.indexOf(".")&&(k=q.split("."),q=k.shift(),k.sort()),a="object"===typeof a?a[m.expando]?a:new m.Event(q,a):new m.Event(q),a.type=q,a.isTrigger=!0,a.namespace=k.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n=0>q.indexOf(":")?"on"+q:"",a.result=e,a.target||(a.target=c),b=null!=b?m.makeArray(b):[],b.unshift(a),g=m.event.special[q]||{},d||!g.trigger||
!1!==g.trigger.apply(c,b))){l=[[c,g.bindType||q]];if(!d&&!g.noBubble&&!m.isWindow(c)){p=g.delegateType||q;k=Ab.test(p+q)?c:c.parentNode;for(f=c;k;k=k.parentNode)l.push([k,p]),f=k;f===(c.ownerDocument||y)&&l.push([f.defaultView||f.parentWindow||h,p])}for(f=0;f<l.length&&!a.isPropagationStopped();f++)k=l[f][0],a.type=l[f][1],(p=(m._data(k,"events")||{})[a.type]&&m._data(k,"handle"))&&p.apply(k,b),(p=n&&k[n])&&m.acceptData(k)&&p.apply&&!1===p.apply(k,b)&&a.preventDefault();a.type=q;if(!(d||a.isDefaultPrevented()||
g._default&&!1!==g._default.apply(c.ownerDocument,b)||"click"===q&&m.nodeName(c,"a"))&&m.acceptData(c)&&n&&c[q]&&!m.isWindow(c)){(f=c[n])&&(c[n]=null);m.event.triggered=q;try{c[q]()}catch(r){}m.event.triggered=e;f&&(c[n]=f)}return a.result}},dispatch:function(a){a=m.event.fix(a);var b,c,d,f,k,n,g=(m._data(this,"events")||{})[a.type]||[],p=g.delegateCount,h=M.call(arguments),q=m.event.special[a.type]||{},l=[];h[0]=a;a.delegateTarget=this;if(!q.preDispatch||!1!==q.preDispatch.call(this,a)){if(p&&(!a.button||
"click"!==a.type))for(c=a.target;c!=this;c=c.parentNode||this)if(!0!==c.disabled||"click"!==a.type){f={};k=[];for(b=0;b<p;b++)d=g[b],n=d.selector,f[n]===e&&(f[n]=d.needsContext?0<=m(n,this).index(c):m.find(n,this,null,[c]).length),f[n]&&k.push(d);k.length&&l.push({elem:c,matches:k})}g.length>p&&l.push({elem:this,matches:g.slice(p)});for(b=0;b<l.length&&!a.isPropagationStopped();b++)for(f=l[b],a.currentTarget=f.elem,c=0;c<f.matches.length&&!a.isImmediatePropagationStopped();c++)if(d=f.matches[c],!a.namespace||
a.namespace_re&&a.namespace_re.test(d.namespace))a.data=d.data,a.handleObj=d,d=((m.event.special[d.origType]||{}).handle||d.handler).apply(f.elem,h),d!==e&&(a.result=d,!1===d&&(a.preventDefault(),a.stopPropagation()));q.postDispatch&&q.postDispatch.call(this,a);return a.result}},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==
a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,f=b.button,k=b.fromElement;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||y,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||
c&&c.clientTop||0));!a.relatedTarget&&k&&(a.relatedTarget=k===a.target?b.toElement:k);a.which||f===e||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[m.expando])return a;var b,c,d=a,f=m.event.fixHooks[a.type]||{},e=f.props?this.props.concat(f.props):this.props;a=m.Event(d);for(b=e.length;b;)c=e[--b],a[c]=d[c];a.target||(a.target=d.srcElement||y);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return f.filter?f.filter(a,d):a},special:{load:{noBubble:!0},click:{trigger:function(){if(m.nodeName(this,
"input")&&"checkbox"===this.type&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==y.activeElement&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===y.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==e&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(a,
null,b):m.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};m.event.handle=m.event.dispatch;m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,c))};m.Event=function(a,b){if(!(this instanceof m.Event))return new m.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||
a.getPreventDefault&&a.getPreventDefault()?n:k):this.type=a;b&&m.extend(this,b);this.timeStamp=a&&a.timeStamp||m.now();this[m.expando]=!0};m.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=n;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=
n;this.stopPropagation()},isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k};m.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,f=a.handleObj;if(!d||d!==this&&!m.contains(this,d))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}});m.support.submitBubbles||(m.event.special.submit={setup:function(){if(m.nodeName(this,"form"))return!1;m.event.add(this,
"click._submit keypress._submit",function(a){a=a.target;(a=m.nodeName(a,"input")||m.nodeName(a,"button")?a.form:e)&&!m._data(a,"_submit_attached")&&(m.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),m._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(m.nodeName(this,"form"))return!1;m.event.remove(this,"._submit")}});m.support.changeBubbles||
(m.event.special.change={setup:function(){if(bb.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);m.event.simulate("change",this,a,!0)});return!1}m.event.add(this,"beforeactivate._change",function(a){a=a.target;bb.test(a.nodeName)&&!m._data(a,"_change_attached")&&
(m.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(a,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){m.event.remove(this,"._change");return!bb.test(this.nodeName)}});m.support.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,
b){var c=0,d=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){0===c++&&y.addEventListener(a,d,!0)},teardown:function(){0===--c&&y.removeEventListener(a,d,!0)}}});m.fn.extend({on:function(a,b,c,d,f){var n,g;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=e);for(g in a)this.on(g,b,c,a[g],f);return this}null==c&&null==d?(d=b,c=b=e):null==d&&("string"===typeof b?(d=c,c=e):(d=c,c=b,b=e));if(!1===d)d=k;else if(!d)return this;1===f&&(n=d,d=function(a){m().off(a);
return n.apply(this,arguments)},d.guid=n.guid||(n.guid=m.guid++));return this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=e;!1===c&&(c=k);return this.each(function(){m.event.remove(this,
a,c,b)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return m.event.trigger(a,b,this[0],!0)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){m.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};Lb.test(b)&&(m.event.fixHooks[b]=m.event.keyHooks);Mb.test(b)&&(m.event.fixHooks[b]=m.event.mouseHooks)});(function(a,b){function c(a){return V.test(a+"")}function d(){var a,b=[];return a=function(c,d){b.push(c+=" ")>D.cacheLength&&delete a[b.shift()];return a[c]=d}}function f(a){a[L]=!0;return a}function e(a){var b=J.createElement("div");try{return a(b)}catch(c){return!1}finally{}}function k(a,b,c,
d){var f,e,n,g,p;(b?b.ownerDocument||b:R)!==J&&Ca(b);b=b||J;c=c||[];if(!a||"string"!==typeof a)return c;if(1!==(g=b.nodeType)&&9!==g)return[];if(!ba&&!d){if(f=P.exec(a))if(n=f[1])if(9===g)if((e=b.getElementById(n))&&e.parentNode){if(e.id===n)return c.push(e),c}else return c;else{if(b.ownerDocument&&(e=b.ownerDocument.getElementById(n))&&Wa(b,e)&&e.id===n)return c.push(e),c}else{if(f[2])return Ra.apply(c,$.call(b.getElementsByTagName(a),0)),c;if((n=f[3])&&aa.getByClassName&&b.getElementsByClassName)return Ra.apply(c,
$.call(b.getElementsByClassName(n),0)),c}if(aa.qsa&&!ha.test(a)){f=!0;e=L;n=b;p=9===g&&a;if(1===g&&"object"!==b.nodeName.toLowerCase()){g=q(a);(f=b.getAttribute("id"))?e=f.replace(S,"\\$&"):b.setAttribute("id",e);e="[id='"+e+"'] ";for(n=g.length;n--;)g[n]=e+l(g[n]);n=I.test(a)&&b.parentNode||b;p=g.join(",")}if(p)try{return Ra.apply(c,$.call(n.querySelectorAll(p),0)),c}catch(m){}finally{f||b.removeAttribute("id")}}}var h;a:{a=a.replace(ma,"$1");e=q(a);if(!d&&1===e.length){f=e[0]=e[0].slice(0);if(2<
f.length&&"ID"===(h=f[0]).type&&9===b.nodeType&&!ba&&D.relative[f[1].type]){b=D.find.ID(h.matches[0].replace(va,X),b)[0];if(!b){h=c;break a}a=a.slice(f.shift().value.length)}for(g=G.needsContext.test(a)?-1:f.length-1;0<=g;g--){h=f[g];if(D.relative[n=h.type])break;if(n=D.find[n])if(d=n(h.matches[0].replace(va,X),I.test(f[0].type)&&b.parentNode||b)){f.splice(g,1);a=d.length&&l(f);if(!a){Ra.apply(c,$.call(d,0));h=c;break a}break}}}B(a,e)(d,b,ba,c,I.test(a));h=c}return h}function n(a,b){for(var c=a&&
b&&a.nextSibling;c;c=c.nextSibling)if(c===b)return-1;return a?1:-1}function g(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function p(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function h(a){return f(function(b){b=+b;return f(function(c,d){for(var f,e=a([],c.length,b),k=e.length;k--;)c[f=e[k]]&&(c[f]=!(d[f]=c[f]))})})}function q(a,b){var c,d,f,e,n,g,p;if(n=y[a+" "])return b?0:n.slice(0);n=a;g=[];for(p=D.preFilter;n;){if(!c||
(d=na.exec(n)))d&&(n=n.slice(d[0].length)||n),g.push(f=[]);c=!1;if(d=E.exec(n))c=d.shift(),f.push({value:c,type:d[0].replace(ma," ")}),n=n.slice(c.length);for(e in D.filter)!(d=G[e].exec(n))||p[e]&&!(d=p[e](d))||(c=d.shift(),f.push({value:c,type:e,matches:d}),n=n.slice(c.length));if(!c)break}return b?n.length:n?k.error(a):y(a,g).slice(0)}function l(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function r(a,b,c){var d=b.dir,f=c&&"parentNode"===b.dir,e=$b++;return b.first?function(b,
c,e){for(;b=b[d];)if(1===b.nodeType||f)return a(b,c,e)}:function(b,c,k){var n,g,p,m=Na+" "+e;if(k)for(;b=b[d];){if((1===b.nodeType||f)&&a(b,c,k))return!0}else for(;b=b[d];)if(1===b.nodeType||f)if(p=b[L]||(b[L]={}),(g=p[d])&&g[0]===m){if(!0===(n=g[1])||n===z)return!0===n}else if(g=p[d]=[m],g[1]=a(b,c,k)||z,!0===g[1])return!0}}function s(a){return 1<a.length?function(b,c,d){for(var f=a.length;f--;)if(!a[f](b,c,d))return!1;return!0}:a[0]}function t(a,b,c,d,f){for(var e,k=[],n=0,g=a.length,p=null!=b;n<
g;n++)if(e=a[n])if(!c||c(e,d,f))k.push(e),p&&b.push(n);return k}function v(a,b,c,d,e,n){d&&!d[L]&&(d=v(d));e&&!e[L]&&(e=v(e,n));return f(function(f,n,g,p){var m,h,q=[],l=[],r=n.length,s;if(!(s=f)){s=b||"*";for(var v=g.nodeType?[g]:g,u=[],Ha=0,U=v.length;Ha<U;Ha++)k(s,v[Ha],u);s=u}s=!a||!f&&b?s:t(s,q,a,g,p);v=c?e||(f?a:r||d)?[]:n:s;c&&c(s,v,g,p);if(d)for(m=t(v,l),d(m,[],g,p),g=m.length;g--;)if(h=m[g])v[l[g]]=!(s[l[g]]=h);if(f){if(e||a){if(e){m=[];for(g=v.length;g--;)(h=v[g])&&m.push(s[g]=h);e(null,
v=[],m,p)}for(g=v.length;g--;)(h=v[g])&&-1<(m=e?Sa.call(f,h):q[g])&&(f[m]=!(n[m]=h))}}else v=t(v===n?v.splice(r,v.length):v),e?e(null,n,v,p):Ra.apply(n,v)})}function u(a){var b,c,d,f=a.length,e=D.relative[a[0].type];c=e||D.relative[" "];for(var k=e?1:0,n=r(function(a){return a===b},c,!0),g=r(function(a){return-1<Sa.call(b,a)},c,!0),p=[function(a,c,d){return!e&&(d||c!==qa)||((b=c).nodeType?n(a,c,d):g(a,c,d))}];k<f;k++)if(c=D.relative[a[k].type])p=[r(s(p),c)];else{c=D.filter[a[k].type].apply(null,a[k].matches);
if(c[L]){for(d=++k;d<f&&!D.relative[a[d].type];d++);return v(1<k&&s(p),1<k&&l(a.slice(0,k-1)).replace(ma,"$1"),c,k<d&&u(a.slice(k,d)),d<f&&u(a=a.slice(d)),d<f&&l(a))}p.push(c)}return s(p)}function U(a,b){var c=0,d=0<b.length,e=0<a.length,n=function(f,n,g,p,m){var h,q,l=[],r=0,s="0",v=f&&[],u=null!=m,Ha=qa,U=f||e&&D.find.TAG("*",m&&n.parentNode||n),w=Na+=null==Ha?1:Math.E;u&&(qa=n!==J&&n,z=c);for(;null!=(m=U[s]);s++){if(e&&m){for(h=0;q=a[h];h++)if(q(m,n,g)){p.push(m);break}u&&(Na=w,z=++c)}d&&((m=!q&&
m)&&r--,f&&v.push(m))}r+=s;if(d&&s!==r){for(h=0;q=b[h];h++)q(v,l,n,g);if(f){if(0<r)for(;s--;)v[s]||l[s]||(l[s]=F.call(p));l=t(l)}Ra.apply(p,l);u&&!f&&0<l.length&&1<r+b.length&&k.uniqueSort(p)}u&&(Na=w,qa=Ha);return v};return d?f(n):n}function w(){}var Z,z,D,H,A,B,ea,qa,Ca,J,x,ba,ha,Q,Qa,Wa,Aa,L="sizzle"+-new Date,R=a.document,aa={},Na=0,$b=0,Yb=d(),y=d(),Xa=d(),N=typeof b,ra=[],F=ra.pop,Ra=ra.push,$=ra.slice,Sa=ra.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},
ra="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),O="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ra+")|)|)[\\x20\\t\\r\\n\\f]*\\]",C=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+O.replace(3,8)+")*)|.*)\\)|)",ma=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,na=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,E=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,
ib=RegExp(C),T=RegExp("^"+ra+"$"),G={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[\w-]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+O),PSEUDO:RegExp("^"+C),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},I=/[\x20\t\r\n\f]*[+~]/,V=/\{\s*\[native code\]\s*\}/,P=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/^(?:input|select|textarea|button)$/i,bb=/^h\d$/i,S=/'|\\/g,M=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,va=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,X=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,c&1023|56320)};try{$.call(x.childNodes,0)[0].nodeType}catch(W){$=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}A=k.isXML=
function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};Ca=k.setDocument=function(a){var d=a?a.ownerDocument||a:R;if(d===J||9!==d.nodeType||!d.documentElement)return J;J=d;x=d.documentElement;ba=A(d);aa.tagNameNoComments=e(function(a){a.appendChild(d.createComment(""));return!a.getElementsByTagName("*").length});aa.attributes=e(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a});aa.getByClassName=
e(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length});aa.getByName=e(function(a){a.id=L+0;a.innerHTML="<a name='"+L+"'></a><div name='"+L+"'></div>";x.insertBefore(a,x.firstChild);var b=d.getElementsByName&&d.getElementsByName(L).length===2+d.getElementsByName(L+0).length;aa.getIdNotName=!d.getElementById(L);x.removeChild(a);
return b});D.attrHandle=e(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&typeof a.firstChild.getAttribute!==N&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}};aa.getIdNotName?(D.find.ID=function(a,b){if(typeof b.getElementById!==N&&!ba){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},D.filter.ID=function(a){var b=a.replace(va,X);return function(a){return a.getAttribute("id")===
b}}):(D.find.ID=function(a,c){if(typeof c.getElementById!==N&&!ba){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==N&&d.getAttributeNode("id").value===a?[d]:b:[]}},D.filter.ID=function(a){var b=a.replace(va,X);return function(a){return(a=typeof a.getAttributeNode!==N&&a.getAttributeNode("id"))&&a.value===b}});D.find.TAG=aa.tagNameNoComments?function(a,b){if(typeof b.getElementsByTagName!==N)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],f=0,e=b.getElementsByTagName(a);
if("*"===a){for(;c=e[f];f++)1===c.nodeType&&d.push(c);return d}return e};D.find.NAME=aa.getByName&&function(a,b){if(typeof b.getElementsByName!==N)return b.getElementsByName(name)};D.find.CLASS=aa.getByClassName&&function(a,b){if(typeof b.getElementsByClassName!==N&&!ba)return b.getElementsByClassName(a)};Q=[];ha=[":focus"];if(aa.qsa=c(d.querySelectorAll))e(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||ha.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");
a.querySelectorAll(":checked").length||ha.push(":checked")}),e(function(a){a.innerHTML="<input type='hidden' i=''/>";a.querySelectorAll("[i^='']").length&&ha.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.querySelectorAll(":enabled").length||ha.push(":enabled",":disabled");a.querySelectorAll("*,:x");ha.push(",.*:")});(aa.matchesSelector=c(Qa=x.matchesSelector||x.mozMatchesSelector||x.webkitMatchesSelector||x.oMatchesSelector||x.msMatchesSelector))&&e(function(a){aa.disconnectedMatch=Qa.call(a,"div");
Qa.call(a,"[s!='']:x");Q.push("!=",C)});ha=RegExp(ha.join("|"));Q=RegExp(Q.join("|"));Wa=c(x.contains)||x.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};Aa=x.compareDocumentPosition?function(a,b){var c;return a===b?(ea=!0,0):(c=b.compareDocumentPosition&&a.compareDocumentPosition&&
a.compareDocumentPosition(b))?c&1||a.parentNode&&11===a.parentNode.nodeType?a===d||Wa(R,a)?-1:b===d||Wa(R,b)?1:0:c&4?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var c,f=0;c=a.parentNode;var e=b.parentNode,k=[a],g=[b];if(a===b)return ea=!0,0;if(a.sourceIndex&&b.sourceIndex)return(~b.sourceIndex||-2147483648)-(Wa(R,a)&&~a.sourceIndex||-2147483648);if(!c||!e)return a===d?-1:b===d?1:c?-1:e?1:0;if(c===e)return n(a,b);for(c=a;c=c.parentNode;)k.unshift(c);for(c=b;c=c.parentNode;)g.unshift(c);for(;k[f]===
g[f];)f++;return f?n(k[f],g[f]):k[f]===R?-1:g[f]===R?1:0};ea=!1;[0,0].sort(Aa);aa.detectDuplicates=ea;return J};k.matches=function(a,b){return k(a,null,null,b)};k.matchesSelector=function(a,b){(a.ownerDocument||a)!==J&&Ca(a);b=b.replace(M,"='$1']");if(aa.matchesSelector&&!(ba||Q&&Q.test(b)||ha.test(b)))try{var c=Qa.call(a,b);if(c||aa.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<k(b,J,null,[a]).length};k.contains=function(a,b){(a.ownerDocument||a)!==J&&Ca(a);
return Wa(a,b)};k.attr=function(a,b){var c;(a.ownerDocument||a)!==J&&Ca(a);ba||(b=b.toLowerCase());return(c=D.attrHandle[b])?c(a):ba||aa.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&!0===a[b]?b:c&&c.specified?c.value:null};k.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};k.uniqueSort=function(a){var b,c=[],d=1,f=0;ea=!aa.detectDuplicates;a.sort(Aa);if(ea){for(;b=a[d];d++)b===a[d-1]&&(f=c.push(d));for(;f--;)a.splice(c[f],1)}return a};H=
k.getText=function(a){var b,c="",d=0;b=a.nodeType;if(!b)for(;b=a[d];d++)c+=H(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=H(a)}else if(3===b||4===b)return a.nodeValue;return c};D=k.selectors={cacheLength:50,createPseudo:f,match:G,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(va,
X);a[3]=(a[4]||a[5]||"").replace(va,X);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||k.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&k.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[5]&&a[2];if(G.CHILD.test(a[0]))return null;a[4]?a[2]=a[4]:c&&ib.test(c)&&(b=q(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,
3)}},filter:{TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(va,X).toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=Yb[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&Yb(a,function(a){return b.test(a.className||typeof a.getAttribute!==N&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){d=k.attr(d,a);if(null==d)return"!="===b;if(!b)return!0;d+="";return"="===b?d===
c:"!="===b?d!==c:"^="===b?c&&0===d.indexOf(c):"*="===b?c&&-1<d.indexOf(c):"$="===b?c&&d.substr(d.length-c.length)===c:"~="===b?-1<(" "+d+" ").indexOf(c):"|="===b?d===c||d.substr(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,c,d,f){var e="nth"!==a.slice(0,3),k="last"!==a.slice(-4),n="of-type"===b;return 1===d&&0===f?function(a){return!!a.parentNode}:function(b,c,g){var p,m,h,q,l;c=e!==k?"nextSibling":"previousSibling";var r=b.parentNode,s=n&&b.nodeName.toLowerCase();g=!g&&!n;if(r){if(e){for(;c;){for(m=
b;m=m[c];)if(n?m.nodeName.toLowerCase()===s:1===m.nodeType)return!1;l=c="only"===a&&!l&&"nextSibling"}return!0}l=[k?r.firstChild:r.lastChild];if(k&&g)for(g=r[L]||(r[L]={}),p=g[a]||[],q=p[0]===Na&&p[1],h=p[0]===Na&&p[2],m=q&&r.childNodes[q];m=++q&&m&&m[c]||(h=q=0)||l.pop();){if(1===m.nodeType&&++h&&m===b){g[a]=[Na,q,h];break}}else if(g&&(p=(b[L]||(b[L]={}))[a])&&p[0]===Na)h=p[1];else for(;(m=++q&&m&&m[c]||(h=q=0)||l.pop())&&((n?m.nodeName.toLowerCase()!==s:1!==m.nodeType)||!++h||(g&&((m[L]||(m[L]=
{}))[a]=[Na,h]),m!==b)););h-=f;return h===d||0===h%d&&0<=h/d}}},PSEUDO:function(a,b){var c,d=D.pseudos[a]||D.setFilters[a.toLowerCase()]||k.error("unsupported pseudo: "+a);return d[L]?d(b):1<d.length?(c=[a,a,"",b],D.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,c){for(var f,e=d(a,b),k=e.length;k--;)f=Sa.call(a,e[k]),a[f]=!(c[f]=e[k])}):function(a){return d(a,0,c)}):d}},pseudos:{not:f(function(a){var b=[],c=[],d=B(a.replace(ma,"$1"));return d[L]?f(function(a,b,c,f){f=d(a,null,f,[]);for(var e=
a.length;e--;)if(c=f[e])a[e]=!(b[e]=c)}):function(a,f,e){b[0]=a;d(b,null,e,c);return!c.pop()}}),has:f(function(a){return function(b){return 0<k(a,b).length}}),contains:f(function(a){return function(b){return-1<(b.textContent||b.innerText||H(b)).indexOf(a)}}),lang:f(function(a){T.test(a||"")||k.error("unsupported lang: "+a);a=a.replace(va,X).toLowerCase();return function(b){var c;do if(c=ba?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");
while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===x},focus:function(a){return a===J.activeElement&&(!J.hasFocus||J.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&
a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!D.pseudos.empty(a)},header:function(a){return bb.test(a.nodeName)},input:function(a){return K.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==
(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:h(function(){return[0]}),last:h(function(a,b){return[b-1]}),eq:h(function(a,b,c){return[0>c?c+b:c]}),even:h(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:h(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:h(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:h(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};for(Z in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[Z]=g(Z);for(Z in{submit:!0,
reset:!0})D.pseudos[Z]=p(Z);B=k.compile=function(a,b){var c,d=[],f=[],e=Xa[a+" "];if(!e){b||(b=q(a));for(c=b.length;c--;)e=u(b[c]),e[L]?d.push(e):f.push(e);e=Xa(a,U(f,d))}return e};D.pseudos.nth=D.pseudos.eq;D.filters=w.prototype=D.pseudos;D.setFilters=new w;Ca();k.attr=m.attr;m.find=k;m.expr=k.selectors;m.expr[":"]=m.expr.pseudos;m.unique=k.uniqueSort;m.text=k.getText;m.isXMLDoc=k.isXML;m.contains=k.contains})(h);var Nb=/Until$/,Bb=/^(?:parents|prev(?:Until|All))/,Kb=/^.[^:#\[\.,]*$/,Cb=m.expr.match.needsContext,
Ob={children:!0,contents:!0,next:!0,prev:!0};m.fn.extend({find:function(a){var b,c,d;if("string"!==typeof a)return d=this,this.pushStack(m(a).filter(function(){for(b=0;b<d.length;b++)if(m.contains(d[b],this))return!0}));c=[];for(b=0;b<this.length;b++)m.find(a,this[b],c);c=this.pushStack(m.unique(c));c.selector=(this.selector?this.selector+" ":"")+a;return c},has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(m.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(s(this,
a,!1))},filter:function(a){return this.pushStack(s(this,a,!0))},is:function(a){return!!a&&("string"===typeof a?Cb.test(a)?0<=m(a,this.context).index(this[0]):0<m.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){for(var c,d=0,f=this.length,e=[],k=Cb.test(a)||"string"!==typeof a?m(a,b||this.context):0;d<f;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(k?-1<k.index(c):m.find.matchesSelector(c,a)){e.push(c);break}c=c.parentNode}return this.pushStack(1<e.length?
m.unique(e):e)},index:function(a){return a?"string"===typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"===typeof a?m(a,b):m.makeArray(a&&a.nodeType?[a]:a),c=m.merge(this.get(),c);return this.pushStack(m.unique(c))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});m.fn.andSelf=m.fn.addBack;m.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?
a:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return p(a,"nextSibling")},prev:function(a){return p(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,
a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var f=m.map(this,b,c);Nb.test(a)||(d=c);d&&"string"===typeof d&&(f=m.filter(d,f));f=1<this.length&&!Ob[a]?m.unique(f):f;1<this.length&&Bb.test(a)&&(f=f.reverse());return this.pushStack(f)}});m.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?m.find.matchesSelector(b[0],
a)?[b[0]]:[]:m.find.matches(a,b)},dir:function(a,b,c){var d=[];for(a=a[b];a&&9!==a.nodeType&&(c===e||1!==a.nodeType||!m(a).is(c));)1===a.nodeType&&d.push(a),a=a[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var pb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Pb=/ jQuery\d+="(?:null|\d+)"/g,Db=RegExp("<(?:"+pb+")[\\s/>]","i"),
nb=/^\s+/,Eb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fb=/<([\w:]+)/,ya=/<tbody/i,ob=/<|&#?\w+;/,rb=/<(?:script|style|link)/i,eb=/^(?:checkbox|radio)$/i,Ja=/checked\s*(?:[^=]|=\s*.checked.)/i,Qb=/^$|\/(?:java|ecma)script/i,db=/^true\/(.*)/,Gb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,fa={option:[1,"<select multiple='multiple'>"],legend:[1,"<fieldset>"],area:[1,"<map>"],param:[1,"<object>"],thead:[1,"<table>"],tr:[2,"<table><tbody>"],col:[2,"<table><tbody></tbody><colgroup>",
"</table>"],td:[3,"<table><tbody><tr>"],_default:m.support.htmlSerialize?[0,""]:[1,"X<div>"]},Rb=q(y),ta=Rb.appendChild(y.createElement("div"));fa.optgroup=fa.option;fa.tbody=fa.tfoot=fa.colgroup=fa.caption=fa.thead;fa.th=fa.td;m.fn.extend({text:function(a){return m.access(this,function(a){return a===e?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,
b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return m.isFunction(a)?this.each(function(b){m(this).wrapInner(a.call(this,b))}):this.each(function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?
a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,
!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)if(!a||0<m.filter(a,[c]).length)b||1!==c.nodeType||m.cleanData(v(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&t(v(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&
m.cleanData(v(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return m.clone(this,a,b)})},html:function(a){return m.access(this,function(a){var b=this[0]||{},c=0,d=this.length;if(a===e)return 1===b.nodeType?b.innerHTML.replace(Pb,""):e;if("string"===typeof a&&!(rb.test(a)||!m.support.htmlSerialize&&Db.test(a)||!m.support.leadingWhitespace&&nb.test(a)||fa[(Fb.exec(a)||
["",""])[1].toLowerCase()])){a=a.replace(Eb,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(v(b,!1)),b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){m.isFunction(a)||"string"===typeof a||(a=m(a).not(this).detach());return this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;if(c&&1===this.nodeType||11===this.nodeType)m(this).remove(),b?b.parentNode.insertBefore(a,b):c.appendChild(a)})},detach:function(a){return this.remove(a,
!0)},domManip:function(a,b,c){a=S.apply([],a);var d,f,k,n,g=0,p=this.length,h=this,q=p-1,l=a[0],s=m.isFunction(l);if(s||!(1>=p||"string"!==typeof l||m.support.checkClone)&&Ja.test(l))return this.each(function(d){var f=h.eq(d);s&&(a[0]=l.call(this,d,b?f.html():e));f.domManip(a,b,c)});if(this[0]&&(d=this[0].ownerDocument,d=m.buildFragment(a,d,!1,this),f=d.firstChild,1===d.childNodes.length&&(d=f),f)){b=b&&m.nodeName(f,"tr");f=m.map(v(d,"script"),u);for(k=f.length;g<p;g++)n=d,g!==q&&(n=m.clone(n,!0,
!0),k&&m.merge(f,v(n,"script"))),c.call(b&&m.nodeName(this[g],"table")?this[g].getElementsByTagName("tbody")[0]||this[g].appendChild(this[g].ownerDocument.createElement("tbody")):this[g],n,g);if(k)for(d=f[f.length-1].ownerDocument,m.map(f,r),g=0;g<k;g++)n=f[g],Qb.test(n.type||"")&&!m._data(n,"globalEval")&&m.contains(d,n)&&(n.src?m.ajax({url:n.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):m.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Gb,"")));d=f=null}return this}});
m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c=0,d=[],f=m(a),e=f.length-1;c<=e;c++)a=c===e?this:this.clone(!0),m(f[c])[b](a),Y.apply(d,a.get());return this.pushStack(d)}});m.extend({clone:function(a,b,c){var d,f,e,k,n,g=m.contains(a.ownerDocument,a);m.support.html5Clone||m.isXMLDoc(a)||!Db.test("<"+a.nodeName+">")?n=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(n=ta.firstChild));
if(!(m.support.noCloneEvent&&m.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=v(n),f=v(a),k=0;null!=(e=f[k]);++k)if(d[k]){var p=d[k],h=void 0,q=void 0,s=void 0;if(1===p.nodeType){h=p.nodeName.toLowerCase();if(!m.support.noCloneEvent&&p[m.expando]){q=m._data(p);for(s in q.events)m.removeEvent(p,s,q.handle);p.removeAttribute(m.expando)}if("script"===h&&p.text!==e.text)u(p).text=e.text,r(p);else if("object"===h)p.parentNode&&(p.outerHTML=e.outerHTML),m.support.html5Clone&&
e.innerHTML&&!m.trim(p.innerHTML)&&(p.innerHTML=e.innerHTML);else if("input"===h&&eb.test(e.type))p.defaultChecked=p.checked=e.checked,p.value!==e.value&&(p.value=e.value);else if("option"===h)p.defaultSelected=p.selected=e.defaultSelected;else if("input"===h||"textarea"===h)p.defaultValue=e.defaultValue}}if(b)if(c)for(f=f||v(a),d=d||v(n),k=0;null!=(e=f[k]);k++)l(e,d[k]);else l(a,n);d=v(n,"script");0<d.length&&t(d,!g&&v(a,"script"));return n},buildFragment:function(a,b,c,d){var f,e,k,n,g,p,h=[],l=
0,r=a.length,s=b.createDocumentFragment(),u=b===y&&Rb;for(b&&"undefined"!==typeof b.createDocumentFragment||(b=y);l<r;l++)if((f=a[l])||0===f)if("object"===m.type(f))m.merge(h,f.nodeType?[f]:f);else if(ob.test(f)){u=u||q(b);k=k||u.appendChild(b.createElement("div"));n=(Fb.exec(f)||["",""])[1].toLowerCase();g=fa[n]||fa._default;k.innerHTML=g[1]+f.replace(Eb,"<$1></$2>")+(g[2]||"");for(e=g[0];e--;)k=k.lastChild;!m.support.leadingWhitespace&&nb.test(f)&&h.push(b.createTextNode(nb.exec(f)[0]));if(!m.support.tbody)for(e=
(f="table"!==n||ya.test(f)?"<table>"!==g[1]||ya.test(f)?0:k:k.firstChild)&&f.childNodes.length;e--;)m.nodeName(p=f.childNodes[e],"tbody")&&!p.childNodes.length&&f.removeChild(p);m.merge(h,k.childNodes);for(k.textContent="";k.firstChild;)k.removeChild(k.firstChild);k=u.lastChild}else h.push(b.createTextNode(f));k&&u.removeChild(k);m.support.appendChecked||m.grep(v(h,"input"),z);for(l=0;f=h[l++];)if(u=m.contains(f.ownerDocument,f),d&&-1!==m.inArray(f,d)||s.appendChild(f),k=v(f,"script"),u&&t(k),c)for(e=
0;f=k[e++];)Qb.test(f.type||"")&&c.push(f);return s},cleanData:function(a,b){for(var c,d,f,e,k=0,n=m.expando,g=m.cache,p=m.support.deleteExpando,h=m.event.special;null!=(f=a[k]);k++)if(b||m.acceptData(f))if(c=(d=f[n])&&g[d]){if(c.events)for(e in c.events)h[e]?m.event.remove(f,e):m.removeEvent(f,e,c.handle);g[d]&&(delete g[d],p?delete f[n]:"undefined"!==typeof f.removeAttribute?f.removeAttribute(n):f[n]=null,P.push(d))}}});var Oa,Ya,Ia,Hb=/alpha\([^)]*\)/i,sb=/opacity\s*=\s*([^)]*)/,cb=/^(top|right|bottom|left)$/,
Sb=/^(none|table(?!-c[ea]).+)/,Tb=/^margin/,gb=RegExp("^("+ba+")(.*)$","i"),ia=RegExp("^("+ba+")(?!px)[a-z%]+$","i"),tb=RegExp("^([+-])=("+ba+")","i"),hb={BODY:"block"},ub={position:"absolute",visibility:"hidden",display:"block"},za={letterSpacing:0,fontWeight:400},ua=["Top","Right","Bottom","Left"],fb=["Webkit","O","Moz","ms"];m.fn.extend({css:function(a,b){return m.access(this,function(a,b,c){var d,f={},k=0;if(m.isArray(b)){c=Ya(a);for(d=b.length;k<d;k++)f[b[k]]=m.css(a,b[k],!1,c);return f}return c!==
e?m.style(a,b,c):m.css(a,b)},a,b,1<arguments.length)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){var b="boolean"===typeof a;return this.each(function(){(b?a:w(this))?m(this).show():m(this).hide()})}});m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":m.support.cssFloat?"cssFloat":
"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,k,n,g=m.camelCase(b),p=a.style;b=m.cssProps[g]||(m.cssProps[g]=A(p,g));n=m.cssHooks[b]||m.cssHooks[g];if(c!==e){if(k=typeof c,"string"===k&&(f=tb.exec(c))&&(c=(f[1]+1)*f[2]+parseFloat(m.css(a,b)),k="number"),!(null==c||"number"===k&&isNaN(c)||("number"!==k||m.cssNumber[g]||(c+="px"),m.support.clearCloneStyle||""!==c||0!==b.indexOf("background")||(p[b]="inherit"),n&&"set"in n&&(c=n.set(a,c,d))===e)))try{p[b]=
c}catch(h){}}else return n&&"get"in n&&(f=n.get(a,!1,d))!==e?f:p[b]}},css:function(a,b,c,d){var f,k;k=m.camelCase(b);b=m.cssProps[k]||(m.cssProps[k]=A(a.style,k));(k=m.cssHooks[b]||m.cssHooks[k])&&"get"in k&&(f=k.get(a,!0,c));f===e&&(f=Oa(a,b,d));"normal"===f&&b in za&&(f=za[b]);return c?(a=parseFloat(f),!0===c||m.isNumeric(a)?a||0:f):f},swap:function(a,b,c,d){var f,e={};for(f in b)e[f]=a.style[f],a.style[f]=b[f];c=c.apply(a,d||[]);for(f in b)a.style[f]=e[f];return c}});h.getComputedStyle?(Ya=function(a){return h.getComputedStyle(a,
null)},Oa=function(a,b,c){var d,f=(c=c||Ya(a))?c.getPropertyValue(b)||c[b]:e,k=a.style;c&&(""!==f||m.contains(a.ownerDocument,a)||(f=m.style(a,b)),ia.test(f)&&Tb.test(b)&&(a=k.width,b=k.minWidth,d=k.maxWidth,k.minWidth=k.maxWidth=k.width=f,f=c.width,k.width=a,k.minWidth=b,k.maxWidth=d));return f}):y.documentElement.currentStyle&&(Ya=function(a){return a.currentStyle},Oa=function(a,b,c){var d,f,k=(c=c||Ya(a))?c[b]:e,n=a.style;null==k&&n&&n[b]&&(k=n[b]);if(ia.test(k)&&!cb.test(b)){c=n.left;if(f=(d=
a.runtimeStyle)&&d.left)d.left=a.currentStyle.left;n.left="fontSize"===b?"1em":k;k=n.pixelLeft+"px";n.left=c;f&&(d.left=f)}return""===k?"auto":k});m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&Sb.test(m.css(a,"display"))?m.swap(a,ub,function(){return R(a,b,d)}):R(a,b,d)},set:function(a,c,d){var f=d&&Ya(a);return x(a,c,d?Q(a,b,d,m.support.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f),f):0)}}});m.support.opacity||(m.cssHooks.opacity=
{get:function(a,b){return sb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,f=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",e=d&&d.filter||c.filter||"";c.zoom=1;if((1<=b||""===b)&&""===m.trim(e.replace(Hb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter))return;c.filter=Hb.test(e)?e.replace(Hb,f):e+" "+f}});m(function(){m.support.reliableMarginRight||(m.cssHooks.marginRight=
{get:function(a,b){if(b)return m.swap(a,{display:"inline-block"},Oa,[a,"marginRight"])}});!m.support.pixelPosition&&m.fn.position&&m.each(["top","left"],function(a,b){m.cssHooks[b]={get:function(a,c){if(c)return c=Oa(a,b),ia.test(c)?m(a).position()[b]+"px":c}}})});m.expr&&m.expr.filters&&(m.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!m.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)});
m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){var d=0,f={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)f[a+ua[d]+b]=c[d]||c[d-2]||c[0];return f}};Tb.test(a)||(m.cssHooks[a+b].set=x)});var Ib=/%20/g,Zb=/\[\]$/,Ub=/\r?\n/g,vb=/^(?:submit|button|image|reset)$/i,Ka=/^(?:input|select|textarea|keygen)/i;m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");
return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ka.test(this.nodeName)&&!vb.test(a)&&(this.checked||!eb.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Ub,"\r\n")}}):{name:b.name,value:c.replace(Ub,"\r\n")}}).get()}});m.param=function(a,b){var c,d=[],f=function(a,b){b=m.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};
b===e&&(b=m.ajaxSettings&&m.ajaxSettings.traditional);if(m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){f(this.name,this.value)});else for(c in a)J(c,a[c],b,f);return d.join("&").replace(Ib,"+")};var La,Ma,wb=m.now(),ka=/\?/,Va=/#.*$/,Jb=/([?&])_=[^&]*/,Fa=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Ga=/^(?:GET|HEAD)$/,Vb=/^\/\//,Wb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,xb=m.fn.load,yb={},Pa={},la="*/".concat("*");try{Ma=V.href}catch(Xb){Ma=y.createElement("a"),Ma.href="",Ma=Ma.href}La=
Wb.exec(Ma.toLowerCase())||[];m.fn.load=function(a,b,c){if("string"!==typeof a&&xb)return xb.apply(this,arguments);var d,f,k,n=this,g=a.indexOf(" ");0<=g&&(d=a.slice(g,a.length),a=a.slice(0,g));m.isFunction(b)?(c=b,b=e):b&&"object"===typeof b&&(f="POST");0<n.length&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){k=arguments;n.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){n.each(c,k||[a.responseText,b,a])});return this};m.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){m.fn[b]=function(a){return this.on(b,a)}});m.each(["get","post"],function(a,b){m[b]=function(a,c,d,f){m.isFunction(c)&&(f=f||d,d=c,c=e);return m.ajax({url:a,type:b,dataType:f,data:c,success:d})}});m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ma,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(La[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":la,text:"text/plain",html:"text/html",
xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":h.String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?H(H(a,m.ajaxSettings),b):H(m.ajaxSettings,a)},ajaxPrefilter:L(yb),ajaxTransport:L(Pa),ajax:function(a,b){function c(a,b,n,p){var q,U,w,Z,D=b;if(2!==z){z=2;g&&clearTimeout(g);
d=e;k=p||"";H.readyState=0<a?4:0;if(n){Z=l;p=H;var A,B,ea,Ha,Ca=Z.contents,qa=Z.dataTypes,J=Z.responseFields;for(B in J)B in n&&(p[J[B]]=n[B]);for(;"*"===qa[0];)qa.shift(),A===e&&(A=Z.mimeType||p.getResponseHeader("Content-Type"));if(A)for(B in Ca)if(Ca[B]&&Ca[B].test(A)){qa.unshift(B);break}if(qa[0]in n)ea=qa[0];else{for(B in n){if(!qa[0]||Z.converters[B+" "+qa[0]]){ea=B;break}Ha||(Ha=B)}ea=ea||Ha}ea?(ea!==qa[0]&&qa.unshift(ea),Z=n[ea]):Z=void 0}if(200<=a&&300>a||304===a)if(l.ifModified&&((n=H.getResponseHeader("Last-Modified"))&&
(m.lastModified[f]=n),(n=H.getResponseHeader("etag"))&&(m.etag[f]=n)),304===a)q=!0,D="notmodified";else{a:{U=l;w=Z;var x,ba,D={};A=0;B=U.dataTypes.slice();ea=B[0];U.dataFilter&&(w=U.dataFilter(w,U.dataType));if(B[1])for(x in U.converters)D[x.toLowerCase()]=U.converters[x];for(;n=B[++A];)if("*"!==n){if("*"!==ea&&ea!==n){x=D[ea+" "+n]||D["* "+n];if(!x)for(ba in D)if(q=ba.split(" "),q[1]===n&&(x=D[ea+" "+q[0]]||D["* "+q[0]])){!0===x?x=D[ba]:!0!==D[ba]&&(n=q[0],B.splice(A--,0,n));break}if(!0!==x)if(x&&
U["throws"])w=x(w);else try{w=x(w)}catch(ha){q={state:"parsererror",error:x?ha:"No conversion from "+ea+" to "+n};break a}}ea=n}q={state:"success",data:w}}D=q.state;U=q.data;w=q.error;q=!w}else if(w=D,a||!D)D="error",0>a&&(a=0);H.status=a;H.statusText=(b||D)+"";q?t.resolveWith(r,[U,D,H]):t.rejectWith(r,[H,D,w]);H.statusCode(u);u=e;h&&s.trigger(q?"ajaxSuccess":"ajaxError",[H,l,q?U:w]);v.fireWith(r,[H,D]);h&&(s.trigger("ajaxComplete",[H,l]),--m.active||m.event.trigger("ajaxStop"))}}"object"===typeof a&&
(b=a,a=e);b=b||{};var d,f,k,n,g,p,h,q,l=m.ajaxSetup({},b),r=l.context||l,s=l.context&&(r.nodeType||r.jquery)?m(r):m.event,t=m.Deferred(),v=m.Callbacks("once memory"),u=l.statusCode||{},w={},Z={},z=0,D="canceled",H={readyState:0,getResponseHeader:function(a){var b;if(2===z){if(!n)for(n={};b=Fa.exec(k);)n[b[1].toLowerCase()]=b[2];b=n[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===z?k:null},setRequestHeader:function(a,b){var c=a.toLowerCase();z||(a=Z[c]=Z[c]||a,w[a]=
b);return this},overrideMimeType:function(a){z||(l.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>z)for(b in a)u[b]=[u[b],a[b]];else H.always(a[H.status]);return this},abort:function(a){a=a||D;d&&d.abort(a);c(0,a);return this}};t.promise(H).complete=v.add;H.success=H.done;H.error=H.fail;l.url=((a||l.url||Ma)+"").replace(Va,"").replace(Vb,La[1]+"//");l.type=b.method||b.type||l.method||l.type;l.dataTypes=m.trim(l.dataType||"*").toLowerCase().match(ma)||[""];null==l.crossDomain&&(p=
Wb.exec(l.url.toLowerCase()),l.crossDomain=!(!p||p[1]===La[1]&&p[2]===La[2]&&(p[3]||("http:"===p[1]?80:443))==(La[3]||("http:"===La[1]?80:443))));l.data&&l.processData&&"string"!==typeof l.data&&(l.data=m.param(l.data,l.traditional));U(yb,l,b,H);if(2===z)return H;(h=l.global)&&0===m.active++&&m.event.trigger("ajaxStart");l.type=l.type.toUpperCase();l.hasContent=!Ga.test(l.type);f=l.url;l.hasContent||(l.data&&(f=l.url+=(ka.test(f)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=Jb.test(f)?f.replace(Jb,
"$1_="+wb++):f+(ka.test(f)?"&":"?")+"_="+wb++));l.ifModified&&(m.lastModified[f]&&H.setRequestHeader("If-Modified-Since",m.lastModified[f]),m.etag[f]&&H.setRequestHeader("If-None-Match",m.etag[f]));(l.data&&l.hasContent&&!1!==l.contentType||b.contentType)&&H.setRequestHeader("Content-Type",l.contentType);H.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+la+"; q=0.01":""):l.accepts["*"]);for(q in l.headers)H.setRequestHeader(q,
l.headers[q]);if(l.beforeSend&&(!1===l.beforeSend.call(r,H,l)||2===z))return H.abort();D="abort";for(q in{success:1,error:1,complete:1})H[q](l[q]);if(d=U(Pa,l,b,H)){H.readyState=1;h&&s.trigger("ajaxSend",[H,l]);l.async&&0<l.timeout&&(g=setTimeout(function(){H.abort("timeout")},l.timeout));try{z=1,d.send(w,c)}catch(A){if(2>z)c(-1,A);else throw A;}}else c(-1,"No Transport");return H},getScript:function(a,b){return m.get(a,e,b,"script")},getJSON:function(a,b,c){return m.get(a,b,c,"json")}});m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){m.globalEval(a);return a}}});m.ajaxPrefilter("script",function(a){a.cache===e&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,f){b=y.createElement("script");b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||
/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||f(200,"success")};c.insertBefore(b,c.firstChild)},abort:function(){if(b)b.onload(e,!0)}}}});var zb=[],Ca=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=zb.pop()||m.expando+"_"+wb++;this[a]=!0;return a}});m.ajaxPrefilter("json jsonp",function(a,b,c){var d,f,k,n=!1!==a.jsonp&&(Ca.test(a.url)?"url":"string"===typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&
Ca.test(a.data)&&"data");if(n||"jsonp"===a.dataTypes[0])return d=a.jsonpCallback=m.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,n?a[n]=a[n].replace(Ca,"$1"+d):!1!==a.jsonp&&(a.url+=(ka.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){k||m.error(d+" was not called");return k[0]},a.dataTypes[0]="json",f=h[d],h[d]=function(){k=arguments},c.always(function(){h[d]=f;a[d]&&(a.jsonpCallback=b.jsonpCallback,zb.push(d));k&&m.isFunction(f)&&f(k[0]);k=f=e}),"script"});
var Z,D,ea=0,qa=h.ActiveXObject&&function(){for(var a in Z)Z[a](e,!0)};m.ajaxSettings.xhr=h.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&ha()))a:{try{a=new h.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:ha;D=m.ajaxSettings.xhr();m.support.cors=!!D&&"withCredentials"in D;(D=m.support.ajax=!!D)&&m.ajaxTransport(function(a){if(!a.crossDomain||m.support.cors){var b;return{send:function(c,d){var f,k,n=a.xhr();a.username?n.open(a.type,a.url,a.async,a.username,a.password):
n.open(a.type,a.url,a.async);if(a.xhrFields)for(k in a.xhrFields)n[k]=a.xhrFields[k];a.mimeType&&n.overrideMimeType&&n.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");try{for(k in c)n.setRequestHeader(k,c[k])}catch(g){}n.send(a.hasContent&&a.data||null);b=function(c,k){var g,p,l,h,q;try{if(b&&(k||4===n.readyState))if(b=e,f&&(n.onreadystatechange=m.noop,qa&&delete Z[f]),k)4!==n.readyState&&n.abort();else{h={};g=n.status;q=n.responseXML;l=
n.getAllResponseHeaders();q&&q.documentElement&&(h.xml=q);"string"===typeof n.responseText&&(h.text=n.responseText);try{p=n.statusText}catch(r){p=""}g||!a.isLocal||a.crossDomain?1223===g&&(g=204):g=h.text?200:404}}catch(s){k||d(-1,s)}h&&d(g,p,h,l)};a.async?4===n.readyState?setTimeout(b):(f=++ea,qa&&(Z||(Z={},m(h).unload(qa)),Z[f]=b),n.onreadystatechange=b):b()},abort:function(){b&&b(e,!0)}}}});var Qa,Wa,Na=/^(?:toggle|show|hide)$/,$b=RegExp("^(?:([+-])=|)("+ba+")([a-z%]*)$","i"),Yb=/queueHooks$/,
Ra=[function(a,b,c){var d,f,e,k,n,g,p=this,l=a.style,h={},q=[],r=a.nodeType&&w(a);c.queue||(n=m._queueHooks(a,"fx"),null==n.unqueued&&(n.unqueued=0,g=n.empty.fire,n.empty.fire=function(){n.unqueued||g()}),n.unqueued++,p.always(function(){p.always(function(){n.unqueued--;m.queue(a,"fx").length||n.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===m.css(a,"display")&&"none"===m.css(a,"float")&&(m.support.inlineBlockNeedsLayout&&
"inline"!==N(a.nodeName)?l.zoom=1:l.display="inline-block"));c.overflow&&(l.overflow="hidden",m.support.shrinkWrapBlocks||p.done(function(){l.overflow=c.overflow[0];l.overflowX=c.overflow[1];l.overflowY=c.overflow[2]}));for(d in b)e=b[d],Na.exec(e)&&(delete b[d],f=f||"toggle"===e,e!==(r?"hide":"show")&&q.push(d));if(b=q.length)for(e=m._data(a,"fxshow")||m._data(a,"fxshow",{}),("hidden"in e)&&(r=e.hidden),f&&(e.hidden=!r),r?m(a).show():p.done(function(){m(a).hide()}),p.done(function(){var b;m._removeData(a,
"fxshow");for(b in h)m.style(a,b,h[b])}),d=0;d<b;d++)f=q[d],k=p.createTween(f,r?e[f]:0),h[f]=e[f]||m.style(a,f),f in e||(e[f]=k.start,r&&(k.end=k.start,k.start="width"===f||"height"===f?1:0))}],ib={"*":[function(a,b){var c,d,f=this.createTween(a,b),e=$b.exec(b),k=f.cur(),n=+k||0,g=1,p=20;if(e){c=+e[2];d=e[3]||(m.cssNumber[a]?"":"px");if("px"!==d&&n){n=m.css(f.elem,a,!0)||c||1;do g=g||".5",n/=g,m.style(f.elem,a,n+d);while(g!==(g=f.cur()/k)&&1!==g&&--p)}f.unit=d;f.start=n;f.end=e[1]?n+(e[1]+1)*c:c}return f}]};
m.Animation=m.extend(ra,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,f=a.length;d<f;d++)c=a[d],ib[c]=ib[c]||[],ib[c].unshift(b)},prefilter:function(a,b){b?Ra.unshift(a):Ra.push(a)}});m.Tween=O;O.prototype={constructor:O,init:function(a,b,c,d,f,e){this.elem=a;this.prop=c;this.easing=f||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=e||(m.cssNumber[c]?"":"px")},cur:function(){var a=O.propHooks[this.prop];return a&&a.get?a.get(this):O.propHooks._default.get(this)},
run:function(a){var b,c=O.propHooks[this.prop];this.pos=this.options.duration?b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):O.propHooks._default.set(this);return this}};O.prototype.init.prototype=O.prototype;O.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=m.css(a.elem,a.prop,
"auto"))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(m.fx.step[a.prop])m.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,f){return null==a||"boolean"===typeof a?c.apply(this,arguments):
this.animate(na(b,!0),a,d,f)}});m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var f=m.isEmptyObject(a),e=m.speed(b,c,d),k=function(){var b=ra(this,m.extend({},a),e);k.finish=function(){b.stop(!0)};(f||m._data(this,"finish"))&&b.stop(!0)};k.finish=k;return f||!1===e.queue?this.each(k):this.queue(e.queue,k)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=
b,b=a,a=e);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,f=null!=a&&a+"queueHooks",e=m.timers,k=m._data(this);if(f)k[f]&&k[f].stop&&d(k[f]);else for(f in k)k[f]&&k[f].stop&&Yb.test(f)&&d(k[f]);for(f=e.length;f--;)e[f].elem!==this||null!=a&&e[f].queue!==a||(e[f].anim.stop(c),b=!1,e.splice(f,1));!b&&c||m.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=m._data(this),d=c[a+"queue"];b=c[a+"queueHooks"];var f=m.timers,e=d?d.length:0;
c.finish=!0;m.queue(this,a,[]);b&&b.cur&&b.cur.finish&&b.cur.finish.call(this);for(b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<e;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});m.each({slideDown:na("show"),slideUp:na("hide"),slideToggle:na("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});m.speed=function(a,b,c){var d=a&&
"object"===typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};d.duration=m.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){m.isFunction(d.old)&&d.old.call(this);d.queue&&m.dequeue(this,d.queue)};return d};m.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/
2}};m.timers=[];m.fx=O.prototype.init;m.fx.tick=function(){var a,b=m.timers,c=0;for(Qa=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop();Qa=e};m.fx.timer=function(a){a()&&m.timers.push(a)&&m.fx.start()};m.fx.interval=13;m.fx.start=function(){Wa||(Wa=setInterval(m.fx.tick,m.fx.interval))};m.fx.stop=function(){clearInterval(Wa);Wa=null};m.fx.speeds={slow:600,fast:200,_default:400};m.fx.step={};m.expr&&m.expr.filters&&(m.expr.filters.animated=function(a){return m.grep(m.timers,
function(b){return a===b.elem}).length});m.fn.offset=function(a){if(arguments.length)return a===e?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},f=(c=this[0])&&c.ownerDocument;if(f){b=f.documentElement;if(!m.contains(b,c))return d;"undefined"!==typeof c.getBoundingClientRect&&(d=c.getBoundingClientRect());c=F(f);return{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}};m.offset={setOffset:function(a,
b,c){var d=m.css(a,"position");"static"===d&&(a.style.position="relative");var f=m(a),e=f.offset(),k=m.css(a,"top"),n=m.css(a,"left"),g={},p={};("absolute"===d||"fixed"===d)&&-1<m.inArray("auto",[k,n])?(p=f.position(),d=p.top,n=p.left):(d=parseFloat(k)||0,n=parseFloat(n)||0);m.isFunction(b)&&(b=b.call(a,c,e));null!=b.top&&(g.top=b.top-e.top+d);null!=b.left&&(g.left=b.left-e.left+n);"using"in b?b.using.call(a,g):f.css(g)}};m.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];
"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0));return{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||y.documentElement;a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position");)a=a.offsetParent;return a||y.documentElement})}});
m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return m.access(this,function(a,d,f){var k=F(a);if(f===e)return k?b in k?k[b]:k.document.documentElement[d]:a[d];k?k.scrollTo(c?m(k).scrollLeft():f,c?f:m(k).scrollTop()):a[d]=f},a,d,arguments.length,null)}});m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,f){var k=arguments.length&&(c||"boolean"!==typeof d),
n=c||(!0===d||!0===f?"margin":"border");return m.access(this,function(b,c,d){return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):d===e?m.css(b,c,n):m.style(b,c,d,n)},b,k?d:e,k,null)}})});(function(){var a,b,c,d,f=m.fn.toggle,e=/(?:^|\s)hover(\.\S+|)\b/,k=function(a){return m.event.special.hover?a:a.replace(e,"mouseenter$1 mouseleave$1")};m.uaMatch=function(a){a=a.toLowerCase();
a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a=m.uaMatch(navigator.userAgent);b={};a.browser&&(b[a.browser]=!0,b.version=a.version);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);m.browser=b;m.sub=function(){function a(b,c){return new a.fn.init(b,c)}m.extend(!0,a,this);a.superclass=this;a.fn=
a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,d){d&&d instanceof m&&!(d instanceof a)&&(d=a(d));return m.fn.init.call(this,c,d,b)};a.fn.init.prototype=a.fn;var b=a(y);return a};m.fn.toggle=function(a,b){if(!m.isFunction(a)||!m.isFunction(b))return f.apply(this,arguments);var c=arguments,d=a.guid||m.guid++,e=0,k=function(b){var d=(m._data(this,"lastToggle"+a.guid)||0)%e;m._data(this,"lastToggle"+a.guid,d+1);b.preventDefault();return c[d].apply(this,arguments)||!1};for(k.guid=
d;e<c.length;)c[e++].guid=d;return this.click(k)};c=m.event.add;m.event.add=function(a,b,d,f,e){b&&(b=k(b));c.call(this,a,b,d,f,e)};d=m.event.remove;m.event.remove=function(a,b,c,f,e){b&&(b=k(b));d.call(this,a,b,c,f,e)};m.attrFn={}})();m.version="3.1";m.long_version="3.1.2";m.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")};m.globalNamespace=m.uid("Foundry");h[m.globalNamespace]=m;m.run=function(a){return m.isFunction(a)?a(m):null};m.initialize=function(a){m.initialized||
(m.extend(m,a),"development"==m.environment&&(h.F=m),m.initialized=!0,FD31.module.execute())};FD31.jquery(m)})(window);
FD31.plugin("lodash",function(h){function e(a,b,c){c=(c||0)-1;for(var d=a.length;++c<d;)if(a[c]===b)return c;return-1}function g(a,b){var c=typeof b;a=a.cache;if("boolean"==c||null==b)return a[b];"number"!=c&&"string"!=c&&(c="object");var d="number"==c?b:A+b;a=a[c]||(a[c]={});return"object"==c?a[d]&&-1<e(a[d],b)?0:-1:a[d]?0:-1}function b(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:A+a,f=b[c]||(b[c]={});"object"==c?
(f[d]||(f[d]=[])).push(a)==this.array.length&&(b[c]=!1):f[d]=!0}}function a(a){return a.charCodeAt(0)}function c(a,b){var c=a.index,d=b.index;a=a.criteria;b=b.criteria;if(a!==b){if(a>b||"undefined"==typeof a)return 1;if(a<b||"undefined"==typeof b)return-1}return c<d?-1:1}function d(a){var c=-1,d=a.length,f=n();f["false"]=f["null"]=f["true"]=f.undefined=!1;var e=n();e.array=a;e.cache=f;for(e.push=b;++c<d;)e.push(a[c]);return!1===f.object?(s(e),null):e}function f(a){return"\\"+da[a]}function k(){return t.pop()||
[]}function n(){return l.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function p(a){a.length=0;t.length<B&&t.push(a)}function s(a){var b=a.cache;b&&s(b);a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null;l.length<B&&l.push(a)}function q(a,b,c){b||(b=0);"undefined"==typeof c&&(c=a?a.length:0);var d=-1;c=c-b||0;for(var f=Array(0>c?0:c);++d<c;)f[d]=
a[b+d];return f}function u(b){function l(a){return a&&"object"==typeof a&&!Fa(a)&&ia.call(a,"__wrapped__")?a:new h(a)}function h(a){this.__wrapped__=a}function t(a,b,c,d){function f(){var d=arguments,l=k?this:b;e||(a=b[n]);c.length&&(d=d.length?(d=ka.call(d),g?d.concat(c):c.concat(d)):c);return this instanceof f?(l=I(a.prototype)?fb(a.prototype):{},d=a.apply(l,d),I(d)?d:l):a.apply(l,d)}var e=E(a),k=!c,n=b;if(k){var g=d;c=b}else if(!e){if(!d)throw new Rb;b=a}return f}function B(a){return Vb[a]}function ca(a,
b,c){var d=(d=l.indexOf)===Nb?e:d;return d}function da(a){return function(b,c,d,f){"boolean"!=typeof c&&null!=c&&(d=(f=d)&&f[c]===b?r:c,c=!1);null!=d&&(d=l.createCallback(d,f));return a(b,c,d,f)}}function ja(a){var b,c;if(!a||za.call(a)!=oa||(b=a.constructor,E(b)&&!(b instanceof b)))return!1;Pa(a,function(a,b){c=b});return c===r||ia.call(a,c)}function mb(a){return Wb[a]}function Za(a,b,c,d,f,e){var n=a;"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1);if("function"==typeof c){c="undefined"==typeof d?c:
l.createCallback(c,d,1);n=c(n);if("undefined"!=typeof n)return n;n=a}if(d=I(n)){var g=za.call(n);if(!Y[g])return n;var h=Fa(n)}if(!d||!b)return d?h?q(n):xb({},n):n;d=Va[g];switch(g){case X:case T:return new d(+n);case V:case S:return new d(n);case P:return d(n.source,J.exec(n))}g=!f;f||(f=k());e||(e=k());for(var m=f.length;m--;)if(f[m]==a)return e[m];n=h?d(n.length):{};h&&(ia.call(a,"index")&&(n.index=a.index),ia.call(a,"input")&&(n.input=a.input));f.push(a);e.push(n);(h?W:la)(a,function(a,d){n[d]=
Za(a,b,c,r,f,e)});g&&(p(f),p(e));return n}function wa(a){var b=[];Pa(a,function(a,c){E(a)&&b.push(c)});return b.sort()}function $a(a){for(var b=-1,c=Ga(a),d=c.length,f={};++b<d;){var e=c[b];f[a[e]]=e}return f}function G(a,b,c,d,f,e){var n=c===z;if("function"==typeof c&&!n){c=l.createCallback(c,d,2);var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,q=typeof b;if(a===a&&(!a||"function"!=h&&"object"!=h)&&(!b||"function"!=q&&"object"!=q))return!1;if(null==
a||null==b)return a===b;q=za.call(a);h=za.call(b);q==na&&(q=oa);h==na&&(h=oa);if(q!=h)return!1;switch(q){case X:case T:return+a==+b;case V:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case P:case S:return a==fa(b)}h=q==F;if(!h){if(ia.call(a,"__wrapped__ ")||ia.call(b,"__wrapped__"))return G(a.__wrapped__||a,b.__wrapped__||b,c,d,f,e);if(q!=oa)return!1;var q=a.constructor,m=b.constructor;if(q!=m&&!(E(q)&&q instanceof q&&E(m)&&m instanceof m))return!1}m=!f;f||(f=k());e||(e=k());for(q=f.length;q--;)if(f[q]==
a)return e[q]==b;var r=0,g=!0;f.push(a);e.push(b);if(h){q=a.length;r=b.length;g=r==a.length;if(!g&&!n)return g;for(;r--;)if(h=q,m=b[r],n)for(;h--&&!(g=G(a[h],m,c,d,f,e)););else if(!(g=G(a[r],m,c,d,f,e)))break;return g}Pa(b,function(b,k,n){if(ia.call(n,k))return r++,g=ia.call(a,k)&&G(a[k],b,c,d,f,e)});g&&!n&&Pa(a,function(a,b,c){if(ia.call(c,b))return g=-1<--r});m&&(p(f),p(e));return g}function E(a){return"function"==typeof a}function I(a){return!(!a||!M[typeof a])}function K(a){return"number"==typeof a||
za.call(a)==V}function C(a){return"string"==typeof a||za.call(a)==S}function Da(a,b,c){var d=arguments,f=0,e=2;if(!I(a))return a;if(c===z)var n=d[3],g=d[4],h=d[5];else{var q=!0,g=k(),h=k();"number"!=typeof c&&(e=d.length);3<e&&"function"==typeof d[e-2]?n=l.createCallback(d[--e-1],d[e--],2):2<e&&"function"==typeof d[e-1]&&(n=d[--e])}for(;++f<e;)(Fa(d[f])?W:la)(d[f],function(b,c){var d,f,e=b,k=a[c];if(b&&((f=Fa(b))||Xb(b))){for(e=g.length;e--;)if(d=g[e]==b){k=h[e];break}if(!d){var l;n&&(e=n(k,b),l=
"undefined"!=typeof e)&&(k=e);l||(k=f?Fa(k)?k:[]:Xb(k)?k:{});g.push(b);h.push(k);l||(k=Da(k,b,z,n,g,h))}}else n&&(e=n(k,b),"undefined"==typeof e&&(e=b)),"undefined"!=typeof e&&(k=e);a[c]=k});q&&(p(g),p(h));return a}function Ba(a){for(var b=-1,c=Ga(a),d=c.length,f=ya(d);++b<d;)f[b]=a[c[b]];return f}function ab(a,b,c){var d=-1,f=ca(),e=a?a.length:0,k=!1;c=(0>c?Ka(0,e+c):c)||0;e&&"number"==typeof e?k=-1<(C(a)?a.indexOf(b,c):f(a,b,c)):la(a,function(a){if(++d>=c)return!(k=a===b)});return k}function Ta(a,
b,c){var d=!0;b=l.createCallback(b,c);c=-1;var f=a?a.length:0;if("number"==typeof f)for(;++c<f&&(d=!!b(a[c],c,a)););else la(a,function(a,c,f){return d=!!b(a,c,f)});return d}function sa(a,b,c){var d=[];b=l.createCallback(b,c);c=-1;var f=a?a.length:0;if("number"==typeof f)for(;++c<f;){var e=a[c];b(e,c,a)&&d.push(e)}else la(a,function(a,c,f){b(a,c,f)&&d.push(a)});return d}function xa(a,b,c){b=l.createCallback(b,c);c=-1;var d=a?a.length:0;if("number"==typeof d)for(;++c<d;){var f=a[c];if(b(f,c,a))return f}else{var e;
la(a,function(a,c,d){if(b(a,c,d))return e=a,!1});return e}}function W(a,b,c){var d=-1,f=a?a.length:0;b=b&&"undefined"==typeof c?b:l.createCallback(b,c);if("number"==typeof f)for(;++d<f&&!1!==b(a[d],d,a););else la(a,b);return a}function Ua(a,b,c){var d=-1,f=a?a.length:0;b=l.createCallback(b,c);if("number"==typeof f)for(var e=ya(f);++d<f;)e[d]=b(a[d],d,a);else e=[],la(a,function(a,c,f){e[++d]=b(a,c,f)});return e}function Ea(b,c,d){var f=-Infinity,e=f;if(!c&&Fa(b)){d=-1;for(var k=b.length;++d<k;){var n=
b[d];n>e&&(e=n)}}else c=!c&&C(b)?a:l.createCallback(c,d),W(b,function(a,b,d){b=c(a,b,d);b>f&&(f=b,e=a)});return e}function Xa(a,b){var c=-1,d=a?a.length:0;if("number"==typeof d)for(var f=ya(d);++c<d;)f[c]=a[c][b];return f||Ua(a,b)}function bb(a,b,c,d){if(!a)return c;var f=3>arguments.length;b=l.createCallback(b,d,4);var e=-1,k=a.length;if("number"==typeof k)for(f&&(c=a[++e]);++e<k;)c=b(c,a[e],e,a);else la(a,function(a,d,e){c=f?(f=!1,a):b(c,a,d,e)});return c}function Lb(a,b,c,d){var f=a?a.length:0,
e=3>arguments.length;if("number"!=typeof f)var k=Ga(a),f=k.length;b=l.createCallback(b,d,4);W(a,function(d,n,g){n=k?k[--f]:--f;c=e?(e=!1,a[n]):b(c,a[n],n,g)});return c}function Mb(a,b,c){var d;b=l.createCallback(b,c);c=-1;var f=a?a.length:0;if("number"==typeof f)for(;++c<f&&!(d=b(a[c],c,a)););else la(a,function(a,c,f){return!(d=b(a,c,f))});return!!d}function Ab(a){var b=-1,c=ca(),f=a?a.length:0,k=cb.apply(ta,ka.call(arguments,1)),n=[],l=f>=w&&c===e;if(l){var p=d(k);p?(c=g,k=p):l=!1}for(;++b<f;)p=
a[b],0>c(k,p)&&n.push(p);l&&s(k);return n}function qb(a,b,c){if(a){var d=0,f=a.length;if("number"!=typeof b&&null!=b){var e=-1;for(b=l.createCallback(b,c);++e<f&&b(a[e],e,a);)d++}else if(d=b,null==d||c)return a[0];return q(a,0,La(Ka(0,d),f))}}function Nb(a,b,c){if("number"==typeof c){var d=a?a.length:0;c=0>c?Ka(0,d+c):c||0}else if(c)return c=Kb(a,b),a[c]===b?c:-1;return a?e(a,b,c):-1}function Bb(a,b,c){if("number"!=typeof b&&null!=b){var d=0,f=-1,e=a?a.length:0;for(b=l.createCallback(b,c);++f<e&&
b(a[f],f,a);)d++}else d=null==b||c?1:Ka(0,b);return q(a,d)}function Kb(a,b,c,d){var f=0,e=a?a.length:f;c=c?l.createCallback(c,d,1):nb;for(b=c(b);f<e;)d=f+e>>>1,c(a[d])<b?f=d+1:e=d;return f}function Cb(a){for(var b=-1,c=a?Ea(Xa(a,"length")):0,d=ya(0>c?0:c);++b<c;)d[b]=Xa(a,b);return d}function Ob(a,b){for(var c=-1,d=a?a.length:0,f={};++c<d;){var e=a[c];b?f[e]=b[c]:f[e[0]]=e[1]}return f}function pb(a,b){return Jb.fastBind||ua&&2<arguments.length?ua.call.apply(ua,arguments):t(a,b,ka.call(arguments,2))}
function Pb(a,b,c){function d(){sb(q);sb(m);l=0;q=m=null}function f(){var b=r&&(!s||1<l);d();b&&(!1!==h&&(p=new rb),n=a.apply(g,k))}function e(){d();if(r||h!==b)p=new rb,n=a.apply(g,k)}var k,n,g,l=0,p=0,h=!1,q=null,m=null,r=!0;b=Ka(0,b||0);if(!0===c)var s=!0,r=!1;else I(c)&&(s=c.leading,h="maxWait"in c&&Ka(b,c.maxWait||0),r="trailing"in c?c.trailing:r);return function(){k=arguments;g=this;l++;sb(m);if(!1===h)s&&2>l&&(n=a.apply(g,k));else{var c=new rb;q||s||(p=c);var d=h-(c-p);0>=d?(sb(q),q=null,p=
c,n=a.apply(g,k)):q||(q=ub(e,d))}b!==h&&(m=ub(f,b));return n}}function Db(a){var b=ka.call(arguments,1);return ub(function(){a.apply(r,b)},1)}function nb(a){return a}function Eb(a){W(wa(a),function(b){var c=l[b]=a[b];l.prototype[b]=function(){var a=this.__wrapped__,b=[a];tb.apply(b,arguments);b=c.apply(l,b);return a&&"object"==typeof a&&a===b?this:new h(b)}})}function Fb(){return this.__wrapped__}b=b?pa.defaults(window.Object(),b,pa.pick(window,Sa)):window;var ya=b.Array,ob=b.Boolean,rb=b.Date,eb=
b.Function,Ja=b.Math,Qb=b.Number,db=b.Object,Gb=b.RegExp,fa=b.String,Rb=b.TypeError,ta=[],Oa=db.prototype,Ya=b._,Ia=Gb("^"+fa(Oa.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Hb=Ja.ceil,sb=b.clearTimeout,cb=ta.concat,Sb=Ja.floor,Tb=eb.prototype.toString,gb=Ia.test(gb=db.getPrototypeOf)&&gb,ia=Oa.hasOwnProperty,tb=ta.push,hb=b.setImmediate,ub=b.setTimeout,za=Oa.toString,ua=Ia.test(ua=za.bind)&&ua,fb=Ia.test(fb=db.create)&&fb,Ib=Ia.test(Ib=ya.isArray)&&Ib,
Zb=b.isFinite,Ub=b.isNaN,vb=Ia.test(vb=db.keys)&&vb,Ka=Ja.max,La=Ja.min,Ma=b.parseInt,wb=Ja.random,ka=ta.slice,Ja=Ia.test(b.attachEvent),Ja=ua&&!/\n|true/.test(ua+Ja),Va={};Va[F]=ya;Va[X]=ob;Va[T]=rb;Va[y]=eb;Va[oa]=db;Va[V]=Qb;Va[P]=Gb;Va[S]=fa;h.prototype=l.prototype;var Jb=l.support={};Jb.fastBind=ua&&!Ja;l.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:L,variable:"",imports:{_:l}};var Fa=Ib,ob=function(a){var b,c=[];if(!a||!M[typeof a])return c;for(b in a)ia.call(a,
b)&&c.push(b);return c},Ga=vb?function(a){return I(a)?vb(a):[]}:ob,Vb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wb=$a(Vb),xb=function(a,b,c){var d,f=a,e=f;if(!f)return e;var k=arguments,n=0,g="number"==typeof c?2:k.length;if(3<g&&"function"==typeof k[g-2])var p=l.createCallback(k[--g-1],k[g--],2);else 2<g&&"function"==typeof k[g-1]&&(p=k[--g]);for(;++n<g;)if((f=k[n])&&M[typeof f])for(var h=-1,q=M[typeof f]&&Ga(f),m=q?q.length:0;++h<m;)d=q[h],e[d]=p?p(e[d],f[d]):f[d];return e},yb=
function(a,b,c){var d,f=a,e=f;if(!f)return e;for(var k=arguments,n=0,g="number"==typeof c?2:k.length;++n<g;)if((f=k[n])&&M[typeof f])for(var l=-1,p=M[typeof f]&&Ga(f),h=p?p.length:0;++l<h;)d=p[l],"undefined"==typeof e[d]&&(e[d]=f[d]);return e},Pa=function(a,b,c){var d;if(!a||!M[typeof a])return a;b=b&&"undefined"==typeof c?b:l.createCallback(b,c);for(d in a)if(!1===b(a[d],d,a))break;return a},la=function(a,b,c){if(!a||!M[typeof a])return a;b=b&&"undefined"==typeof c?b:l.createCallback(b,c);for(var d=
-1,f=M[typeof a]&&Ga(a),e=f?f.length:0;++d<e&&(c=f[d],!1!==b(a[c],c,a)););return a},Xb=function(a){if(!a||za.call(a)!=oa)return!1;var b=a.valueOf,c="function"==typeof b&&(c=gb(b))&&gb(c);return c?a==c||gb(a)==c:ja(a)},ob=da(function Z(a,b,c){for(var d=-1,f=a?a.length:0,e=[];++d<f;){var k=a[d];c&&(k=c(k,d,a));Fa(k)?tb.apply(e,b?k:Z(k)):e.push(k)}return e}),zb=da(function(a,b,c){var f=-1,n=ca(),l=a?a.length:0,h=[],q=!b&&l>=w&&n===e,m=c||q?k():h;if(q){var r=d(m);r?(n=g,m=r):(q=!1,m=c?m:(p(m),h))}for(;++f<
l;){var r=a[f],t=c?c(r,f,a):r;if(b?!f||m[m.length-1]!==t:0>n(m,t))(c||q)&&m.push(t),h.push(r)}q?(p(m.array),s(m)):c&&p(m);return h});Ja&&ga&&"function"==typeof hb&&(Db=pb(hb,b));hb=8==Ma(H+"08")?Ma:function(a,b){return Ma(C(a)?a.replace(ha,""):a,b||0)};l.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}};l.assign=xb;l.at=function(a){for(var b=-1,c=cb.apply(ta,ka.call(arguments,1)),d=c.length,f=ya(d);++b<d;)f[b]=a[c[b]];return f};l.bind=pb;l.bindAll=function(a){for(var b=
1<arguments.length?cb.apply(ta,ka.call(arguments,1)):wa(a),c=-1,d=b.length;++c<d;){var f=b[c];a[f]=pb(a[f],a)}return a};l.bindKey=function(a,b){return t(a,b,ka.call(arguments,2),z)};l.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var f=a[b];f&&d.push(f)}return d};l.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}};l.countBy=function(a,b,c){var d={};b=l.createCallback(b,c);W(a,function(a,c,f){c=fa(b(a,c,f));
ia.call(d,c)?d[c]++:d[c]=1});return d};l.createCallback=function(a,b,c){if(null==a)return nb;var d=typeof a;if("function"!=d){if("object"!=d)return function(b){return b[a]};var f=Ga(a);return function(b){for(var c=f.length,d=!1;c--&&(d=G(b[f[c]],a[f[c]],z)););return d}}return"undefined"==typeof b||U&&!U.test(Tb.call(a))?a:1===c?function(c){return a.call(b,c)}:2===c?function(c,d){return a.call(b,c,d)}:4===c?function(c,d,f,e){return a.call(b,c,d,f,e)}:function(c,d,f){return a.call(b,c,d,f)}};l.debounce=
Pb;l.defaults=yb;l.defer=Db;l.delay=function(a,b){var c=ka.call(arguments,2);return ub(function(){a.apply(r,c)},b)};l.difference=Ab;l.filter=sa;l.flatten=ob;l.forEach=W;l.forIn=Pa;l.forOwn=la;l.functions=wa;l.groupBy=function(a,b,c){var d={};b=l.createCallback(b,c);W(a,function(a,c,f){c=fa(b(a,c,f));(ia.call(d,c)?d[c]:d[c]=[]).push(a)});return d};l.initial=function(a,b,c){if(!a)return[];var d=0,f=a.length;if("number"!=typeof b&&null!=b){var e=f;for(b=l.createCallback(b,c);e--&&b(a[e],e,a);)d++}else d=
null==b||c?1:b||d;return q(a,0,La(Ka(0,f-d),f))};l.intersection=function(a){for(var b=arguments,c=b.length,f=-1,n=k(),l=-1,h=ca(),q=a?a.length:0,m=[],r=k();++f<c;){var t=b[f];n[f]=h===e&&(t?t.length:0)>=w&&d(f?b[f]:r)}a:for(;++l<q;){var v=n[0],t=a[l];if(0>(v?g(v,t):h(r,t))){f=c;for((v||r).push(t);--f;)if(v=n[f],0>(v?g(v,t):h(b[f],t)))continue a;m.push(t)}}for(;c--;)(v=n[c])&&s(v);p(n);p(r);return m};l.invert=$a;l.invoke=function(a,b){var c=ka.call(arguments,2),d=-1,f="function"==typeof b,e=a?a.length:
0,k=ya("number"==typeof e?e:0);W(a,function(a){k[++d]=(f?b:a[b]).apply(a,c)});return k};l.keys=Ga;l.map=Ua;l.max=Ea;l.memoize=function(a,b){function c(){var d=c.cache,f=A+(b?b.apply(this,arguments):arguments[0]);return ia.call(d,f)?d[f]:d[f]=a.apply(this,arguments)}c.cache={};return c};l.merge=Da;l.min=function(b,c,d){var f=Infinity,e=f;if(!c&&Fa(b)){d=-1;for(var k=b.length;++d<k;){var n=b[d];n<e&&(e=n)}}else c=!c&&C(b)?a:l.createCallback(c,d),W(b,function(a,b,d){b=c(a,b,d);b<f&&(f=b,e=a)});return e};
l.omit=function(a,b,c){var d=ca(),f="function"==typeof b,e={};if(f)b=l.createCallback(b,c);else var k=cb.apply(ta,ka.call(arguments,1));Pa(a,function(a,c,n){if(f?!b(a,c,n):0>d(k,c))e[c]=a});return e};l.once=function(a){var b,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};l.pairs=function(a){for(var b=-1,c=Ga(a),d=c.length,f=ya(d);++b<d;){var e=c[b];f[b]=[e,a[e]]}return f};l.partial=function(a){return t(a,ka.call(arguments,1))};l.partialRight=function(a){return t(a,
ka.call(arguments,1),null,z)};l.pick=function(a,b,c){var d={};if("function"!=typeof b)for(var f=-1,e=cb.apply(ta,ka.call(arguments,1)),k=I(a)?e.length:0;++f<k;){var n=e[f];n in a&&(d[n]=a[n])}else b=l.createCallback(b,c),Pa(a,function(a,c,f){b(a,c,f)&&(d[c]=a)});return d};l.pluck=Xa;l.range=function(a,b,c){a=+a||0;c=+c||1;null==b&&(b=a,a=0);var d=-1;b=Ka(0,Hb((b-a)/c));for(var f=ya(b);++d<b;)f[d]=a,a+=c;return f};l.reject=function(a,b,c){b=l.createCallback(b,c);return sa(a,function(a,c,d){return!b(a,
c,d)})};l.rest=Bb;l.shuffle=function(a){var b=-1,c=a?a.length:0,d=ya("number"==typeof c?c:0);W(a,function(a){var c=Sb(wb()*(++b+1));d[b]=d[c];d[c]=a});return d};l.sortBy=function(a,b,d){var f=-1,e=a?a.length:0,k=ya("number"==typeof e?e:0);b=l.createCallback(b,d);W(a,function(a,c,d){var e=k[++f]=n();e.criteria=b(a,c,d);e.index=f;e.value=a});e=k.length;for(k.sort(c);e--;)a=k[e],k[e]=a.value,s(a);return k};l.tap=function(a,b){b(a);return a};l.throttle=function(a,b,c){var d=!0,f=!0;!1===c?d=!1:I(c)&&
(d="leading"in c?c.leading:d,f="trailing"in c?c.trailing:f);c=n();c.leading=d;c.maxWait=b;c.trailing=f;a=Pb(a,b,c);s(c);return a};l.times=function(a,b,c){a=-1<(a=+a)?a:0;var d=-1,f=ya(a);for(b=l.createCallback(b,c,1);++d<a;)f[d]=b(d);return f};l.toArray=function(a){return a&&"number"==typeof a.length?q(a):Ba(a)};l.transform=function(a,b,c,d){var f=Fa(a);b=l.createCallback(b,d,4);null==c&&(f?c=[]:(d=(d=a&&a.constructor)&&d.prototype,c=I(d)?fb(d):{}));(f?W:la)(a,function(a,d,f){return b(c,a,d,f)});
return c};l.union=function(a){Fa(a)||(arguments[0]=a?ka.call(a):ta);return zb(cb.apply(ta,arguments))};l.uniq=zb;l.unzip=Cb;l.values=Ba;l.where=sa;l.without=function(a){return Ab(a,ka.call(arguments,1))};l.wrap=function(a,b){return function(){var c=[a];tb.apply(c,arguments);return b.apply(this,c)}};l.zip=function(a){return a?Cb(arguments):[]};l.zipObject=Ob;l.collect=Ua;l.drop=Bb;l.each=W;l.extend=xb;l.methods=wa;l.object=Ob;l.select=sa;l.tail=Bb;l.unique=zb;Eb(l);l.chain=l;l.prototype.chain=function(){return this};
l.clone=Za;l.cloneDeep=function(a,b,c){return Za(a,!0,b,c)};l.contains=ab;l.escape=function(a){return null==a?"":fa(a).replace(aa,B)};l.every=Ta;l.find=xa;l.findIndex=function(a,b,c){var d=-1,f=a?a.length:0;for(b=l.createCallback(b,c);++d<f;)if(b(a[d],d,a))return d;return-1};l.findKey=function(a,b,c){var d;b=l.createCallback(b,c);la(a,function(a,c,f){if(b(a,c,f))return d=c,!1});return d};l.has=function(a,b){return a?ia.call(a,b):!1};l.identity=nb;l.indexOf=Nb;l.isArguments=function(a){return za.call(a)==
na};l.isArray=Fa;l.isBoolean=function(a){return!0===a||!1===a||za.call(a)==X};l.isDate=function(a){return a?"object"==typeof a&&za.call(a)==T:!1};l.isElement=function(a){return a?1===a.nodeType:!1};l.isEmpty=function(a){var b=!0;if(!a)return b;var c=za.call(a),d=a.length;if(c==F||c==S||c==na||c==oa&&"number"==typeof d&&E(a.splice))return!d;la(a,function(){return b=!1});return b};l.isEqual=G;l.isFinite=function(a){return Zb(a)&&!Ub(parseFloat(a))};l.isFunction=E;l.isNaN=function(a){return K(a)&&a!=
+a};l.isNull=function(a){return null===a};l.isNumber=K;l.isObject=I;l.isPlainObject=Xb;l.isRegExp=function(a){return a?"object"==typeof a&&za.call(a)==P:!1};l.isString=C;l.isUndefined=function(a){return"undefined"==typeof a};l.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Ka(0,d+c):La(c,d-1))+1);d--;)if(a[d]===b)return d;return-1};l.mixin=Eb;l.noConflict=function(){b._=Ya;return this};l.parseInt=hb;l.random=function(a,b){null==a&&null==b&&(b=1);a=+a||0;null==b?(b=
a,a=0):b=+b||0;var c=wb();return a%1||b%1?a+La(c*(b-a+parseFloat("1e-"+((c+"").length-1))),b):a+Sb(c*(b-a+1))};l.reduce=bb;l.reduceRight=Lb;l.result=function(a,b){var c=a?a[b]:r;return E(c)?a[b]():c};l.runInContext=u;l.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Ga(a).length};l.some=Mb;l.sortedIndex=Kb;l.template=function(a,b,c){var d=l.templateSettings;a||(a="");c=yb({},c,d);var e=yb({},c.imports,d.imports),d=Ga(e),e=Ba(e),k,n=0,g=c.interpolate||Aa,p="__p += '",g=Gb((c.escape||
Aa).source+"|"+g.source+"|"+(g===L?$:Aa).source+"|"+(c.evaluate||Aa).source+"|$","g");a.replace(g,function(b,c,d,e,g,l){d||(d=e);p+=a.slice(n,l).replace(ra,f);c&&(p+="' +\n__e("+c+") +\n'");g&&(k=!0,p+="';\n"+g+";\n__p += '");d&&(p+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'");n=l+b.length;return b});var p=p+"';\n",h=g=c.variable;h||(g="obj",p="with ("+g+") {\n"+p+"\n}\n");p=(k?p.replace(x,""):p).replace(Q,"$1").replace(R,"$1;");p="function("+g+") {\n"+(h?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+
(k?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";c="\n/*\n//@ sourceURL="+(c.sourceURL||"/lodash/template/source["+O++ +"]")+"\n*/";try{var q=eb(d,"return "+p+c).apply(r,e)}catch(m){throw m.source=p,m;}if(b)return q(b);q.source=p;return q};l.unescape=function(a){return null==a?"":fa(a).replace(N,mb)};l.uniqueId=function(a){var b=++v;return fa(null==a?"":a)+b};l.all=Ta;l.any=Mb;l.detect=xa;l.findWhere=xa;l.foldl=bb;l.foldr=Lb;l.include=
ab;l.inject=bb;la(l,function(a,b){l.prototype[b]||(l.prototype[b]=function(){var b=[this.__wrapped__];tb.apply(b,arguments);return a.apply(l,b)})});l.first=qb;l.last=function(a,b,c){if(a){var d=0,f=a.length;if("number"!=typeof b&&null!=b){var e=f;for(b=l.createCallback(b,c);e--&&b(a[e],e,a);)d++}else if(d=b,null==d||c)return a[f-1];return q(a,Ka(0,f-d))}};l.take=qb;l.head=qb;la(l,function(a,b){l.prototype[b]||(l.prototype[b]=function(b,c){var d=a(this.__wrapped__,b,c);return null==b||c&&"function"!=
typeof b?d:new h(d)})});l.VERSION="1.3.1";l.prototype.toString=function(){return fa(this.__wrapped__)};l.prototype.value=Fb;l.prototype.valueOf=Fb;W(["join","pop","shift"],function(a){var b=ta[a];l.prototype[a]=function(){return b.apply(this.__wrapped__,arguments)}});W(["push","reverse","sort","unshift"],function(a){var b=ta[a];l.prototype[a]=function(){b.apply(this.__wrapped__,arguments);return this}});W(["concat","slice","splice"],function(a){var b=ta[a];l.prototype[a]=function(){return new h(b.apply(this.__wrapped__,
arguments))}});return l}var r,t=[],l=[],v=0,z={},A=+new Date+"",w=75,B=40,x=/\b__p \+= '';/g,Q=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,N=/&(?:amp|lt|gt|quot|#39);/g,$=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,J=/\w*$/,L=/<%=([\s\S]+?)%>/g,U=(U=/\bthis\b/)&&U.test(u)&&U,H=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",ha=RegExp("^["+H+"]*0+(?=.$)"),Aa=/($^)/,aa=/[&<>"']/g,ra=/['\n\r\t\u2028\u2029\\]/g,Sa=
"Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),O=0,na="[object Arguments]",F="[object Array]",X="[object Boolean]",T="[object Date]",y="[object Function]",V="[object Number]",oa="[object Object]",P="[object RegExp]",S="[object String]",Y={};Y[y]=!1;Y[na]=Y[F]=Y[X]=Y[T]=Y[V]=Y[oa]=Y[P]=Y[S]=!0;var M={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},da={"\\":"\\","'":"'","\n":"n",
"\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},ja=M[typeof exports]&&exports,ga=M[typeof module]&&module&&module.exports==ja&&module,ja=M[typeof global]&&global;!ja||ja.global!==ja&&ja.window!==ja||(window=ja);var pa=h._=u();h.each(pa,function(a,b){Object.hasOwnProperty.call(pa,a)&&!/VERSION/.test(name)&&(h[a]||(h[a]=b))})});
FD31.plugin("bootstrap",function(h){!function(e){e(function(){var g=e.support,b;a:{b=document.createElement("bootstrap");var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in a)if(void 0!==b.style[c]){b=a[c];break a}b=void 0}g.transition=b&&{end:b}})}(h);!function(e){var g=function(b){e(b).on("click",'[data-foundry-dismiss="alert"]',this.close)};g.prototype.close=function(b){function a(){f.trigger("closed").remove()}
var c=e(this),d=c.attr("data-target"),f;d||(d=(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,""));f=e(d);b&&b.preventDefault();f.length||(f=c.hasClass("alert")?c:c.parent());f.trigger(b=e.Event("close"));b.isDefaultPrevented()||(f.removeClass("in"),e.support.transition&&f.hasClass("fade")?f.on(e.support.transition.end,a):a())};e.fn.alert=function(b){return this.each(function(){var a=e(this),c=a.data("alert");c||a.data("alert",c=new g(this));"string"==typeof b&&c[b].call(a)})};e.fn.alert.Constructor=
g;e(document).on("click.alert.data-api",'[data-foundry-dismiss="alert"]',g.prototype.close)}(h);!function(e){var g=function(b,a){this.$element=e(b);this.options=e.extend({},e.fn.button.defaults,a)};g.prototype.setState=function(b){var a=this.$element,c=a.data(),d=a.is("input")?"val":"html";b+="Text";c.resetText||a.data("resetText",a[d]());a[d](c[b]||this.options[b]);setTimeout(function(){"loadingText"==b?a.addClass("disabled").attr("disabled","disabled"):a.removeClass("disabled").removeAttr("disabled")},
0)};g.prototype.toggle=function(){var b=this.$element.closest('[data-foundry-toggle="buttons-radio"]');b.hasClass("disabled")||(b&&b.find(".active").removeClass("active"),this.$element.toggleClass("active"))};e.fn.button=function(b){return this.each(function(){var a=e(this),c=a.data("button"),d="object"==typeof b&&b;c||a.data("button",c=new g(this,d));"toggle"==b?c.toggle():b&&c.setState(b)})};e.fn.button.defaults={loadingText:"loading..."};e.fn.button.Constructor=g;e(document).on("click.button.data-api",
"[data-foundry-toggle^=button]",function(b){b=e(b.target);b.hasClass("btn")||(b=b.closest(".btn"));b.button("toggle")})}(h);!function(e){var g=function(b,a){this.$element=e(b);this.options=a;this.options.slide&&this.slide(this.options.slide);"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};g.prototype={cycle:function(b){b||(this.paused=!1);this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,
this),this.options.interval));return this},to:function(b){var a=this.$element.find(".item.active"),c=a.parent().children(),a=c.index(a),d=this;if(!(b>c.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):a==b?this.pause().cycle():this.slide(b>a?"next":"prev",e(c[b]))},pause:function(b){b||(this.paused=!0);this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle());clearInterval(this.interval);this.interval=
null;return this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(b,a){var c=this.$element.find(".item.active"),d=a||c[b](),f=this.interval,k="next"==b?"left":"right",n="next"==b?"first":"last",g=this;this.sliding=!0;f&&this.pause();d=d.length?d:this.$element.find(".item")[n]();n=e.Event("slide",{relatedTarget:d[0]});if(!d.hasClass("active")){if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(n);
if(n.isDefaultPrevented())return;d.addClass(b);d[0].offsetWidth;c.addClass(k);d.addClass(k);this.$element.one(e.support.transition.end,function(){d.removeClass([b,k].join(" ")).addClass("active");c.removeClass(["active",k].join(" "));g.sliding=!1;setTimeout(function(){g.$element.trigger("slid")},0)})}else{this.$element.trigger(n);if(n.isDefaultPrevented())return;c.removeClass("active");d.addClass("active");this.sliding=!1;this.$element.trigger("slid")}f&&this.cycle();return this}}};e.fn.carousel=
function(b){return this.each(function(){var a=e(this),c=a.data("carousel"),d=e.extend({},e.fn.carousel.defaults,"object"==typeof b&&b),f="string"==typeof b?b:d.slide;c||a.data("carousel",c=new g(this,d));if("number"==typeof b)c.to(b);else if(f)c[f]();else d.interval&&c.cycle()})};e.fn.carousel.defaults={interval:5E3,pause:"hover"};e.fn.carousel.Constructor=g;e(document).on("click.carousel.data-api","[data-foundry-slide]",function(b){var a=e(this),c,d=e(a.attr("data-target")||(c=a.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,
"")),a=e.extend({},d.data(),a.data());d.carousel(a);b.preventDefault()})}(h);!function(e){var g=function(b,a){this.$element=e(b);this.options=e.extend({},e.fn.collapse.defaults,a);this.options.parent&&(this.$parent=e(this.options.parent));this.options.toggle&&this.toggle()};g.prototype={constructor:g,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var b,a,c,d;if(!this.transitioning){b=this.dimension();a=e.camelCase(["scroll",b].join("-"));if((c=this.$parent&&
this.$parent.find("> .accordion-group > .in"))&&c.length){if((d=c.data("collapse"))&&d.transitioning)return;c.collapse("hide");d||c.data("collapse",null)}this.$element[b](0);e.support.transition&&this.$element[b](this.$element[0][a]);this.transition("addClass",e.Event("bootstrap-show"),"shown")}},hide:function(){var b;this.transitioning||(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",e.Event("bootstrap-hide"),"hidden"),this.$element[b](0))},reset:function(b){var a=
this.dimension();this.$element.removeClass("collapse")[a](b||"auto")[0].offsetWidth;this.$element[null!==b?"addClass":"removeClass"]("collapse");return this},transition:function(b,a,c){var d=this,f=function(){"bootstrap-show"==a.type&&d.reset();d.transitioning=0;d.$element.trigger(c)};this.$element.trigger(a);a.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?
"hide":"show"]()}};e.fn.collapse=function(b){return this.each(function(){var a=e(this),c=a.data("collapse"),d="object"==typeof b&&b;c||a.data("collapse",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.collapse.defaults={toggle:!0};e.fn.collapse.Constructor=g;e(document).on("click.collapse.data-api","[data-foundry-toggle=collapse]",function(b){var a=e(this),c;b=a.attr("data-target")||b.preventDefault()||(c=a.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");c=e(b).data("collapse")?"toggle":a.data();
a[e(b).hasClass("in")?"addClass":"removeClass"]("collapsed");e(b).collapse(c)})}(h);!function(e){function g(c){e(a).each(function(){var a=b(e(this)),k=a.hasClass("open");a.removeClass("open");k&&a.trigger("dropdownClose",[c.target])})}function b(a){var b=a.attr("data-target");b||(b=(b=a.attr("href"))&&/#/.test(b)&&b.replace(/.*(?=#[^\s]*$)/,""));b=e(b);b.length||(b=a.parent());return b}var a="[data-foundry-toggle=dropdown]",c=function(a){var b=e(a).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",
function(){b.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(a){var c=e(this),k,n;if(!c.is(".disabled, :disabled"))return k=b(c),n=k.hasClass("open"),g(a),n||(k.toggleClass("open"),k.trigger("dropdownOpen",[a.target]),c.focus()),!1},keydown:function(a){var c,k,n;if(/(38|40|27)/.test(a.keyCode)&&(c=e(this),a.preventDefault(),a.stopPropagation(),!c.is(".disabled, :disabled"))){k=b(c);n=k.hasClass("open");if(!n||n&&27==a.keyCode)return c.click();c=e("[role=menu] li:not(.divider) a",
k);c.length&&(k=c.index(c.filter(":focus")),38==a.keyCode&&0<k&&k--,40==a.keyCode&&k<c.length-1&&k++,~k||(k=0),c.eq(k).focus())}}};e.fn.dropdown=function(a){return this.each(function(){var b=e(this),k=b.data("dropdown");k||b.data("dropdown",k=new c(this));"string"==typeof a&&k[a].call(b)})};e.fn.dropdown.Constructor=c;e(document).on("click.dropdown.data-api",g).on("click.dropdown",".dropdown_ form, .dropdown-static",function(a){a.stopPropagation()}).on("click.dropdown.data-api",a,c.prototype.toggle).on("keydown.dropdown.data-api",
a+", [role=menu]",c.prototype.keydown)}(h);!function(e){var g=function(b,a){this.options=a;this.$element=e(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};g.prototype={constructor:g,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,a=e.Event("show");this.$element.trigger(a);this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var a=
e.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body);b.$element.show();a&&b.$element[0].offsetWidth;b.$element.addClass("in").attr("aria-hidden",!1).focus();b.enforceFocus();a?b.$element.one(e.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=e.Event("hide");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,
this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;e(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var b=this;if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.modal",function(a){27==a.which&&b.hide()});
else this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,a=setTimeout(function(){b.$element.off(e.support.transition.end);b.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(a);b.hideModal()})},hideModal:function(b){this.$element.hide().trigger("hidden");this.backdrop()},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(b){var a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&
this.options.backdrop){var c=e.support.transition&&a;this.$backdrop=e('<div class="modal-backdrop '+a+'" />').appendTo(document.body);this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this));c&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");c?this.$backdrop.one(e.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,
e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}};e.fn.modal=function(b){return this.each(function(){var a=e(this),c=a.data("modal"),d=e.extend({},e.fn.modal.defaults,a.data(),"object"==typeof b&&b);c||a.data("modal",c=new g(this,d));if("string"==typeof b)c[b]();else d.show&&c.show()})};e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};e.fn.modal.Constructor=g;e(document).on("click.modal.data-api",'[data-foundry-toggle="modal"]',function(b){var a=e(this),c=a.attr("href"),d=e(a.attr("data-target")||
c&&c.replace(/.*(?=#[^\s]+$)/,"")),c=d.data("modal")?"toggle":e.extend({remote:!/#/.test(c)&&c},d.data(),a.data());b.preventDefault();d.modal(c).one("hide",function(){a.focus()})})}(h);!function(e){var g=function(b,a){this.init("tooltip",b,a)};g.prototype={constructor:g,init:function(b,a,c){this.type=b;this.$element=e(a);this.options=this.getOptions(c);this.enabled=!0;if("click"==this.options.trigger)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else"manual"!=
this.options.trigger&&(b="hover"==this.options.trigger?"mouseenter":"focus",a="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(b+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=e.extend({},e.fn[this.type].defaults,b,this.$element.data());b.delay&&"number"==
typeof b.delay&&(b.delay={show:b.delay,hide:b.delay});return b},enter:function(b){var a=e(b.currentTarget)[this.type](this._options).data(this.type);if(!a.options.delay||!a.options.delay.show)return a.show();clearTimeout(this.timeout);a.hoverState="in";this.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show)},leave:function(b){var a=e(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!a.options.delay||!a.options.delay.hide)return a.hide();
a.hoverState="out";this.timeout=setTimeout(function(){"out"==a.hoverState&&a.hide()},a.options.delay.hide)},show:function(){var b,a,c,d,f,k,n;if(this.hasContent()&&this.enabled){b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");k="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement;a=/in/.test(k);b.detach().css({top:0,left:0,display:"block"});switch(this.options.container||"parent"){case "parent":b.insertAfter(this.$element);
break;case "body":b.appendTo(document.body);break;default:c=e(this.options.container),c.length?b.appendTo(c):b.insertAfter(this.$element)}c=this.getPosition(a);d=b[0].offsetWidth;f=b[0].offsetHeight;switch(a?k.split(" ")[1]:k){case "bottom":n={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case "top":n={top:c.top-f,left:c.left+c.width/2-d/2};break;case "left":n={top:c.top+c.height/2-f/2,left:c.left-d};break;case "right":n={top:c.top+c.height/2-f/2,left:c.left+c.width}}b.offset(n).addClass(k).addClass("in")}},
setContent:function(){var b=this.tip(),a=this.getTitle();b.find(".tooltip-inner")[this.options.html?"html":"text"](a);b.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){a.off(e.support.transition.end).detach()},500);a.one(e.support.transition.end,function(){clearTimeout(b);a.detach()})}var a=this.tip();a.removeClass("in");e.support.transition&&this.$tip.hasClass("fade")?b():a.detach();return this},fixTitle:function(){var b=this.$element;(b.attr("title")||
"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return e.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var b=this.$element,a=this.options;return b.attr("data-original-title")||("function"==typeof a.title?a.title.call(b[0]):a.title)},tip:function(){return this.$tip=
this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){b=e(b.currentTarget)[this.type](this._options).data(this.type);b[b.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};e.fn.tooltip=function(b){return this.each(function(){var a=
e(this),c=a.data("tooltip"),d="object"==typeof b&&b;c||a.data("tooltip",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.tooltip.Constructor=g;e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1,container:"parent"}}(h);!function(e){var g=function(b,a){this.init("popover",b,a)};g.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:g,
setContent:function(){var b=this.tip(),a=this.getTitle(),c=this.getContent();b.find(".popover-title")[this.options.html?"html":"text"](a);b.find(".popover-content > *")[this.options.html?"html":"text"](c);b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var b=this.$element,a=this.options;return b.attr("data-content")||("function"==typeof a.content?a.content.call(b[0]):a.content)},tip:function(){this.$tip||(this.$tip=
e(this.options.template));return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});e.fn.popover=function(b){return this.each(function(){var a=e(this),c=a.data("popover"),d="object"==typeof b&&b;c||a.data("popover",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.popover.Constructor=g;e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover popover-fd"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(h);
!function(e){function g(b,a){var c=e.proxy(this.process,this),d=e(b).is("body")?e(window):e(b),f;this.options=e.extend({},e.fn.scrollspy.defaults,a);this.$scrollElement=d.on("scroll.scroll-spy.data-api",c);this.selector=(this.options.target||(f=e(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=e("body");this.refresh();this.process()}g.prototype={constructor:g,refresh:function(){var b=this;this.offsets=e([]);this.targets=e([]);this.$body.find(this.selector).map(function(){var a=
e(this),a=a.data("target")||a.attr("href"),b=/^#\w/.test(a)&&e(a);return b&&b.length&&[[b.position().top,a]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]);b.targets.push(this[1])})},process:function(){var b=this.$scrollElement.scrollTop()+this.options.offset,a=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),c=this.offsets,d=this.targets,f=this.activeTarget,e;if(b>=a)return f!=(e=d.last()[0])&&this.activate(e);for(e=
c.length;e--;)f!=d[e]&&b>=c[e]&&(!c[e+1]||b<=c[e+1])&&this.activate(d[e])},activate:function(b){this.activeTarget=b;e(this.selector).parent(".active").removeClass("active");b=e(this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]').parent("li").addClass("active");b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active"));b.trigger("activate")}};e.fn.scrollspy=function(b){return this.each(function(){var a=e(this),c=a.data("scrollspy"),d="object"==typeof b&&b;
c||a.data("scrollspy",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.scrollspy.Constructor=g;e.fn.scrollspy.defaults={offset:10};e(window).on("load",function(){e('[data-foundry-spy="scroll"]').each(function(){var b=e(this);b.scrollspy(b.data())})})}(h);!function(e){var g=function(b){this.element=e(b)};g.prototype={constructor:g,show:function(){var b=this.element,a=b.closest("ul:not(.dropdown-menu)"),c=b.attr("data-target"),d,f;c||(c=(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]*$)/,""));b.parent("li").hasClass("active")||
(d=a.find(".active:last a")[0],f=e.Event("show",{relatedTarget:d}),b.trigger(f),f.isDefaultPrevented()||(c=e(c),this.activate(b.parent("li"),a),this.activate(c,c.parent(),function(){b.trigger({type:"shown",relatedTarget:d})})))},activate:function(b,a,c){function d(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");k?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");
c&&c()}var f=a.find("> .active"),k=c&&e.support.transition&&f.hasClass("fade");k?f.one(e.support.transition.end,d):d();f.removeClass("in")}};e.fn.tab=function(b){return this.each(function(){var a=e(this),c=a.data("tab");c||a.data("tab",c=new g(this));if("string"==typeof b)c[b]()})};e.fn.tab.Constructor=g;e(document).on("click.tab.data-api",'[data-foundry-toggle="tab"], [data-foundry-toggle="pill"]',function(b){b.preventDefault();e(this).tab("show")})}(h);!function(e){var g=function(b,a){this.$element=
e(b);this.options=e.extend({},e.fn.typeahead.defaults,a);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=e(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=!1;this.listen()};g.prototype={constructor:g,select:function(){var b=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(b)).change();
return this.hide()},updater:function(b){return b},show:function(){var b=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:b.top+b.height,left:b.left});this.$menu.show();this.shown=!0;return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(b){this.query=this.$element.val();return!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,
this)):this.source)?this.process(b):this},process:function(b){var a=this;b=e.grep(b,function(b){return a.matcher(b)});b=this.sorter(b);return b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(b){return~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(b){for(var a=[],c=[],d=[],f;f=b.shift();)f.toLowerCase().indexOf(this.query.toLowerCase())?~f.indexOf(this.query)?c.push(f):d.push(f):a.push(f);return a.concat(c,d)},highlighter:function(b){var a=
this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return b.replace(RegExp("("+a+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var a=this;b=e(b).map(function(b,d){b=e(a.options.item).attr("data-value",d);b.find("a").html(a.highlighter(d));return b[0]});b.first().addClass("active");this.$menu.html(b);return this},next:function(b){b=this.$menu.find(".active").removeClass("active").next();b.length||(b=e(this.$menu.find("li")[0]));b.addClass("active")},prev:function(b){b=
this.$menu.find(".active").removeClass("active").prev();b.length||(b=this.$menu.find("li").last());b.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",e.proxy(this.keydown,this));this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},eventSupported:function(b){var a=b in this.$element;
a||(this.$element.setAttribute(b,"return;"),a="function"===typeof this.$element[b]);return a},move:function(b){if(this.shown){switch(b.keyCode){case 9:case 13:case 27:b.preventDefault();break;case 38:b.preventDefault();this.prev();break;case 40:b.preventDefault(),this.next()}b.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=!~e.inArray(b.keyCode,[40,38,9,13,27]);this.move(b)},keypress:function(b){this.suppressKeyPressRepeat||this.move(b)},keyup:function(b){switch(b.keyCode){case 40:case 38:case 16:case 17:case 18:break;
case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}b.stopPropagation();b.preventDefault()},blur:function(b){var a=this;setTimeout(function(){a.hide()},150)},click:function(b){b.stopPropagation();b.preventDefault();this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active");e(b.currentTarget).addClass("active")}};e.fn.typeahead=function(b){return this.each(function(){var a=e(this),c=a.data("typeahead"),
d="object"==typeof b&&b;c||a.data("typeahead",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};e.fn.typeahead.Constructor=g;e(document).on("focus.typeahead.data-api",'[data-foundry-provide="typeahead"]',function(b){var a=e(this);a.data("typeahead")||(b.preventDefault(),a.typeahead(a.data()))})}(h);!function(e){var g=function(b,a){this.options=e.extend({},e.fn.affix.defaults,
a);this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this));this.$element=e(b);this.checkPosition()};g.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=e(document).height(),a=this.$window.scrollTop(),c=this.$element.offset(),d=this.options.offset,f=d.bottom,k=d.top;"object"!=typeof d&&(f=k=d);"function"==typeof k&&(k=d.top());"function"==typeof f&&
(f=d.bottom());b=null!=this.unpin&&a+this.unpin<=c.top?!1:null!=f&&c.top+this.$element.height()>=b-f?"bottom":null!=k&&a<=k?"top":!1;this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?c.top-a:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(b?"-"+b:"")))}};e.fn.affix=function(b){return this.each(function(){var a=e(this),c=a.data("affix"),d="object"==typeof b&&b;c||a.data("affix",c=new g(this,d));if("string"==typeof b)c[b]()})};e.fn.affix.Constructor=g;e.fn.affix.defaults=
{offset:0};e(window).on("load",function(){e('[data-foundry-spy="affix"]').each(function(){var b=e(this),a=b.data();a.offset=a.offset||{};a.offsetBottom&&(a.offset.bottom=a.offsetBottom);a.offsetTop&&(a.offset.top=a.offsetTop);b.affix(a)})})}(h);!function(e){var g=function(b,a){this.$element=e(b);this.$note=e('<div class="alert"></div>');this.options=e.extend(!0,e.fn.notify.defaults,a);this.options.transition?"fade"==this.options.transition?this.$note.addClass("in").addClass(this.options.transition):
this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in");this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success");this.options.message||""===this.$element.data("message")?"object"===typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message)):this.$note.html(this.$element.data("message"));
if(this.options.closable)var c=e('<a class="close pull-right" href="javascript: void(0);">&times;</a>');e(c).on("click",e.proxy(onClose,this));this.$note.prepend(c);return this};onClose=function(){this.options.onClose();e(this.$note).remove();this.options.onClosed()};g.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3E3).fadeOut("slow",e.proxy(onClose,this));this.$element.append(this.$note);this.$note.alert()};g.prototype.hide=function(){this.options.fadeOut.enabled?
this.$note.delay(this.options.fadeOut.delay||3E3).fadeOut("slow",e.proxy(onClose,this)):onClose.call(this)};e.fn.notify=function(b){return new g(this,b)};e.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3E3},message:null,onClose:function(){},onClosed:function(){}}}(h)});
FD31.plugin("responsive",function(h){h.responsive=function(a,c){return new b(a,c)};h.fn.responsive=function(a){if(a){var b=this;h.responsive(b,{elementWidth:function(){return b.outerWidth(!0)},conditions:a})}return this};var e=h(window),g=h.isFunction,b=function(a,b){var d=this;a=h(a);var f=a.data("$responsive");f&&f.destroy();h.extend(d,{elem:a,options:b,conditions:h.sortBy(h.makeArray(b.conditions),function(a){return a.at}),event:"resize.responsive"+h.uid(),handler:h.debounce(function(){d.set()},
250)});delete b.conditions;a.data("$responsive",d);h(function(){e.on(d.event,d.handler);d.set()});h(window).load(function(){d.set()})};h.extend(b.prototype,{set:function(){var a=this;a.removeCondition(a.currentCondition);var b=a.options.elementWidth,d=g(b)?b():b;h.each(a.conditions,function(b,c){if(d<=c.at)return a.applyCondition(c),!1})},applyCondition:function(a){var b,d,f,e;(b=a.switchTo)&&this.elem.addClass(b);(d=a.alsoSwitch)&&h.each(d,function(a,b){h(a).addClass(b)});(f=a.switchStylesheet)&&
h.each(h.makeArray(f),function(a,b){1>h('link[href$="'+b+'"]').length&&h("<link/>").attr({rel:"stylesheet",type:"text/css",href:b}).appendTo("head")});(e=a.whenApplied)&&g(e)&&e();this.currentCondition=a;this.elem.trigger("responsive",[a])},removeCondition:function(a){if(a){var b,d,f,e;(b=a.switchTo)&&this.elem.removeClass(b);(d=a.alsoSwitch)&&h.each(d,function(a,b){h(a).removeClass(b)});(f=a.switchStylesheet)&&h.each(h.makeArray(f),function(a,b){h('link[href$="'+b+'"]').remove()});(e=a.whenRemoved)&&
g(e)&&e()}},resetToDefault:function(a){h.each(this.conditions,function(b,d){a&&b==a||this.removeCondition(d)})},destroy:function(){e.off(this.event);this.removeCondition(this.currentCondition)}})});
FD31.plugin("utils",function(h){h.IE=function(){if(-1!=navigator.appVersion.indexOf("MSIE 10"))return 10;for(var e=3,g=document.createElement("div"),b=g.getElementsByTagName("i");e++,g.innerHTML="\x3c!--[if gt IE "+e+"]><i></i><![endif]--\x3e",b[0];);return 4<e?e:void 0}();h.uid=function(e,g){return(e?e:"")+Math.random().toString().replace(".","")+(g?g:"")};h.isDeferred=function(e){return e&&h.isFunction(e.always)};h.distinct=function(e){var g=h.unique;if(!(1>e.length)){if(e[0].nodeType)return g.apply(this,
arguments);if("object"==typeof e[0]){var b=Math.random(),a=[];h.each(e,function(c){e[c][b]||(a.push(e[c]),e[c][b]=!0)});h.each(a,function(c){delete a[c][b]});return a}return h.grep(e,function(a,b){return h.inArray(a,e)===b})}};h.trimSeparators=function(e,g,b){e=e.replace(RegExp("^["+g+"\\s]+|["+g+",\\s]+$","g"),"").replace(RegExp(g+"["+g+"\\s]*"+g,"g"),g).replace(RegExp("[\\s]+"+g,"g"),g).replace(RegExp(g+"[\\s]+","g"),g);b&&(e=h.distinct(e.split(g)).join(g));return e};h.isNumeric=function(e){return!isNaN(parseFloat(e))&&
isFinite(e)};h.Number={rotate:function(e,g,b,a){void 0===a&&(a=0);e+=a;e<g?e+=b+1:e>b&&(e-=b+1);return e}};h.fn.stretchToFit=function(){return h.each(this,function(){var e=h(this);e.css("width","100%").css("width",2*e.width()-e.outerWidth(!0)-parseInt(e.css("borderLeftWidth"))-parseInt(e.css("borderRightWidth")))})};h.fn.serializeObject=function(){var e={};h.each(h(this).serializeArray(),function(g,b){e.hasOwnProperty(b.name)?(h.isArray(e[b.name])||(e[b.name]=[e[b.name]]),e[b.name].push(b.value)):
e[b.name]=b.value});return e};h.fn.serializeJSON=function(){return JSON.stringify(h(this).serializeObject())};h.fn.toHTML=function(){return h("<div>").html(this).html()};(function(){var e=function(e){this.items=e;this.start=0;this.end=e.length-1;this.node=null;this.stopped=!1};h.extend(e.prototype,{isLooping:function(){return this.stopped?!1:1<Math.abs(this.start-this.end)?(this.node=Math.floor((this.start+this.end)/2),!0):!1},flip:function(e){e?this.end=this.node-1:this.start=this.node+1},stop:function(){this.stop=
!0}});h.Bloop=function(g){return new e(g)}})();h.remap=function(e,g,b){h.each(b,function(a,b){e[b]=g[b]});return obj};h.deletes=function(e,g){h.each(g,function(b,a){delete e[a]})};(function(){var e=function(e){this.threads=[];this.threadCount=0;this.threadLimit=e.threadLimit||1;this.threadDelay=e.threadDelay||0};h.extend(e.prototype,{add:function(e,b){h.isFunction(e)&&(e.type=b||"normal","deferred"==b&&(e.deferred=h.Deferred().always(h.proxy(this.next,this))),this.threads.push(e),this.run())},addDeferred:function(e){return this.add(e,
"deferred")},next:function(){this.threadCount--;this.run()},run:function(){var e=this;setTimeout(function(){if(!(1>e.threads.length)&&e.threadCount<e.threadLimit){e.threadCount++;var b=e.threads.shift();try{b.call(b,b.deferred)}catch(a){console.error(a)}!b.deferred&&e.next()}},e.threadDelay)}});h.Threads=function(g){return new e(g)}})();(function(){var e=h.isFunction,g=function(){this.lastId=0};g.prototype.queue=function(b){var a=this,c=h.uid();a.lastId=c;return function(){if(a.lastId===c){var d=
arguments,d=e(b)?b.apply(this,d):d;return e(a.fn)?a.fn.apply(this,d):d}}};h.Enqueue=function(b){var a=new g;h.isFunction(b)&&(a.fn=b);b=h.proxy(a.queue,a);b.reset=function(){a.lastId=0};return b}})();(function(){var e=["on","off","fire"],g=function(b){this.fnList={};this.events={};this.mode=b};h.extend(g.prototype,{createEvent:function(b){return this.events[b]=h.Callbacks(this.mode)},on:function(b,a){if(!b||!h.isFunction(a))return this;var c=this.fnList;(c[b]||(c[b]=[])).push(a);c=b.split(".")[0];
(this.events[c]||this.createEvent(c)).add(a);return this},off:function(b){if(!b)return this;var a=b.split(".")[0],c=this.events[a];if(!c)return this;var d=function(a){h.each(a,function(a,b){c.remove(b)})};a!==b?h.each(this.fnList,function(b,c){-1<b.indexOf(a)&&d(c)}):d(this.fnList[b]);return this},fire:function(b){var a=this.events[b];if(a)return a.fire.apply(a,h.makeArray(arguments).slice(1)),this},destroy:function(){for(name in this.events)this.events[name].disable()}});h.eventable=function(b,a){var c=
b.___eventable;if(c&&"destroy"===a)return c.destroy(),h.deletes(b,e),delete b.___eventable;c=b.___eventable=new g(a);b.on=h.proxy(c.on,c);b.off=h.proxy(c.off,c);b.fire=h.proxy(c.fire,c);return b}})();h.Chunk=function(e,g){h.isArray(e)&&(e=[]);g=h.extend({},{size:256,every:1E3},g);var b=h.extend(h.Deferred(),{size:g.size,every:g.every,from:0,to:e.length,process:function(a){b.process.fn=a;return b},chunkStart:function(a){b.chunkStart.fn=a;return b},chunkEnd:function(a){b.chunkEnd.fn=a;return b},start:function(){b.stopped=
!1;b.iterate();return b},iterate:function(){if(!b.stopped){var a=b.process.fn;if(a){b.to=from.size+b.size;var c=e.length;b.to>c&&(b.to=c);var c=b.from,d=b.to;for(b.chunkStart.fn&&b.chunkStart.fn.call(b,c,d);b.from<b.to&&!b.stopped;)a.call(b,e[b.from]),b.from++;b.chunkEnd.fn&&b.chunkEnd.fn.call(b,c,d);b.completed=b.from>=e.length-1;b.completed?b.resolveWith(b):b.nextIteration=setTimeout(b.iterate,b.every);return b}}},pause:function(){b.stopped=!0;clearTimeout(b.nextIteration);return b},restart:function(){if("rejected"===
b.state())return b;b.from=0;b.start();return b},stop:function(){b.pause();b.rejectWith(b,[b.from]);return b}});return b};h.fn.disabled=function(e){return void 0===e?this.is(":disabled")||this.hasClass("disabled"):this.prop("disabled",!!e).toggleClass("disabled",!!e)};h.fn.enabled=function(e){return void 0===e?!this.disabled():this.disabled(!e)};(function(){var e=h.Ajax=function(g){var b=h.Deferred(),a=arguments;h.isPlainObject(g)&&h.isFunction(g.beforeCreate)&&g.beforeCreate(b);e.queue.addDeferred(function(c){b.xhr=
h.ajax.apply(null,a).pipe(b.resolve,b.reject,b.notify);setTimeout(c.resolve,e.requestInterval)});return b};e.queue=h.Threads({threadLimit:1});e.requestInterval=1200})();h.callback=function(e,g){if(h.isFunction(e)){var b=h.uid("cb");window[b]=function(){g||delete window[b];return e.apply(null,arguments)};return b}if(h.isString(e))switch(e){case "destroy":b=g,delete window[b]}};h.fn.visible=function(e){var g=h(this),b=h(window);if(!(1>g.length)){var a=b.scrollTop(),b=a+b.height(),c=g.offset().top,g=
c+g.height();return(!0===e?c:g)<=b&&(!0===e?g:c)>=a}};h.fn.selectAll=function(){return this.each(function(){this.select()})};h.fn.unselect=function(){return this.each(function(){var e=this.value;this.value+=" ";this.value=e})};h.fn.addTransitionClass=function(e,g){var b=this.addClass(e);setTimeout(function(){b.removeClass(e)},g||0);return this};h.fn.switchClass=function(e,g){g=g||"-";var b=e.split(g)[0]+g,a=b.length;return this.each(function(){var c=h(this),d=h.map(c.attr("class").split(" "),function(c){return c.slice(0,
a)==b||""==c?null:c});d.push(e);c.attr("class",d.join(" "))})};h.sanitizeHTML=function(e){return h(h.parseHTML(e)).toHTML()};h.buildHTML=function(e,g){var b,a=[];g||(b=document.createElement("script"),b.text=h.callback(function(){h(a).remove()})+"();");b=h.buildFragment([e,b],document,a);return h(h.merge([],b.childNodes))};h.fn.filterBy=function(e,g,b){b=b||"=";e="[data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+b+g+"]";return this.filter(e)};h.intersects=function(e,g){h.isArray(g)&&(g=
{top:g.y,left:g.x,bottom:g.y,right:g.x});return g.left<=e.right&&e.left<=g.right&&g.top<=e.bottom&&e.top<=g.bottom};h.fn.intersectsWith=function(e,g,b,a){var c=this.offset(),c={top:c.top,left:c.left,bottom:c.top+(sourceHeight=this.height()),right:c.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight};e={top:e,left:g,bottom:e+(a||(a=0)),right:g+(b||(b=0)),width:b,height:a};return h.intersects(c,e)?{reference:c,subject:e}:!1};h.download=function(e){return h("<iframe>").hide().appendTo("body").bind("load",
function(){h(this).remove()}).attr("src",e)}});
FD31.plugin("uri",function(h){h.isUrl=function(b){return/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(b)};var e=function(b){var a=function(a){var b=[],c,d,f,e;if("undefined"===typeof a||null===a||""===a)return b;0===a.indexOf("?")&&(a=a.substring(1));c=a.toString().split(/[&;]/);for(a=0;a<c.length;a++)d=c[a],f=d.split("="),e=f[0],d=-1===d.indexOf("=")?null:null===f[1]?"":f[1],b.push([e,d]);return b}(b),c=function(a){a=decodeURIComponent(a);return a=a.replace("+",
" ")},d=function(b,d){var f=[],e,g,h,r;for(e=0;e<a.length;e++)g=a[e],h=c(g[0])===c(b),r=c(g[1])===c(d),(1===arguments.length&&!h||2===arguments.length&&!h&&!r)&&f.push(g);a=f;return this},f=function(b,c,d){3===arguments.length&&-1!==d?(d=Math.min(d,a.length),a.splice(d,0,[b,c])):0<arguments.length&&a.push([b,c]);return this};return{getParamValue:function(b){var d,f;for(f=0;f<a.length;f++)if(d=a[f],c(b)===c(d[0]))return d[1]},getParamValues:function(b){var d=[],f,e;for(f=0;f<a.length;f++)e=a[f],c(b)===
c(e[0])&&d.push(e[1]);return d},deleteParam:d,addParam:f,replaceParam:function(b,e,g){var h=-1,q,u;if(3===arguments.length){for(q=0;q<a.length;q++)if(u=a[q],c(u[0])===c(b)&&decodeURIComponent(u[1])===c(g)){h=q;break}d(b,g).addParam(b,e,h)}else{for(q=0;q<a.length;q++)if(u=a[q],c(u[0])===c(b)){h=q;break}d(b);f(b,e,h)}return this},toString:function(){var b="",c,d;for(c=0;c<a.length;c++)d=a[c],0<b.length&&(b+="&"),b=null===d[1]?b+d[0]:b+d.join("=");return 0<b.length?"?"+b:b}}},g=function(b){var a=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,
c=function(a){var b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a);for(var c={},d=14;d--;)c[b[d]]=a[d]||"";c.queryKey={};c[b[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c.queryKey[b]=d)});return c}(b||""),d=new e(c.query),
f=function(a){"undefined"!==typeof a&&(c.protocol=a);return c.protocol},k=null,n=function(a){"undefined"!==typeof a&&(k=a);return null===k?-1!==c.source.indexOf("//"):k},p=function(a){"undefined"!==typeof a&&(c.userInfo=a);return c.userInfo},h=function(a){"undefined"!==typeof a&&(c.host=a);return c.host},q=function(a){"undefined"!==typeof a&&(c.port=a);return c.port},u=function(a){"undefined"!==typeof a&&(c.path=a);return c.path},r=function(a){"undefined"!==typeof a&&(d=new e(a));return d},t=function(a){"undefined"!==
typeof a&&(c.anchor=a);return c.anchor},l=function(){var a="",b=function(a){return null!==a&&""!==a};b(f())?(a+=f(),f().indexOf(":")!==f().length-1&&(a+=":"),a+="//"):n()&&b(h())&&(a+="//");b(p())&&b(h())&&(a+=p(),p().indexOf("@")!==p().length-1&&(a+="@"));b(h())&&(a+=h(),b(q())&&(a+=":"+q()));b(u())?a+=u():b(h())&&(b(r().toString())||b(t()))&&(a+="/");b(r().toString())&&(0!==r().toString().indexOf("?")&&(a+="?"),a+=r().toString());b(t())&&(0!==t().indexOf("#")&&(a+="#"),a+=t());return a};return{protocol:f,
hasAuthorityPrefix:n,userInfo:p,host:h,port:q,path:u,query:r,anchor:t,setProtocol:function(a){f(a);return this},setHasAuthorityPrefix:function(a){n(a);return this},setUserInfo:function(a){p(a);return this},setHost:function(a){h(a);return this},setPort:function(a){q(a);return this},setPath:function(a){u(a);return this},setQuery:function(a){r(a);return this},setAnchor:function(a){t(a);return this},getQueryParamValue:function(a){return r().getParamValue(a)},getQueryParamValues:function(a){return r().getParamValues(a)},
deleteQueryParam:function(a,b){2===arguments.length?r().deleteParam(a,b):r().deleteParam(a);return this},addQueryParam:function(a,b,c){3===arguments.length?r().addParam(a,b,c):r().addParam(a,b);return this},replaceQueryParam:function(a,b,c){3===arguments.length?r().replaceParam(a,b,c):r().replaceParam(a,b);return this},extract:function(c){var d=b.match(a)||[];return void 0===c?d:d[c]||""},toPath:function(a){if(void 0===a)return c.path;if("/"==a.substring(0,1))return c.path=a;var b=c.path.split("/");
a=a.split("/");""===b.slice(-1)[0]&&b.pop();for(var d;d=a.shift();)switch(d){case "..":1<b.length&&b.pop();break;case ".":break;default:b.push(d)}c.path=b.join("/");return this},toString:l,clone:function(){return new g(l())}}};h.uri=function(b){return new g(b)}});
FD31.plugin("mvc",function(h){(function(){var e={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},g=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},b,a=h.String=h.extend(h.String||{},{getObject:b=function(a,b,f){a=a?a.split(e.dot):[];var k=a.length,n,p,s,q=0;b=h.isArray(b)?b:[b||window];if(0==k)return b[0];for(;n=b[q++];){for(s=0;s<k-1&&g(n);s++)n=void 0!==n[a[s]]?n[a[s]]:f&&(n[a[s]]={});
if(g(n)&&(p=void 0!==n[a[s]]?n[a[s]]:f&&(n[a[s]]={}),void 0!==p))return!1===f&&delete n[a[s]],p}},capitalize:function(a,b){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(b){b=a.classize(b);return b.charAt(0).toLowerCase()+b.substr(1)},classize:function(b,d){for(var f=b.split(e.undHash),k=0;k<f.length;k++)f[k]=a.capitalize(f[k]);return f.join(d||"")},niceName:function(b){return a.classize(b," ")},underscore:function(a){return a.replace(e.colons,"/").replace(e.words,"$1_$2").replace(e.lowUp,
"$1_$2").replace(e.dash,"_").toLowerCase()},sub:function(a,d,f){var k=[];k.push(a.replace(e.replacer,function(a,c){var e=b(a,d,"boolean"==typeof f?!f:f)||b(c,d,"boolean"==typeof f?!f:f),g=typeof e;if("object"!==g&&"function"!==g||null===g)return""+e;k.push(e);return""}));return 1>=k.length?k[0]:k},_regs:e})})();(function(){h.String.rsplit=function(e,g){for(var b=g.exec(e),a=[],c;null!==b;)c=b.index,0!==c&&(a.push(e.substring(0,c)),e=e.slice(c)),a.push(b[0]),e=e.slice(b[0].length),b=g.exec(e);""!==
e&&a.push(e);return a}})();(function(){var e=/^\d+$/,g=/([^\[\]]+)|(\[\])/g,b=/\+/g,a=/([^?#]*)(#.*)?$/;h.String=h.extend(h.String||{},{deparam:function(c){if(!c||!a.test(c))return{};var d={};c=c.split("&");for(var f,k=0;k<c.length;k++){f=d;var n=c[k].split("=");2!=n.length&&(n=[n[0],n.slice(1).join("=")]);for(var p=decodeURIComponent(n[0].replace(b," ")),n=decodeURIComponent(n[1].replace(b," ")),p=p.match(g),h=0;h<p.length-1;h++){var q=p[h];f[q]||(f[q]=e.test(p[h+1])||"[]"==p[h+1]?[]:{});f=f[q]}lastPart=
p[p.length-1];"[]"==lastPart?f.push(n):f[lastPart]=n}return d}})})();(function(){h.fn.triggerAsync=function(a,b,d,f){"function"==typeof b&&(d=b,b=void 0);if(this[0]){var e=h.Event(a),n=e.preventDefault;e.preventDefault=function(){n.apply(this,arguments);f&&f(this)};h.event.trigger({type:a,_success:d},b,this[0])}else d.call(this);return this};var e=/\.(.*)$/,g=h.event;g.special["default"]={add:function(a){a.namespace.replace(e,"")},setup:function(){return!0}};var b=g.trigger;g.trigger=function(a,c,
d,f){var e=a.type||a;a="object"===typeof a?a[h.expando]?a:new h.Event(e,a):new h.Event(e);e=b.call(h.event,a,c,d,f);f||a.isDefaultPrevented()||0===a.type.indexOf("default")||(b("default."+a.type,c,d),a._success&&a._success(a));a.isPaused&&a.isPaused()&&(a.isDefaultPrevented=a.pausedState.isDefaultPrevented,a.isPropagationStopped=a.pausedState.isPropagationStopped);return e}})();(function(){var e=h.cleanData;h.cleanData=function(g){for(var b=0,a;void 0!==(a=g[b]);b++)h(a).triggerHandler("destroyed");
e(g)}})();(function(){function e(b){b=b||window[a][c];return b.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var g,b=h.event.special,a="location",c="href",d=document.documentMode,f=h.browser.msie&&(void 0===d||8>d),k="onhashchange"in window&&!f;h.hashchangeDelay=100;b.hashchange=h.extend(b.hashchange,{setup:function(){if(k)return!1;h(g.start)},teardown:function(){if(k)return!1;h(g.stop)}});g=function(){function b(){u=r=function(a){return a};f&&(g=h('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,
r=function(){return e(g.document[a][c])},u=function(b,c){if(b!==c){var d=g.document;d.open().close();d[a].hash="#"+b}},u(e()))}var d={},k,g,u,r;d.start=function(){if(!k){var d=e();u||b();navigator.userAgent.match(/Rhino/)||function v(){var b=e(),f=r(d);b!==d?(u(d=b,f),h(window).trigger("hashchange")):f!==d&&(window[a][c]=window[a][c].replace(/#.*/,"")+"#"+f);k=setTimeout(v,h.hashchangeDelay)}()}};d.stop=function(){g||(k&&clearTimeout(k),k=0)};return d}()})();(function(){var e={},g={};h.event.key=
function(b){h.extend(e,b);for(var a in b)g[b[a]]=a};h.event.key({"\b":"8","\t":"9","\r":"13",shift:"16",ctrl:"17",alt:"18","pause-break":"19",caps:"20",escape:"27","num-lock":"144","scroll-lock":"145",print:"44","page-up":"33","page-down":"34",end:"35",home:"36",left:"37",up:"38",right:"39",down:"40",insert:"45","delete":"46"," ":"32",0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",
o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90",num0:"96",num1:"97",num2:"98",num3:"99",num4:"100",num5:"101",num6:"102",num7:"103",num8:"104",num9:"105","*":"106","+":"107","-":"109",".":"110","/":"111",";":"186","=":"187",",":"188","-":"189",".":"190","/":"191","`":"192","[":"219","\\":"220","]":"221","'":"222","left window key":"91","right window key":"92","select key":"93",f1:"112",f2:"113",f3:"114",f4:"115",f5:"116",f6:"117",f7:"118",f8:"119",f9:"120",f10:"121",
f11:"122",f12:"123"});h.Event.prototype.keyName=function(){var b=/\w/,a=g[(this.keyCode||this.which)+""],c=String.fromCharCode(this.keyCode||this.which),d=this.charCode&&g[this.charCode+""],f=this.charCode&&String.fromCharCode(this.charCode);return f&&b.test(f)||d&&b.test(d)?f.toLowerCase():c&&b.test(c)?c.toLowerCase():a&&b.test(a)?a.toLowerCase():"keypress"==this.type?this.keyCode?String.fromCharCode(this.keyCode):String.fromCharCode(this.which):!this.keyCode&&this.which?String.fromCharCode(this.which):
g[this.keyCode+""]}})();(function(){var e=h.event,g=function(b,a,c,d){var f,e,n,g,h,q,u,r;for(f=0;f<a.length;f++)for(e=a[f],g=0>e.indexOf("."),g||(n=e.split("."),e=n.shift(),u=RegExp("(^|\\.)"+n.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")),n=(b[e]||[]).slice(0),h=0;h<n.length;h++)q=n[h],(r=g||u.test(q.namespace))&&(d?q.selector===d&&c(e,q.origHandler||q.handler):null===d?c(e,q.origHandler||q.handler,q.selector):q.selector||c(e,q.origHandler||q.handler))};e.find=function(b,a,c){b=(h._data(b)||
{}).events;var d=[];if(!b)return d;g(b,a,function(a,b){d.push(b)},c);return d};e.findBySelector=function(b,a){var c=h._data(b).events,d={};if(!c)return d;g(c,a,function(a,b,c){c=c||"";c=d[c]||(d[c]={});(c[a]||(c[a]=[])).push(b)},null);return d};e.supportTouch="ontouchend"in document;h.fn.respondsTo=function(b){return this.length?0<e.find(this[0],h.isArray(b)?b:[b]).length:!1};h.fn.triggerHandled=function(b,a){b="string"==typeof b?h.Event(b):b;this.trigger(b,a);return b.handled};e.setupHelper=function(b,
a,c){c||(c=a,a=null);var d=function(d){var f=d.selector||"";f?(d=e.find(this,b,f),d.length||h(this).delegate(f,a,c)):e.find(this,b,f).length||e.add(this,a,c,{selector:f,delegate:this})},f=function(d){var f=d.selector||"";f?(d=e.find(this,b,f),d.length||h(this).undelegate(f,a,c)):e.find(this,b,f).length||e.remove(this,a,c,{selector:f,delegate:this})};h.each(b,function(){e.special[this]={add:d,remove:f,setup:function(){},teardown:function(){}}})}})();(function(){var e=function(){return!1},g=function(){return!0};
h.Event.prototype.isPaused=e;h.Event.prototype.pause=function(){this.pausedState={isDefaultPrevented:this.isDefaultPrevented()?g:e,isPropagationStopped:this.isPropagationStopped()?g:e};this.stopImmediatePropagation();this.preventDefault();this.isPaused=g};h.Event.prototype.resume=function(){var b=this.handleObj,a=this.currentTarget,c=h.event.special[b.origType],d=c&&c.handle;c||(h.event.special[b.origType]={});h.event.special[b.origType].handle=function(f){f.handleObj===b&&f.currentTarget===a&&(c?
h.event.special[b.origType].handle=d:delete h.event.special[b.origType])};delete this.pausedState;this.isPaused=this.isImmediatePropagationStopped=e;this.isPropagationStopped()||h.event.trigger(this,[],this.target)}})();(function(){var e=h(),g=0,b=h(window),a=0,c=0,d;h(function(){a=b.width();c=b.height()});h.event.special.resize={setup:function(a){this!==window&&(e.push(this),h.unique(e));return this!==window},teardown:function(){e=e.not(this);return this!==window},add:function(f){f.origHandler=f.handler;
f.handler=function(k,n){var p=this===window;if(p&&k.originalEvent){var p=b.width(),s=b.height();if(p!=a||s!=c)a=p,c=s,clearTimeout(d),d=setTimeout(function(){b.trigger("resize")},1)}else if(0===g){g++;s=!1===n?k.target:this;h.event.handle.call(s,k);if(!k.isPropagationStopped()){for(var q=e.index(this),u=e.length,r,t;++q<u&&(r=e[q])&&(p||h.contains(s,r));)if(h.event.handle.call(r,k),k.isPropagationStopped())for(;++q<u&&(t=e[q]);)if(!h.contains(r,t)){q--;break}k.stopImmediatePropagation()}g--}else f.origHandler.call(this,
k,n)}}};h([document,window]).bind("resize",function(){})})();(function(){var e=h.fn.closest;h.fn.closest=function(g,b){var a={},c,d,f,k,n=!0,p=g;"string"==typeof g&&(p=[g]);h.each(p,function(b,c){if(0==c.indexOf(">")){if(-1!=c.indexOf(" "))throw" closest does not work with > followed by spaces!";a[p[b]=c.substr(1)]=c;"string"==typeof g&&(g=c.substr(1));n=!1}});c=e.call(this,g,b);if(n)return c;for(f=0;f<c.length;){d=c[f];k=d.selector;if(void 0!==a[k]&&(d.selector=a[k],a[k]=!1,"string"!==typeof d.selector||
d.elem.parentNode!==b)){c.splice(f,1);continue}f++}return c}})();(function(){h.cookie=function(e,g,b){if("undefined"!=typeof g){b=b||{};null===g&&(g="",b.expires=-1);"object"==typeof g&&jQuery.toJSON&&(g=jQuery.toJSON(g));var a="";b.expires&&("number"==typeof b.expires||b.expires.toUTCString)&&("number"==typeof b.expires?(a=new Date,a.setTime(a.getTime()+864E5*b.expires)):a=b.expires,a="; expires="+a.toUTCString());var c=b.path?"; path="+b.path:"",d=b.domain?"; domain="+b.domain:"";b=b.secure?"; secure":
"";document.cookie=[e,"=",encodeURIComponent(g),a,c,d,b].join("")}else{g=null;if(document.cookie&&""!=document.cookie)for(b=document.cookie.split(";"),a=0;a<b.length;a++)if(c=jQuery.trim(b[a]),c.substring(0,e.length+1)==e+"="){g=decodeURIComponent(c.substring(e.length+1));break}if(jQuery.evalJSON&&g&&g.match(/^\s*\{/))try{g=jQuery.evalJSON(g)}catch(f){}return g}}})();(function(){h.fn.compare=function(e){try{e=e.jquery?e[0]:e}catch(g){return null}if(window.HTMLElement){var b=HTMLElement.prototype.toString.call(e);
if("[xpconnect wrapped native prototype]"==b||"[object XULElement]"==b||"[object Window]"===b)return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(e);if(this[0]==document&&e!=document)return 8;var b=(this[0]!==e&&this[0].contains(e)&&16)+(this[0]!=e&&e.contains(this[0])&&8),a=document.documentElement;if(this[0].sourceIndex)b+=this[0].sourceIndex<e.sourceIndex&&4,b+=this[0].sourceIndex>e.sourceIndex&&2,b+=(this[0].ownerDocument!==e.ownerDocument||this[0]!=a&&0>=this[0].sourceIndex||
e!=a&&0>=e.sourceIndex)&&1;else{var a=document.createRange(),c=document.createRange();a.selectNode(this[0]);c.selectNode(e);a.compareBoundaryPoints(Range.START_TO_START,c)}return b}})();(function(){var e=document.defaultView&&document.defaultView.getComputedStyle,g=/([A-Z])/g,b=/-([a-z])/ig,a=function(a,b){return b.toUpperCase()},c=/float/i,d=/^-?\d+(?:px)?$/i,f=/^-?\d/;h.curStyles=function(k,n){if(!k)return null;var p;p=e?e(k,null):k.currentStyle?k.currentStyle:void 0;for(var s,q,u=k.style,r={},
t=0,l,v;t<n.length;t++)l=n[t],s=l.replace(b,a),c.test(l)&&(l=h.support.cssFloat?"float":"styleFloat",s="cssFloat"),e?(l=l.replace(g,"-$1").toLowerCase(),q=p.getPropertyValue(l),"opacity"===l&&""===q&&(q="1"),r[s]=q):(q=l.replace(b,a),r[s]=p[l]||p[q],!d.test(r[s])&&f.test(r[s])&&(l=u.left,v=k.runtimeStyle.left,k.runtimeStyle.left=k.currentStyle.left,u.left="fontSize"===q?"1em":r[s]||0,r[s]=u.pixelLeft+"px",u.left=l,k.runtimeStyle.left=v));return r};h.fn.curStyles=function(){return h.curStyles(this[0],
h.makeArray(arguments))}})();(function(){h.fn.range=function(){return h.Range(this[0])};var e=function(a){return a.replace(/([a-z])([a-z]+)/gi,function(a,b,c){return b+c.toLowerCase()}).replace(/_/g,"")},g=function(a){return a.replace(/^([a-z]+)_TO_([a-z]+)/i,function(a,b,c){return c+"_TO_"+b})},b={};h.Range=function(a){if(this.constructor!==h.Range)return new h.Range(a);a&&a.jquery&&(a=a[0]);!a||a.nodeType?(this.win=a?a.ownerDocument.defaultView||a.ownerDocument.parentWindow:window,this.range=this.win.document.createRange?
this.win.document.createRange():this.win.document.body.createTextRange(),a&&this.select(a)):null!=a.clientX||null!=a.pageX||null!=a.left?this.moveToPoint(a):a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length?this.moveToPoint(a.originalEvent.touches[0]):a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length?this.moveToPoint(a.originalEvent.changedTouches[0]):this.range=a};h.Range.current=function(a){a=a?a.ownerDocument.defaultView||a.ownerDocument.parentWindow:
window;var b;return a.getSelection?(b=a.getSelection(),new h.Range(b.rangeCount?b.getRangeAt(0):a.document.createRange())):new h.Range(a.document.selection.createRange())};h.extend(h.Range.prototype,{moveToPoint:function(c){var e=c.clientX,n=c.clientY;e||(n=d(),e=(c.pageX||c.left||0)-n.left,n=(c.pageY||c.top||0)-n.top);if(b.moveToPoint)return this.range=h.Range().range,this.range.moveToPoint(e,n),this;for(var g=document.elementFromPoint(e,n),s=0;s<g.childNodes.length;s++){var q=g.childNodes[s];if(3===
q.nodeType||4===q.nodeType)for(var q=h.Range(q),u=q.toString().length,r=1;r<u+1;r++){var t=q.end(r).rect();if(t.left<=e&&t.left+t.width>=e&&t.top<=n&&t.top+t.height>=n){q.start(r-1);this.range=q.range;return}}}var l;a(g.childNodes,function(a){a=h.Range(a);if(a.rect().top>c.clientY)return!1;l=a});l?(l.start(l.toString().length),this.range=l.range):this.range=h.Range(g).range},window:function(){return this.win||window},overlaps:function(a){a.nodeType&&(a=h.Range(a).select(a));var b=this.compare("START_TO_START",
a),c=this.compare("END_TO_END",a);return 0>=b&&0<=c||0<=b&&0>=this.compare("START_TO_END",a)||0<=this.compare("END_TO_START",a)&&0>=c?!0:!1},collapse:function(a){this.range.collapse(void 0===a?!0:a);return this},toString:function(){return"string"==typeof this.range.text?this.range.text:this.range.toString()},start:function(a){if(void 0===a){if(this.range.startContainer)return{container:this.range.startContainer,offset:this.range.startOffset};a=this.clone().collapse().parent();var b=h.Range(a).select(a).collapse();
b.move("END_TO_START",this);return{container:a,offset:b.toString().length}}if(this.range.setStart)"number"==typeof a?this.range.setStart(this.range.startContainer,a):"string"==typeof a?this.range.setStart(this.range.startContainer,this.range.startOffset+parseInt(a,10)):this.range.setStart(a.container,a.offset);else throw"todo";return this},end:function(a){if(void 0===a){if(this.range.startContainer)return{container:this.range.endContainer,offset:this.range.endOffset};a=this.clone().collapse(!1).parent();
var b=h.Range(a).select(a).collapse();b.move("END_TO_END",this);return{container:a,offset:b.toString().length}}if(this.range.setEnd)"number"==typeof a?this.range.setEnd(this.range.endContainer,a):this.range.setEnd(a.container,a.offset);else throw"todo";return this},parent:function(){if(this.range.commonAncestorContainer)return this.range.commonAncestorContainer;var b=this.range.parentElement(),c=this.range;a(b.childNodes,function(a){if(h.Range(a).range.inRange(c))return b=a,!1});return b},rect:function(a){var b=
this.range.getBoundingClientRect();"page"===a&&(a=d(),b=h.extend({},b),b.top+=a.top,b.left+=a.left);return b},rects:function(a){for(var b=h.makeArray(this.range.getClientRects()).sort(function(a,b){return b.width*b.height-a.width*a.height}),e=0,g;e<b.length;){var s=b[e],q=!1;g=e+1;for(g=e+1;g<b.length;g++)if(c(s,{clientX:b[g].left,clientY:b[g].top})&&c(s,{clientX:b[g].left+b[g].width,clientY:b[g].top})&&c(s,{clientX:b[g].left,clientY:b[g].top+b[g].height})&&c(s,{clientX:b[g].left+b[g].width,clientY:b[g].top+
b[g].height})){q=b[g];break}q?b.splice(e,1):e++}if("page"==a){var u=d();return h.map(b,function(a){a=h.extend({},a);a.top+=u.top;a.left+=u.left;return a})}return b}});(function(){var b=h.Range.prototype,c=h.Range().range;b.compare=c.compareBoundaryPoints?function(a,b){return this.range.compareBoundaryPoints(this.window().Range[g(a)],b.range)}:function(a,b){return this.range.compareEndPoints(e(a),b.range)};b.move=c.setStart?function(a,b){var c=b.range;switch(a){case "START_TO_END":this.range.setStart(c.endContainer,
c.endOffset);break;case "START_TO_START":this.range.setStart(c.startContainer,c.startOffset);break;case "END_TO_END":this.range.setEnd(c.endContainer,c.endOffset);break;case "END_TO_START":this.range.setEnd(c.startContainer,c.startOffset)}return this}:function(a,b){this.range.setEndPoint(e(a),b.range);return this};var d=c.cloneRange?"cloneRange":"duplicate";b.clone=function(){return h.Range(this.range[d]())};b.select=c.selectNodeContents?function(a){a?this.range.selectNodeContents(a):this.window().getSelection().addRange(this.range);
return this}:function(b){if(b)if(3===b.nodeType){var c=b.parentNode,d=0,f;a(c.childNodes,function(a){if(a===b)return f=d+a.nodeValue.length,!1;d+=a.nodeValue.length});this.range.moveToElementText(c);this.range.moveEnd("character",f-this.range.text.length);this.range.moveStart("character",d)}else this.range.moveToElementText(b);else this.range.select();return this}})();var a=function(b,c){for(var d,e=0;b[e];e++)if(d=b[e],3===d.nodeType||4===d.nodeType){if(!1===c(d))return!1}else if(8!==d.nodeType&&
!1===a(d.childNodes,c))return!1},c=function(a,b){return a.left<=b.clientX&&a.left+a.width>=b.clientX&&a.top<=b.clientY&&a.top+a.height>=b.clientY},d=function(a){a=a||window;doc=a.document.documentElement;body=a.document.body;return{left:(doc&&doc.scrollLeft||body&&body.scrollLeft||0)+(doc.clientLeft||0),top:(doc&&doc.scrollTop||body&&body.scrollTop||0)+(doc.clientTop||0)}};b.moveToPoint=!!h.Range().range.moveToPoint})();(function(){h.fn.within=function(e,g,b){var a=[];this.each(function(){var c=h(this);
if(this==document.documentElement)return a.push(this);c=b?h.data(this,"offsetCache")||h.data(this,"offsetCache",c.offset()):c.offset();g>=c.top&&g<c.top+this.offsetHeight&&e>=c.left&&e<c.left+this.offsetWidth&&a.push(this)});return this.pushStack(h.unique(a),"within",e+","+g)};h.fn.withinBox=function(e,g,b,a,c){var d=[];this.each(function(){var f=h(this);if(this==document.documentElement)return this.ret.push(this);var k=c?h.data(this,"offset")||h.data(this,"offset",f.offset()):f.offset(),n=f.width(),
f=f.height();(res=!(k.top>g+a||k.top+f<g||k.left>e+b||k.left+n<e))&&d.push(this)});return this.pushStack(h.unique(d),"withinBox",h.makeArray(arguments).join(","))}})();(function(){var e=!1,g=h.makeArray,b=h.isFunction,a=h.isArray,c=h.extend,d=h.String.getObject,f=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,k=function(a,c,d){d=d||a;for(var e in a)d[e]=b(a[e])&&b(c[e])&&f.test(a[e])?function(a,b){return function(){var d=this._super,f;this._super=c[a];f=b.apply(this,arguments);this._super=d;return f}}(e,
a[e]):a[e]};clss=h.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)};c(clss,{proxy:function(b){var c=g(arguments),d;b=c.shift();a(b)||(b=[b]);d=this;return function(){for(var f=c.concat(g(arguments)),e,k=b.length,h=0,l;h<k;h++)if(l=b[h])(e="string"==typeof l)&&d._set_called&&(d.called=l),f=(e?d[l]:l).apply(d,f||[]),h<k-1&&(f=!a(f)||f._use_call?[f]:f);return f}},newInstance:function(){var b=this.rawInstance(),c;b.setup&&(c=b.setup.apply(b,arguments));b.init&&b.init.apply(b,a(c)?
c:arguments);return b},setup:function(a,b){this.defaults=c(!0,{},a.defaults,this.defaults);return arguments},rawInstance:function(){e=!0;var a=new this;e=!1;return a},extend:function(a,b,f){function q(){if(!e)return this.constructor!==q&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}"string"!=typeof a&&(f=b,b=a,a=null);f||(f=b,b=null);f=f||{};var u=this.prototype,r,t,l,v;e=!0;v=new this;e=!1;k(f,u,v);for(r in this)this.hasOwnProperty(r)&&
(q[r]=this[r]);k(b,this,q);if(a){var z;b&&b.root&&(z=b.root,h.isString(z)&&(z=d(z,window,!0)));l=a.split(/\./);t=l.pop();l=z=d(l.join("."),z||window,!0);c(!0,q,z[t]);z[t]=q}c(q,{prototype:v,namespace:l,shortName:t,constructor:q,fullName:a});q.prototype.Class=q.prototype.constructor=q;t=q.setup.apply(q,[this].concat(g(arguments)));q.init&&q.init.apply(q,t||[this].concat(g(arguments)));return q}});clss.callback=clss.prototype.callback=clss.prototype.proxy=clss.proxy})();(function(){var e=function(b,
c,d){var f,e=b.bind&&b.unbind?b:h(a(b)?[b]:b);0===c.indexOf(">")&&(c=c.substr(1),f=function(a){a.target===b&&d.apply(this,arguments)});e.bind(c,f||d);return function(){e.unbind(c,f||d);b=c=d=f=null}},g=h.makeArray,b=h.isArray,a=h.isFunction,c=h.isString,d=h.extend,f=h.String,k=h.each,n=f.getObject,p=Array.prototype.slice,s=function(b,c,d,f){0===c.indexOf(">")&&(c=(b.data("directSelector")+" "||"")+c);var e=b.delegate&&b.undelegate?b:h(a(b)?[b]:b);e.delegate(c,d,f);return function(){e.undelegate(c,
d,f);e=b=d=f=c=null}},q=function(a,b){var c="string"==typeof b?a[b]:b;return function(){a.called=b;return c.apply(a,[this.nodeName?h(this):this].concat(p.call(arguments,0)))}},u=/\./g,r=/_?controllers?/ig,t=function(a){return f.underscore(a.replace(h.globalNamespace+".","").replace(u,"_").replace(r,""))},l=/^\S(.*)\s(.*)/,v=/\{([^\}]+)\}/g,z=/\{([^\.]+[\.][^\.]+)\}/g,A=/^(?:(.*?)\s)?([\w\.\:>]+)$/,w,B=function(a,b){return h.data(a,"controllers",b)},x=h.globalNamespace+".Controller";h.Controller=function(a){var b=
g(arguments),c={root:x};2<b.length?(c=h.extend(c,b[1]),b=b[2]):b=b[1];c.namespace&&(a=c.namespace+"."+a);return h.Controller.Class(a,c,b)};var Q=x+".Class";h.Class(Q,{setup:function(b,d){this._super.apply(this,arguments);if(this.shortName&&this.fullName!=Q){this._fullName=t(this.fullName);this._shortName=t(this.shortName);var f=this,e;if(c(this.pluginName)){var k=this._fullName,n=this.pluginName;h.fn[n]||(h.fn[n]=function(a){var b=g(arguments);if(h.isString(a)&&"controller"===a){var c=B(this[0]);
return c&&c[k]}return this.each(function(){var c=B(this);if(c=c&&c[k])if(h.isString(a)){var d=c[a];h.isFunction(d)&&d.apply(c,b.slice(1))}else c.update.apply(c,b);else f.newInstance.apply(f,[this].concat(b))})})}var l=g(arguments),n=this.prototype,l=l[3<l.length?3:2];a(l)&&(this.protoFactory=l,n=this.protoFactory.call(this,null));this.actions={};for(e in n)"constructor"!=e&&a(n[e])&&this._isAction(e)&&(this.actions[e]=this._action(e));h.module("$:/Controllers/"+this.fullName).resolve(this)}},hookup:function(a){return new this(a)},
_isAction:function(a){return l.test(a)?!0:-1<h.inArray(a,this.listensTo)||h.event.special[a]||R[a]},_action:function(a,c){v.lastIndex=0;if(!c&&v.test(a))return null;var d=a=a.replace("{self} ","");if(c){var e=!1;if(z.test(a))var k,n="",d=a.replace(z,function(a,b){var d=b.split(".");k=c["{"+d[0]+"}"]||{};h.isControllerInstance(k)&&(n=(k[d[1]]||{}).selector);return n}).match(A),e=!!n,d=[k.element].concat(d||[]);e||(d=f.sub(a,[c,window]))}var e=b(d),g=(e?d[1]:d).match(A);return{processor:R[g[2]]||w,
parts:g,delegate:e?d[0]:void 0}},processors:{},listensTo:[],defaults:{},hostname:"parent"},{setup:function(a,b){var f=this,e=f.constructor,n=f.prototype;e.protoFactory&&(n=e.protoFactory.apply(e,[f]),d(!0,f,n));n=e._fullName;f.instanceId=h.uid(n+"_");(B(a)||B(a,{}))[n]=f;var l=f.element=h(a);l.data("directSelector")||(n=h.uid("DS"),l.addClass(n).data("directSelector","."+n));n=f.options=d(!0,{},e.defaults,e.defaultOptions,b);for(name in n)if(name.match(/^\{.+\}$/)){var p=name.replace(/^\{|\}$/g,""),
q=n[name];c(q)?f[p]=function(a,b,c){b=/^(\.|\#)$/.test(b)?b+c:b;var d=function(c){var d=a.element.find(b);c&&(d=d.filter(c));return d};d.selector=b;d.css=function(){var a=d.cssRule;if(!a){var c=l.data("directSelector"),a=h.map(b.split(","),function(a){return c+" "+a}),a=d.cssRule=h.cssRule(a);a.important=!0}return arguments.length?a.css.apply(a,arguments):a};return d}(f,q,p):f[p]=q}var p=n.view,r=f.view;f.view=function(){return r.apply(this,arguments)};k(p||{},function(a,b){f.view[a]=function(b){var c=
g(arguments);h.isBoolean(b)?c=c.slice(1):b=!1;return f.view.apply(f,[b,a].concat(c))}});h.extend(f,n.controller);f.pluginInstances={};f.called="init";f._bind();var s=f.init||h.noop;f.init=function(){f.init=s;result=s.apply(f,arguments);f.trigger("init."+e.fullName.toLowerCase(),[f]);return result};return[l,n].concat(g(arguments).slice(2))},on:function(a){var b=g(arguments),d=this.element,f=b.length;return 2==f?this._binder(d,a,b[1]):3==f&&c(b[1])?this._binder(d,a,b[2],b[1]):this._binder(b[1],a,b[2])},
_bind:function(){var a=this,b=a.constructor,c=b.actions,d=a._bindings=[],f=a.element;k(c||{},function(e,k){if(c.hasOwnProperty(e)){var n=b.actions[e]||b._action(e,a.options);h.isControllerInstance(n.delegate)&&(n.delegate=n.delegate.element);d.push(n.processor(n.delegate||f,n.parts[2],n.parts[1],e,a))}});var e=q(this,"destroy");f.bind("destroyed",e);d.push(function(a){h(a).unbind("destroyed",e)});return d.length},_binder:function(a,b,c,d){"string"==typeof c&&(c=q(this,c));this._bindings.push(d?s(a,
d,b,c):e(a,b,c));return this._bindings.length},_unbind:function(){var a=this.element[0];k(this._bindings,function(b,c){c(a)});this._bindings=[]},trigger:function(a){var b=this.element;if(b){var c=h.Event(a);b.trigger.apply(b,[c].concat(h.makeArray(arguments).slice(1)));return c}},delegate:function(a,b,c,d){"string"==typeof a&&(d=c,c=b,b=a,a=this.element);return this._binder(a,c,d,b)},update:function(a){d(this.options,a);this._unbind();this._bind()},destroy:function(){if(!this._destroyed){var a=this.constructor._fullName;
for(pname in this.pluginInstances)this.removePlugin(pname);this._destroyed=!0;this.element.removeClass(a);this._unbind();delete this._actions;delete this.element.data("controllers")[a];h(this).triggerHandler("destroyed");this.element=h()}},find:function(a){return this.element.find(a)},view:function(){var a=g(arguments),b=a,c=!1,d=this.constructor.component||h,f="",f=this.options.view||{};"boolean"==typeof a[0]&&(c=a[0],b=a.slice(1));if(void 0==(b[0]=f[b[0]]))return c?"":h("");f=d.View.apply(d,b);
return c?f:h(h.parseHTML(h.trim(f)))},getPlugin:function(a){return this.pluginInstances[a]},addSubscriber:function(a){a=h.isArray(a)?a:[a||{}];var b=this,c=this.Class.hostname,d={};d["{"+c+"}"]=b;h.map(a,function(a,f){if(!h.isControllerInstance(a))return!1;if(a.options[c]===this)return a;a[c]=b;return a.update(d)});return a},addPlugin:function(b,c,d){if(b){if(!c&&!d||h.isPlainObject(c))d=c,c=[this.Class.root,this.Class.fullName,h.String.capitalize(b)].join(".");h.isString(c)&&(c=h.getController(c));
var f=h.isControllerInstance(c);if(a(c)||f){d=h.extend(!0,{element:this.element},d,(this.options.plugin||{})[b]||{});f=f?"instance":h.isController(c)?"controller":"function";this.trigger("addPlugin",[b,c,d,f]);var e=this.Class.hostname;d["{"+e+"}"]=this;var k;switch(f){case "instance":k=c;c.update(d);c[e]=this;break;case "controller":k=d.element.addController(c,d);break;case "function":k=c(this,d)}if(k)return this.pluginInstances[b]=k,"function"!==f&&(c={},c["{"+b+"}"]=k,this.update(c)),this.trigger("registerPlugin",
[b,k,d,f]),k}}},removePlugin:function(a){var b=this.getPlugin(a);if(b)return this.trigger("removePlugin",[a,b]),delete this.pluginInstances[a],h.isFunction(b.destroy)?b.destroy():null},invokePlugin:function(a,b,c){var d=this.getPlugin(a);if(d&&h.isFunction(d[b]))return this.trigger("invokePlugin",[a,d,c]),d[b].apply(this,c)},getMessageGroup:function(){var a=h.isFunction(this.messageGroup)?this.messageGroup():this.element.find("[data-message-group]");1>a.length&&(a=h("<div data-message-group></div>").prependTo(this.element));
return a},setMessage:function(a,b){var c={type:"warning",message:"",parent:this.getMessageGroup(),element:h('<div class="alert fade in"><button type="button" class="close" data-foundry-dismiss="alert">\u00d7</button></div>')},d={},d=h.isDeferred(a),d=h.isPlainObject(a)&&!d?a:{message:a,type:b||"warning"},f=h.extend({},c,d),e=f.element;if(h.isDeferred(a)){var k=arguments.callee,n=this;a.done(function(a,b){f.message=a;f.type=b||"warning";k.call(n,f);e.show()})}else e.addClass("alert-"+f.type).append(f.message),
1>h("html").has(e).length&&e.appendTo(f.parent);return e},clearMessage:function(){this.getMessageGroup().empty()},_set_called:!0});var R=h.Controller.Class.processors;w=function(a,b,c,d,f){d=q(f,d);return c?s(a,c,b,d):e(a,b,d)};k("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){R[b]=w});var N=function(b){c(b)&&(b=b.replace("$.Controller",x),b=n(b)||
n(x+"."+b));if(a(b)&&b.hasOwnProperty("_fullName"))return b},$=function(a){return h.map(a,function(a){return b(a)?$(a):N(a)})};h.getController=N;h.isController=function(a){return!!N(a)};h.isControllerInstance=function(b){return b&&b.constructor&&a(b.constructor)&&b.constructor.hasOwnProperty("_fullName")};h.isControllerOf=function(a,c){if(!c)return!1;b(c)||(c=[c]);for(var d=0;d<c.length;d++){var f=N(c[d]);if(a instanceof f)return!0}return!1};h.fn.extend({controllers:function(){var a=$(g(arguments)),
b=[];this.each(function(){var c=h.data(this,"controllers");k(c||{},function(d,f){c.hasOwnProperty(d)&&(a.length&&!h.isControllerOf(f,a)||b.push(f))})});return b},controller:function(a,b){if(void 0===b)return this.controllers(a)[0];this.addController.apply(this,arguments);return this},hasController:function(a){return(a=(N(a)||{})._fullName||(c(a)?t(a.replace("$.Controller",x)):""))?(h(this).data("controllers")||{}).hasOwnProperty(a):!1},addController:function(b,c,d){var f=N(b);if(f){var e=[];this.each(function(){if(1===
this.nodeType&&"SCRIPT"!=this.nodeName){var k=h(this).controller(b);k||(k=new f(this,c),a(d)&&d.apply(k,[h(this),k]));e.push(k)}});return 1<e.length?e:e[0]}},removeController:function(a){this.each(function(){for(var b=h(this).controllers(a);b.length;)b.shift().destroy()});return this},addControllerWhenAvailable:function(a){var b=this,d=arguments,f=h.Deferred();h.isController(a)&&(a=a.fullName);if(!c(a))return f.reject();h.module("$:/Controllers/"+a).pipe(function(){var a=b.addController.apply(b,d);
f.resolveWith(a,[b,a])},f.reject,f.fail);return f},implement:function(){this.addController.apply(this,arguments);return this}})})();(function(){h.Controller.Class.processors.route=function(e,g,b,a,c){h.route(b||"");var d,f=function(f,e,g){h.route.attr("route")!==(b||"")||void 0!==f.batchNum&&f.batchNum===d||(d=f.batchNum,f=h.route.attrs(),delete f.route,c[a](f))};h.route.bind("change",f);return function(){h.route.unbind("change",f)}}})();(function(){var e=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,
"_")},g=h.makeArray,b=1,a=h.View=function(a,b,c,e){"function"===typeof c&&(e=c,c=void 0);var n=f(b);if(n.length){var l=h.Deferred();n.push(h.ajax({url:a,dataType:"view",async:!0}));h.when.apply(h,n).then(function(a){var f=g(arguments),n=f.pop()[0];if(d(b))b=k(a);else for(var p in b)d(b[p])&&(b[p]=k(f.shift()));f=n(b,c);l.resolve(f);e&&e(f)});return l.promise()}var p,n="function"===typeof e,l=h.ajax({url:a,dataType:"view",async:n});n?(p=l,l.done(function(a){e(a(b,c))})):l.done(function(a){p=a(b,c)});
return p},c=function(a,b){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+b;},d=function(a){return a&&h.isFunction(a.always)},f=function(a){var b=[];if(d(a))return[a];for(var c in a)d(a[c])&&b.push(a[c]);return b},k=function(a){return h.isArray(a)&&3===a.length&&"success"===a[1]?a[0]:a};h.ajaxTransport("view",function(b,d){var f=d.url,k=f.match(/\.[\w\d]+$/),n,g,l,p,q=function(b){b=n.renderer(l,b);a.cache&&(a.cached[l]=b);return{view:b}};if(g=document.getElementById(f))k=
"."+g.type.match(/\/(x\-)?(.+)/)[2];k||(k=a.ext,f+=a.ext);l=e(f);if(f.match(/^\/\//))var r=f.substr(2),f="undefined"===typeof steal?f="/"+r:steal.root.mapJoin(r)+"";n=a.types[k];var s=h.template()[d.url];return{send:function(b,e){if(s)return n=a.types["."+s.type],e(200,"success",q(s.content));if(a.cached[l])return e(200,"success",{view:a.cached[l]});g?e(200,"success",q(g.innerHTML)):p=h.ajax({async:d.async,url:f,dataType:"text",error:function(){c("",f);e(404)},success:function(a){c(a,f);e(200,"success",
q(a))}})},abort:function(){p&&p.abort()}}});h.extend(a,{hookups:{},hookup:function(c){var d=++b;a.hookups[d]=c;return d},cached:{},cache:!0,register:function(b){this.types["."+b.suffix]=b;window.steal&&steal.type(b.suffix+" view js",function(b,c,d){d=a.types["."+b.type];var f=e(b.rootSrc+"");b.text=d.script(f,b.text);c()})},types:{},ext:".ejs",registerScript:function(b,c,d){return"$.View.preload('"+c+"',"+a.types["."+b].script(c,d)+");"},preload:function(b,c){a.cached[b]=function(a,b){return c.call(a,
a,b)}}});window.steal&&steal.type("view js",function(b,c,d){d=a.types["."+b.type];var f=e(b.rootSrc+"");b.text="steal('"+(d.plugin||"jquery/view/"+b.type)+"').then(function($){$.View.preload('"+f+"',"+b.text+");\n})";c()});var n,p,s,q,u,r,t,l={val:!0,text:!0};n=function(b){var c=h.fn[b];h.fn[b]=function(){var f=g(arguments),e,k,n=this;if(d(f[0]))return f[0].done(function(a){p.call(n,[a],c)}),this;if(s(f)){if(e=r(f))return k=f[e],f[e]=function(a){p.call(n,[a],c);k.call(n,a)},a.apply(a,f),this;f=a.apply(a,
f);if(d(f))return f.done(function(a){p.call(n,[a],c)}),this;f=[f]}return l[b]?c.apply(this,f):p.call(this,f,c)}};p=function(b,c){var d,f;for(d in a.hookups)break;d&&b[0]&&q(b[0])&&(f=a.hookups,a.hookups={},b[0]=h(b[0]));d=c.apply(this,b);f&&t(b[0],f);return d};s=function(a){var b=typeof a[1];return"string"==typeof a[0]&&("object"==b||"function"==b)&&!u(a[1])};u=function(a){return a.nodeType||a.jquery};q=function(a){return u(a)?!0:"string"===typeof a?(a=h.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-
1,1)&&3<=a.length):!1};r=function(a){return"function"===typeof a[3]?3:"function"===typeof a[2]&&2};t=function(b,c){var d,f,e=0,k,n;b=b.filter(function(){return 3!=this.nodeType});d=b.add("[data-view-id]",b);for(f=d.length;e<f;e++)d[e].getAttribute&&(k=d[e].getAttribute("data-view-id"))&&(n=c[k])&&(n(d[e],k),delete c[k],d[e].removeAttribute("data-view-id"));h.extend(a.hookups,c)};h.fn.hookup=function(){var b=a.hookups;a.hookups={};t(this,b);return this};h.each("prepend append after before text html replaceWith val".split(" "),
function(a,b){n(b)})})();(function(){var e=function(a){eval(a)},g=h.String.rsplit,b=h.extend,a=h.isArray,c=/\r\n/g,d=/\r/g,f=/\n/g,k=/\n/,n=/\\/g,p=/"/g,s=/'/g,q=/\t/g,u=/\{/g,r=/\}/g,t=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,l=function(a){return a.replace(n,"\\\\").replace(f,"\\n").replace(p,'\\"').replace(q,"\\t")},v=h.View,z=function(a){var b=a.match(u);a=a.match(r);return(b?b.length:0)-(a?a.length:0)},A=function(a){if(this.constructor!=A){var c=new A(a);return function(a,b){return c.render(a,b)}}"function"==
typeof a?this.template={fn:a}:(b(this,A.options,a),this.template=x(this.text,this.type,this.name))};h&&(h.EJS=A);A.prototype.render=function(a,b){a=a||{};this._extra_helpers=b;var c=new A.Helpers(a,b||{});return this.template.fn.call(a,a,c)};b(A,{text:function(b){if("string"==typeof b)return b;if(null===b||void 0===b)return"";var c=b.hookup&&function(a,c){b.hookup.call(b,a,c)}||"function"==typeof b&&b||a(b)&&function(a,c){for(var d=0;d<b.length;d++)b[d].hookup?b[d].hookup(a,c):b[d](a,c)};return c?
"data-view-id='"+v.hookup(c)+"'":b.toString?b.toString():""},clean:function(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(p,"&#34;").replace(s,"&#39;"):"number"==typeof a?a:A.text(a)},options:{type:"[",ext:".ejs"}});var w=function(a,b,c){b=g(b,k);for(var d=0;d<b.length;d++){var f=a,e=b[d],n=c;f.lines++;for(var e=g(e,f.splitter),l=void 0,p=0;p<e.length;p++)l=e[p],null!==l&&n(l,f)}},B=function(a,c){var d={};b(d,{left:a+"%",right:"%"+c,dLeft:a+
"%%",dRight:"%%"+c,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",cleanLeft:a+"%~",scan:w,lines:0});d.splitter=RegExp("("+[d.dLeft,d.dRight,d.eeLeft,d.eLeft,d.cmnt,d.left,d.right+"\n",d.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return d},x=function(a,b,f){a=a.replace(c,"\n").replace(d,"\n");b=b||"[";var k=new A.Buffer(["var ___v1ew = [];"],[]),n="",g=null,p=[];w(B(b,"["===b?"]":">"),a||"",function(a,b){var c;if(null===g)switch(a){case "\n":n+="\n";k.push("___v1ew.push(",'"',
l(n),'");');k.cr();n="";break;case b.left:case b.eLeft:case b.eeLeft:case b.cmnt:g=a;0<n.length&&k.push("___v1ew.push(",'"',l(n),'");');n="";break;case b.dLeft:n+=b.left;break;default:n+=a}else switch(a){case b.right:switch(g){case b.left:c=z(n);var d=p.length&&-1==c?p.pop():";";"));"===d&&k.push("return ___v1ew.join('')");k.push(n,d);1===c&&p.push(";");break;case b.eLeft:(c=z(n))&&p.push("));");t.test(n)&&(d=n.match(t),n="function(__){var "+d[1]+"=$(__);"+d[2]+"}");k.push("___v1ew.push(",h.globalNamespace+
".EJS.clean(",n,c?"var ___v1ew = [];":"));");break;case b.eeLeft:(c=z(n))&&p.push("));"),k.push("___v1ew.push(",h.globalNamespace+".EJS.text(",n,c?"var ___v1ew = [];":"));")}g=null;n="";break;case b.dRight:n+=b.right;break;default:n+=a}});0<n.length&&k.push("___v1ew.push(",'"',l(n)+'");');a={out:"try { with(_VIEW) { with (_CONTEXT) {"+k.close()+" return ___v1ew.join('')}}}catch(e){e.lineNumber=null;throw e;}"};e.call(a,"this.fn = (function(_CONTEXT,_VIEW){ var $ = "+h.globalNamespace+";"+a.out+"});");
return a};A.Buffer=function(a,b){this.line=[];this.script=[];this.post=b;this.push.apply(this,a)};A.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n");this.line=[]},close:function(){0<this.line.length&&(this.script.push(this.line.join("")),this.line=[]);this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};A.Helpers=function(a,c){this._data=a;this._extras=c;b(this,c)};
A.Helpers.prototype={plugin:function(a){var b=h.makeArray(arguments),c=b.shift();return function(a){a=h(a);a[c].apply(a,b)}},view:function(a,b,c){c=c||this._extras;b=b||this._data;return v(a,b,c)}};v.register({suffix:"ejs",script:function(a,b){return h.globalNamespace+".EJS(function(_CONTEXT,_VIEW) { "+(new A({text:b,name:a})).template.out+" })"},renderer:function(a,b){return A({text:b,name:a})}})})();(function(){var e=h.isArray,g=function(a){return"object"===typeof a&&null!==a&&a},b=h.makeArray,
a=h.each,c=function(a,b,c){a instanceof h.Observe?d([a],c._namespace):a=e(a)?new h.Observe.List(a):new h.Observe(a);a.bind("change"+c._namespace,function(d,f){var e=h.makeArray(arguments);d=e.shift();e[0]="*"===b?c.indexOf(a)+"."+e[0]:b+"."+e[0];h.event.trigger(d,e,c)});return a},d=function(a,b){for(var c,d=0;d<a.length;d++)(c=a[d])&&c.unbind&&c.unbind("change"+b)},f=0,k=null,n=function(){if(!k)return k=[],!0},p=function(a,b,c){if(!a._init)if(k)k.push({t:a,ev:b,args:c});else return h.event.trigger(b,
c,a,!0)},s=0,q=function(){var a=k.length,b=k.slice(0),c;k=null;s++;for(var d=0;d<a;d++)c=b[d],h.event.trigger({type:c.ev,batchNum:s},c.args,c.t)},u=function(a,b,c){a.each(function(a,d){c[a]=g(d)&&"function"==typeof d[b]?d[b]():d});return c};h.Class(h.globalNamespace+".Observe",{init:function(a){this._data={};this._namespace=".observe"+ ++f;this._init=!0;this.attrs(a);delete this._init},attr:function(a,b){if(void 0===b)return this._get(a);this._set(a,b);return this},each:function(){return a.apply(null,
[this.__get()].concat(b(arguments)))},removeAttr:function(a){a=e(a)?a:a.split(".");var b=a.shift(),c=this._data[b];if(a.length)return c.removeAttr(a);delete this._data[b];p(this,"change",[b,"remove",void 0,c]);return c},_get:function(a){a=e(a)?a:(""+a).split(".");var b=this.__get(a.shift());return a.length?b?b._get(a):void 0:b},__get:function(a){return a?this._data[a]:this._data},_set:function(a,b){var f=e(a)?a:(""+a).split("."),k=f.shift(),n=this.__get(k);if(g(n)&&f.length)n._set(f,b);else{if(f.length)throw"jQuery.Observe: set a property on an object that does not exist";
b!==n&&(f=this.__get().hasOwnProperty(k)?"set":"add",this.__set(k,g(b)?c(b,k,this):b),p(this,"change",[k,f,b,n]),n&&d([n],this._namespace))}},__set:function(a,b){this._data[a]=b;a in this.constructor.prototype||(this[a]=b)},bind:function(a,b){h.fn.bind.apply(h([this]),arguments);return this},unbind:function(a,b){h.fn.unbind.apply(h([this]),arguments);return this},serialize:function(){return u(this,"serialize",{})},attrs:function(a,b){if(void 0===a)return u(this,"attrs",{});a=h.extend(!0,{},a);var c,
d=n();for(c in this._data){var f=this._data[c],e=a[c];void 0===e?b&&this.removeAttr(c):(g(f)&&g(e)?f.attrs(e,b):f!=e&&this._set(c,e),delete a[c])}for(c in a)e=a[c],this._set(c,e);d&&q()}});var r=h.Observe(h.globalNamespace+".Observe.List",{init:function(a,c){this.length=0;this._namespace=".list"+ ++f;this._init=!0;this.bind("change",this.proxy("_changes"));this.push.apply(this,b(a||[]));h.extend(this,c);this.comparator&&this.sort();delete this._init},_changes:function(a,b,c,d,f){if(this.comparator&&
/^\d+./.test(b)){var e=+/^\d+/.exec(b)[0],k=this[e],n=this.sortedIndex(k);if(n!==e){[].splice.call(this,e,1);[].splice.call(this,n,0,k);p(this,"move",[k,n,e]);a.stopImmediatePropagation();p(this,"change",[b.replace(/^\d+/,n),c,d,f]);return}}-1===b.indexOf(".")&&("add"===c?p(this,c,[d,+b]):"remove"===c&&p(this,c,[f,+b]))},sortedIndex:function(a){var b=a.attr(this.comparator),c=0,d;for(d=0;d<this.length;d++)if(a===this[d])c=-1;else if(b<=this[d].attr(this.comparator))break;return d+c},__get:function(a){return a?
this[a]:this},__set:function(a,b){this[a]=b},serialize:function(){return u(this,"serialize",[])},splice:function(a,f){var e=b(arguments),k;for(k=2;k<e.length;k++){var n=e[k];g(n)&&(e[k]=c(n,"*",this))}void 0===f&&(f=e[1]=this.length-a);k=[].splice.apply(this,e);0<f&&(p(this,"change",[""+a,"remove",void 0,k]),d(k,this._namespace));2<e.length&&p(this,"change",[""+a,"add",e.slice(2),k]);return k},attrs:function(a,b){if(void 0===a)return u(this,"attrs",[]);a=a.slice(0);for(var c=Math.min(a.length,this.length),
d=n(),f=0;f<c;f++){var e=this[f],k=a[f];g(e)&&g(k)?e.attrs(k,b):e!=k&&this._set(f,k)}a.length>this.length?this.push(a.slice(this.length)):a.length<this.length&&b&&this.splice(a.length);d&&q()},sort:function(a,b){var c=this.comparator;[].sort.apply(this,c?[function(a,b){a=a[c];b=b[c];return a===b?0:a<b?-1:1}]:[]);!b&&p(this,"reset")}});a({push:"length",unshift:0},function(a,d){r.prototype[a]=function(){for(var f=arguments[0]&&h.isArray(arguments[0])?arguments[0]:b(arguments),e=d?this.length:0,k=0;k<
f.length;k++){var n=f[k];g(n)&&(f[k]=c(n,"*",this))}if(1==f.length&&this.comparator)return e=this.sortedIndex(f[0]),this.splice(e,0,f[0]),this.length;k=[][a].apply(this,f);this.comparator&&1<f.length?(this.sort(null,!0),p(this,"reset",[f])):p(this,"change",[""+e,"add",f,void 0]);return k}});a({pop:"length",shift:0},function(a,c){r.prototype[a]=function(){var d=arguments[0]&&h.isArray(arguments[0])?arguments[0]:b(arguments),f=c&&this.length?this.length-1:0,d=[][a].apply(this,d);p(this,"change",[""+
f,"remove",void 0,[d]]);d&&d.unbind&&d.unbind("change"+this._namespace);return d}});r.prototype.indexOf=[].indexOf||function(a){return h.inArray(a,this)};h.O=function(a,b){return e(a)||a instanceof h.Observe.List?new h.Observe.List(a,b):new h.Observe(a,b)}})();(function(){var e=/\:([\w\.]+)/g,g=/^(?:&[^=]+=[^&]*)+/,b=function(a){var b=[];k(a,function(a,c){"className"===a&&(a="class");c&&b.push(a.replace(/"/g,"&#34;").replace(/'/g,"&#39;"),'="',c.replace(/"/g,"&#34;").replace(/'/g,"&#39;"),'" ')});
return b.join("")},a=!0,c=window.location,d=encodeURIComponent,f=decodeURIComponent,k=h.each,n=h.extend;h.route=function(a,b){var c=[],d=a.replace(e,function(a,b){c.push(b);return"([^\\/\\&]*)"});h.route.routes[a]={test:RegExp("^"+d+"($|&)"),route:a,names:c,defaults:b||{},length:a.split("/").length};return h.route};n(h.route,{param:function(a){var b,c=0,f,g=a.route;delete a.route;g&&(b=h.route.routes[g])||k(h.route.routes,function(d,e){a:{for(var k=0,n=0;n<e.names.length;n++){if(!a.hasOwnProperty(e.names[n])){f=
-1;break a}k++}f=k}f>c&&(b=e,c=f)});if(b){var p=n({},a),g=b.route.replace(e,function(c,f){delete p[f];return a[f]===b.defaults[f]?"":d(a[f])}),s;k(b.defaults,function(a,b){p[a]===b&&delete p[a]});s=h.param(p);return g+(s?"&"+s:"")}return h.isEmptyObject(a)?"":"&"+h.param(a)},deparam:function(a){var b={length:-1};k(h.route.routes,function(c,d){d.test.test(a)&&d.length>b.length&&(b=d)});if(-1<b.length){var c=a.match(b.test),d=c.shift(),e=(d=a.substr(d.length-("&"===c[c.length-1]?1:0)))&&g.test(d)?h.String.deparam(d.slice(1)):
{},e=n(!0,{},b.defaults,e);k(c,function(a,c){c&&"&"!==c&&(e[b.names[a]]=f(c))});e.route=b.route;return e}"&"!==a.charAt(0)&&(a="&"+a);return g.test(a)?h.String.deparam(a.slice(1)):{}},data:new h.Observe({}),routes:{},ready:function(b){!1===b&&(a=!1);!0!==b&&!0!==a||s();return h.route},url:function(a,b){return b?"#!"+h.route.param(n({},p,a)):"#!"+h.route.param(a)},link:function(a,c,d,f){return"<a "+b(n({href:h.route.url(c,f)},d))+">"+a+"</a>"},current:function(a){return c.hash=="#!"+h.route.param(a)}});
h(function(){h.route.ready()});k("bind unbind delegate undelegate attr attrs serialize removeAttr".split(" "),function(a,b){h.route[b]=function(){return h.route.data[b].apply(h.route.data,arguments)}});var p,s=function(){var a="!"===c.hash.substr(1,1)?c.hash.slice(2):c.hash.slice(1);p=h.route.deparam(a);h.route.attrs(p,!0)};h(window).bind("hashchange",s);h.route.bind("change",function(a){var b;return function(){var c=arguments,d=this;clearTimeout(b);b=setTimeout(function(){a.apply(d,c)},1)}}(function(){c.hash=
"#!"+h.route.param(h.route.serialize())}))})()});FD31.plugin("joomla",function(h){var e={squeezebox:function(){return g.isJoomla15?window.parent.document.getElementById("sbox-window"):window.parent.SqueezeBox}},g=h.Joomla=function(a,b){if(h.isFunction(b))g.isJoomla15?window[a]=b:window.Joomla[a]=b;else if(a=e[a]||(g.isJoomla15?window[a]:window.Joomla[a]),h.isFunction(a))return a.apply(window,b)},b=parseFloat(h.joomla.version);g.isJoomla15=1.5>=b;g.isJoomla25=1.6<=b&&2.5>=b;g.isJoomla30=3<=b});
FD31.plugin("module",function(h){var e=function(e){var b=this,a=h.Callbacks("once memory");h.extend(this,h.Deferred(),{name:e,status:"pending",ready:function(c){!0===c&&a.fire.call(b,h);h.isFunction(c)&&a.add(c)}});b.then(function(){b.exports=this;b.status="resolved"},function(){b.status="rejected"});var c=b.done;b.done=function(){b.required=!0;var a=b.factory;a&&"ready"===b.status&&a.call(b,h);b.done=c;return b.done.apply(this,arguments)}};h.module=function(){var g=function(b,a){var c;if("string"===
typeof b){c=g.get(b);if(void 0===a)return c;if(h.isFunction(a)){if("resolved"==c.status)return c;c.factory=a;c.status="ready";c.ready("true");c.required&&(c.status="executing",a.call(c,h));return c}}h.isArray(b)&&(c=h.map(b,function(a){var b=g.get(h.isString(a)?a:a.name);if(b&&("pending"===b.status&&(b.status="ready"),h.isPlainObject(a)))return a}),h.each(c,function(a,b){g(b.name,b.factory)}))};h.extend(g,{registry:{},get:function(b){if(b)return h.isModule(b)&&(b=b.replace("module://","")),g.registry[b]||
g.create(b)},create:function(b){return g.registry[b]=new e(b)},remove:function(b){delete g.registry[b]}});return g}();h.isModule=function(g){return h.isString(g)?!!g.match("module://"):g&&g instanceof e}});
FD31.plugin("script",function(h){h.script=function(){var e=function(b){b=h.extend(this,b);b.manager=h.Deferred();h.extend(b,b.manager.promise());b.load()},g=document.getElementsByTagName("head")[0];document.getElementsByTagName("base");h.extend(e.prototype,{timeout:7E3,retry:3,retryCount:1,type:"text/javascript",async:!1,charset:"UTF-8",verbose:!1,insert:function(){g.appendChild(this.node)},remove:function(){var b=this.node;setTimeout(function(){b.onload=b.onerror=b.onreadystatechange=null;try{g.removeChild(b)}catch(a){}},
1E3)},load:function(){var b;this.endTime=void 0;this.startTime=new Date;this.node=b=document.createElement("script");this.insert();this._ready=h.proxy(this.ready,this);this._error=h.proxy(this.error,this);b.attachEvent&&!h.browser.opera?(b.attachEvent("onreadystatechange",this._ready),b.attachEvent("onerror",this._error)):(b.addEventListener("load",this._ready,!1),b.addEventListener("error",this._error,!1));h(b).attr({type:this.type,async:this.async,charset:this.charset,src:this.url});this.monitor()},
monitor:function(){var b=this;b.retryCount>b.retry?b._error():setTimeout(function(){"resolved"!==b.state()&&(b.verbose&&console.warn("$.script: Load timeout. [Retry: "+b.retryCount+"]",b),b.remove(),b.retryCount++,b.load())},b.timeout*b.retryCount)},ready:function(b){var a=this.node;if("load"===b.type||/loaded|complete/.test(a.readyState))this.complete.call(this,b),this.manager.resolve(this)},error:function(b){this.verbose&&console.error("$.script: Unable to load ",this);this.complete.call(this,b);
this.remove();this.manager.reject(this)},complete:function(b){b=this.node;this.endTime=new Date;b.detachEvent&&!h.browser.opera?(b.detachEvent("onreadystatechange",this._ready),b.detachEvent("onerror",this._error)):(b.removeEventListener("load",this._ready,!1),b.removeEventListener("error",this._error,!1))}});return function(b){if(void 0!==b)return"string"===typeof b&&(b={url:b}),new e(b)}}()});
FD31.plugin("stylesheet",function(h){var e=document.getElementsByTagName("head")[0],g=document.styleSheets,b=document.createStyleSheet;h.stylesheet=function(){var a=function(b,d){var f={};h.extend(f,a.defaultOptions,h.isPlainObject(b)?b:{url:b,attr:d||{}});return void 0===f.url?a.create(f):a.load(f)};h.extend(a,{defaultOptions:{type:"text/css",rel:"stylesheet",media:"all",title:"",forceInject:!1,xhr:!1},setup:function(b){h.extend(a.defaultOptions,b)},availability:function(){var b={},d=h('link[rel*="stylesheet"]');
styles=h("style");b.groups=31-d.length-styles.length;b.slots=31*b.groups;a.currentGroup&&(b.slots+=31-a.currentGroup.imports.length);return b},get:function(a){for(var b=0;b<g.length;b++){var f=g[b];if((f.ownerNode||f.owningElement)==a)return f}},create:function(a){var d,f;f=g.length;if(b){if(31<=f)return;d=document.createStyleSheet();f=d.ownerNode||d.owningElement}else f=document.createElement("style"),e.appendChild(f);h.extend(f,{type:a.type,title:a.title,media:a.media,rel:a.rel});a=a.content;void 0!==
a&&(b?d.cssText=a:f.appendChild(document.createTextNode(a)));return f},nextAvailable:function(c){var d,f=g.length;if(f)for(;f--;0>f)if(d=g[f],b&&4095<=(d.cssRules||d.rules).length)d=void 0;else break;return d.ownerNode||d.owningElement||(c?a():void 0)},load:function(b){return h.browser.msie&&!b.forceInject?a._import(b):h("<link>").attr({href:b.url,type:b.type,rel:b.rel,media:b.media}).appendTo("head")[0]},_import:function(b){var d;if(void 0===a.currentGroup){var f;try{f=document.createStyleSheet(),
f.media="all",f.title="jquery_stylesheet"}catch(e){d=!0,b.verbose&&console.error("There is not enough slots left to create a new stylesheet group.")}if(d)return!1;a.currentGroup=f}try{a.currentGroup.addImport(b.url)}catch(n){d=!0,b.verbose&&console.info("Import slots exceeded. Creating a new stylesheet group.")}return d?(a.currentGroup=void 0,a._import(b)):!0}});return a}();(function(){var a=function(a,b,c){h.extend(this,{id:h.uid(),style:c,selectors:[],preRule:"",rules:{},legacy:8===h.IE,important:!1});
a&&this.set(a,b)};h.extend(a.prototype,{set:function(a,b){h.isString(a)?this.selectors=a.split(","):this.selectors=a;h.isString(b)?(this.preRule=b+"\n",this.rules={}):(this.preRule="",this.rules=b||this.rules);this.update();return this},cssText:function(){return this.selectors.join(",")+"{"+this.ruleText()+"}\n"},ruleText:function(){var a=this.important;return this.preRule+(this.legacy?"-rule-id:"+this.id+";":"")+h.map(this.rules,function(b,c){h.isNumeric(b)&&!h.cssNumber[c]&&(b+="px");a&&(b+=" !important");
return c+":"+b}).join(";")},update:function(){if(this.legacy)return this.updateLegacy();var a=this.cssText();void 0===this.textNode?(this.textNode=document.createTextNode(a),this.style.appendChild(this.textNode)):this.textNode.nodeValue=a;return this},updateLegacy:function(){this.removeLegacy();for(var a=h.stylesheet.get(this.style),b=this.selectors,c=this.ruleText(),e=0;e<b.length;e++)a.addRule(b[e],c);return this},remove:function(){if(this.legacy)return this.removeLegacy();void 0!==this.textNode&&
(this.style.removeChild(this.textNode),delete this.textNode);return this},removeLegacy:function(){for(var a=h.stylesheet.get(this.style),b=a.rules,c=0;c<b.length;c++)null!==b[c].cssText.match(this.id)&&a.removeRule(c);return this},css:function(a,b){if(h.isString(a)&&void 0===b)return this.rules[a];h.isPlainObject(a)?h.extend(this.rules,a):this.rules[a]=b;this.update();return this}});var b=h.cssRule=function(d,f,e){if(e=e||b.style||h.stylesheet.nextAvailable(!0))return new a(d,f,e)};b.style=h.stylesheet()})();
(function(){h.cssUrl=function(a){return'url("'+encodeURI(a)+'")'}})()});
FD31.plugin("language",function(h){h.sprintf=function(){var e=arguments,b=0,a=function(a,b,c,d){c||(c=" ");b=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+b:b+a},c=function(b,c,d,e,g,h){var u=e-b.length;0<u&&(b=d||!g?a(b,e,h,d):b.slice(0,c.length)+a("",u,"0",!0)+b.slice(c.length));return b},d=function(b,d,e,g,h,q,u){b>>>=0;e=e&&b&&{2:"0b",8:"0",16:"0x"}[d]||"";b=e+a(b.toString(d),q||0,"0",!1);return c(b,e,g,h,u)};return e[b++].replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,
function(f,k,n,p,h,q,u){var r,t;if("%%"==f)return"%";var l=!1;t="";var v=h=!1;r=" ";for(var z=n.length,A=0;n&&A<z;A++)switch(n.charAt(A)){case " ":t=" ";break;case "+":t="+";break;case "-":l=!0;break;case "'":r=n.charAt(A+1);break;case "0":h=!0;break;case "#":v=!0}p=p?"*"==p?+e[b++]:"*"==p.charAt(0)?+e[p.slice(1,-1)]:+p:0;0>p&&(p=-p,l=!0);if(!isFinite(p))throw Error("sprintf: (minimum-)width must be finite");q=q?"*"==q?+e[b++]:"*"==q.charAt(0)?+e[q.slice(1,-1)]:+q:-1<"fFeE".indexOf(u)?6:"d"==u?0:
void 0;k=k?e[k.slice(0,-1)]:e[b++];switch(u){case "s":return u=String(k),null!=q&&(u=u.slice(0,q)),c(u,"",l,p,h,r);case "c":return u=String.fromCharCode(+k),null!=q&&(u=u.slice(0,q)),c(u,"",l,p,h,void 0);case "b":return d(k,2,v,l,p,q,h);case "o":return d(k,8,v,l,p,q,h);case "x":return d(k,16,v,l,p,q,h);case "X":return d(k,16,v,l,p,q,h).toUpperCase();case "u":return d(k,10,v,l,p,q,h);case "i":case "d":return r=+k|0,f=0>r?"-":t,k=f+a(String(Math.abs(r)),q,"0",!1),c(k,f,l,p,h);case "e":case "E":case "f":case "F":case "g":case "G":return r=
+k,f=0>r?"-":t,t=["toExponential","toFixed","toPrecision"]["efg".indexOf(u.toLowerCase())],u=["toString","toUpperCase"]["eEfFgG".indexOf(u)%2],k=f+Math.abs(r)[t](q),c(k,f,l,p,h)[u]();default:return f}})};var e=h.language=h.JText=function(g){return 2>arguments.length?e._(g):e.sprintf.apply(null,arguments)};h.extend(e,{lang:{},add:function(g,b){h.isPlainObject(g)?h.extend(e.lang,g):e.lang[g]=b},remove:function(g){delete e.lang[g]},_:function(g){return e.lang[g]||""},sprintf:function(){arguments[0]=
e.lang[arguments[0]];return h.sprintf.apply(null,arguments)}})});FD31.plugin("template",function(h){h.template=function(){var e={content:"",type:"ejs"},g=function(b,a){if(void 0===b)return g.templates;var c;if("string"==typeof a)return c=h.isPlainObject(a)?a:h.extend({},e,{name:b,content:a}),g.templates[b]=c;c=g.templates[b]||{};return c.content||""};h.extend(g,{templates:{},remove:function(b){delete g.templates[b]}});return g}()});
FD31.plugin("require",function(h){h.require=function(){var e=function(a){return h.uri(a).setAnchor("").setQuery("").toPath("../").toString()},g=function(b){b=new a(b);return g.batches[b.id]=b};h.extend(g,{defaultOptions:{path:function(){var a=h.path+"/scripts/"||h("[require-path]").attr("require-path")||e(h("script:last").attr("src"))||e(window.location.href);/^(\/|\.)/.test(a)&&(a=h.uri(window.location.href).toPath(a).toString());return a}(),timeout:1E4,retry:3,verbose:"development"==h.environment},
setup:function(a){h.extend(g.defaultOptions,a)},batches:{},status:function(a){h.each(g.batches,function(b,f){var e={pending:0,resolved:0,rejected:0,ready:0,total:0},n=[];h.each(f.tasks,function(a,b){state=b.module&&"ready"==b.module.status?"ready":b.state();e[state]++;e.total++;n.push({state:state,content:"["+state+"] "+b.name})});var g=f.id+": "+f.state()+" ["+e.resolved+"/"+e.total+"]";a&&1>e[a]||(h.IE?(console.log('$.require.batches["'+f.id+'"]'),h.each(n,function(a,b){console.log(b.content)}),
console.log("")):(console.groupCollapsed(g),console.log('$.require.batches["'+f.id+'"]',f),h.each(n,function(b,d){var f=d.state,e=d.content;if(!a||f==a)switch(f){case "pending":console.warn(e);break;case "rejected":console.error(e);break;default:console.info(e)}}),console.groupEnd(g)))});return"$.require.status(pending|resolved|rejected|ready);"},loaders:{},addLoader:function(b,d){g[b]=d;a.prototype[b]=function(){this.autoFinalize();d.apply(this,arguments);return this};g.loaders[b]=g[b]=d},removeLoader:function(b){delete a.prototype[b];
delete g[b]}});var b=0,a=function(a){var d=h.Callbacks("once memory"),f=!1;return h.extend(this,{id:++b,tasks:[],options:h.extend({},g.defaultOptions,a),autoFinalizeDuration:300,finalized:!1,required:function(a){!0===a&&(f=d.fire());h.isFunction(a)&&d.add(a);return f}})};h.extend(a.prototype,{addTask:function(a){h.isDeferred(a)&&!this.finalized&&(this.tasks.push(a),a.batch=this)},autoFinalize:function(){var a=this,b=a.autoFinalizeDuration;!1!==b&&(clearTimeout(a.autoFinalizeTimer),a.autoFinalizeTimer=
setTimeout(function(){a.finalize()},b))},finalize:function(){var a=this;if(!a.finalized){a.finalized=!0;var b=a.manager=h.when.apply(null,a.tasks),f=b.promise(),e=h.Callbacks();h.extend(a,f,{progress:e.add,notify:e.fire,done:function(){a.required(!0);a.done=f.done;return a.done.apply(a,arguments)}});var n=a.options.verbose;b.progress(function(a,b){n&&"rejected"==a&&console.warn("Require: Task "+b.name+" failed to load.",b)}).fail(function(){n&&console.warn("Require: Batch "+a.id+" failed.",a)});setTimeout(function(){h.each(a.tasks,
function(b,d){d.then(function(){a.notify("resolved",d)},function(){a.notify("rejected",d)},function(){a.notify("progress",d)})})},1)}},expand:function(a,b){a=h.makeArray(a);var f=b||{},e=[];h.isPlainObject(a[0])?(f=h.extend(a[0],b),e=a.slice(1)):e=a;return{options:f,names:e}}});h.each(["done","fail","progress","always","then"],function(b,d){a.prototype[d]=function(){this.finalize();return this[d].apply(this,arguments)}});return g}();h.require.addLoader("script",function(){var e=h.uri(h.indexUrl).host(),
g=h.uri(document.location.href).host();e!==g&&e.match("xn--")&&(h.support.cors=!0);document.createElement("script");var b=function(){var a=this,c=h.makeArray(arguments),d;h.isPlainObject(c[0])&&(d=c[0],c=c.slice(1));d=h.extend({},b.defaultOptions,a.options,d,{batch:a});var f;h.each(c,function(c,e){var g=new b.task(e,d,f);a.addTask(g);d.serial&&void 0!==f?f.always(g.start):g.start();f=g})};h.extend(b,{defaultOptions:{path:"",extension:"compressed"==h.mode?"min.js":"js",serial:!1,async:!1,xhr:!1},setup:function(){h.extend(b.defaultOptions,
options)},scripts:{},task:function(a,b,d){var f=h.extend(this,h.Deferred());f.name=a;f.options=b;f.taskBefore=d;h.isArray(a)&&(f.name=a[0]+"@"+a[1],f.moduleName=a[0],a[2]||(f.defineModule=!0,h.module.registry[f.moduleName]&&console.warn("$.require.script: "+f.moduleName+" exists! Using existing module instead."),f.options.xhr=!0),a=a[1],f.module=h.module(f.moduleName));h.isUrl(a)?f.url=a:/^(\/|\.)/.test(a)?f.url=h.uri(f.options.path).toPath(a).toString():(f.url=h.uri(f.options.path).toPath("./"+a+
"."+f.options.extension).toString(),f.module=h.module(a))}});h.extend(b.task.prototype,{start:function(){var a=this.module;a&&"pending"!==a.status?this.waitForModule():this.load()},waitForModule:function(){var a=this,b=a.module;b.then(a.resolve,a.reject,a.notify);a.batch.required(function(){b.done(a.resolve)})},load:function(){var a=this,c=a.taskBefore;a.script=b.scripts[a.url]||function(){var c=a.options.xhr?h.ajax({url:a.url,dataType:"text"}):h.script({url:a.url,type:"text/javascript",async:a.options.async,
timeout:a.batch.options.timeout,retry:a.batch.options.retry,verbose:a.batch.options.verbose});return b.scripts[a.url]=c}();a.script.done(function(b){if(a.options.xhr&&(a.defineModule&&(a.module=h.module(a.moduleName,function(){h.globalEval(b);this.resolveWith(b)})),!a.options.async||c)){c.done(function(){h.globalEval(b);a.module?a.waitForModule():a.resolve()});return}a.module?a.waitForModule():a.resolve()}).fail(function(){a.reject()})}});return b}());h.require.addLoader("stylesheet",function(){var e=
function(){var g=this,b=h.makeArray(arguments),a;h.isPlainObject(b[0])&&(a=b[0],b=b.slice(1));a=h.extend({},e.defaultOptions,g.options,{path:h.path+"/styles/"},a,{batch:g});h.each(b,function(b,d){var f=new e.task(d,a),k=e.stylesheets[f.url],f=k||f;g.addTask(f);k||(e.stylesheets[f.url]=f,f.start())})};h.extend(e,{defaultOptions:{path:"",extension:"compressed"==h.mode?"min.css":"css",xhr:!1},setup:function(){h.extend(e.defaultOptions,options)},stylesheets:{},task:function(e,b){var a=h.extend(this,h.Deferred());
a.name=e;a.options=b;h.isUrl(e)?a.url=e:/^(\/|\.)/.test(e)?a.url=h.uri(a.options.path).toPath(e).toString():a.url=h.uri(a.options.path).toPath("./"+e+"."+a.options.extension).toString();a.options.url=a.url},loaders:{},loader:function(g){if(h.isArray(g))return h.map(g,function(a){return e.loader(a)});if(h.isPlainObject(g))return h.map(g,function(a,b){return e.loader(a).resolve(b)});var b=e.loaders[g];b||(b=e.loaders[g]=h.Deferred().done(function(a){h.isPlainObject(a)||h.stylesheet(a)}));return b}});
h.extend(e.task.prototype,{start:function(){var g=e.loaders[this.name];g||(g=e.loader(this.name),h.stylesheet(this.options)?g.resolve():g.reject());g.then(this.resolve,this.reject)}});return e}());h.require.addLoader("template",function(){var e=function(){var g=this,b=h.makeArray(arguments),a;h.isPlainObject(b[0])&&(a=b[0],b=b.slice(1));a=h.extend({},e.defaultOptions,g.options,a,{batch:g});h.each(b,function(b,d){var f=new e.task(d,a);g.addTask(f);f.start()})};h.extend(e,{defaultOptions:{path:"",extension:"htm"},
setup:function(){h.extend(e.defaultOptions,options)},task:function(e,b){var a=h.extend(this,h.Deferred());a.name=e;a.options=b;h.isArray(e)&&(a.name=e[0],e=e[1]);h.isUrl(e)?a.url=e:/^(\/|\.)/.test(e)?a.url=h.uri(a.options.path).toPath(e).toString():a.url=h.uri(a.options.path).toPath("./"+e+"."+a.options.extension).toString()},loaders:{},loader:function(g){if(h.isArray(g))return h.map(g,function(a){return e.loader(a)});if(h.isPlainObject(g))return h.map(g,function(a,b){return e.loader(b).resolve(a)});
var b=e.loaders[g];b||(b=e.loaders[g]=h.Deferred().done(function(a){h.template(g,a)}));return b}});h.extend(e.task.prototype,{start:function(){var g=e.loaders[this.name];g||(g=e.loader(this.name),g.xhr=h.Ajax({url:this.url,dataType:"text"}).then(g.resolve,g.reject).then(this.resolve,this.reject));this.loader=g;return this}});return e}());h.require.addLoader("language",function(){var e=function(){var g=h.makeArray(arguments),b;h.isPlainObject(g[0])&&(b=g[0],g=g.slice(1));b=h.extend({},e.defaultOptions,
this.options,b,{batch:this});b=new e.task(g,b);this.addTask(b);b.start()};h.extend(e,{defaultOptions:{path:""},setup:function(){h.extend(e.defaultOptions,options)},loaders:{},task:function(e,b){var a=h.extend(this,h.Deferred());a.name=e.join(",");a.options=b;a.url=b.path;a.names=e},loaders:{},loader:function(g){if(h.isArray(g))return h.map(g,function(a){return e.loader(a)});if(h.isPlainObject(g))return h.map(g,function(a,b){return e.loader(b).resolve(a)});var b=e.loaders[g];b||(b=e.loaders[g]=h.Deferred().done(function(a){h.language.add(g,
a)}));return b}});h.extend(e.task.prototype,{start:function(){var g=this,b=h.map(g.names,function(a){var b=e.loader(a);b.push(b);return/resolved|rejected/.test(b.state())?null:a});g.fail(function(){h.each(b,function(a,b){e.loader(b).reject()})});h.when.apply(null,[]).then(g.resolve,g.reject);if(1>b.length)return g;g.xhr=h.Ajax({url:g.url,type:"POST",data:{keys:b}}).done(function(a){h.isPlainObject(a)?e.loader(a):g.reject()}).fail(function(){g.reject()});return g}});return e}());h.require.addLoader("library",
function(){var e=h.makeArray(arguments),g={};h.isPlainObject(e[0])&&(g=e[0],e=e.slice(1));h.extend(g,{path:h.scriptPath});return this.script.apply(this,[g].concat(e))});h.require.addLoader("image",function(){var e=function(){var g=this,b=h.makeArray(arguments),a;h.isPlainObject(b[0])&&(a=b[0],b=b.slice(1));a=h.extend({},e.defaultOptions,g.options,a,{batch:g});h.each(b,function(b,d){var f=new e.task(d,a),k=e.images[f.url],f=k||f;g.addTask(f);k||(e.images[f.url]=f,f.start())})};h.extend(e,{defaultOptions:{path:""},
setup:function(){h.extend(e.defaultOptions,options)},images:{},task:function(e,b){var a=h.extend(this,h.Deferred());a.name=e;a.options=b;h.isUrl(e)?a.url=e:/^(\/|\.)/.test(e)?a.url=h.uri(a.options.path).toPath(e).toString():a.url=h.uri(a.options.path).toPath("./"+e).toString();a.options.url=a.url}});h.extend(e.task.prototype,{start:function(){var e=this;e.image=h(new Image).load(function(){e.resolve()}).error(function(){e.reject()}).attr("src",e.options.url)}});return e}())});
FD31.plugin("iframe-transport",function(h){h.ajaxPrefilter(function(e,g,b){if(e.iframe)return"iframe"});h.ajaxTransport("iframe",function(e,g,b){function a(){n&&p.replaceWith(function(a){return k.get(a)});c.remove();d.attr("src","javascript:false;").remove()}var c=null,d=null,f="iframe-"+h.now(),k=h(e.files).filter(":file:enabled"),n=0<k.length,p=null;e.dataTypes.shift();c=h("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:e.url,target:f});"string"===typeof e.data&&
0<e.data.length&&h.error("data must not be serialized");h.each(e.data||{},function(a,b){h.isPlainObject(b)&&(a=b.name,b=b.value);h.isArray(b)||(b=[b]);h.each(b,function(b,d){h("<input type='hidden' />").attr({name:a,value:d}).appendTo(c)})});h("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(c);n&&(p=k.after(function(a){return h(this).clone().prop("disabled",!0)}).next(),k.appendTo(c));return{send:function(b,e){d=h("<iframe src='javascript:false;' name='"+f+"' id='"+f+"' style='display:none'></iframe>");
d.bind("load",function(){d.unbind("load").bind("load",function(){var b=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,c=b.documentElement?b.documentElement:b.body,d=c.getElementsByTagName("textarea")[0],b=d?d.getAttribute("data-type"):null,f=d?d.getAttribute("data-status"):200,k=d?d.getAttribute("data-statusText"):"OK",c={html:c.innerHTML,text:b?d.value:c?c.textContent||c.innerText:null};a();e(f,k,c,b?"Content-Type: "+b:null)});c[0].submit()});
h("body").append(c,d)},abort:function(){null!==d&&(d.unbind("load").attr("src","javascript:false;"),a())}}})});
FD31.plugin("server",function(h){var e=h.server=function(g){var b=h.Deferred(),a=h.extend(!0,{},e.defaultOptions,g,{success:function(){}});b.xhr=h.Ajax(a).done(function(a){if("string"===typeof a)try{a=h.parseJSON(a)}catch(d){b.rejectWith(b,["Unable to parse Ajax commands.","error"])}if(h.isArray(a)){var f=function(a){var c=a.type,c=e.parsers[c]||g[c];if(h.isFunction(c))return c.apply(b,a.data)};a=h.map(a,function(a){if("notify"==a.type)f(a);else return a});h.each(a,function(a,b){f(b)})}else b.rejectWith(b,
["Invalid ajax commands.","error"]);"pending"===b.state()&&b.resolveWith(b)}).fail(function(a,d,f){b.rejectWith(b,[f,d])});return b};e.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},dataType:"json"};e.parsers={script:function(){var e=h.makeArray(arguments);if("string"==typeof e[0])try{eval(e[0])}catch(b){}else{var a=window;h.each(e,function(b,d){"Foundry"===d.property&&(d.property=h.globalNamespace);"Foundry"===d.method&&(d.method=h.globalNamespace);try{switch(d.type){case "get":a=
a[d.property];break;case "set":a[d.property]=d.value;break;case "call":a=a[d.method].apply(a,d.args)}}catch(f){}})}},resolve:function(){this.resolveWith(this,arguments)},reject:function(){this.rejectWith(this,arguments)},notify:function(){this.notifyWith(this,arguments)},redirect:function(e){window.location=e}}});
FD31.plugin("component",function(h){var e=h.Component=function(a,b){return 1>arguments.length?e.registry:2>arguments.length?e.registry[a]:e.register(a,b)};e.registry={};e.proxy=function(a,b,d){h.isFunction(d)?a[b]=h.proxy(d,a):a[b]=d};e.register=function(a,b){var d;h.isFunction(a)&&(d=a,a=d.className,b=d.options);var f=e.registry[a]=window[a]=function(a){return h.isFunction(a)?a(h):component};h.each(e.prototype,function(a,b){e.proxy(f,a,b)});f.$=h;f.options=b;f.className=a;f.identifier=a.toLowerCase();
f.componentName="com_"+f.identifier;f.prefix=f.identifier+"/";f.version=b.version;f.safeVersion=f.version.replace(/\./g,"");f.environment=b.environment||h.environment;f.mode=b.mode||h.mode;f.debug="development"===f.environment;f.console=e.console(f);f.language=b.language||h.locale.lang||"en";f.baseUrl=b.baseUrl||h.indexUrl+"?option="+f.componentName;f.ajaxUrl=b.ajaxUrl||h.basePath+"/?option="+f.componentName;f.scriptPath=b.scriptPath||h.rootPath+"/media/"+f.componentName+"/scripts/";f.stylePath=b.stylePath||
h.rootPath+"/media/"+f.componentName+"/styles/";f.templatePath=b.templatePath||b.scriptPath;f.languagePath=b.languagePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=lang&task=getLanguage";f.viewPath=b.viewPath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=themes&task=getAjaxTemplate";f.optimizeResources=!0;f.resourcePath=b.resourcePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=foundry&task=getResource";f.resourceInterval=1200;f.scriptVersioning=b.scriptVersioning||!1;f.token=(d||{}).token;
f.tasks=[];FD31.component(a,f);if(d)if(f.debug)d.queue.execute();else{for(var k,n=FD31.installer(a);k=n.shift();)f.install.apply(f,k);h.when(f.install("definitions"),f.install("scripts"),f.install("resources")).done(function(){d.queue.execute()})}};e.extend=function(a,b){e.prototype[a]=b;h.each(e.registry,function(d,f){e.proxy(f,a,b)})};h.template("component/console",'<div id="[%== component.identifier %]-console" class="foundry-console" style="display: none; z-index: 999999;"><div class="console-header"><div class="console-title">[%= component.className %] [%= component.version %]</div><div class="console-remove-button">x</div></div><div class="console-log-item-group"></div><style type="text/css">.foundry-console{position:fixed;width:50%;height:50%;bottom:0;left:0;background:white;box-shadow: 0 0 5px 0;margin-left: 25px;}.console-log-item-group{width: 100%;height: 100%;overflow-y:scroll;}.console-header{position: absolute;background:red;color:white;font-weight:bold;top:-24px;left: 0;line-height:24px;width:100%}.console-remove-button{text-align:center;cursor: pointer;display:block;width: 24px;float:right}.console-remove-button:hover{color: yellow}.console-title{padding: 0 5px;float:left}.console-log-item{padding: 5px}.console-log-item + .console-log-item{border-top: 1px solid #ccc}</style></div>');
e.console=function(a){return function(a){var b=function(a){return 1>arguments.length?b.toggle():b[a]&&b[a].apply(b,arguments)},f;b.selector="#"+a.identifier+"-console";b.init=function(){f=h(b.selector);1>f.length&&(f=h(h.View("component/console",{component:a})).appendTo("body"),f.find(".console-remove-button").click(function(){f.hide()}));b.element=f;return arguments.callee}();b.methods={log:function(b,d,e){d=d||"info";var g=f.find(".console-log-item-group");b=h(document.createElement("div")).addClass("console-log-item type-"+
d).attr("data-code",e).html(b);g.append(b);g[0].scrollTop=g[0].scrollHeight;a.debug&&f.show()},toggle:function(){f.toggle()},reset:function(){f.find(".console-log-item-group").empty()}};h.each(b.methods,function(a,c){b[a]=function(){b.init();return c.apply(b,arguments)}});return b}(a)};var g=h(document),b=e.prototype;h.extend(b,{run:function(a){return h.isFunction(a)?a(h):this},ready:function(){g.ready(function(){b.ready=b.run});return function(a){h.isFunction(a)&&g.ready(function(){a(h)})}}(),install:function(a,
b){var d=this,f=d.tasks[a]||(d.tasks[a]=h.Deferred());if(!b)return f;var e=function(){b(h,d);return f.resolve()};if("definitions"==a)return e();h.when(d.install("definitions")).done(e)},template:function(a){var b=this;if(void 0==a)return h.grep(h.template(),function(a){return 0==a.indexOf(b.prefix)});arguments[0]=b.prefix+a;return h.template.apply(null,arguments)},require:function(a){var b=this;a=a||{};var d=h.require(a),f={};h.each(["library","script","language","template","done"],function(a,b){f[b]=
d[b]});d.resource=function(a){if(h.isPlainObject(a)&&a.type&&a.name&&h.isDeferred(a.loader)){var f=b.resourceCollector;f||(f=b.resourceCollector=h.Deferred(),h.extend(f,{name:h.uid("ResourceCollector"),manifest:[],loaderList:[],loaders:[],load:function(){delete b.resourceCollector;if(0>f.manifest.length)f.resolve();else{var a=0,d=function(){a++;h.Ajax({type:"POST",url:b.resourcePath,dataType:"json",data:{resource:f.manifest}}).done(function(d){h.isArray(d)?(h.each(d,function(a,b){var c=b.content;
f.loaders[b.id][void 0!==c?"resolve":"reject"](c)}),1<a&&b.debug&&console.info("Attempt to try and get resources again was successful!")):f.reject("Server did not return a valid resource manifest.")}).fail(function(){2<a?b.debug&&console.error("Unable to get resource again. Giving up!"):(b.debug&&console.warn("Unable to get resource. Trying again..."),d())})};d();h.when.apply(null,f.loaderList).done(f.resolve).fail(f.reject)}}}),setTimeout(f.load,b.resourceCollectionInterval));var e=a.id=h.uid("Resource");
f.loaders[e]=a.loader;f.loaderList.push(a.loader);delete a.loader;f.manifest.push(a);return d}};d.view=function(){var a=this,f=a.expand(arguments,{path:b.viewPath}),e={},g=f.options,f=h.map(f.names,function(f){var n=b.prefix+f,g=h.require.template.loaders[n];if(!g)if(g=h.require.template.loader(n),g.name=n,a.addTask(g),b.optimizeResources)d.resource({type:"view",name:f,loader:g});else return e[f]=g,f});0<f.length&&h.Ajax({url:g.path,dataType:"json",data:{names:f}}).done(function(a){h.isArray(a)&&
h.each(a,function(a,b){var c=b.content;e[b.name][void 0!==c?"resolve":"reject"](c)})});return d};d.language=function(){var a=this,e=a.expand(arguments,{path:b.languagePath});b.optimizeResources?h.each(e.names,function(b,c){var f=h.require.language.loaders[c];f||(f=h.require.language.loader(c),f.name=c,a.addTask(f),d.resource({type:"language",name:c,loader:f}))}):f.language.apply(d,[e.options].concat(e.names));return d};d.library=function(){f.script.apply(this,arguments);return d};d.script=function(){var a=
this.expand(arguments,{path:b.scriptPath});names=h.map(a.names,function(d){if(h.isArray(d)||h.isUrl(d)||/^(\/|\.)/.test(d))return d;var f=b.prefix+d;d=h.uri(a.options.path).toPath("./"+d+"."+(a.options.extension||"js")+(b.scriptVersioning?"?version="+b.safeVersion:"")).toString();return[[f,d,!0]]});f.script.apply(d,[a.options].concat(names));return d};d.template=function(){var a=this.expand(arguments,{path:b.templatePath});f.template.apply(d,[a.options].concat(h.map(a.names,function(a){return[[b.prefix+
a,a]]})));return d};d.done=function(a){return f.done.call(d,function(){b.ready(a)})};return d},module:function(a,b){if(!h.isArray(a)){var d=this.prefix+a;return b?h.module.apply(null,[d,function(){b.call(this,h)}]):h.module(d)}}});h.Component.extend("getToken",function(){return h("span#"+this.identifier+"-token input").attr("name")||this.token});h.Component.extend("ajax",function(a,b,d){var f=this;a={url:f.ajaxUrl,data:h.extend(b,{option:f.componentName,namespace:a})};a=h.extend(!0,a,f.options.ajax);
a.data[f.getToken()]=1;a.data.hasOwnProperty("args")&&(a.data.args=h.toJSON(a.data.args));if(h.isPlainObject(d)){if(d.type){switch(d.type){case "jsonp":d.dataType="jsonp";d.crossDomain=!0;a.data.transport="jsonp";break;case "iframe":d.iframe=!0,d.processData=!1,d.files=a.data.files,delete a.data.files,a.data.transport="iframe"}delete d.type}h.extend(a,d)}h.isFunction(d)&&(a.success=d);d=h.server(a);d.progress(function(a,b,c){"debug"==b&&f.console.log(a,b,c)});return d});h.Component.extend("Controller",
function(){var a=h.makeArray(arguments),b=a[0],d;if(1==a.length)return h.String.getObject(b);2<a.length?(d=a[1],a=a[2]):(d={},a=a[1]);h.extend(d,{root:this.className+".Controller",component:this});return h.Controller.apply(this,[b,d,a])});h.Component.extend("Model",function(){var a=h.makeArray(arguments),b=this.className+".Model."+a[0],d,f;if(1==a.length)return h.String.getObject(a[0]);2==a.length&&(d={},f=a[1]);2<a.length&&(d=a[1],f=a[2]);h.extend(d,{component:this});return h.Model.apply(this,[b,
d,f])});h.Component.extend("Model.List",function(){var a=h.makeArray(arguments),b=this.className+".Model.List."+a[0],d,f;if(1==a.length)return h.String.getObject(a[0]);2==a.length&&(d={},f=a[1]);2<a.length&&(d=a[1],f=a[2]);h.extend(d,{component:this});return h.Model.List.apply(this,[b,d,f])});h.Component.extend("View",function(a){if(1>arguments.length)return this.template();arguments[0]=this.prefix+arguments[0];return h.View.apply(this,arguments)});FD31.module.execute();h.each(FD31.component(),function(a,
b){b.registered||h.Component.register(b)})});
FD31.plugin("static",function(h){(function(){var e=h.stylesheet({content:".foundryDialog{background:url(images/333-50.png);padding:5px;border:1px solid #333;border-radius:8px;-moz-border-radius:8px;-webkit-border-radius:8px}.foundryDialog.resizing{padding-bottom:7px}.foundryDialog .dialog-wrap{border:1px solid #333;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;background:#fff;overflow:hidden;min-height:100%;height:100%}.foundryDialog .dialog-wrap > .in{position:relative}.foundryDialog .dialog-head{font:700 14px/30px Arial;height:30px;padding:0 9px;border-top:1px solid #f5f5f5;border-bottom:1px solid #666;background:#eaeaea;color:#444 !important;border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;-webkit-border-radius:4px 4px 0 0;position:relative}.foundryDialog .dialog-body{background:#fff;padding:10px}.foundryDialog .dialog-body.type-iframe{padding:0}.foundryDialog .dialog-footer{background:#fafafa;border-top:1px solid #aaa;padding:6px;border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;-webkit-border-radius:0 0 4px 4px}.foundryDialog .dialog-buttons{text-align:right}.foundryDialog .dialog-closeButton{background:url(images/cross-8.png) center;display:block;text-indent:-9999px;width:8px;height:8px;position:absolute !important;right:10px;top:50%;margin-top:-4px;opacity:0.4;cursor:pointer}.foundryDialog .dialog-closeButton:hover{opacity:0.7}.foundryDialog .dialog-loader{position:absolute;background:rgba(255,255,255,0.5);z-index:9999}.foundryDialog .loader-img{background:url(images/ajax-loader.gif) center no-repeat;width:32px;height:32px;position:absolute;top:50%;left:50%;margin:-16px 0 0 -16px}.ui-autocomplete{position:absolute;top:0;left:0;cursor:default}"})?"resolve":
"reject";h.each(["dialog/default","ui/autocomplete"],function(g,b){h.require.stylesheet.loader(b)[e]()})})();h.module("uniform chosen event/drag mousewheel resize ui/core ui/mouse ui/widget textboxlist autosize.input scrollTo expanding tinyscrollbar history masonry dialog ui/position easing image popbox ui/autocomplete ui/menu gmaps imgareaselect".split(" "));(function(){FD31.module("uniform",function(e){var g=function(){(function(b){b.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",
fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:!0,idPrefix:"uniform",resetSelector:!1,autoHide:!0},elements:[]};b.support.selectOpacity=b.browser.msie&&7>b.browser.version?!1:!0;b.fn.uniform=function(a){function c(c){var d=b(c),f=b("<div>"),e=b("<span>");f.addClass(a.buttonClass);a.useID&&
""!=d.attr("id")&&f.attr("id",a.idPrefix+"-"+d.attr("id"));var k;if(d.is("a")||d.is("button"))k=d.text();else if(d.is(":submit")||d.is(":reset")||d.is("input[type=button]"))k=d.attr("value");k=""==k?d.is(":reset")?"Reset":"Submit":k;e.html(k);d.css("opacity",0);d.wrap(f);d.wrap(e);f=d.closest("div");e=d.closest("span");d.is(":disabled")&&f.addClass(a.disabledClass);f.bind({"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)},
"mousedown.uniform touchbegin.uniform":function(){f.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"click.uniform touchend.uniform":function(a){if(b(a.target).is("span")||b(a.target).is("div"))c[0].dispatchEvent?(a=document.createEvent("MouseEvents"),a.initEvent("click",!0,!0),c[0].dispatchEvent(a)):c[0].click()}});c.bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)}});b.uniform.noSelect(f);
g(c)}function d(c){var d=b(c),f=b("<div />"),e=b("<span />");"none"==!d.css("display")&&a.autoHide&&f.hide();f.addClass(a.selectClass);a.useID&&""!=c.attr("id")&&f.attr("id",a.idPrefix+"-"+c.attr("id"));d=c.find(":selected:first");0==d.length&&(d=c.find("option:first"));e.html(d.html());c.css("opacity",0);c.wrap(f);c.before(e);f=c.parent("div");e=c.siblings("span");c.bind({"change.uniform":function(){e.text(c.find(":selected").html());f.removeClass(a.activeClass)},"focus.uniform":function(){f.addClass(a.focusClass)},
"blur.uniform":function(){f.removeClass(a.focusClass);f.removeClass(a.activeClass)},"mousedown.uniform touchbegin.uniform":function(){f.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"click.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)},"keyup.uniform":function(){e.text(c.find(":selected").html())}});
b(c).attr("disabled")&&f.addClass(a.disabledClass);b.uniform.noSelect(e);g(c)}function f(c){var d=b(c),f=b("<div />"),e=b("<span />");"none"==!d.css("display")&&a.autoHide&&f.hide();f.addClass(a.checkboxClass);a.useID&&""!=c.attr("id")&&f.attr("id",a.idPrefix+"-"+c.attr("id"));b(c).wrap(f);b(c).wrap(e);e=c.parent();f=e.parent();b(c).css("opacity",0).bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)},"click.uniform touchend.uniform":function(){b(c).attr("checked")?
e.addClass(a.checkedClass):e.removeClass(a.checkedClass)},"mousedown.uniform touchbegin.uniform":function(){f.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)}});b(c).attr("checked")&&e.addClass(a.checkedClass);b(c).attr("disabled")&&f.addClass(a.disabledClass);g(c)}function e(c){var d=b(c),f=b("<div />"),
k=b("<span />");"none"==!d.css("display")&&a.autoHide&&f.hide();f.addClass(a.radioClass);a.useID&&""!=c.attr("id")&&f.attr("id",a.idPrefix+"-"+c.attr("id"));b(c).wrap(f);b(c).wrap(k);k=c.parent();f=k.parent();b(c).css("opacity",0).bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)},"click.uniform touchend.uniform":function(){if(b(c).attr("checked")){var d=a.radioClass.split(" ")[0];b("."+d+" span."+a.checkedClass+":has([name='"+b(c).attr("name")+
"'])").removeClass(a.checkedClass);k.addClass(a.checkedClass)}else k.removeClass(a.checkedClass)},"mousedown.uniform touchend.uniform":function(){b(c).is(":disabled")||f.addClass(a.activeClass)},"mouseup.uniform touchbegin.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform touchend.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);f.removeClass(a.activeClass)}});b(c).attr("checked")&&k.addClass(a.checkedClass);b(c).attr("disabled")&&
f.addClass(a.disabledClass);g(c)}function n(c){var d=b(c),f=b("<div />"),e=b("<span>"+a.fileDefaultText+"</span>"),k=b("<span>"+a.fileBtnText+"</span>");"none"==!d.css("display")&&a.autoHide&&f.hide();f.addClass(a.fileClass);e.addClass(a.filenameClass);k.addClass(a.fileBtnClass);a.useID&&""!=d.attr("id")&&f.attr("id",a.idPrefix+"-"+d.attr("id"));d.wrap(f);d.after(k);d.after(e);f=d.closest("div");e=d.siblings("."+a.filenameClass);k=d.siblings("."+a.fileBtnClass);if(!d.attr("size")){var n=f.width();
d.attr("size",n/10)}var h=function(){var b=d.val();""===b?b=a.fileDefaultText:(b=b.split(/[\/\\]+/),b=b[b.length-1]);e.text(b)};h();d.css("opacity",0).bind({"focus.uniform":function(){f.addClass(a.focusClass)},"blur.uniform":function(){f.removeClass(a.focusClass)},"mousedown.uniform":function(){b(c).is(":disabled")||f.addClass(a.activeClass)},"mouseup.uniform":function(){f.removeClass(a.activeClass)},"mouseenter.uniform":function(){f.addClass(a.hoverClass)},"mouseleave.uniform":function(){f.removeClass(a.hoverClass);
f.removeClass(a.activeClass)}});b.browser.msie?d.bind("click.uniform.ie7",function(){setTimeout(h,0)}):d.bind("change.uniform",h);d.attr("disabled")&&f.addClass(a.disabledClass);b.uniform.noSelect(e);b.uniform.noSelect(k);g(c)}function g(a){a=b(a).get();1<a.length?b.each(a,function(a,c){b.uniform.elements.push(c)}):b.uniform.elements.push(a)}a=b.extend(b.uniform.options,a);var h=this;!1!=a.resetSelector&&b(a.resetSelector).mouseup(function(){setTimeout(function(){b.uniform.update(h)},10)});b.uniform.restore=
function(a){void 0==a&&(a=b(b.uniform.elements));b(a).each(function(){b(this).is(":checkbox")?b(this).unwrap().unwrap():b(this).is("select")?(b(this).siblings("span").remove(),b(this).unwrap()):b(this).is(":radio")?b(this).unwrap().unwrap():b(this).is(":file")?(b(this).siblings("span").remove(),b(this).unwrap()):b(this).is("button, :submit, :reset, a, input[type='button']")&&b(this).unwrap().unwrap();b(this).unbind(".uniform");b(this).css("opacity","1");var c=b.inArray(b(a),b.uniform.elements);b.uniform.elements.splice(c,
1)})};b.uniform.noSelect=function(a){function c(){return!1}b(a).each(function(){this.onselectstart=this.ondragstart=c;b(this).mousedown(c).css({MozUserSelect:"none"})})};b.uniform.update=function(c){void 0==c&&(c=b(b.uniform.elements));c=b(c);c.each(function(){var d=b(this);if(d.is("select")){var f=d.siblings("span"),e=d.parent("div");e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass);f.html(d.find(":selected").html());d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass)}else if(d.is(":checkbox"))f=
d.closest("span"),e=d.closest("div"),e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),f.removeClass(a.checkedClass),d.is(":checked")&&f.addClass(a.checkedClass),d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass);else if(d.is(":radio"))f=d.closest("span"),e=d.closest("div"),e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),f.removeClass(a.checkedClass),d.is(":checked")&&f.addClass(a.checkedClass),d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass);
else if(d.is(":file"))e=d.parent("div"),f=d.siblings(a.filenameClass),btnTag=d.siblings(a.fileBtnClass),e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),f.text(d.val()),d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass);else if(d.is(":submit")||d.is(":reset")||d.is("button")||d.is("a")||c.is("input[type=button]"))e=d.closest("div"),e.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass),d.is(":disabled")?e.addClass(a.disabledClass):e.removeClass(a.disabledClass)})};
return this.each(function(){if(b.support.selectOpacity){var a=b(this);a.is("select")?!0!=a.attr("multiple")&&(void 0==a.attr("size")||1>=a.attr("size"))&&d(a):a.is(":checkbox")?f(a):a.is(":radio")?e(a):a.is(":file")?n(a):a.is(":text, :password, input[type='email']")?($el=b(a),$el.addClass($el.attr("type")),g(a)):a.is("textarea")?(b(a).addClass("uniform"),g(a)):(a.is("a")||a.is(":submit")||a.is(":reset")||a.is("button")||a.is("input[type=button]"))&&c(a)}})}})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("chosen",
function(e){var g=function(){var b={};(function(){var a;a=function(){function a(){this.options_index=0;this.parsed=[]}a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)};a.prototype.add_group=function(a){var b,c,e,g,h,q;b=this.parsed.length;this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled});h=a.childNodes;q=[];e=0;for(g=h.length;e<g;e++)c=h[e],q.push(this.add_option(c,b,a.disabled));return q};a.prototype.add_option=
function(a,b,c){if("OPTION"===a.nodeName.toUpperCase())return""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:!0===c?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};return a}();a.select_to_array=function(b){var d,
f,e,n;d=new a;n=b.childNodes;f=0;for(e=n.length;f<e;f++)b=n[f],d.add_node(b);return d.parsed};this.SelectParser=a}).call(b);(function(){this.AbstractChosen=function(){function a(a,b){this.form_field=a;this.options=null!=b?b:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()}a.prototype.set_default_values=function(){var a=this;this.click_test_action=function(b){return a.test_active_click(b)};
this.activate_action=function(b){return a.activate_field(b)};this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_single_selected=this.result_highlighted=null;this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||!1;this.search_contains=
this.options.search_contains||!1;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||!1;return this.max_selected_options=this.options.max_selected_options||Infinity};a.prototype.set_default_text=function(){this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.default_text=this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||
this.options.placeholder_text||"Select an Option";return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"};a.prototype.mouse_enter=function(){return this.mouse_on_container=!0};a.prototype.mouse_leave=function(){return this.mouse_on_container=!1};a.prototype.input_focus=function(a){var b=this;if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)};a.prototype.input_blur=function(a){var b=
this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return b.blur_test()},100)};a.prototype.result_add_option=function(a){var b,f;if(a.disabled)return"";a.dom_id=this.container_id+"_o_"+a.array_index;b=a.selected&&this.is_multiple?[]:["active-result"];a.selected&&b.push("result-selected");null!=a.group_array_index&&b.push("group-option");""!==a.classes&&b.push(a.classes);f=""!==a.style.cssText?' style="'+a.style+'"':"";return'<li id="'+a.dom_id+'" class="'+b.join(" ")+
'"'+f+">"+a.html+"</li>"};a.prototype.results_update_field=function(){this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};a.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()};a.prototype.keyup_checker=function(a){var b,f;b=null!=(f=a.which)?f:a.keyCode;
this.search_field_scale();switch(b){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};a.prototype.generate_field_id=function(){var a;
a=this.generate_random_id();return this.form_field.id=a};a.prototype.generate_random_char=function(){var a;a=Math.floor(36*Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(a,a+1)};return a}()}).call(b);(function(){var a,b,d,f=Object.prototype.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};d=this;e.fn.extend({chosen:function(b){return e.browser.msie&&
("6.0"===e.browser.version||"7.0"===e.browser.version&&7===document.documentMode)?this:this.each(function(c){c=e(this);if(!c.hasClass("chzn-done"))return c.data("chosen",new a(this,b))})}});a=function(a){function f(){f.__super__.constructor.apply(this,arguments)}k(f,a);f.prototype.setup=function(){this.form_field_jq=e(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};f.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};
f.prototype.set_up_html=function(){var a,d;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();a=e("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?a.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):
a.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(a);this.container=e("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();a=this.container.height();
d=this.f_width-b(this.dropdown);this.dropdown.css({width:d+"px",top:a+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),
this.selected_item=this.container.find(".chzn-single").first(),a=d-b(this.search_container)-b(this.search_field),this.search_field.css({width:a+"px"}));this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};f.prototype.register_observers=function(){var a=this;this.container.mousedown(function(b){return a.container_mousedown(b)});this.container.mouseup(function(b){return a.container_mouseup(b)});this.container.mouseenter(function(b){return a.mouse_enter(b)});
this.container.mouseleave(function(b){return a.mouse_leave(b)});this.search_results.mouseup(function(b){return a.search_results_mouseup(b)});this.search_results.mouseover(function(b){return a.search_results_mouseover(b)});this.search_results.mouseout(function(b){return a.search_results_mouseout(b)});this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)});this.form_field_jq.bind("liszt:activate",function(b){return a.activate_field(b)});this.form_field_jq.bind("liszt:open",
function(b){return a.container_mousedown(b)});this.search_field.blur(function(b){return a.input_blur(b)});this.search_field.keyup(function(b){return a.keyup_checker(b)});this.search_field.keydown(function(b){return a.keydown_checker(b)});return this.is_multiple?(this.search_choices.click(function(b){return a.choices_click(b)}),this.search_field.focus(function(b){return a.input_focus(b)})):this.container.click(function(a){return a.preventDefault()})};f.prototype.search_field_disabled=function(){if(this.is_disabled=
this.form_field_jq[0].disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)};f.prototype.container_mousedown=function(a){var b;if(!this.is_disabled){b=null!=a?e(a.target).hasClass("search-choice-close"):!1;a&&"mousedown"===
a.type&&!this.results_showing&&a.stopPropagation();if(this.pending_destroy_click||b)return this.pending_destroy_click=!1;this.active_field?this.is_multiple||!a||e(a.target)[0]!==this.selected_item[0]&&!e(a.target).parents("a.chzn-single").length||(a.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show());return this.activate_field()}};f.prototype.container_mouseup=function(a){if("ABBR"===a.target.nodeName&&
!this.is_disabled)return this.results_reset(a)};f.prototype.blur_test=function(a){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};f.prototype.close_field=function(){e(document).unbind("click",this.click_test_action);this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1));this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();
this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};f.prototype.activate_field=function(){this.is_multiple||this.active_field||(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1));this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};f.prototype.test_active_click=function(a){return e(a.target).parents("#"+
this.container_id).length?this.active_field=!0:this.close_field()};f.prototype.results_build=function(){var a,b,c,f,e;this.parsing=!0;this.results_data=d.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):
this.container.removeClass("chzn-container-single-nosearch"));a="";e=this.results_data;c=0;for(f=e.length;c<f;c++)b=e[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();
this.search_results.html(a);return this.parsing=!1};f.prototype.result_add_group=function(a){if(a.disabled)return"";a.dom_id=this.container_id+"_g_"+a.array_index;return'<li id="'+a.dom_id+'" class="group-result">'+e("<div />").text(a.label).html()+"</li>"};f.prototype.result_do_highlight=function(a){var b,c,d,f;if(a.length){this.result_clear_highlight();this.result_highlight=a;this.result_highlight.addClass("highlighted");c=parseInt(this.search_results.css("maxHeight"),10);f=this.search_results.scrollTop();
d=c+f;b=this.result_highlight.position().top+this.search_results.scrollTop();a=b+this.result_highlight.outerHeight();if(a>=d)return this.search_results.scrollTop(0<a-c?a-c:0);if(b<f)return this.search_results.scrollTop(b)}};f.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};f.prototype.results_show=function(){var a;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&
this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;a=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:a+"px",left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};f.prototype.results_hide=
function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=!1};f.prototype.set_tab_index=function(a){if(this.form_field_jq.attr("tabindex")){a=this.form_field_jq.attr("tabindex");this.form_field_jq.attr("tabindex",-1);if(this.is_multiple)return this.search_field.attr("tabindex",a);this.selected_item.attr("tabindex",
a);return this.search_field.attr("tabindex",-1)}};f.prototype.show_search_field_default=function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};f.prototype.search_results_mouseup=function(a){var b;b=e(a.target).hasClass("active-result")?e(a.target):e(a.target).parents(".active-result").first();if(b.length)return this.result_highlight=
b,this.result_select(a)};f.prototype.search_results_mouseover=function(a){if(a=e(a.target).hasClass("active-result")?e(a.target):e(a.target).parents(".active-result").first())return this.result_do_highlight(a)};f.prototype.search_results_mouseout=function(a){if(e(a.target).hasClass("active-result"))return this.result_clear_highlight()};f.prototype.choices_click=function(a){a.preventDefault();if(this.active_field&&!e(a.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};
f.prototype.choice_build=function(a){var b,c=this;if(this.is_multiple&&this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;b=this.container_id+"_c_"+a.array_index;this.choices+=1;this.search_container.before(a.disabled?'<li class="search-choice search-choice-disabled" id="'+b+'"><span>'+a.html+"</span></li>":'<li class="search-choice" id="'+b+'"><span>'+a.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+a.array_index+
'"></a></li>');return e("#"+b).find("a").first().click(function(a){return c.choice_destroy_link_click(a)})};f.prototype.choice_destroy_link_click=function(a){a.preventDefault();if(this.is_disabled)return a.stopPropagation;this.pending_destroy_click=!0;return this.choice_destroy(e(a.target))};f.prototype.choice_destroy=function(a){if(this.result_deselect(a.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&0<this.choices&&1>this.search_field.val().length&&this.results_hide(),
a.parents("li").first().remove()};f.prototype.results_reset=function(){this.form_field.options[0].selected=!0;this.selected_item.find("span").text(this.default_text);this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};f.prototype.results_reset_cleanup=function(){this.current_value=this.form_field_jq.val();return this.selected_item.find("abbr").remove()};
f.prototype.result_select=function(a){var b,c;if(this.result_highlight)return b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),b=c.substr(c.lastIndexOf("_")+1),b=this.results_data[b],b.selected=!0,this.form_field.options[b.options_index].selected=!0,this.is_multiple?
this.choice_build(b):(this.selected_item.find("span").first().text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()),a.metaKey&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[b.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()};f.prototype.result_activate=function(a){return a.addClass("active-result")};
f.prototype.result_deactivate=function(a){return a.removeClass("active-result")};f.prototype.result_deselect=function(a){var b;b=this.results_data[a];if(this.form_field.options[b.options_index].disabled)return!1;b.selected=!1;this.form_field.options[b.options_index].selected=!1;e("#"+this.container_id+"_o_"+a).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value});
this.search_field_scale();return!0};f.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&1>this.selected_item.find("abbr").length)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};f.prototype.winnow_results=function(){var a,b,c,d,f,k,n,g,h,p,B,x,Q,R,N;this.no_results_clear();g=0;h=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html();f=RegExp((this.search_contains?"":"^")+
h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");p=RegExp(h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");N=this.results_data;B=0;for(Q=N.length;B<Q;B++)if(b=N[B],!b.disabled&&!b.empty)if(b.group)e("#"+b.dom_id).css("display","none");else if(!this.is_multiple||!b.selected){a=!1;n=b.dom_id;k=e("#"+n);if(f.test(b.html))a=!0,g+=1;else if(0<=b.html.indexOf(" ")||0===b.html.indexOf("["))if(d=b.html.replace(/\[|\]/g,"").split(" "),d.length)for(x=0,R=d.length;x<R;x++)c=d[x],f.test(c)&&(a=!0,g+=1);a?(h.length?
(a=b.html.search(p),c=b.html.substr(0,a+h.length)+"</em>"+b.html.substr(a+h.length),c=c.substr(0,a)+"<em>"+c.substr(a)):c=b.html,k.html(c),this.result_activate(k),null!=b.group_array_index&&e("#"+this.results_data[b.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&n===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(k))}return 1>g&&h.length?this.no_results(h):this.winnow_results_set_highlight()};f.prototype.winnow_results_clear=function(){var a,
b,c,d,f;this.search_field.val("");b=this.search_results.find("li");f=[];c=0;for(d=b.length;c<d;c++)a=b[c],a=e(a),a.hasClass("group-result")?f.push(a.css("display","auto")):this.is_multiple&&a.hasClass("result-selected")?f.push(void 0):f.push(this.result_activate(a));return f};f.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=a.length?a.first():this.search_results.find(".active-result").first(),
null!=a))return this.result_do_highlight(a)};f.prototype.no_results=function(a){var b;b=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');b.find("span").first().html(a);return this.search_results.append(b)};f.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};f.prototype.keydown_arrow=function(){var a;this.result_highlight?this.results_showing&&(a=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(a):
(a=this.search_results.find("li.active-result").first())&&this.result_do_highlight(e(a));if(!this.results_showing)return this.results_show()};f.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};f.prototype.keydown_backstroke=function(){var a;
if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();a=this.search_container.siblings("li.search-choice").last();if(a.length&&!a.hasClass("search-choice-disabled"))return this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};f.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");
return this.pending_backstroke=null};f.prototype.keydown_checker=function(a){var b,c;b=null!=(c=a.which)?c:a.keyCode;this.search_field_scale();8!==b&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};f.prototype.search_field_scale=
function(){var a,b,c,d,f;if(this.is_multiple){b="position:absolute; left: -1000px; top: -1000px; display:none;";c="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");d=0;for(f=c.length;d<f;d++)a=c[d],b+=a+":"+this.search_field.css(a)+";";a=e("<div />",{style:b});a.text(this.search_field.val());e("body").append(a);b=a.width()+25;a.remove();b>this.f_width-10&&(b=this.f_width-10);this.search_field.css({width:b+"px"});a=this.container.height();return this.dropdown.css({top:a+
"px"})}};f.prototype.generate_random_id=function(){var a;for(a="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();0<e("#"+a).length;)a+=this.generate_random_char();return a};return f}(d.AbstractChosen);b=function(a){return a.outerWidth()-a.width()};d.get_side_border_padding=b}).call(b)};g();this.resolveWith(g)})})();(function(){FD31.module("event/drag",function(e){var g=function(){(function(b){b.fn.drag=function(a,c,d){var f="string"==typeof a?a:"",e=b.isFunction(a)?
a:b.isFunction(c)?c:null;0!==f.indexOf("drag")&&(f="drag"+f);d=(a==e?c:d)||{};return e?this.bind(f,d,e):this.trigger(f)};var a=b.event,c=a.special,d=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(a){var c=b.data(this,d.datakey),f=a.data||{};c.related+=1;b.each(d.defaults,function(a,b){void 0!==f[a]&&(c[a]=f[a])})},remove:function(){b.data(this,d.datakey).related-=1},setup:function(){if(!b.data(this,d.datakey)){var c=
b.extend({related:0},d.defaults);b.data(this,d.datakey,c);a.add(this,"touchstart mousedown",d.init,c);this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){(b.data(this,d.datakey)||{}).related||(b.removeData(this,d.datakey),a.remove(this,"touchstart mousedown",d.init),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart))},init:function(f){if(!d.touched){var e=f.data,k;if(!(0!=f.which&&0<e.which&&f.which!=e.which||b(f.target).is(e.not)||e.handle&&
!b(f.target).closest(e.handle,f.currentTarget).length)&&(d.touched="touchstart"==f.type?this:null,e.propagates=1,e.mousedown=this,e.interactions=[d.interaction(this,e)],e.target=f.target,e.pageX=f.pageX,e.pageY=f.pageY,e.dragging=null,k=d.hijack(f,"draginit",e),e.propagates&&((k=d.flatten(k))&&k.length&&(e.interactions=[],b.each(k,function(){e.interactions.push(d.interaction(this,e))})),e.propagates=e.interactions.length,!1!==e.drop&&c.drop&&c.drop.handler(f,e),d.textselect(!1),d.touched?a.add(d.touched,
"touchmove touchend",d.handler,e):a.add(document,"mousemove mouseup",d.handler,e),!d.touched||e.live)))return!1}},interaction:function(a,c){var f=b(a)[c.relative?"position":"offset"]()||{top:0,left:0};return{drag:a,callback:new d.callback,droppable:[],offset:f}},handler:function(f){var e=f.data;switch(f.type){case !e.dragging&&"touchmove":f.preventDefault();case !e.dragging&&"mousemove":if(Math.pow(f.pageX-e.pageX,2)+Math.pow(f.pageY-e.pageY,2)<Math.pow(e.distance,2))break;f.target=e.target;d.hijack(f,
"dragstart",e);e.propagates&&(e.dragging=!0);case "touchmove":f.preventDefault();case "mousemove":if(e.dragging){d.hijack(f,"drag",e);if(e.propagates){!1!==e.drop&&c.drop&&c.drop.handler(f,e);break}f.type="mouseup"}default:d.touched?a.remove(d.touched,"touchmove touchend",d.handler):a.remove(document,"mousemove mouseup",d.handler),e.dragging&&(!1!==e.drop&&c.drop&&c.drop.handler(f,e),d.hijack(f,"dragend",e)),d.textselect(!0),!1===e.click&&e.dragging&&b.data(e.mousedown,"suppress.click",(new Date).getTime()+
5),e.dragging=d.touched=!1}},hijack:function(c,f,e,k,g){if(e){var h=c.originalEvent,t=c.type,l=f.indexOf("drop")?"drag":"drop",v,z=k||0,A,w;k=isNaN(k)?e.interactions.length:k;c.type=f;c.originalEvent=null;e.results=[];do!(A=e.interactions[z])||"dragend"!==f&&A.cancelled||(w=d.properties(c,e,A),A.results=[],b(g||A[l]||e.droppable).each(function(k,g){w.target=g;c.isPropagationStopped=function(){return!1};v=g?a.dispatch.call(g,c,w):null;!1===v?("drag"==l&&(A.cancelled=!0,e.propagates-=1),"drop"==f&&
(A[l][k]=null)):"dropinit"==f&&A.droppable.push(d.element(v)||g);"dragstart"==f&&(A.proxy=b(d.element(v)||A.drag)[0]);A.results.push(v);delete c.result;if("dropinit"!==f)return v}),e.results[z]=d.flatten(A.results),"dropinit"==f&&(A.droppable=d.flatten(A.droppable)),"dragstart"!=f||A.cancelled||w.update());while(++z<k);c.type=t;c.originalEvent=h;return d.flatten(e.results)}},properties:function(a,b,c){var f=c.callback;f.drag=c.drag;f.proxy=c.proxy||c.drag;f.startX=b.pageX;f.startY=b.pageY;f.deltaX=
a.pageX-b.pageX;f.deltaY=a.pageY-b.pageY;f.originalX=c.offset.left;f.originalY=c.offset.top;f.offsetX=f.originalX+f.deltaX;f.offsetY=f.originalY+f.deltaY;f.drop=d.flatten((c.drop||[]).slice());f.available=d.flatten((c.droppable||[]).slice());return f},element:function(a){if(a&&(a.jquery||1==a.nodeType))return a},flatten:function(a){return b.map(a,function(a){return a&&a.jquery?b.makeArray(a):a&&a.length?d.flatten(a):a})},textselect:function(a){b(document)[a?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",
a?"":"none");document.unselectable=a?"off":"on"},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.drop&&this.available.length&&b.each(this.available,function(a){c.drop.locate(this,a)})}};var f=a.dispatch;a.dispatch=function(a){if(0<b.data(this,"suppress."+a.type)-(new Date).getTime())b.removeData(this,"suppress."+a.type);else return f.apply(this,arguments)};var e=a.fixHooks.touchstart=a.fixHooks.touchmove=a.fixHooks.touchend=a.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),
filter:function(a,c){if(c){var d=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0]||null;d&&b.each(e.props,function(b,c){a[c]=d[c]})}return a}};c.draginit=c.dragstart=c.dragend=d})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("mousewheel",function(e){var g=function(){function b(a){var b=a||window.event,c=[].slice.call(arguments,1),k=0,g=0,h=0,t=0,t=0;a=e.event.fix(b);a.type="mousewheel";b.wheelDelta&&(k=b.wheelDelta);b.detail&&(k=-1*b.detail);b.deltaY&&(k=h=-1*b.deltaY);
b.deltaX&&(g=b.deltaX,k=-1*g);void 0!==b.wheelDeltaY&&(h=b.wheelDeltaY);void 0!==b.wheelDeltaX&&(g=-1*b.wheelDeltaX);t=Math.abs(k);if(!d||t<d)d=t;t=Math.max(Math.abs(h),Math.abs(g));if(!f||t<f)f=t;b=0<k?"floor":"ceil";k=Math[b](k/d);g=Math[b](g/f);h=Math[b](h/f);c.unshift(a,k,g,h);return(e.event.dispatch||e.event.handle).apply(this,c)}var a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],
d,f;if(e.event.fixHooks)for(var k=a.length;k;)e.event.fixHooks[a[--k]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}};e.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",
a)}})};g();this.resolveWith(g)})})();(function(){FD31.module("resize",function(e){var g=function(){function b(){d=window[f](function(){a.each(function(){var a=e(this),b=a.width(),c=a.height(),d=e.data(this,g);b===d.w&&c===d.h||a.trigger(k,[d.w=b,d.h=c])});b()},c[h])}var a=e([]),c=e.resize=e.extend(e.resize,{}),d,f="setTimeout",k="resize",g=k+"-special-event",h="delay";c[h]=250;c.throttleWindow=!0;e.event.special[k]={setup:function(){if(!c.throttleWindow&&this[f])return!1;var d=e(this);a=a.add(d);
e.data(this,g,{w:d.width(),h:d.height()});1===a.length&&b()},teardown:function(){if(!c.throttleWindow&&this[f])return!1;var b=e(this);a=a.not(b);b.removeData(g);a.length||clearTimeout(d)},add:function(a){function b(a,c,f){var k=e(this),h=e.data(this,g);null==h&&(h={w:null,h:null});h.w=void 0!==c?c:k.width();h.h=void 0!==f?f:k.height();d.apply(this,arguments)}if(!c.throttleWindow&&this[f])return!1;var d;if(e.isFunction(a))return d=a,b;d=a.handler;a.handler=b}}};g();this.resolveWith(g)})})();(function(){FD31.module("ui/core",
function(e){var g=function(){(function(b,a){function c(a,c){var f,e;f=a.nodeName.toLowerCase();if("area"===f){f=a.parentNode;e=f.name;if(!a.href||!e||"map"!==f.nodeName.toLowerCase())return!1;f=b("img[usemap=#"+e+"]")[0];return!!f&&d(f)}return(/input|select|textarea|button|object/.test(f)?!a.disabled:"a"===f?a.href||c:c)&&d(a)}function d(a){return b.expr.filters.visible(a)&&!b(a).parents().addBack().filter(function(){return"hidden"===b.css(this,"visibility")}).length}var f=0,e=/^ui-id-\d+$/;b.ui=
b.ui||{};b.extend(b.ui,{version:"1.10.4pre",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:function(a){return function(c,d){return"number"===typeof c?this.each(function(){var a=this;setTimeout(function(){b(a).focus();d&&d.call(a)},c)}):a.apply(this,arguments)}}(b.fn.focus),
scrollParent:function(){var a;a=b.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||
!a.length?b(document):a},zIndex:function(c){if(c!==a)return this.css("zIndex",c);if(this.length){c=b(this[0]);for(var d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++f)})},removeUniqueId:function(){return this.each(function(){e.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],
{data:b.expr.createPseudo?b.expr.createPseudo(function(a){return function(c){return!!b.data(c,a)}}):function(a,c,d){return!!b.data(a,d[3])},focusable:function(a){return c(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var d=b.attr(a,"tabindex"),f=isNaN(d);return(f||0<=d)&&c(a,!f)}});b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(c,d){function f(a,c,d,k){b.each(e,function(){c-=parseFloat(b.css(a,"padding"+this))||0;d&&(c-=parseFloat(b.css(a,"border"+this+"Width"))||0);k&&
(c-=parseFloat(b.css(a,"margin"+this))||0)});return c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],k=d.toLowerCase(),g={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(c){return c===a?g["inner"+d].call(this):this.each(function(){b(this).css(k,f(this,c)+"px")})};b.fn["outer"+d]=function(a,c){return"number"!==typeof a?g["outer"+d].call(this,a):this.each(function(){b(this).css(k,f(this,a,!0,c)+"px")})}});
b.fn.addBack||(b.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});b("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(b.fn.removeData=function(a){return function(c){return arguments.length?a.call(this,b.camelCase(c)):a.call(this)}}(b.fn.removeData));b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart"in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?
"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(a,c,d){var f;a=b.ui[a].prototype;for(f in d)a.plugins[f]=a.plugins[f]||[],a.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<d.length;b++)a.options[d[b][0]]&&d[b][1].apply(a.element,c)}},hasScroll:function(a,c){if("hidden"===
b(a).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",f=!1;if(0<a[d])return!0;a[d]=1;f=0<a[d];a[d]=0;return f}});b(function(){0<b("body > #fd_.ui").length||b(document.createElement("div")).attr("id","fd_").addClass("ui").css({position:"absolute",top:0,left:0,overflow:"visible",width:0,height:0}).appendTo("body")})})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("ui/mouse",function(e){var g=this;e.require().script("ui/widget").done(function(){var b=function(){(function(a,
b){var d=!1;a(document).mouseup(function(){d=!1});a.widget("ui.mouse",{version:"1.10.4pre",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!d){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,e=1===b.which,g="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||g||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);b.preventDefault();return d=!0}},_mouseMove:function(b){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,
this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},
_mouseStop:function(){},_mouseCapture:function(){return!0}})})(e)};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/widget",function(e){var g=function(){(function(b,a){var c=0,d=Array.prototype.slice,f=b.cleanData;b.cleanData=function(a){for(var c=0,d;null!=(d=a[c]);c++)try{b(d).triggerHandler("remove")}catch(e){}f(a)};b.widget=function(a,c,d){var f,e,g,h,t={},l=a.split(".")[0];a=a.split(".")[1];f=l+"-"+a;d||(d=c,c=b.Widget);b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)};b[l]=
b[l]||{};e=b[l][a];g=b[l][a]=function(a,b){if(!this._createWidget)return new g(a,b);arguments.length&&this._createWidget(a,b)};b.extend(g,e,{version:d.version,_proto:b.extend({},d),_childConstructors:[]});h=new c;h.options=b.widget.extend({},h.options);b.each(d,function(a,d){b.isFunction(d)?t[a]=function(){var b=function(){return c.prototype[a].apply(this,arguments)},f=function(b){return c.prototype[a].apply(this,b)};return function(){var a=this._super,c=this._superApply,e;this._super=b;this._superApply=
f;e=d.apply(this,arguments);this._super=a;this._superApply=c;return e}}():t[a]=d});g.prototype=b.widget.extend(h,{widgetEventPrefix:e?h.widgetEventPrefix:a},t,{constructor:g,namespace:l,widgetName:a,widgetFullName:f});e?(b.each(e._childConstructors,function(a,c){var d=c.prototype;b.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete e._childConstructors):c._childConstructors.push(g);b.widget.bridge(a,g)};b.widget.extend=function(c){for(var f=d.call(arguments,1),e=0,g=f.length,h,u;e<g;e++)for(h in f[e])u=
f[e][h],f[e].hasOwnProperty(h)&&u!==a&&(b.isPlainObject(u)?c[h]=b.isPlainObject(c[h])?b.widget.extend({},c[h],u):b.widget.extend({},u):c[h]=u);return c};b.widget.bridge=function(c,f){var e=f.prototype.widgetFullName||c;b.fn[c]=function(g){var h="string"===typeof g,u=d.call(arguments,1),r=this;g=!h&&u.length?b.widget.extend.apply(null,[g].concat(u)):g;h?this.each(function(){var d,f=b.data(this,e);if(!f)return b.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+
g+"'");if(!b.isFunction(f[g])||"_"===g.charAt(0))return b.error("no such method '"+g+"' for "+c+" widget instance");d=f[g].apply(f,u);if(d!==f&&d!==a)return r=d&&d.jquery?r.pushStack(d.get()):d,!1}):this.each(function(){var a=b.data(this,e);a?a.option(g||{})._init():b.data(this,e,new f(g,this))});return r}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,
d){d=b(d||this.defaultElement||this)[0];this.element=b(d);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),a);this.bindings=b();this.hoverable=b();this.focusable=b();d!==this&&(b.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=b(d.style?d.ownerDocument:d.document||d),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));
this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(c,d){var f=c,e,g,h;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof c)if(f={},e=c.split("."),c=e.shift(),e.length){g=f[c]=b.widget.extend({},this.options[c]);for(h=0;h<e.length-1;h++)g[e[h]]=g[e[h]]||{},g=g[e[h]];c=e.pop();if(d===a)return g[c]===a?null:g[c];g[c]=d}else{if(d===a)return this.options[c]===
a?null:this.options[c];f[c]=d}this._setOptions(f);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",
!0)},_on:function(a,c,d){var f,e=this;"boolean"!==typeof a&&(d=c,c=a,a=!1);d?(c=f=b(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,f=this.widget());b.each(d,function(d,g){function h(){if(a||!0!==e.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof g?e[g]:g).apply(e,arguments)}"string"!==typeof g&&(h.guid=g.guid=g.guid||h.guid||b.guid++);var l=d.match(/^(\w+)\s*(.*)$/),p=l[1]+e.eventNamespace;(l=l[2])?f.delegate(l,p,h):c.bind(p,h)})},_off:function(a,b){b=
(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){b(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){b(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,
{focusin:function(a){b(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){b(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,c,d){var f,e=this.options[a];d=d||{};c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(f in a)f in c||(c[f]=a[f]);this.element.trigger(c,d);return!(b.isFunction(e)&&!1===e.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};b.each({show:"fadeIn",
hide:"fadeOut"},function(a,c){b.Widget.prototype["_"+a]=function(d,f,e){"string"===typeof f&&(f={effect:f});var g,h=f?!0===f||"number"===typeof f?c:f.effect||c:a;f=f||{};"number"===typeof f&&(f={duration:f});g=!b.isEmptyObject(f);f.complete=e;f.delay&&d.delay(f.delay);if(g&&b.effects&&b.effects.effect[h])d[a](f);else if(h!==a&&d[h])d[h](f.duration,f.easing,e);else d.queue(function(c){b(this)[a]();e&&e.call(d[0]);c()})}})})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("textboxlist",function(e){var g=
this;e.require().script("autosize.input","scrollTo").done(function(){var b=function(){e.template("textboxlist/item",'<div class="textboxlist-item" data-textboxlist-item><span class="textboxlist-itemContent" data-textboxlist-itemContent>[%== html %]</span><div class="textboxlist-itemRemoveButton" data-textboxlist-itemRemoveButton><i class="ies-cancel-2"></i></a></div>');e.template("textboxlist/itemContent",'[%= title %]<input type="hidden" name="[%= name %]" value="[%= id %]"/>');e.Controller("Textboxlist",
{pluginName:"textboxlist",hostname:"textboxlist",defaultOptions:{view:{item:"textboxlist/item",itemContent:"textboxlist/itemContent"},plugin:{},name:"items[]",unique:!0,caseSensitive:!1,max:null,filterItem:null,"{item}":"[data-textboxlist-item]","{itemContent}":"[data-textboxlist-itemContent]","{itemRemoveButton}":"[data-textboxlist-itemRemoveButton]","{textField}":"[data-textboxlist-textField]"}},function(a){return{init:function(){var b=a.textField();b.autosizeInput();b.data("placeholderText",b.attr("placeholder"));
if(b=b.data("textboxlistName"))a.options.name=b;a.item().each(function(){var b=e(this),c=b.find(a.itemContent.selector);a.createItem({id:b.data("id")||function(){var a=e.uid("item-");b.data("id",a);return a}(),title:b.data("title")||e.trim(c.text()),html:c.html()})});(a.options.plugin.autocomplete||a.element.data("query"))&&a.addPlugin("autocomplete");a.on("keypress",a.textField(),function(a){if(13==a.keyCode)return a.preventDefault()})},setLayout:function(){var b=a.textField(),d=b.data("placeholderText");
0<a.item().length&&(d="");b.attr("placeholder",d).data("autosizeInputInstance").update()},enable:function(){a.element.removeClass("disabled");a.textField().enabled(!0)},disable:function(){a.element.addClass("disabled");a.textField().disabled(!0)},items:{},itemsByTitle:{},getItemKey:function(b){return a.options.caseSensitive?b:b.toLowerCase()},filterItem:function(b){var d=a.options.filterItem;e.isFunction(d)&&(b=d.call(a,b));d=a.itemsByTitle;if(e.isString(b)&&""!==b){var f=a.getItemKey(b);b=d.hasOwnProperty(f)?
a.itemsByTitle[f]:{id:e.uid("item-"),title:b,key:a.getItemKey(b)}}b.name=b.name||a.options.name;b.html=b.html||a.view.itemContent(!0,b);return b},createItem:function(b){b.key=a.getItemKey(b.title);a.items[b.id]=b;a.itemsByTitle[b.key]=b},deleteItem:function(b){var d=a.items[b];delete a.items[b];b=a.options.caseSensitive?d.title:d.title.toLowerCase();delete a.itemsByTitle[b]},addItem:function(b){if(b){var d=a.options,f=d.max;if(!(null!==f&&a.item().length>=f)&&(b=a.filterItem(b),e.isPlainObject(b))){var k,
f=a.item().filterBy("id",b.id);d.unique&&0<f.length&&(k=f);k||(k=a.view.item(b).attr("data-id",b.id));a.createItem(b);k.insertBefore(a.textField());a.trigger("addItem",[b]);return b}}},removeItem:function(b){var d=a.items[b];a.item().filterBy("id",b).remove();a.deleteItem(b);a.trigger("removeItem",[d])},clearItems:function(){a.item().each(function(){a.removeItem(e(this).data("id"))})},getAddedItems:function(){var b=[];a.item().each(function(){var d=e(this).data("id");b.push(a.items[d])});return b},
"{self} addItem":function(){a.setLayout()},"{self} removeItem":function(){a.setLayout()},"{itemRemoveButton} click":function(b){b=b.parents(a.item.selector);a.removeItem(b.data("id"))},"{textField} keydown":function(a,b){a.data("realEnterKey",13==b.keyCode)},"{textField} keypress":function(b,d){var f=b.data("realEnterKey"),k=13==d.keyCode;b.data("realEnterKey",f&&k);f=e.trim(a.textField().val());switch(d.keyCode){case 13:if(b.data("realEnterKey")){d=a.trigger("useItem",[f]);k=d.item;void 0===k&&(k=
f);if(!1===k||null===k)break;a.addItem(k);b.val("")}}},"{textField} keyup":function(b,d){var f=e.trim(a.textField().val());switch(d.keyCode){case 8:""===f&&(a.canRemoveItemUsingBackspace?(f=b.prev(a.item.selector),0<f.length&&a.removeItem(f.data("id"))):a.canRemoveItemUsingBackspace=!0);break;default:a.canRemoveItemUsingBackspace=!1}},"{self} click":function(b,d){var f=a.textField();f.is(d.target)||f.focus()},"{textField} focusin":function(){a.activated||(a.activated=!0,a.trigger("textboxlistActivate"))},
"{self} mousedown":function(){a.focusing=!0},"{self} mouseup":function(){a.focusing=!1},"{self} focusout":function(){a.focusing||(a.activated=!1,a.deactivateTimer=setTimeout(function(){a.activated||a.trigger("textboxlistDeactivate")},1))}}});e(document).on("click.textboxlist.data-api","[data-textboxlist]",function(a){e(this).addController(e.Controller.TextboxList).textField().focus()}).on("focus.textboxlist.data-api","[data-textboxlist] [data-textboxlist-textField]",function(a){e(this).parents("[data-textboxlist]").addController(e.Controller.TextboxList)});
e.template("textboxlist/menu",'<div class="textboxlist-autocomplete" data-textboxlist-autocomplete><div class="textboxlist-autocomplete-inner" data-textboxlist-autocomplete-viewport><div class="textboxlist-autocomplete-loading" data-textboxlist-autocomplete-loading></div><div class="textboxlist-autocomplete-empty" data-textboxlist-autocomplete-empty></div><ul class="textboxlist-menu" data-textboxlist-menu></ul></div></div>');e.template("textboxlist/menuItem",'<li class="textboxlist-menuItem" data-textboxlist-menuItem>[%== html %]</li>');
e.template("textboxlist/loadingHint",'<i class="textboxlist-autocomplete-loading-indicator"></i>');e.template("textboxlist/emptyHint",'<span class="textboxlist-autocomplete-empty-text">No items found.</span>');e.Controller("Textboxlist.Autocomplete",{defaultOptions:{view:{menu:"textboxlist/menu",menuItem:"textboxlist/menuItem",loadingHint:"textboxlist/loadingHint",emptyHint:"textboxlist/emptyHint"},cache:!0,minLength:1,limit:10,highlight:!0,caseSensitive:!1,exclusive:!1,query:null,position:{my:"left top",
at:"left bottom",collision:"none"},filterItem:null,showEmptyHint:!1,showLoadingHint:!1,"{menu}":"[data-textboxlist-menu]","{menuItem}":"[data-textboxlist-menuItem]","{viewport}":"[data-textboxlist-autocomplete-viewport]","{loadingHint}":"[data-textboxlist-autocomplete-loading]","{emptyHint}":"[data-textboxlist-autocomplete-empty]"}},function(a){return{init:function(){if(a.element.data(a.Class.fullName)){var b=a.textboxlist;b.autocomplete=a;b.pluginInstances.autocomplete=a;a.options.position.of=a.textboxlist.element;
a.initQuery();a.view.loadingHint().appendTo(a.loadingHint());a.view.emptyHint().appendTo(a.emptyHint());a.element.detach()}else a.destroy(),a.view.menu().appendTo("body").data(a.Class.fullName,!0).addController(a.Class,a.options)},initQuery:function(){var b=a.options.query||a.textboxlist.element.data("query");e.isUrl(b)?a.query=function(a){return e.ajax(b+a)}:e.isFunction(b)?a.query=function(d){return b.call(a,d)}:e.isArray(b)&&(a.query=function(a){var f=e.Deferred();a=a.toLowerCase();setTimeout(function(){var k=
e.grep(b,function(b){return-1<b.title.toLowerCase().indexOf(a)});f.resolve(k)},0);return f})},setLayout:function(){a.hidden||a.element.css({opacity:1,width:a.textboxlist.element.outerWidth()}).position(a.options.position)},"{window} resize":e.debounce(function(){a.element.css("opacity",0);a.setLayout()},250),"{window} scroll":e.debounce(function(){a.element.css("opacity",0);a.setLayout()},250),"{window} dialogTransitionStart":function(){a.hidden=!0;a.element.css("opacity",0)},"{window} dialogTransitionEnd":function(){a.hidden=
!1;a.setLayout()},show:function(){clearTimeout(a.sleep);a.element.appendTo("body").show();a.hidden=!1;a.setLayout()},hide:function(){a.element.hide();var b=a.menuItem(),d=b.filter(".active");0<d.length&&(a.lastItem={keyword:e.trim(a.textboxlist.textField().val()),item:d.data("item")});b.removeClass("active");a.render.reset();a.hidden=!0;clearTimeout(a.sleep);a.sleep=setTimeout(function(){a.element.detach()},3E3)},queries:{},populated:!1,populate:function(b){a.populated=!1;var d=a.element,f=a.options;
d.removeClass("loading empty");f.showLoadingHint&&a.hide();var k=a.trigger("populateKeyword",[b]);k.keyword&&(b=k.keyword);var g=f.caseSensitive?b:b.toLowerCase(),h=a.queries[g],s=!e.isDeferred(h)||!a.options.cache,k=function(){f.showLoadingHint&&(d.addClass("loading"),a.show());if(s||!s&&"rejected"==h.state())h=a.queries[g]=a.query(b);h.done(a.render(function(a){return[a,b]})).fail(function(){a.hide()}).always(function(){d.removeClass("loading")});a.trigger("queryKeyword",[h,b])};s?(clearTimeout(a.queryTask),
a.queryTask=setTimeout(k,250)):k()},populateTask:null,populateFromTextField:function(){clearTimeout(a.populateTask);a.populateTask=setTimeout(function(){var b=a.textboxlist.textField(),b=e.trim(b.val());""===b||b.length<a.options.minLength?a.hide():a.populate(b)},1)},render:e.Enqueue(function(b,d){e.isArray(b)||(b=[]);var f=a.textboxlist,k=a.element,g=a.options,h=a.menu();if(1>b.length)g.showEmptyHint?(h.empty(),k.addClass("empty"),f.trigger("renderMenu",[h,a,f]),a.show()):a.hide();else{k.removeClass("empty");
g.cache&&h.data("keyword")===d||(h.empty(),e.each(b,function(b,c){f.trigger("filterItem",[c,a,f]);var k=g.filterItem;e.isFunction(k)&&(c=k.call(a,c,d));e.isPlainObject(c)&&!c.discard&&a.view.menuItem({html:c.menuHtml||c.title}).data("item",c).appendTo(h)}),h.data("keyword",d));var s=a.menuItem();f.trigger("filterMenu",[h,s,a,f]);if(1>s.filter(":not(.hidden)").length&&(k.addClass("empty"),!g.showEmptyHint))return a.hide();g.exclusive&&a.menuItem(":not(.hidden):first").addClass("active");f.trigger("renderMenu",
[h,a,f]);a.show()}}),"{textboxlist.textField} keydown":function(b,d){clearTimeout(a.sleep);var f=a.menuItem(".active:not(.hidden)");1>f.length&&(f=!1);a.textboxlist.textField();switch(d.keyCode){case 38:a.menuItem().removeClass("active");f?f.prev(a.menuItem.selector+":not(.hidden)").addClass("active"):a.menuItem(":not(.hidden):last").addClass("active");d.preventDefault();break;case 40:a.menuItem().removeClass("active");f?f.next(a.menuItem.selector+":not(.hidden)").addClass("active"):a.menuItem(":not(.hidden):first").addClass("active");
d.preventDefault();break;case 27:a.hide();break;case 13:break;default:a.populateFromTextField()}f=a.menuItem(".active:not(.hidden)");1>f.length||a.viewport().scrollIntoView(f)},"{textboxlist} textboxlistActivate":function(b){a.populateFromTextField()},"{textboxlist} textboxlistDeactivate":function(b){setTimeout(function(){a.hide()},150)},"{textboxlist} destroyed":function(){a.element.remove()},"{textboxlist} useItem":function(b,d,f){if(b=a.options.exclusive)d.item=!1;if(a.hidden){var e=a.lastItem;
b&&e&&e.keyword==f&&(d.item=e.item)}else f=a.menuItem(".active"),0<f.length&&(f=f.data("item"),d.item=f),a.hide()},"{menuItem} mousedown":function(){a.textboxlist.focusing=!0},"{menuItem} mouseup":function(){a.textboxlist.focusing=!1},"{menuItem} click":function(b){a.hide();b=b.data("item");a.textboxlist.addItem(b);var d=a.textboxlist.textField().val("");setTimeout(function(){d.focus()},150)},"{menuItem} mouseover":function(b){a.menuItem().removeClass("active");b.addClass("active")},"{menuItem} mouseout":function(b){a.menuItem().removeClass("active")}}})};
b();g.resolveWith(b)})})})();(function(){FD31.module("autosize.input",function(e){var g=e,b=function(){var a;(function(a){var b=function(){function a(b,c){var d=this;this._input=e(b);this._options=c;this._mirror=e('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>');e.each("fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent".split(" "),function(a,b){d._mirror[0].style[b]=d._input.css(b)});e("body").append(this._mirror);this._input.bind("keydown keyup input",
function(a){d.update()});d.update()}Object.defineProperty(a.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0});Object.defineProperty(a,"instanceKey",{get:function(){return"autosizeInputInstance"},enumerable:!0,configurable:!0});a.prototype.update=function(){var a=this._input.val();a||(a=this._input.attr("placeholder"));a!==this._mirror.text()&&(this._mirror.text(a),a=this._mirror.width()+this._options.space,this._input.width(a))};return a}();a.AutosizeInput=
b;var f=function(){function a(b){"undefined"===typeof b&&(b=30);this._space=b}Object.defineProperty(a.prototype,"space",{get:function(){return this._space},set:function(a){this._space=a},enumerable:!0,configurable:!0});return a}();a.AutosizeInputOptions=f;(function(b){var d="text password search url tel email".split(" ");b.fn.autosizeInput=function(e){return this.each(function(){if("INPUT"==this.tagName&&-1<b.inArray(this.type,d)){var e=b(this);if(!e.data(a.AutosizeInput.instanceKey)){if(void 0==
g){var g=e.data("autosize-input");g&&"object"==typeof g||(g=new f)}e.data(a.AutosizeInput.instanceKey,new a.AutosizeInput(this,g))}}})};b(function(){b("input[data-autosize-input]").autosizeInput()})})(g)})(a||(a={}))};b();this.resolveWith(b)})})();(function(){FD31.module("scrollTo",function(e){var g=function(){(function(b){function a(a){return"object"==typeof a?a:{top:a,left:a}}var c=b.scrollTo=function(a,c,e){b(window).scrollTo(a,c,e)};c.defaults={axis:"xy",duration:1.3<=parseFloat(b.fn.jquery)?
0:1,limit:!0};c.window=function(a){return b(window)._scrollable()};b.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==b.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var a=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||"BackCompat"==a.compatMode?a.body:a.documentElement})};b.fn.scrollTo=function(d,f,e){"object"==typeof f&&(e=f,f=0);"function"==typeof e&&(e={onAfter:e});"max"==
d&&(d=9E9);e=b.extend({},c.defaults,e);f=f||e.duration;e.queue=e.queue&&1<e.axis.length;e.queue&&(f/=2);e.offset=a(e.offset);e.over=a(e.over);return this._scrollable().each(function(){function g(a){s.animate(r,f,e.easing,a&&function(){a.call(this,d,e)})}if(null!=d){var h=this,s=b(h),q=d,u,r={},t=s.is("html,body");switch(typeof q){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(q)){q=a(q);break}q=b(q,this);if(!q.length)return;case "object":if(q.is||q.style)u=(q=b(q)).offset()}b.each(e.axis.split(""),
function(a,b){var d="x"==b?"Left":"Top",f=d.toLowerCase(),w="scroll"+d,B=h[w],x=c.max(h,b);u?(r[w]=u[f]+(t?0:B-s.offset()[f]),e.margin&&(r[w]-=parseInt(q.css("margin"+d))||0,r[w]-=parseInt(q.css("border"+d+"Width"))||0),r[w]+=e.offset[f]||0,e.over[f]&&(r[w]+=q["x"==b?"width":"height"]()*e.over[f])):(d=q[f],r[w]=d.slice&&"%"==d.slice(-1)?parseFloat(d)/100*x:d);e.limit&&/^\d+$/.test(r[w])&&(r[w]=0>=r[w]?0:Math.min(r[w],x));!a&&e.queue&&(B!=r[w]&&g(e.onAfterFirst),delete r[w])});g(e.onAfter)}}).end()};
b.fn.scrollIntoView=function(a){a=b(a);if(!(1>a.length)){var c=this.offset(),e=this.height(),c=c.top,g=c+e,h=a.offset(),s=a.height(),h=h.top;if(h+s>g)return this.scrollTo(a);if(h<c)return this.scrollTo(a,{offset:-1*(e-s)})}};c.max=function(a,c){var e="x"==c?"Width":"Height",g="scroll"+e;if(!b(a).is("html,body"))return a[g]-b(a)[e.toLowerCase()]();var e="client"+e,h=a.ownerDocument.documentElement,s=a.ownerDocument.body;return Math.max(h[g],s[g])-Math.min(h[e],s[e])}})(e)};g();this.resolveWith(g)})})();
(function(){FD31.module("expanding",function(e){var g=function(){function b(){e(this).data("textareaClone").find("div").text(this.value.replace(/\r\n/g,"\n")+" ");e(this).trigger("resize.expanding")}e.expandingTextarea=e.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},e.expandingTextarea||{});var a="lineHeight textDecoration letterSpacing fontSize fontFamily fontStyle fontWeight textTransform textAlign direction wordSpacing fontSizeAdjust wordWrap word-break borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom boxSizing webkitBoxSizing mozBoxSizing msBoxSizing".split(" "),
c={position:"absolute",height:"100%",resize:"none"},d={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},f={position:"relative"};e.fn.expandingTextarea=function(k){var g=e.extend({},e.expandingTextarea.opts,k);if("resize"===k)return this.trigger("input.expanding");if("destroy"===k)return this.filter(".expanding-init").each(function(){var a=e(this).removeClass("expanding-init");a.attr("style",a.data("expanding-styles")||"").removeData("expanding-styles")}),this;this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var k=
e(this),h=k.parent(),q=e(e.parseHTML("<pre class='textareaClone'><div></div></pre>"));k.after(q).data("textareaClone",q);h.css(f);k.data("expanding-styles",k.attr("style"));k.css(c);q.css(d);e.each(a,function(a,b){var c=k.css(b);q.css(b)!==c&&q.css(b,c)});k.bind("input.expanding propertychange.expanding keyup.expanding",b);b.apply(this);g.resize&&k.bind("resize.expanding",g.resize)});return this};e(function(){e.expandingTextarea.autoInitialize&&e(e.expandingTextarea.initialSelector).expandingTextarea()})};
g();this.resolveWith(g)})})();(function(){FD31.module("tinyscrollbar",function(e){var g=function(){(function(b){function a(a,d){var f,e,g;function h(a){var c=parseInt(z.obj.css(w),10);f=A?a.pageX:a.pageY;e="auto"==c?0:c;Q?(document.ontouchmove=function(a){a.preventDefault();q(a.touches[0])},document.ontouchend=u):(b(document).bind("mousemove",q),b(document).bind("mouseup",u),z.obj.bind("mouseup",u))}function s(a){1>t.ratio&&(a=a||window.event,x-=(a.wheelDelta?a.wheelDelta/120:-a.detail/3)*d.wheel,
x=Math.min(t[d.axis]-r[d.axis],Math.max(0,x)),z.obj.css(w,x/l.ratio),t.obj.css(w,-x),d.lockscroll||x!==t[d.axis]-r[d.axis]&&0!==x)&&(a=b.event.fix(a),a.preventDefault())}function q(a){1>t.ratio&&(g=Q?Math.min(v[d.axis]-z[d.axis],Math.max(0,e+(f-(A?a.pageX:a.pageY)))):Math.min(v[d.axis]-z[d.axis],Math.max(0,e+((A?a.pageX:a.pageY)-f))),x=g*l.ratio,t.obj.css(w,-x),z.obj.css(w,g))}function u(){b(document).unbind("mousemove",q);b(document).unbind("mouseup",u);z.obj.unbind("mouseup",u);document.ontouchmove=
document.ontouchend=null}var r={obj:b(".viewport",a)},t={obj:b(".overview",a)},l={obj:b(".scrollbar",a)},v={obj:b(".track",l.obj)},z={obj:b(".thumb",l.obj)},A="x"===d.axis,w=A?"left":"top",B=A?"Width":"Height",x=0;g=e=0;f=void 0;var Q="ontouchstart"in document.documentElement?!0:!1;this.update=function(a){r[d.axis]=r.obj[0]["offset"+B];t[d.axis]=t.obj[0]["scroll"+B];t.ratio=r[d.axis]/t[d.axis];l.obj.toggleClass("disable",1<=t.ratio);v[d.axis]="auto"===d.size?r[d.axis]:d.size;z[d.axis]=Math.min(v[d.axis],
Math.max(0,"auto"===d.sizethumb?v[d.axis]*t.ratio:d.sizethumb));l.ratio="auto"===d.sizethumb?t[d.axis]/v[d.axis]:(t[d.axis]-r[d.axis])/(v[d.axis]-z[d.axis]);x="relative"===a&&1>=t.ratio?Math.min(t[d.axis]-r[d.axis],Math.max(0,x)):0;x="bottom"===a&&1>=t.ratio?t[d.axis]-r[d.axis]:isNaN(parseInt(a,10))?x:parseInt(a,10);a=B.toLowerCase();z.obj.css(w,x/l.ratio);t.obj.css(w,-x);f=z.obj.offset()[w];l.obj.css(a,v[d.axis]);v.obj.css(a,v[d.axis]);z.obj.css(a,z[d.axis])};this.update();(function(){Q?r.obj[0].ontouchstart=
function(a){1===a.touches.length&&(h(a.touches[0]),a.stopPropagation())}:(z.obj.bind("mousedown",h),v.obj.bind("mouseup",q));d.scroll&&window.addEventListener?(a[0].addEventListener("DOMMouseScroll",s,!1),a[0].addEventListener("mousewheel",s,!1)):d.scroll&&(a[0].onmousewheel=s)})();return this}b.tiny=b.tiny||{};b.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,lockscroll:!0,size:"auto",sizethumb:"auto"}};b.fn.tinyscrollbar=function(c){var d=b.extend({},b.tiny.scrollbar.options,c);this.each(function(){b(this).data("tsb",
new a(b(this),d))});return this};b.fn.tinyscrollbar_update=function(a){return b(this).data("tsb").update(a)}})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("history",function(e){var g=function(){(function(a,b){var d=a.History=a.History||{};if("undefined"!==typeof d.Adapter)throw Error("History.js Adapter has already been loaded...");d.Adapter={bind:function(a,b,c){e(a).bind(b,c)},trigger:function(a,b,c){e(a).trigger(b,c)},extractEventData:function(a,d,e){return d&&d.originalEvent&&d.originalEvent[a]||
e&&e[a]||b},onDomLoad:function(a){e(a)}};"undefined"!==typeof d.init&&d.init()})(window);(function(a,b){var d=a.document,f=a.setInterval||f,e=a.History=a.History||{};if("undefined"!==typeof e.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");e.initHtml4=function(){if("undefined"!==typeof e.initHtml4.initialized)return!1;e.initHtml4.initialized=!0;e.enabled=!0;e.savedHashes=[];e.isLastHash=function(a){var b=e.getHashByIndex();return a===b};e.saveHash=function(a){if(e.isLastHash(a))return!1;
e.savedHashes.push(a);return!0};e.getHashByIndex=function(a){var b=null;return b="undefined"===typeof a?e.savedHashes[e.savedHashes.length-1]:0>a?e.savedHashes[e.savedHashes.length+a]:e.savedHashes[a]};e.discardedHashes={};e.discardedStates={};e.discardState=function(a,b,c){var d=e.getHashByState(a);e.discardedStates[d]={discardedState:a,backState:c,forwardState:b};return!0};e.discardHash=function(a,b,c){e.discardedHashes[a]={discardedHash:a,backState:c,forwardState:b};return!0};e.discardedState=
function(a){a=e.getHashByState(a);return e.discardedStates[a]||!1};e.discardedHash=function(a){return e.discardedHashes[a]||!1};e.recycleState=function(a){var b=e.getHashByState(a);e.discardedState(a)&&delete e.discardedStates[b];return!0};e.emulated.hashChange&&(e.hashChangeInit=function(){e.checkerFunction=null;var b="",c,g,h;e.isInternetExplorer()?(c=d.createElement("iframe"),c.setAttribute("id","historyjs-iframe"),c.style.display="none",d.body.appendChild(c),c.contentWindow.document.open(),c.contentWindow.document.close(),
g="",h=!1,e.checkerFunction=function(){if(h)return!1;h=!0;var d=e.getHash()||"",f=e.unescapeHash(c.contentWindow.document.location.hash)||"";d!==b?(b=d,f!==d&&(g=d,c.contentWindow.document.open(),c.contentWindow.document.close(),c.contentWindow.document.location.hash=e.escapeHash(d)),e.Adapter.trigger(a,"hashchange")):f!==g&&(g=f,e.setHash(f,!1));h=!1;return!0}):e.checkerFunction=function(){var c=e.getHash();c!==b&&(b=c,e.Adapter.trigger(a,"hashchange"));return!0};e.intervalList.push(f(e.checkerFunction,
e.options.hashChangeInterval));return!0},e.Adapter.onDomLoad(e.hashChangeInit));e.emulated.pushState&&(e.onHashChange=function(b){var c=e.getHashByUrl(b&&b.newURL||d.location.href);b=null;if(e.isLastHash(c))return e.busy(!1),!1;e.doubleCheckComplete();e.saveHash(c);if(c&&e.isTraditionalAnchor(c))return e.Adapter.trigger(a,"anchorchange"),e.busy(!1),!1;b=e.extractState(e.getFullUrl(c||d.location.href,!1),!0);if(e.isLastSavedState(b))return e.busy(!1),!1;e.getHashByState(b);if(c=e.discardedState(b))return e.getHashByIndex(-2)===
e.getHashByState(c.forwardState)?e.back(!1):e.forward(!1),!1;e.pushState(b.data,b.title,b.url,!1);return!0},e.Adapter.bind(a,"hashchange",e.onHashChange),e.pushState=function(b,c,f,g){if(e.getHashByUrl(f))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==g&&e.busy())return e.pushQueue({scope:e,callback:e.pushState,args:arguments,queue:g}),!1;e.busy(!0);var h=e.createStateObject(b,c,f),r=e.getHashByState(h),t=e.getState(!1),t=e.getHashByState(t),
l=e.getHash();e.storeState(h);e.expectedStateId=h.id;e.recycleState(h);e.setTitle(h);if(r===t)return e.busy(!1),!1;if(r!==l&&r!==e.getShortUrl(d.location.href))return e.setHash(r,!1),!1;e.saveState(h);e.Adapter.trigger(a,"statechange");e.busy(!1);return!0},e.replaceState=function(a,b,c,d){if(e.getHashByUrl(c))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==d&&e.busy())return e.pushQueue({scope:e,callback:e.replaceState,args:arguments,queue:d}),
!1;e.busy(!0);var f=e.createStateObject(a,b,c),g=e.getState(!1),h=e.getStateByIndex(-2);e.discardState(g,f,h);e.pushState(f.data,f.title,f.url,!1);return!0});if(e.emulated.pushState&&e.getHash()&&!e.emulated.hashChange)e.Adapter.onDomLoad(function(){e.Adapter.trigger(a,"hashchange")})};"undefined"!==typeof e.init&&e.init()})(window);(function(a,b){var d=a.console||b,f=a.document,e=a.navigator,g=a.sessionStorage||!1,h=a.setTimeout,s=a.clearTimeout,q=a.setInterval,u=a.clearInterval,r=a.JSON,t=a.alert,
l=a.History=a.History||{},v=a.history;r.stringify=r.stringify||r.encode;r.parse=r.parse||r.decode;if("undefined"!==typeof l.init)throw Error("History.js Core has already been loaded...");l.init=function(){if("undefined"===typeof l.Adapter)return!1;"undefined"!==typeof l.initCore&&l.initCore();"undefined"!==typeof l.initHtml4&&l.initHtml4();return!0};l.initCore=function(){if("undefined"!==typeof l.initCore.initialized)return!1;l.initCore.initialized=!0;l.options=l.options||{};l.options.hashChangeInterval=
l.options.hashChangeInterval||100;l.options.safariPollInterval=l.options.safariPollInterval||500;l.options.doubleCheckInterval=l.options.doubleCheckInterval||500;l.options.storeInterval=l.options.storeInterval||1E3;l.options.busyDelay=l.options.busyDelay||250;l.options.debug=l.options.debug||!1;l.options.initialTitle=l.options.initialTitle||f.title;l.intervalList=[];l.clearAllIntervals=function(){var a,b=l.intervalList;if("undefined"!==typeof b&&null!==b){for(a=0;a<b.length;a++)u(b[a]);l.intervalList=
null}};l.debug=function(){l.options.debug&&l.log.apply(l,arguments)};l.log=function(){var a=!("undefined"===typeof d||"undefined"===typeof d.log||"undefined"===typeof d.log.apply),b=f.getElementById("log"),c,e,g,k;a?(e=Array.prototype.slice.call(arguments),c=e.shift(),"undefined"!==typeof d.debug?d.debug.apply(d,[c,e]):d.log.apply(d,[c,e])):c="\n"+arguments[0]+"\n";e=1;for(g=arguments.length;e<g;++e){k=arguments[e];if("object"===typeof k&&"undefined"!==typeof r)try{k=r.stringify(k)}catch(h){}c+="\n"+
k+"\n"}b?(b.value+=c+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||t(c);return!0};l.getInternetExplorerMajorVersion=function(){var a=l.getInternetExplorerMajorVersion,b;if("undefined"!==typeof l.getInternetExplorerMajorVersion.cached)b=l.getInternetExplorerMajorVersion.cached;else{b=3;for(var c=f.createElement("div"),d=c.getElementsByTagName("i");(c.innerHTML="\x3c!--[if gt IE "+ ++b+"]><i></i><![endif]--\x3e")&&d[0];);b=4<b?b:!1}return a.cached=b};l.isInternetExplorer=function(){return l.isInternetExplorer.cached=
"undefined"!==typeof l.isInternetExplorer.cached?l.isInternetExplorer.cached:Boolean(l.getInternetExplorerMajorVersion())};l.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in f)||l.isInternetExplorer()&&8>l.getInternetExplorerMajorVersion())};l.enabled=!l.emulated.pushState;l.bugs={setHash:Boolean(!l.emulated.pushState&&
"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!l.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(l.isInternetExplorer()&&8>l.getInternetExplorerMajorVersion()),hashEscape:Boolean(l.isInternetExplorer()&&7>l.getInternetExplorerMajorVersion())};l.isEmptyObject=function(a){for(var b in a)return!1;return!0};l.cloneObject=function(a){a?(a=r.stringify(a),a=r.parse(a)):
a={};return a};l.getRootUrl=function(){var a=f.location.protocol+"//"+(f.location.hostname||f.location.host);f.location.port&&(a+=":"+f.location.port);return a+"/"};l.getBaseHref=function(){var a=f.getElementsByTagName("base"),b=null,b="";1===a.length&&(b=a[0],b=b.href.replace(/[^\/]+$/,""));(b=b.replace(/\/+$/,""))&&(b+="/");return b};l.getBaseUrl=function(){return l.getBaseHref()||l.getBasePageUrl()||l.getRootUrl()};l.getPageUrl=function(){return((l.getState(!1,!1)||{}).url||f.location.href).replace(/\/+$/,
"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"})};l.getBasePageUrl=function(){return f.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};l.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);b="undefined"===typeof b?!0:b;/[a-z]+\:\/\//.test(a)||(c="/"===d?l.getRootUrl()+a.replace(/^\/+/,""):"#"===d?l.getPageUrl().replace(/#.*/,"")+a:"?"===d?l.getPageUrl().replace(/[\?#].*/,"")+a:b?l.getBaseUrl()+a.replace(/^(\.\/)+/,
""):l.getBasePageUrl()+a.replace(/^(\.\/)+/,""));return c.replace(/\#$/,"")};l.getShortUrl=function(a){var b=l.getBaseUrl(),c=l.getRootUrl();l.emulated.pushState&&(a=a.replace(b,""));a=a.replace(c,"/");l.isTraditionalAnchor(a)&&(a="./"+a);return a=a.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")};l.store={};l.idToState=l.idToState||{};l.stateToId=l.stateToId||{};l.urlToId=l.urlToId||{};l.storedStates=l.storedStates||[];l.savedStates=l.savedStates||[];l.normalizeStore=function(){l.store.idToState=l.store.idToState||
{};l.store.urlToId=l.store.urlToId||{};l.store.stateToId=l.store.stateToId||{}};l.getState=function(a,b){"undefined"===typeof a&&(a=!0);"undefined"===typeof b&&(b=!0);var c=l.getLastSavedState();!c&&b&&(c=l.createStateObject());a&&(c=l.cloneObject(c),c.url=c.cleanUrl||c.url);return c};l.getIdByState=function(a){var b=l.extractId(a.url),c;if(!b)if(c=l.getStateString(a),"undefined"!==typeof l.stateToId[c])b=l.stateToId[c];else if("undefined"!==typeof l.store.stateToId[c])b=l.store.stateToId[c];else{for(;b=
(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!==typeof l.idToState[b]||"undefined"!==typeof l.store.idToState[b];);l.stateToId[c]=b;l.idToState[b]=a}return b};l.normalizeState=function(a){var b;a&&"object"===typeof a||(a={});if("undefined"!==typeof a.normalized)return a;a.data&&"object"===typeof a.data||(a.data={});b={normalized:!0};b.title=a.title||"";b.url=l.getFullUrl(l.unescapeString(a.url||f.location.href));b.hash=l.getShortUrl(b.url);b.data=l.cloneObject(a.data);b.id=
l.getIdByState(b);b.cleanUrl=b.url.replace(/\??\&_suid.*/,"");b.url=b.cleanUrl;a=!l.isEmptyObject(b.data);if(b.title||a)b.hash=l.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;b.hashedUrl=l.getFullUrl(b.hash);(l.emulated.pushState||l.bugs.safariPoll)&&l.hasUrlDuplicate(b)&&(b.url=b.hashedUrl);return b};l.createStateObject=function(a,b,c){a={data:a,title:b,url:c};return a=l.normalizeState(a)};l.getStateById=function(a){a=String(a);return l.idToState[a]||
l.store.idToState[a]||b};l.getStateString=function(a){a={data:l.normalizeState(a).data,title:a.title,url:a.url};return r.stringify(a)};l.getStateId=function(a){return l.normalizeState(a).id};l.getHashByState=function(a){return l.normalizeState(a).hash};l.extractId=function(a){return((a=/(.*)\&_suid=([0-9]+)$/.exec(a))?String(a[2]||""):"")||!1};l.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};l.extractState=function(a,b){var c=null,d,f;b=b||!1;(d=l.extractId(a))&&(c=l.getStateById(d));
c||(f=l.getFullUrl(a),(d=l.getIdByUrl(f)||!1)&&(c=l.getStateById(d)),c||!b||l.isTraditionalAnchor(a)||(c=l.createStateObject(null,null,f)));return c};l.getIdByUrl=function(a){return l.urlToId[a]||l.store.urlToId[a]||b};l.getLastSavedState=function(){return l.savedStates[l.savedStates.length-1]||b};l.getLastStoredState=function(){return l.storedStates[l.storedStates.length-1]||b};l.hasUrlDuplicate=function(a){var b=!1;return b=(b=l.extractState(a.url))&&b.id!==a.id};l.storeState=function(a){l.urlToId[a.url]=
a.id;l.storedStates.push(l.cloneObject(a));return a};l.isLastSavedState=function(a){var b=!1;l.savedStates.length&&(a=a.id,b=l.getLastSavedState(),b=b.id,b=a===b);return b};l.saveState=function(a){if(l.isLastSavedState(a))return!1;l.savedStates.push(l.cloneObject(a));return!0};l.getStateByIndex=function(a){var b=null;return b="undefined"===typeof a?l.savedStates[l.savedStates.length-1]:0>a?l.savedStates[l.savedStates.length+a]:l.savedStates[a]};l.getHash=function(){return l.unescapeHash(f.location.hash)};
l.unescapeString=function(b){for(var c;;){c=a.unescape(b);if(c===b)break;b=c}return b};l.unescapeHash=function(a){a=l.normalizeHash(a);return a=l.unescapeString(a)};l.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};l.setHash=function(a,b){var c,d;if(!1!==b&&l.busy())return l.pushQueue({scope:l,callback:l.setHash,args:arguments,queue:b}),!1;c=l.escapeHash(a);l.busy(!0);(d=l.extractState(a,!0))&&!l.emulated.pushState?l.pushState(d.data,d.title,d.url,!1):f.location.hash!==
c&&(l.bugs.setHash?(d=l.getPageUrl(),l.pushState(null,null,d+"#"+c,!1)):f.location.hash=c);return l};l.escapeHash=function(b){b=l.normalizeHash(b);b=a.escape(b);l.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return b};l.getHashByUrl=function(a){a=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return a=l.unescapeHash(a)};l.setTitle=function(a){var b=a.title,c;b||(c=l.getStateByIndex(0))&&c.url===a.url&&(b=c.title||l.options.initialTitle);
try{f.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(d){}f.title=b;return l};l.queues=[];l.busy=function(a){"undefined"!==typeof a?l.busy.flag=a:"undefined"===typeof l.busy.flag&&(l.busy.flag=!1);if(!l.busy.flag){s(l.busy.timeout);var b=function(){var a,c;if(!l.busy.flag)for(a=l.queues.length-1;0<=a;--a)c=l.queues[a],0!==c.length&&(c=c.shift(),l.fireQueueItem(c),l.busy.timeout=h(b,l.options.busyDelay))};l.busy.timeout=h(b,l.options.busyDelay)}return l.busy.flag};
l.busy.flag=!1;l.fireQueueItem=function(a){return a.callback.apply(a.scope||l,a.args||[])};l.pushQueue=function(a){l.queues[a.queue||0]=l.queues[a.queue||0]||[];l.queues[a.queue||0].push(a);return l};l.queue=function(a,b){"function"===typeof a&&(a={callback:a});"undefined"!==typeof b&&(a.queue=b);l.busy()?l.pushQueue(a):l.fireQueueItem(a);return l};l.clearQueue=function(){l.busy.flag=!1;l.queues=[];return l};l.stateChanged=!1;l.doubleChecker=!1;l.doubleCheckComplete=function(){l.stateChanged=!0;l.doubleCheckClear();
return l};l.doubleCheckClear=function(){l.doubleChecker&&(s(l.doubleChecker),l.doubleChecker=!1);return l};l.doubleCheck=function(a){l.stateChanged=!1;l.doubleCheckClear();l.bugs.ieDoubleCheck&&(l.doubleChecker=h(function(){l.doubleCheckClear();l.stateChanged||a();return!0},l.options.doubleCheckInterval));return l};l.safariStatePoll=function(){var b=l.extractState(f.location.href);if(!l.isLastSavedState(b))return b||l.createStateObject(),l.Adapter.trigger(a,"popstate"),l};l.back=function(a){if(!1!==
a&&l.busy())return l.pushQueue({scope:l,callback:l.back,args:arguments,queue:a}),!1;l.busy(!0);l.doubleCheck(function(){l.back(!1)});v.go(-1);return!0};l.forward=function(a){if(!1!==a&&l.busy())return l.pushQueue({scope:l,callback:l.forward,args:arguments,queue:a}),!1;l.busy(!0);l.doubleCheck(function(){l.forward(!1)});v.go(1);return!0};l.go=function(a,b){var c;if(0<a)for(c=1;c<=a;++c)l.forward(b);else if(0>a)for(c=-1;c>=a;--c)l.back(b);else throw Error("History.go: History.go requires a positive or negative integer passed.");
return l};if(l.emulated.pushState){var z=function(){};l.pushState=l.pushState||z;l.replaceState=l.replaceState||z}else l.onPopState=function(b,c){var d=!1,d=!1;l.doubleCheckComplete();if(d=l.getHash())return(d=l.extractState(d||f.location.href,!0))?l.replaceState(d.data,d.title,d.url,!1):(l.Adapter.trigger(a,"anchorchange"),l.busy(!1)),l.expectedStateId=!1;(d=(d=l.Adapter.extractEventData("state",b,c)||!1)?l.getStateById(d):l.expectedStateId?l.getStateById(l.expectedStateId):l.extractState(f.location.href))||
(d=l.createStateObject(null,null,f.location.href));l.expectedStateId=!1;if(l.isLastSavedState(d))return l.busy(!1),!1;l.storeState(d);l.saveState(d);l.setTitle(d);l.Adapter.trigger(a,"statechange");l.busy(!1);return!0},l.Adapter.bind(a,"popstate",l.onPopState),l.pushState=function(b,c,d,f){if(l.getHashByUrl(d)&&l.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&l.busy())return l.pushQueue({scope:l,callback:l.pushState,args:arguments,
queue:f}),!1;l.busy(!0);var e=l.createStateObject(b,c,d);l.isLastSavedState(e)?l.busy(!1):(l.storeState(e),l.expectedStateId=e.id,v.pushState(e.id,e.title,e.url),l.Adapter.trigger(a,"popstate"));return!0},l.replaceState=function(b,c,d,f){if(l.getHashByUrl(d)&&l.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&l.busy())return l.pushQueue({scope:l,callback:l.replaceState,args:arguments,queue:f}),!1;l.busy(!0);var e=l.createStateObject(b,
c,d);l.isLastSavedState(e)?l.busy(!1):(l.storeState(e),l.expectedStateId=e.id,v.replaceState(e.id,e.title,e.url),l.Adapter.trigger(a,"popstate"));return!0};if(g)try{l.store=r.parse(g.getItem("History.store"))||{}}catch(A){l.store={}}else l.store={};l.normalizeStore();l.Adapter.bind(a,"beforeunload",l.clearAllIntervals);l.Adapter.bind(a,"unload",l.clearAllIntervals);l.saveState(l.storeState(l.extractState(f.location.href,!0)));g&&(l.onUnload=function(){var a,b;try{a=r.parse(g.getItem("History.store"))||
{}}catch(c){a={}}a.idToState=a.idToState||{};a.urlToId=a.urlToId||{};a.stateToId=a.stateToId||{};for(b in l.idToState)l.idToState.hasOwnProperty(b)&&(a.idToState[b]=l.idToState[b]);for(b in l.urlToId)l.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=l.urlToId[b]);for(b in l.stateToId)l.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=l.stateToId[b]);l.store=a;l.normalizeStore();g.setItem("History.store",r.stringify(a))},l.intervalList.push(q(l.onUnload,l.options.storeInterval)),l.Adapter.bind(a,"beforeunload",
l.onUnload),l.Adapter.bind(a,"unload",l.onUnload));if(!l.emulated.pushState&&(l.bugs.safariPoll&&l.intervalList.push(q(l.safariStatePoll,l.options.safariPollInterval)),"Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(l.Adapter.bind(a,"hashchange",function(){l.Adapter.trigger(a,"popstate")}),l.getHash()))l.Adapter.onDomLoad(function(){l.Adapter.trigger(a,"hashchange")})};l.init()})(window);var b=[];e.fn.route=function(a){if(this.is("a")){var c=(new Date).getTime();b[c]=c;History.pushState(e.extend({timestamp:c,
refresh:!0},a),this.attr("title"),this.attr("href"))}return this};History.Adapter.bind(window,"statechange",function(){var a=History.getState();a.data.timestamp in b?delete b[a.data.timestamp]:a.data.refresh&&(window.location=a.url)})};g();this.resolveWith(g)})})();(function(){FD31.module("masonry",function(e){var g=function(){(function(b,a,c){var d=a.event,f;d.special.smartresize={setup:function(){a(this).bind("resize",d.special.smartresize.handler)},teardown:function(){a(this).unbind("resize",d.special.smartresize.handler)},
handler:function(a,b){var c=this,d=arguments;a.type="smartresize";f&&clearTimeout(f);f=setTimeout(function(){e.event.handle.apply(c,d)},"execAsap"===b?0:100)}};a.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};a.Mason=function(b,c){this.element=a(c);this._create(b);this._init()};a.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}};a.Mason.prototype=
{_filterFindBricks:function(a){var b=this.options.itemSelector;return b?a.filter(b).add(a.find(b)):a},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(c){this.options=a.extend(!0,{},a.Mason.settings,c);this.styleQueue=[];c=this.element[0].style;this.originalStyle={height:c.height||""};var d=this.options.containerStyle,f;for(f in d)this.originalStyle[f]=c[f]||"";this.element.css(d);this.horizontalDirection=this.options.isRTL?
"right":"left";this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)};this.isFluid=this.options.columnWidth&&"function"===typeof this.options.columnWidth;var e=this;setTimeout(function(){e.element.addClass("masonry")},0);this.options.isResizable&&a(b).bind("smartresize.masonry",function(){e.resize()});this.reloadItems()},_init:function(a){this._getColumns();this._reLayout(a)},option:function(b,c){a.isPlainObject(b)&&(this.options=
a.extend(!0,this.options,b))},layout:function(a,b){for(var c=0,d=a.length;c<d;c++)this._placeBrick(a[c]);d={};d.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){for(var f=0,c=this.cols;--c&&0===this.colYs[c];)f++;d.width=(this.cols-f)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:d});for(var f=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",e=this.options.animationOptions,g,c=0,d=this.styleQueue.length;c<d;c++)g=this.styleQueue[c],
g.$el[f](g.style,e);this.styleQueue=[];b&&b.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width();this.columnWidth=this.isFluid?this.options.columnWidth(a):this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(b){b=a(b);var c,d,f,e,g;c=Math.ceil(b.outerWidth(!0)/
(this.columnWidth+this.options.gutterWidth));c=Math.min(c,this.cols);if(1===c)f=this.colYs;else for(d=this.cols+1-c,f=[],g=0;g<d;g++)e=this.colYs.slice(g,g+c),f[g]=Math.max.apply(Math,e);g=Math.min.apply(Math,f);d=c=0;for(e=f.length;d<e;d++)if(f[d]===g){c=d;break}f={top:g+this.offset.y};f[this.horizontalDirection]=this.columnWidth*c+this.offset.x;this.styleQueue.push({$el:b,style:f});b=g+b.outerHeight(!0);f=this.cols+1-e;for(d=0;d<f;d++)this.colYs[c+d]=b},resize:function(){var a=this.cols;this._getColumns();
(this.isFluid||this.cols!==a)&&this._reLayout()},_reLayout:function(a){var b=this.cols;for(this.colYs=[];b--;)this.colYs.push(0);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();this._init(a)},appended:function(a,b,c){if(b){this._filterFindBricks(a).css({top:this.element.height()});var d=this;setTimeout(function(){d._appended(a,c)},1)}else this._appended(a,c)},_appended:function(a,b){var c=this._getBricks(a);
this.$bricks=this.$bricks.add(c);this.layout(c,b)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});var c=this.element[0].style,d;for(d in this.originalStyle)c[d]=this.originalStyle[d];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");a(b).unbind(".masonry")}};a.fn.imagesLoaded=function(b){function c(){b.call(f,e)}function d(b){b=
b.target;b.src!==h&&-1===a.inArray(b,t)&&(t.push(b),0>=--g&&(setTimeout(c),e.unbind(".imagesLoaded",d)))}var f=this,e=f.find("img").add(f.filter("img")),g=e.length,h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t=[];g||c();e.bind("load.imagesLoaded error.imagesLoaded",d).each(function(){var a=this.src;this.src=h;this.src=a});return f};a.fn.masonry=function(c){if("string"===typeof c){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var f=a.data(this,"masonry");
f?a.isFunction(f[c])&&"_"!==c.charAt(0)?f[c].apply(f,d):b.console&&b.console.error("no such method '"+c+"' for masonry instance"):b.console&&b.console.error("cannot call methods on masonry prior to initialization; attempted to call method '"+c+"'")})}else this.each(function(){var b=a.data(this,"masonry");b?(b.option(c||{}),b._init()):a.data(this,"masonry",new a.Mason(c,this))});return this}})(window,e)};g();this.resolveWith(g)})})();(function(){FD31.module("dialog",function(e){var g=this;e.require().script("ui/position",
"easing").done(function(){var b=function(){e.template("dialog/default",'<div class="foundryDialog global"><div class="dialog-wrap"><div class="in"><div class="dialog-loader"><div class="loader-img"></div></div><div class="dialog-head"><span class="dialog-title"></span><a class="dialog-closeButton">Close</a></div><div class="dialog-body dialog-content"></div><div class="dialog-footer"><div class="dialog-loading"></div><div class="dialog-buttons"></div></div></div></div></div>');e.Controller("Dialog",
{pluginName:"dialog",defaultOptions:{title:"",content:void 0,buttons:{},customClass:"",width:"auto",height:"auto",css:{position:"absolute",width:"auto",height:"auto",zIndex:10001},position:{my:"center center",at:"center center",of:window},offset:100,showOverlay:!0,overlay:{css:{background:"#000",opacity:"0.4",position:"fixed",top:0,left:0,zIndex:1E4,width:"100%",height:"100%",display:"none"}},body:{css:{minWidth:0,minHeight:0,overflow:"auto"}},loader:{width:300,height:100},loading:"",iframe:{css:{width:"100%",
height:"100%",border:"none"}},transition:{show:"zoom",hide:"zoom"},escapeKey:!0,beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){},dialogHead:".dialog-head",dialogBody:".dialog-body",dialogFooter:".dialog-footer",dialogTitle:".dialog-title",dialogContent:".dialog-content",dialogButtons:".dialog-buttons",dialogLoader:".dialog-loader",dialogLoading:".dialog-loading","{closeButton}":".dialog-closeButton"}},function(a){return{ready:!1,contentReady:!1,init:function(){a.setInitOptions(a.options);
a.initElement=a.element.clone();a.element.finalizeContent=function(){return a.finalizeContent.apply(a,arguments)};e.each("dialogHead dialogBody dialogFooter dialogTitle dialogContent dialogButtons dialogLoader dialogLoading".split(" "),function(b,d){a[d]=a.find(a.options[d])});void 0!==a.options.content&&a.display()},"{self} destroyed":function(){e(document).off("keydown.foundry.dialog")},setInitOptions:function(b){a.initOptions=e.extend(!0,{},b);e.each(["beforeShow","afterShow","beforeHide","afterHide"],
function(b,c){a.initOptions[c]=function(){}});e.each("title content buttons loading selectors bindings".split(" "),function(b,c){a.initOptions[c]=null})},update:function(b){if(b){if(b.hasOwnProperty("{binder}"))return;b=e.extend(!0,{},a.initOptions,b);a.setInitOptions(b);a.display(b)}return a},determineContentType:function(a){return/<dialog>(.*?)/.test(a)?"dialog":e.isUrl(a)?"iframe":e.isDeferred(a)?"deferred":"html"},displayQueue:[],display:function(b){if(a.resizing)return a.displayQueue.push(b);
e.isPlainObject(b)&&(a.options=e.extend(!0,{},a.Class.defaults,b));a.ready||a.options.showOverlay&&a.createOverlay();b=a.options;var d=b.content;a.contentReady=null===d;a.contentType=a.determineContentType(d);var f=b.transition;e.isString(f)&&(b.transition={show:f,hide:f});switch(a.contentType){case "html":a.hideLoader();a.show();break;case "iframe":var g=e(document.createElement("iframe")),h=b.iframe.css,p=a.dialogContent,s=e.extend(!0,{},b,{content:g,buttons:b.buttons});a.showLoader(function(){onIframeLoaded=
function(){return function(b){try{g[0].contentWindow.parentDialog=a}catch(c){}a.update(s)}}();a.dialogBody.addClass("type-iframe");g.appendTo(p).css(h).css({position:"absolute",visibility:"hidden"}).one("load",onIframeLoaded).attr("src",d)});break;case "deferred":a.showLoader(function(){d.done(function(d){d&&(d=e.isString(d)?{content:d}:d,d.content&&a.update(e.extend(!0,{},b,d)))}).fail(function(b,c){var d=e.isString(c)?e.String.capitalize(c):"Error",f=e.isString(b)?b:"There was an error loading content.";
a.update({title:d,content:f})})});break;case "dialog":var f=e.buildHTML(d),q={};e.each(f.children(),function(a,b){b=e(b);var c=e.String.camelize(this.nodeName.toLowerCase()),d=b.html();switch(b.attr("type")){case "json":try{d=e.parseJSON(d)}catch(f){}break;case "javascript":try{d=eval("(function($){ return "+e.trim(d)+" })("+e.globalNamespace+")")}catch(g){}break;case "text":d=b.text()}e.isNumeric(d)&&(d=parseFloat(d));q[c]=d});a.update(e.extend(!0,{},b,q))}},loading:function(b){var d=a.element;if(void 0===
b)return d.hasClass("loading");!1===b?d.removeClass("loading"):(!0===b&&(b=a.options.loading||""),e.isString(b)&&(d.addClass("loading"),a.dialogLoading.html(b)))},showLoader:function(b){var d=a.options.width,f=a.options.height,g=function(){a.dialogLoader.show().css({width:a.dialogBody.outerWidth(!0),height:a.dialogBody.outerHeight(!0)}).position({my:"top left",at:"top left",of:a.options.dialogContent});a.options.width=d;a.options.height=f;return b&&b()};return a.ready?g():a.update(e.extend({title:a.options.title,
content:"",width:a.initOptions.body.css.minWidth,height:a.initOptions.body.css.minHeight,afterShow:g},a.options.loader))},hideLoader:function(){a.element.removeClass("loading");a.dialogLoader.hide()},autoSize:function(){return"auto"==a.initOptions.css.width||"auto"==a.initOptions.css.height},finalizeContent:function(b){var d=a.options,f=d.content;a.element.css(d.css);a.dialogContent.css(d.body.css);if(!a.refreshing){null!==d.title&&a.dialogTitle.html(d.title);if(null!==f){var g=!e.isString(f)&&e(f).is("iframe");
a.dialogBody.toggleClass("type-iframe",g);if(g){d=f.parent()[0];for(b=0;1<d.childNodes.length;)g=d.childNodes[b],g!==f[0]&&d.removeChild(g),b++;f.css({position:"relative",visibility:"visible"})}else b?d.content=a.stripScript(f):f=a.stripScript(f),a.dialogContent.html(f)}a.contentReady||a.finalizeButtons();return a.element}},stripScript:function(a){if(!e.isString(a))return a;a=e(e.parseHTML(a));a.find("script").remove();return a},finalizeSize:function(b){var d=a.refElement,f=a.options,g=f.content,
h=f.css,p=f.body.css;void 0===d?d=a.refElement=a.initElement.clone().removeClass("global").insertAfter(a.element):d.insertAfter(a.element);if(!b){refTitle=d.find(f.dialogTitle);refBody=d.find(f.dialogBody);refFooter=d.find(f.dialogFooter);refButtons=d.find(f.dialogButtons);d.css(a.initOptions.css).css({display:"block"});refTitle.html(f.title);e.isEmptyObject(f.buttons)?refFooter.hide():(refFooter.show(),refButtons.append("<button>test</button>"));var s=(b=!e.isString(g)&&e(g).is("iframe"))?document.createElement("div"):
a.stripScript(g);p.width=b&&"auto"==f.width?g.contents().width():f.width;p.height=b&&"auto"==f.height?g.contents().height():f.height;refBody.css(p).toggleClass("type-iframe",b).html(s);refBody.width();refBody.height();"border-box"!==refBody.css("boxSizing")&&(p.width=refWidth,p.height=refHeight);p.width<p.minWidth&&(p.width=p.minWidth);p.height<p.minHeight&&(p.height=p.minHeight);var q=f.offset,g=d.width(),s=d.height(),u=e(window).width()-q,q=e(window).height()-q,r=g>u,t=s>q;h.width=r?u:g;h.height=
t?q:s;"auto"!==p.width&&(p.width-=g-h.width);0>=p.width&&(p.width="auto");"auto"!==p.height&&(p.height-=s-h.height);0>=p.height&&(p.height="auto");p.minWidth=p.minHeight="auto";refBody.css(p);p.overflowX=!r||b||refBody[0].scrollWidth<=p.width?"auto":"scroll";p.overflowY=!t||b||refBody[0].scrollHeight<=p.height?"auto":"scroll";refBody.html("")}d.css(h).css("visibility","hidden").position(f.position);h.top=d.css("top");h.left=d.css("left")},finalizeButtons:function(){var b=a.dialogFooter,d=a.dialogButtons;
d.empty();var f=a.options.buttons;e.isEmptyObject(f)?b.hide():(e.isString(f)&&d.html(f),e.isArray(f)&&e.each(f,function(a,b){var c=e.extend({},b),f=b.classNames?b.classNames:"";delete c.name;delete c.classNames;e(document.createElement("button")).attr("type","button").addClass(f).html(b.name).bind(c).appendTo(d)}),b.show())},show:function(b){if(!a.ready||!a.resizing){var d=a.options;a.refElement&&a.refElement.remove();a.contentReady||d.beforeShow.apply(a);e(document).off("keydown.foundry.dialog");
if(d.escapeKey)e(document).on("keydown.foundry.dialog",function(b){27==b.keyCode&&a.close()});a.resizing=!0;a.finalizeSize();a.element.addClass("resizing");e(window).trigger("dialogTransitionStart");a.transition[d.transition.show].show.apply(a,[function(){a.ready||(a.on("resize.dialog scroll.dialog",window,e._.debounce(function(){a.refresh()},150)),a.ready=!0);a.contentReady||(b&&b.apply(a),d.afterShow.apply(a));a.refElement.detach();a.element.removeClass("resizing");a.contentReady=!0;a.element.css({width:"auto",
height:"auto"});a.removePlugin("binder");var f=d.selectors,g=d.bindings;f&&g&&(f=e.Controller(e.uid("dialogBinder"),{defaultOptions:f},function(a){return g}),a.addPlugin("binder",f));0<a.displayQueue.length?setTimeout(function(){a.resizing=!1;a.display(a.displayQueue.shift())},500):(a.resizing=!1,e(window).trigger("dialogTransitionEnd"))}])}},"{self} removePlugin":function(a,b,f,g){void 0!==g&&delete e.Controller[g.Class.fullName]},hide:function(b){a.contentReady||a.options.beforeHide.apply(a);e(window).trigger("dialogTransitionStart");
a.transition[a.options.transition.hide].hide.apply(a,[function(){b&&b.apply(a);a.options.afterHide.apply(a);e(window).trigger("dialogTransitionEnd")}])},refresh:function(){a.closing||a.resizing||(a.finalizeSize(!0),a.resizing=!0,a.refreshing=!0,e(window).trigger("dialogTransitionStart"),a.transition[a.options.transition.show].show.apply(a,[function(){e(window).trigger("dialogTransitionEnd");a.resizing=!1;a.refreshing=!1;a.element.css({width:"auto",height:"auto"})}]))},transition:{none:{show:function(b){a.ready||
a.overlay.show();a.element.finalizeContent().show(0,b)},hide:function(b){a.overlay.hide();a.element.hide(0,b)}},fade:{show:function(b){a.ready||a.overlay.fadeOut(0).fadeIn("normal");if(a.contentReady)return a.element.finalizeContent(),b&&b();a.element.fadeOut(a.contentReady?"fast":0,function(){a.element.finalizeContent().fadeIn("normal","easeInCubic",b)})},hide:function(b){a.overlay.fadeOut("normal","easeOutCubic");a.element.fadeOut("normal","easeOutCubic",b)}},zoom:{show:function(b){var d=a.dialogBody,
f=a.dialogFooter,e=a.options.css;a.ready||(a.overlay.fadeIn("fast"),a.element.finalizeContent().css({top:parseInt(e.top)+parseInt(e.height)/2,left:parseInt(e.left)+parseInt(e.width)/2,width:0,height:0}));a.contentReady||(d.css({opacity:0}),f.css({opacity:0}));a.element.animate({top:e.top,left:e.left,width:e.width,height:e.height},"normal","easeInCubic",function(){a.element.finalizeContent(!0);d.css({opacity:1});f.css({opacity:1});return b&&b()})},hide:function(b){var d=a.options.css;a.element.animate({top:parseInt(d.top)+
parseInt(d.height)/2,left:parseInt(d.left)+parseInt(d.width)/2,width:0,height:0},"normal","easeOutCubic",function(){a.overlay.fadeOut("fast");return b&&b()})}}},overlay:e("<div></div>"),createOverlay:function(){a.overlay.css(a.options.overlay.css).click(function(){a.close()}).appendTo("body")},closing:!1,close:function(){if(!a.closing)return a.closing=!0,e(document).off("keydown.foundry.dialog"),a.hide(function(){a.removePlugin("binder");a.element.remove();a.refElement&&a.refElement.remove()}),a},
"{closeButton} click":function(){a.close()},content:function(){var b=a.dialogContent,d=b.find("> iframe");return 0<d.length?d.contents():b},messageGroup:function(){var b=a.dialogBody,d=b.find("> [data-message-group]");1>d.length&&(d=e("<div data-message-group></div>").prependTo(b));return d}}});e.dialog=function(a){if(window.parentDialog)return window.parentDialog.update(a);var b=e(".foundryDialog.global"),d=b.controllers("dialog")[0];if(1>arguments.length&&d)return d;1>b.length&&(b=e(e.View("dialog/default")).addClass("global").addClass(a.customClass).appendTo("body"));
if("string"===typeof a||e.isDeferred(a)){var f=arguments[1];a={content:a,afterShow:e.isFunction(f)?f:e.noop}}d?d.update(a):d=b.implement("dialog",a,function(){}).controllers("dialog")[0];return d}};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/position",function(e){var g=function(){(function(b,a){function c(a,b,c){return[parseFloat(a[0])*(t.test(a[0])?b/100:1),parseFloat(a[1])*(t.test(a[1])?c/100:1)]}function d(a){var c=a[0];return 9===c.nodeType?{width:a.width(),height:a.height(),offset:{top:0,
left:0}}:b.isWindow(c)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}b.ui=b.ui||{};var f,e=Math.max,g=Math.abs,h=Math.round,s=/left|center|right/,q=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,r=/^\w+/,t=/%$/,l=b.fn.position;b.position={scrollbarWidth:function(){if(f!==a)return f;var c,d,e=b("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");
d=e.children()[0];b("body").append(e);c=d.offsetWidth;e.css("overflow","scroll");d=d.offsetWidth;c===d&&(d=e[0].clientWidth);e.remove();return f=c-d},getScrollInfo:function(a){var c=a.isWindow?"":a.element.css("overflow-x"),d=a.isWindow?"":a.element.css("overflow-y"),c="scroll"===c||"auto"===c&&a.width<a.element[0].scrollWidth;return{width:"scroll"===d||"auto"===d&&a.height<a.element[0].scrollHeight?b.position.scrollbarWidth():0,height:c?b.position.scrollbarWidth():0}},getWithinInfo:function(a){a=
b(a||window);var c=b.isWindow(a[0]);return{element:a,isWindow:c,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:c?a.width():a.outerWidth(),height:c?a.height():a.outerHeight()}}};b.fn.position=function(a){if(!a||!a.of)return l.apply(this,arguments);a=b.extend({},a);var f,t,w,B,x,Q,R=b(a.of),N=b.position.getWithinInfo(a.within),$=b.position.getScrollInfo(N),J=(a.collision||"flip").split(" "),L={};Q=d(R);R[0].preventDefault&&(a.at="left top");t=Q.width;w=Q.height;
B=Q.offset;x=b.extend({},B);b.each(["my","at"],function(){var b=(a[this]||"").split(" "),c,d;1===b.length&&(b=s.test(b[0])?b.concat(["center"]):q.test(b[0])?["center"].concat(b):["center","center"]);b[0]=s.test(b[0])?b[0]:"center";b[1]=q.test(b[1])?b[1]:"center";c=u.exec(b[0]);d=u.exec(b[1]);L[this]=[c?c[0]:0,d?d[0]:0];a[this]=[r.exec(b[0])[0],r.exec(b[1])[0]]});1===J.length&&(J[1]=J[0]);"right"===a.at[0]?x.left+=t:"center"===a.at[0]&&(x.left+=t/2);"bottom"===a.at[1]?x.top+=w:"center"===a.at[1]&&
(x.top+=w/2);f=c(L.at,t,w);x.left+=f[0];x.top+=f[1];return this.each(function(){var d,l,r=b(this),q=r.outerWidth(),u=r.outerHeight(),s=parseInt(b.css(this,"marginLeft"),10)||0,Q=parseInt(b.css(this,"marginTop"),10)||0,O=q+s+(parseInt(b.css(this,"marginRight"),10)||0)+$.width,na=u+Q+(parseInt(b.css(this,"marginBottom"),10)||0)+$.height,F=b.extend({},x),X=c(L.my,r.outerWidth(),r.outerHeight());"right"===a.my[0]?F.left-=q:"center"===a.my[0]&&(F.left-=q/2);"bottom"===a.my[1]?F.top-=u:"center"===a.my[1]&&
(F.top-=u/2);F.left+=X[0];F.top+=X[1];b.support.offsetFractions||(F.left=h(F.left),F.top=h(F.top));d={marginLeft:s,marginTop:Q};b.each(["left","top"],function(c,e){if(b.ui.position[J[c]])b.ui.position[J[c]][e](F,{targetWidth:t,targetHeight:w,elemWidth:q,elemHeight:u,collisionPosition:d,collisionWidth:O,collisionHeight:na,offset:[f[0]+X[0],f[1]+X[1]],my:a.my,at:a.at,within:N,elem:r})});a.using&&(l=function(b){var c=B.left-F.left,d=c+t-q,f=B.top-F.top,h=f+w-u,l={target:{element:R,left:B.left,top:B.top,
width:t,height:w},element:{element:r,left:F.left,top:F.top,width:q,height:u},horizontal:0>d?"left":0<c?"right":"center",vertical:0>h?"top":0<f?"bottom":"middle"};t<q&&g(c+d)<t&&(l.horizontal="center");w<u&&g(f+h)<w&&(l.vertical="middle");e(g(c),g(d))>e(g(f),g(h))?l.important="horizontal":l.important="vertical";a.using.call(this,b,l)});r.offset(b.extend(F,{using:l}))})};b.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,
c=d-g,h=g+b.collisionWidth-f-d;b.collisionWidth>f?0<c&&0>=h?(d=a.left+c+b.collisionWidth-f-d,a.left+=c-d):a.left=0<h&&0>=c?d:c>h?d+f-b.collisionWidth:d:a.left=0<c?a.left+c:0<h?a.left-h:e(a.left-g,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,c=d-g,h=g+b.collisionHeight-f-d;b.collisionHeight>f?0<c&&0>=h?(d=a.top+c+b.collisionHeight-f-d,a.top+=c-d):a.top=0<h&&0>=c?d:c>h?d+f-b.collisionHeight:d:a.top=0<c?a.top+
c:0<h?a.top-h:e(a.top-g,a.top)}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,e=c.isWindow?c.scrollLeft:c.offset.left,k=a.left-b.collisionPosition.marginLeft,c=k-e,h=k+b.collisionWidth-f-e,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,r=-2*b.offset[0];if(0>c){if(d=a.left+k+l+r+b.collisionWidth-f-d,0>d||d<g(c))a.left+=k+l+r}else 0<h&&(d=a.left-b.collisionPosition.marginLeft+k+l+r-
e,0<d||g(d)<h)&&(a.left+=k+l+r)},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,f=c.height,e=c.isWindow?c.scrollTop:c.offset.top,k=a.top-b.collisionPosition.marginTop,c=k-e,h=k+b.collisionHeight-f-e,k="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,l="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,r=-2*b.offset[1];0>c?(d=a.top+k+l+r+b.collisionHeight-f-d,a.top+k+l+r>c&&(0>d||d<g(c))&&(a.top+=k+l+r)):0<h&&(d=a.top-b.collisionPosition.marginTop+k+l+r-
e,a.top+k+l+r>h&&(0<d||g(d)<h)&&(a.top+=k+l+r))}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,arguments)},top:function(){b.ui.position.flip.top.apply(this,arguments);b.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,c,d,f,e=document.getElementsByTagName("body")[0];d=document.createElement("div");a=document.createElement(e?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};e&&b.extend(c,
{position:"absolute",left:"-1000px",top:"-1000px"});for(f in c)a.style[f]=c[f];a.appendChild(d);c=e||document.documentElement;c.insertBefore(a,c.firstChild);d.style.cssText="position: absolute; left: 10.7432222px;";d=b(d).offset().left;b.support.offsetFractions=10<d&&11>d;a.innerHTML="";c.removeChild(a)})()})(e)};g();this.resolveWith(g)})})();(function(){FD31.module("easing",function(e){var g=function(){e.easing.jswing=e.easing.swing;e.extend(e.easing,{def:"easeOutQuad",swing:function(b,a,c,d,f){return e.easing[e.easing.def](b,
a,c,d,f)},easeInQuad:function(b,a,c,d,f){return d*(a/=f)*a+c},easeOutQuad:function(b,a,c,d,f){return-d*(a/=f)*(a-2)+c},easeInOutQuad:function(b,a,c,d,f){return 1>(a/=f/2)?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c},easeInCubic:function(b,a,c,d,f){return d*(a/=f)*a*a+c},easeOutCubic:function(b,a,c,d,f){return d*((a=a/f-1)*a*a+1)+c},easeInOutCubic:function(b,a,c,d,f){return 1>(a/=f/2)?d/2*a*a*a+c:d/2*((a-=2)*a*a+2)+c},easeInQuart:function(b,a,c,d,f){return d*(a/=f)*a*a*a+c},easeOutQuart:function(b,a,c,d,f){return-d*
((a=a/f-1)*a*a*a-1)+c},easeInOutQuart:function(b,a,c,d,f){return 1>(a/=f/2)?d/2*a*a*a*a+c:-d/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(b,a,c,d,f){return d*(a/=f)*a*a*a*a+c},easeOutQuint:function(b,a,c,d,f){return d*((a=a/f-1)*a*a*a*a+1)+c},easeInOutQuint:function(b,a,c,d,f){return 1>(a/=f/2)?d/2*a*a*a*a*a+c:d/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(b,a,c,d,f){return-d*Math.cos(a/f*(Math.PI/2))+d+c},easeOutSine:function(b,a,c,d,f){return d*Math.sin(a/f*(Math.PI/2))+c},easeInOutSine:function(b,
a,c,d,f){return-d/2*(Math.cos(Math.PI*a/f)-1)+c},easeInExpo:function(b,a,c,d,f){return 0==a?c:d*Math.pow(2,10*(a/f-1))+c},easeOutExpo:function(b,a,c,d,f){return a==f?c+d:d*(-Math.pow(2,-10*a/f)+1)+c},easeInOutExpo:function(b,a,c,d,f){return 0==a?c:a==f?c+d:1>(a/=f/2)?d/2*Math.pow(2,10*(a-1))+c:d/2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(b,a,c,d,f){return-d*(Math.sqrt(1-(a/=f)*a)-1)+c},easeOutCirc:function(b,a,c,d,f){return d*Math.sqrt(1-(a=a/f-1)*a)+c},easeInOutCirc:function(b,a,c,d,f){return 1>
(a/=f/2)?-d/2*(Math.sqrt(1-a*a)-1)+c:d/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(b,a,c,d,f){b=1.70158;var e=0,g=d;if(0==a)return c;if(1==(a/=f))return c+d;e||(e=0.3*f);g<Math.abs(d)?(g=d,b=e/4):b=e/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*f-b)*Math.PI/e))+c},easeOutElastic:function(b,a,c,d,f){b=1.70158;var e=0,g=d;if(0==a)return c;if(1==(a/=f))return c+d;e||(e=0.3*f);g<Math.abs(d)?(g=d,b=e/4):b=e/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*a)*Math.sin(2*
(a*f-b)*Math.PI/e)+d+c},easeInOutElastic:function(b,a,c,d,f){b=1.70158;var e=0,g=d;if(0==a)return c;if(2==(a/=f/2))return c+d;e||(e=0.3*f*1.5);g<Math.abs(d)?(g=d,b=e/4):b=e/(2*Math.PI)*Math.asin(d/g);return 1>a?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*f-b)*Math.PI/e)+c:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*f-b)*Math.PI/e)*0.5+d+c},easeInBack:function(b,a,c,d,f,e){void 0==e&&(e=1.70158);return d*(a/=f)*a*((e+1)*a-e)+c},easeOutBack:function(b,a,c,d,f,e){void 0==e&&(e=1.70158);return d*((a=a/f-1)*
a*((e+1)*a+e)+1)+c},easeInOutBack:function(b,a,c,d,f,e){void 0==e&&(e=1.70158);return 1>(a/=f/2)?d/2*a*a*(((e*=1.525)+1)*a-e)+c:d/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+c},easeInBounce:function(b,a,c,d,f){return d-e.easing.easeOutBounce(b,f-a,0,d,f)+c},easeOutBounce:function(b,a,c,d,f){return(a/=f)<1/2.75?7.5625*d*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(b,a,c,d,f){return a<f/2?0.5*
e.easing.easeInBounce(b,2*a,0,d,f)+c:0.5*e.easing.easeOutBounce(b,2*a-f,0,d,f)+0.5*d+c}})};g();this.resolveWith(g)})})();(function(){FD31.module("image",function(e){var g=function(){e.fn.image=function(b){return(b=e.Image[b])&&b.apply(this[0],e.makeArray(arguments).slice(1))};e.Image={get:function(b){var a="IMG"===this.nodeName,c=e(a?this:new Image),d=e.Deferred();c.load(function(){var b,e,g,h;a||c.appendTo("body");var s={width:b=c.width(),height:e=c.height(),aspectRatio:g=b/e,orientation:h=1===g?
"square":1>g?"tall":"wide"};c.css({position:"absolute",left:"-99999px"}).data(s).addClass("orientation-"+h).removeAttr("style");a||c.detach();d.resolve(c,s)}).error(function(){d.reject()}).attr("src",b);return d},aspectRatio:function(b,a){e.isPlainObject(b)&&(b=b.width,a=b.height);return b/a},orientation:function(b,a){e.isPlainObject(b)&&(b=b.width,a=b.height);return b===a?"square":b>a?"wide":"tall"},resizeProportionate:function(b,a,c,d,f){var e=b,g=a,g=c/b,e=b*g,g=a*g,h=g>d;"outer"==f&&(h=g<d);h&&
(g=d/a,e=b*g,g*=a);return{top:(d-g)/2,left:(c-e)/2,width:e,height:g}},resizeWithin:function(b,a,c,d){return e.Image.resizeProportionate(b,a,c,d,"inner")},resizeToFill:function(b,a,c,d){return e.Image.resizeProportionate(b,a,c,d,"outer")}}};g();this.resolveWith(g)})})();(function(){FD31.module("popbox",function(e){var g=this;e.require().script("ui/position").done(function(){var b=function(){e.fn.popbox=function(b){if(e.isPlainObject(b))return this.each(function(){var d=e(this),f=a.get(d);f?f.update(b):
new a(d,b)}),this;if(e.isString(b)){var d=e(this[0]),d=a.get(d)||new a(d),f=d[b],g;e.isFunction(f)&&(g=f.apply(d,e.makeArray(arguments).slice(1)));return g||this}return this};var a=function(b,d){b.data("popbox",this);e.isString(d)&&(d={content:d});var f={},g=b.attr("data-popbox"),h=b.attr("data-popbox-toggle"),p=b.attr("data-popbox-position"),s=b.attr("data-popbox-type");id=b.attr("data-popbox-id");g&&(f.content=g);h&&(f.toggle=h);s&&(f.type=s);p&&(f.position=p);id&&(f.id=id);this.update(e.extend(!0,
{},a.defaultOptions,{tooltip:e(),loader:e('<div class="popbox loading" data-popbox-tooltip><div class="arrow"></div></div>'),uid:e.uid(),button:b},f,d))};a.defaultOptions={content:"",id:null,type:"",enabled:!1,wait:!1,locked:!1,hideTimer:null,hideDelay:50,toggle:"hover",position:"bottom"};a.get=function(b){b=e(b).data("popbox");if(b instanceof a)return b};e.extend(a.prototype,{positions:"top top-left top-right top-center bottom bottom-left bottom-right bottom-center left left-top left-bottom left-center right right-top right-bottom right-center",
update:function(a){var b=this;e.extend(!0,b,a);if(e.isModule(b.content))b.wait=!0,e.module(b.content).done(function(a){e.isPlainObject(a)&&b.update(a);e.isFunction(a)&&b.update({content:a})}).fail(function(){b.update({content:"Unable to load tooltip content."})}).always(function(){b.wait=!1});else{e.isString(b.content)&&(b.content=e.Deferred().resolve(b.content));a=b.position;if(e.isString(a)){var f=a.split("-"),g,h,p,s;switch(f[0]){case "top":case "bottom":g=p=f[1]||"center";h="top"==f[0]?"bottom":
"top";s="top"==f[0]?"top":"bottom";break;case "left":case "right":h=s=f[1]||"center",g="left"==f[0]?"right":"left",p="left"==f[0]?"left":"right"}b.position={classname:a,my:g+" "+h,at:p+" "+s,using:function(a,c){var g=e(this),k=b.position.classname,h=a.top,n=a.left;switch(f[0]){case "top":case "bottom":var p=c.vertical;p==f[0]&&(k=k.replace(/top|bottom/gi,"top"==p?"bottom":"top"));h="top"==p?h+10:h-10;break;case "left":case "right":p=c.horizontal,c.horizontal==f[0]&&(k=k.replace(/left|right/gi,"left"==
c.horizontal?"right":"left")),n="left"==p?n+10:n-10}g.css({top:h+"px",left:n+"px"}).removeClass(b.positions).addClass(k)}}}e.extend(b.position,{of:this.button,collision:"flip"});b.loader.attr({id:b.id,"data-popbox-tooltip":b.type}).addClass("popbox-"+b.type);b.enabled&&b.show()}},trigger:function(a,b){this.tooltip.trigger(a,b);this.button.trigger(a,b)},show:function(){var a=this;a.enabled=!0;if(!a.wait){clearTimeout(a.hideTimer);if("click"==a.toggle){var b=e(document),f="click.popbox."+a.uid;b.off(f).on(f,
function(g){g=e(g.target).parents().andSelf();0<g.filter(a.button).length||0<g.filter(a.tooltip).length||(b.off(f),a.hide())})}if(0<a.tooltip.length)a.tooltip.appendTo("body").position(a.position),a.trigger("popboxActivate",[a]);else{if(e.isFunction(a.content)){var g=a.content(a);a.update(g);if(a.wait)return}e.isDeferred(a.content)&&("pending"==a.content.state()&&a.loader.appendTo("body").position(a.position),a.content.always(function(){a.wait=!1}).done(function(b){if(!(0<a.tooltip.length)&&a.enabled){a.loader.detach();
b=e.buildHTML(b);if(1>b.filter("[data-popbox-tooltip]").length){var d=b;b=e('<div class="popbox" data-popbox-tooltip><div class="arrow"></div><div class="popbox-content" data-popbox-content></div></div>').attr({id:a.id,"data-popbox-tooltip":a.type}).addClass("popbox-"+a.type).appendTo("body");b.find("[data-popbox-content]").append(d)}else b=b.appendTo("body").filter("[data-popbox-tooltip]");a.tooltip=b.data("popbox",a).position(a.position);a.trigger("popboxActivate",[a])}}).fail(function(){a.update({content:"Unable to load tooltip content."})}))}}},
hide:function(){var a=this;a.enabled=!1;clearTimeout(a.hideTimer);a.loader.detach();a.hideTimer=setTimeout(function(){a.locked||(a.tooltip.detach(),a.trigger("popboxDeactivate",[a]))},a.hideDelay)},widget:function(){return this}});e(document).on("click.popbox","[data-popbox]",function(){var a=e(this).popbox("widget");a.enabled?a.hide():a.show()}).on("mouseover.popbox","[data-popbox]",function(){var a=e(this).popbox("widget");"hover"==a.toggle&&a.show()}).on("mouseout.popbox","[data-popbox]",function(){var a=
e(this).popbox("widget");"hover"==a.toggle&&a.hide()}).on("mouseover.popbox.tooltip","[data-popbox-tooltip]",function(){var b=a.get(this);b&&"hover"===b.toggle&&(b.locked=!0,clearTimeout(b.hideTimer))}).on("mouseout.popbox.tooltip","[data-popbox-tooltip]",function(){var b=a.get(this);b&&"hover"===b.toggle&&(b.locked=!1,b.hide())}).on("click.popbox.close","[data-popbox-close]",function(){var b=a.get(e(this).parents("[data-popbox-tooltip]"));b&&b.hide()})};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/autocomplete",
function(e){var g=this;e.require().script("ui/core","ui/widget","ui/position","ui/menu").done(function(){var b=function(){(function(a,b){var d=0;a.widget("ui.autocomplete",{version:"1.10.4pre",defaultElement:"<input>",options:{appendTo:"#fd_.ui",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),
g="textarea"===e,e="input"===e;this.isMultiLine=g?!0:e?!1:this.element.prop("isContentEditable");this.valueMethod=this.element[g||e?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))c=d=b=!0;else{c=d=b=!1;var g=a.ui.keyCode;switch(e.keyCode){case g.PAGE_UP:b=!0;this._move("previousPage",e);break;case g.PAGE_DOWN:b=!0;this._move("nextPage",e);break;case g.UP:b=!0;this._keyEvent("previous",
e);break;case g.DOWN:b=!0;this._keyEvent("next",e);break;case g.ENTER:case g.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case g.TAB:this.menu.active&&this.menu.select(e);break;case g.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}}},keypress:function(d){if(b)b=!1,this.isMultiLine&&!this.menu.element.is(":visible")||d.preventDefault();else if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",
d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){d?(d=!1,a.preventDefault()):this._searchTimeout(a)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");
this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",
function(){a(b.target).trigger(b.originalEvent)});return}var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=c}));!1!==this._trigger("select",
a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,
b){this._super(a,b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this._appendTo());"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0));b||(b=this.element.closest(".ui-front"));b.length||(b=this.document[0].body);return b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,
c.term))}):"string"===typeof this.options.source?(c=this.options.source,this.source=function(b,f){d.xhr&&d.xhr.abort();d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){f(a)},error:function(){f([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();
if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var a=this,b=++d;return function(c){b===d&&a.__response(c);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});
!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===
typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b);this.isNewMenu=!0;this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,
function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,
arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+
(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments);this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})})(e);(function(a){function b(c,d){var f=RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(c,function(b){return f.test(a("<div>").html(b.label||b.value||b).text())})}var d=a.ui.autocomplete.prototype,
f=d._initSource;a.extend(d,{_initSource:function(){this.options.html&&a.isArray(this.options.source)?this.source=function(a,d){d(b(this.options.source,a.term))}:f.call(this)},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>")[this.options.html?"html":"text"](c.label)).appendTo(b)}})})(e)};b();g.resolveWith(b)})})})();(function(){FD31.module("ui/menu",function(e){var g=this;e.require().script("ui/widget").done(function(){var b=function(){(function(a,b){a.widget("ui.menu",
{version:"1.10.4pre",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&
a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||
(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],
this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var e,g,h,s,q=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:q=!1,e=this.previousFilter||"",g=String.fromCharCode(b.keyCode),h=!1,clearTimeout(this.filterTimer),g===e?h=!0:g=e+g,s=RegExp("^"+c(g),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(a(this).children("a").text())}),e=h&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e,e.length||(g=String.fromCharCode(b.keyCode),s=RegExp("^"+c(g),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(a(this).children("a").text())})),
e.length?(this.focus(b,e),1<e.length?(this.previousFilter=g,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}q&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu;b=this.element.find(this.options.menus);b.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,
"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e);b.attr("aria-labelledby",d.attr("id"))});b=b.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var b=
a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu);this._super(a,b)},focus:function(a,b){var c;this.blur(a,a&&
"focus"===a.type);this._scrollIntoView(b);this.active=b.first();c=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",
a,{item:b})},_scrollIntoView:function(b){var c,e,g;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,e=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,c=b.offset().top-this.activeMenu.offset().top-c-e,e=this.activeMenu.scrollTop(),g=this.activeMenu.height(),b=b.height(),0>c?this.activeMenu.scrollTop(e+c):c+b>g&&this.activeMenu.scrollTop(e+c-g+b))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),
this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,
c){clearTimeout(this.timer);this.timer=this._delay(function(){var e=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element);this._close(e);this.blur(b);this.activeMenu=e},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",
this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},
_move:function(a,b,c){var e;this.active&&(e="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));e&&e.length&&this.active||(e=this.activeMenu.children(".ui-menu-item")[b]());this.focus(c,e)},nextPage:function(b){var c,e,g;this.active?this.isLastItem()||(this._hasScroll()?(e=this.active.offset().top,g=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return 0>c.offset().top-e-g}),
this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var c,e,g;this.active?this.isFirstItem()||(this._hasScroll()?(e=this.active.offset().top,g=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return 0<c.offset().top-e+g}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,c)}})})(e)};b();g.resolveWith(b)})})})();(function(){FD31.module("gmaps",function(e){var g=this,b=e.callback(function(){window.google||window.google.maps||g.reject("Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true.");
var a=function(a){var g=document,h=function(a,b){return e("#"+a.replace("#",""),b)[0]},q=function(a){var e=this,n="bounds_changed center_changed click dblclick drag dragend dragstart idle maptypeid_changed projection_changed resize tilesloaded zoom_changed".split(" "),l=["mousemove","mouseout","mouseover"];window.context_menu={};this.el="string"===typeof a.el||"string"===typeof a.div?h(a.el||a.div,a.context):a.el||a.div;if("undefined"===typeof this.el||null===this.el)throw"No element defined.";this.el.style.width=
a.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=a.height||this.el.scrollHeight||this.el.offsetHeight;this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.overlay_el=this.infoWindow=null;this.zoom=a.zoom||15;this.registered_events={};var v=a.markerClusterer,z;z=a.mapType?google.maps.MapTypeId[a.mapType.toUpperCase()]:google.maps.MapTypeId.ROADMAP;var A=new google.maps.LatLng(a.lat,a.lng);
delete a.el;delete a.lat;delete a.lng;delete a.mapType;delete a.width;delete a.height;delete a.markerClusterer;var w=a.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},B,x={},x={zoom:this.zoom,center:A,mapTypeId:z},w={panControl:a.panControl||!0,zoomControl:a.zoomControl||!0,zoomControlOptions:{style:google.maps.ZoomControlStyle[w.style||"DEFAULT"],position:google.maps.ControlPosition[w.position||"TOP_LEFT"]},mapTypeControl:a.mapTypeControl||!0,scaleControl:a.scaleControl||!0,streetViewControl:a.streetViewControl||
!0,overviewMapControl:B||!0};!0!=a.disableDefaultUI&&(x=d(x,w));x=d(x,a);for(w=0;w<n.length;w++)delete x[n[w]];for(w=0;w<l.length;w++)delete x[l[w]];this.map=new google.maps.Map(this.el,x);v&&(this.markerClusterer=v.apply(this,[this.map]));var Q=function(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return[b,c]},R=function(a,b){var c="",d=window.context_menu[a],f;for(f in d)d.hasOwnProperty(f)&&(c+='<li><a id="'+a+"_"+f+'" href="#">'+d[f].title+"</a></li>");
if(h("gmaps_context_menu")){var g=h("gmaps_context_menu");g.innerHTML=c;var c=g.getElementsByTagName("a"),k=c.length;for(f=0;f<k;f++){var l=c[f];google.maps.event.clearListeners(l,"click");google.maps.event.addDomListenerOnce(l,"click",function(c){c.preventDefault();d[this.id.replace(a+"_","")].action.apply(e,[b]);e.hideContextMenu()},!1)}f=Q.apply(this,[e.el]);c=f[1]+b.pixel.y-15;g.style.left=f[0]+b.pixel.x-15+"px";g.style.top=c+"px";g.style.display="block"}},N=function(a,b){if("marker"===a){b.pixel=
{};var c=new google.maps.OverlayView;c.setMap(e.map);c.draw=function(){var d=c.getProjection(),e=b.marker.getPosition();b.pixel=d.fromLatLngToContainerPixel(e);R(a,b)}}else R(a,b)};this.setContextMenu=function(a){window.context_menu[a.control]={};for(var b in a.options)if(a.options.hasOwnProperty(b)){var c=a.options[b];window.context_menu[a.control][c.name]={title:c.title,action:c.action}}a=g.createElement("ul");a.id="gmaps_context_menu";a.style.display="none";a.style.position="absolute";a.style.minWidth=
"100px";a.style.background="white";a.style.listStyle="none";a.style.padding="8px";a.style.boxShadow="2px 2px 6px #ccc";g.body.appendChild(a);var d=h("gmaps_context_menu");google.maps.event.addDomListener(d,"mouseout",function(a){a.relatedTarget&&this.contains(a.relatedTarget)||window.setTimeout(function(){d.style.display="none"},400)},!1)};this.hideContextMenu=function(){var a=h("gmaps_context_menu");a&&(a.style.display="none")};v=function(b,c){google.maps.event.addListener(b,c,function(b){void 0==
b&&(b=this);a[c].apply(this,[b]);e.hideContextMenu()})};for(w=0;w<n.length;w++)B=n[w],B in a&&v(this.map,B);for(w=0;w<l.length;w++)B=l[w],B in a&&v(this.map,B);google.maps.event.addListener(this.map,"rightclick",function(b){a.rightclick&&a.rightclick.apply(this,[b]);void 0!=window.context_menu.map&&N("map",b)});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){for(var a=[],b=this.markers.length,c=0;c<b;c++)a.push(this.markers[c].getPosition());this.fitLatLngBounds(a)};
this.fitLatLngBounds=function(a){for(var b=a.length,c=new google.maps.LatLngBounds,d=0;d<b;d++)c.extend(a[d]);this.map.fitBounds(c)};this.setCenter=function(a,b,c){this.map.panTo(new google.maps.LatLng(a,b));c&&c()};this.getElement=function(){return this.el};this.zoomIn=function(a){a=a||1;this.zoom=this.map.getZoom()+a;this.map.setZoom(this.zoom)};this.zoomOut=function(a){a=a||1;this.zoom=this.map.getZoom()-a;this.map.setZoom(this.zoom)};var n=[],$;for($ in this.map)"function"!=typeof this.map[$]||
this[$]||n.push($);for(w=0;w<n.length;w++)(function(a,b,c){a[c]=function(){return b[c].apply(b,arguments)}})(this,this.map,n[w]);this.createControl=function(a){var b=g.createElement("div");b.style.cursor="pointer";b.style.fontFamily="Arial, sans-serif";b.style.fontSize="13px";b.style.boxShadow="rgba(0, 0, 0, 0.398438) 0px 2px 4px";for(var c in a.style)b.style[c]=a.style[c];a.id&&(b.id=a.id);a.classes&&(b.className=a.classes);a.content&&(b.innerHTML=a.content);for(var d in a.events)(function(b,c){google.maps.event.addDomListener(b,
c,function(){a.events[c].apply(this,[this])})})(b,d);b.index=1;return b};this.addControl=function(a){var b=google.maps.ControlPosition[a.position.toUpperCase()];delete a.position;a=this.createControl(a);this.controls.push(a);this.map.controls[b].push(a);return a};this.createMarker=function(a){if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position){var b=this,c=a.details,e=a.fences,f=a.outside,g={position:new google.maps.LatLng(a.lat,a.lng),map:null};delete a.lat;delete a.lng;delete a.fences;
delete a.outside;var g=d(g,a),k=new google.maps.Marker(g);k.fences=e;if(a.infoWindow)for(k.infoWindow=new google.maps.InfoWindow(a.infoWindow),g=["closeclick","content_changed","domready","position_changed","zindex_changed"],e=0;e<g.length;e++)(function(b,c){a.infoWindow[c]&&google.maps.event.addListener(b,c,function(b){a.infoWindow[c].apply(this,[b])})})(k.infoWindow,g[e]);for(var g="animation_changed clickable_changed cursor_changed draggable_changed flat_changed icon_changed position_changed shadow_changed shape_changed title_changed visible_changed zindex_changed".split(" "),
h="dblclick drag dragend dragstart mousedown mouseout mouseover mouseup".split(" "),e=0;e<g.length;e++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this,[this])})})(k,g[e]);for(e=0;e<h.length;e++)(function(b,c,d){a[d]&&google.maps.event.addListener(c,d,function(c){c.pixel||(c.pixel=b.getProjection().fromLatLngToPoint(c.latLng));a[d].apply(this,[c])})})(this.map,k,h[e]);google.maps.event.addListener(k,"click",function(){this.details=c;a.click&&a.click.apply(this,[this]);
k.infoWindow&&(b.hideInfoWindows(),k.infoWindow.open(b.map,k))});google.maps.event.addListener(k,"rightclick",function(b){b.marker=this;a.rightclick&&a.rightclick.apply(this,[b]);void 0!=window.context_menu.marker&&N("marker",b)});k.fences&&google.maps.event.addListener(k,"dragend",function(){b.checkMarkerGeofence(k,function(a,b){f(a,b)})});return k}throw"No latitude or longitude defined.";};this.addMarker=function(a){if(!a.hasOwnProperty("gm_accessors_"))if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||
a.position)a=this.createMarker(a);else throw"No latitude or longitude defined.";a.setMap(this.map);this.markerClusterer&&this.markerClusterer.addMarker(a);this.markers.push(a);q.fire("marker_added",a,this);return a};this.addMarkers=function(a){for(var b=0,c;c=a[b];b++)this.addMarker(c);return this.markers};this.hideInfoWindows=function(){for(var a=0,b;b=this.markers[a];a++)b.infoWindow&&b.infoWindow.close()};this.removeMarker=function(a){for(var b=0;b<this.markers.length;b++)if(this.markers[b]===
a){this.markers[b].setMap(null);this.markers.splice(b,1);q.fire("marker_removed",a,this);break}return a};this.removeMarkers=function(a){a=a||this.markers;for(var b=0;b<this.markers.length;b++)this.markers[b]===a[b]&&this.markers[b].setMap(null);a=[];for(b=0;b<this.markers.length;b++)null!=this.markers[b].getMap()&&a.push(this.markers[b]);this.markers=a};this.drawOverlay=function(a){var b=new google.maps.OverlayView;b.setMap(e.map);var c=!0;null!=a.auto_show&&(c=a.auto_show);b.onAdd=function(){var c=
g.createElement("div");c.style.borderStyle="none";c.style.borderWidth="0px";c.style.position="absolute";c.style.zIndex=100;c.innerHTML=a.content;b.el=c;var d=this.getPanes();a.layer||(a.layer="overlayLayer");d[a.layer].appendChild(c);for(var d=["contextmenu","DOMMouseScroll","dblclick","mousedown"],e=0;e<d.length;e++)(function(a,b){google.maps.event.addDomListener(a,b,function(a){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()})})(c,
d[e]);google.maps.event.trigger(this,"ready")};b.draw=function(){var d=this.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));a.horizontalOffset=a.horizontalOffset||0;a.verticalOffset=a.verticalOffset||0;var e=b.el,f=e.children[0],g=f.clientHeight,f=f.clientWidth;switch(a.verticalAlign){case "top":e.style.top=d.y-g+a.verticalOffset+"px";break;default:case "middle":e.style.top=d.y-g/2+a.verticalOffset+"px";break;case "bottom":e.style.top=d.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case "left":e.style.left=
d.x-f+a.horizontalOffset+"px";break;default:case "center":e.style.left=d.x-f/2+a.horizontalOffset+"px";break;case "right":e.style.left=d.x+a.horizontalOffset+"px"}e.style.display=c?"block":"none";c||a.show.apply(this,[e])};b.onRemove=function(){var c=b.el;a.remove?a.remove.apply(this,[c]):(b.el.parentNode.removeChild(b.el),b.el=null)};e.overlays.push(b);return b};this.removeOverlay=function(a){for(var b=0;b<this.overlays.length;b++)if(this.overlays[b]===a){this.overlays[b].setMap(null);this.overlays.splice(b,
1);break}};this.removeOverlays=function(){for(var a=0,b;b=e.overlays[a];a++)b.setMap(null);e.overlays=[]};this.drawPolyline=function(a){var b=[],c=a.path;if(c.length)if(void 0===c[0][0])b=c;else for(var d=0,e;e=c[d];d++)b.push(new google.maps.LatLng(e[0],e[1]));b={map:this.map,path:b,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(b.clickable=a.clickable);a.hasOwnProperty("editable")&&
(b.editable=a.editable);a.hasOwnProperty("icons")&&(b.icons=a.icons);a.hasOwnProperty("zIndex")&&(b.zIndex=a.zIndex);b=new google.maps.Polyline(b);c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");for(d=0;d<c.length;d++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,[b])})})(b,c[d]);this.polylines.push(b);q.fire("polyline_added",b,this);return b};this.removePolyline=function(a){for(var b=0;b<this.polylines.length;b++)if(this.polylines[b]===
a){this.polylines[b].setMap(null);this.polylines.splice(b,1);q.fire("polyline_removed",a,this);break}};this.removePolylines=function(){for(var a=0,b;b=e.polylines[a];a++)b.setMap(null);e.polylines=[]};this.drawCircle=function(a){a=d({map:this.map,center:new google.maps.LatLng(a.lat,a.lng)},a);delete a.lat;delete a.lng;for(var b=new google.maps.Circle(a),c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),e=0;e<c.length;e++)(function(b,c){a[c]&&google.maps.event.addListener(b,
c,function(b){a[c].apply(this,[b])})})(b,c[e]);this.polygons.push(b);return b};this.drawRectangle=function(a){a=d({map:this.map},a);var b=new google.maps.LatLngBounds(new google.maps.LatLng(a.bounds[0][0],a.bounds[0][1]),new google.maps.LatLng(a.bounds[1][0],a.bounds[1][1]));a.bounds=b;for(var b=new google.maps.Rectangle(a),c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),e=0;e<c.length;e++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,
[b])})})(b,c[e]);this.polygons.push(b);return b};this.drawPolygon=function(a){var e=!1;a.hasOwnProperty("useGeoJSON")&&(e=a.useGeoJSON);delete a.useGeoJSON;a=d({map:this.map},a);!1==e&&(a.paths=[a.paths.slice(0)]);0<a.paths.length&&0<a.paths[0].length&&(a.paths=k(f(a.paths,b,e)));for(var e=new google.maps.Polygon(a),g="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),h=0;h<g.length;h++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(b){a[c].apply(this,
[b])})})(e,g[h]);this.polygons.push(e);q.fire("polygon_added",e,this);return e};this.removePolygon=function(a){for(var b=0;b<this.polygons.length;b++)if(this.polygons[b]===a){this.polygons[b].setMap(null);this.polygons.splice(b,1);q.fire("polygon_removed",a,this);break}};this.removePolygons=function(){for(var a=0,b;b=e.polygons[a];a++)b.setMap(null);e.polygons=[]};this.getFromFusionTables=function(a){var b=a.events;delete a.events;a=new google.maps.FusionTablesLayer(a);for(var c in b)(function(a,
c){google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])})})(a,c);this.layers.push(a);return a};this.loadFromFusionTables=function(a){a=this.getFromFusionTables(a);a.setMap(this.map);return a};this.getFromKML=function(a){var b=a.url,c=a.events;delete a.url;delete a.events;a=new google.maps.KmlLayer(b,a);for(var d in c)(function(a,b){google.maps.event.addListener(a,b,function(a){c[b].apply(this,[a])})})(a,d);this.layers.push(a);return a};this.loadFromKML=function(a){a=this.getFromKML(a);
a.setMap(this.map);return a};var J,L;this.getRoutes=function(a){switch(a.travelMode){case "bicycling":J=google.maps.TravelMode.BICYCLING;break;case "transit":J=google.maps.TravelMode.TRANSIT;break;case "driving":J=google.maps.TravelMode.DRIVING;break;default:J=google.maps.TravelMode.WALKING}L="imperial"===a.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var b=d({avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},a);b.origin=/string/.test(typeof a.origin)?a.origin:
new google.maps.LatLng(a.origin[0],a.origin[1]);b.destination=new google.maps.LatLng(a.destination[0],a.destination[1]);b.travelMode=J;b.unitSystem=L;delete b.callback;var c=this;(new google.maps.DirectionsService).route(b,function(b,d){if(d===google.maps.DirectionsStatus.OK)for(var e in b.routes)b.routes.hasOwnProperty(e)&&c.routes.push(b.routes[e]);a.callback&&a.callback(c.routes)})};this.removeRoutes=function(){this.routes=[]};this.getElevations=function(a){a=d({locations:[],path:!1,samples:256},
a);0<a.locations.length&&0<a.locations[0].length&&(a.locations=k(f([a.locations],b,!1)));var e=a.callback;delete a.callback;var g=new google.maps.ElevationService;a.path?g.getElevationAlongPath({path:a.locations,samples:a.samples},function(a,b){e&&"function"===typeof e&&e(a,b)}):(delete a.path,delete a.samples,g.getElevationForLocations(a,function(a,b){e&&"function"===typeof e&&e(a,b)}))};this.cleanRoute=this.removePolylines;this.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,
travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,callback:function(c){0<c.length&&(b.drawPolyline({path:c[c.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.callback&&a.callback(c[c.length-1]))}})};this.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(b){0<b.length&&a.start&&a.start(b[b.length-
1]);if(0<b.length&&a.step){var c=b[b.length-1];if(0<c.legs.length)for(var d=c.legs[0].steps,e=0,f;f=d[e];e++)f.step_number=e,a.step(f,c.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b=a.route.legs[0].steps,c=0,d;d=b[c];c++)d.step_number=c,a.step(d)};this.drawSteppedRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(b){0<
b.length&&a.start&&a.start(b[b.length-1]);if(0<b.length&&a.step){var c=b[b.length-1];if(0<c.legs.length)for(var d=c.legs[0].steps,f=0,g;g=d[f];f++)g.step_number=f,e.drawPolyline({path:g.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(g,c.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b=a.route.legs[0].steps,c=0,d;d=b[c];c++)d.step_number=c,e.drawPolyline({path:d.path,strokeColor:a.strokeColor,
strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(d)};this.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))};this.checkMarkerGeofence=function(a,b){if(a.fences)for(var c=0,d;d=a.fences[c];c++){var f=a.getPosition();e.checkGeofence(f.lat(),f.lng(),d)||b(a,d)}};this.addLayer=function(a,b){b=b||{};var c;switch(a){case "weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case "clouds":this.singleLayers.clouds=c=new google.maps.weather.CloudLayer;
break;case "traffic":this.singleLayers.traffic=c=new google.maps.TrafficLayer;break;case "transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case "bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case "panoramio":this.singleLayers.panoramio=c=new google.maps.panoramio.PanoramioLayer;c.setTag(b.filter);delete b.filter;b.click&&google.maps.event.addListener(c,"click",function(a){b.click(a);delete b.click});break;case "places":this.singleLayers.places=
c=new google.maps.places.PlacesService(this.map);if(b.search||b.nearbySearch){var d={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.search&&c.search(d,b.search);b.nearbySearch&&c.nearbySearch(d,b.nearbySearch)}b.textSearch&&c.textSearch({bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null},b.textSearch)}if(void 0!==c)return"function"==typeof c.setOptions&&
c.setOptions(b),"function"==typeof c.setMap&&c.setMap(this.map),c};this.removeLayer=function(a){void 0!==this.singleLayers[a]&&(this.singleLayers[a].setMap(null),delete this.singleLayers[a])};this.toImage=function(a){a=a||{};var b={};b.size=a.size||[this.el.clientWidth,this.el.clientHeight];b.lat=this.getCenter().lat();b.lng=this.getCenter().lng();if(0<this.markers.length)for(b.markers=[],a=0;a<this.markers.length;a++)b.markers.push({lat:this.markers[a].getPosition().lat(),lng:this.markers[a].getPosition().lng()});
0<this.polylines.length&&(a=this.polylines[0],b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(a.getPath()),b.polyline.strokeColor=a.strokeColor,b.polyline.strokeOpacity=a.strokeOpacity,b.polyline.strokeWeight=a.strokeWeight);return q.staticMapURL(b)};this.addMapType=function(a,b){if(b.hasOwnProperty("getTileUrl")&&"function"==typeof b.getTileUrl){b.tileSize=b.tileSize||new google.maps.Size(256,256);var c=new google.maps.ImageMapType(b);this.map.mapTypes.set(a,c)}else throw"'getTileUrl' function required.";
};this.addOverlayMapType=function(a){if(a.hasOwnProperty("getTile")&&"function"==typeof a.getTile){var b=a.index;delete a.index;this.map.overlayMapTypes.insertAt(b,a)}else throw"'getTile' function required.";};this.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)};this.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,a.styledMapName);this.map.mapTypes.set(a.mapTypeId,b)};this.setStyle=function(a){this.map.setMapTypeId(a)};this.createPanorama=function(a){a.hasOwnProperty("lat")&&
a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng());this.panorama=q.createPanorama(a);this.map.setStreetView(this.panorama);return this.panorama};this.on=function(a,b){return q.on(a,this,b)};this.off=function(a){q.off(a,this)}};q.createPanorama=function(a){var b=h(a.el,a.context);a.position=new google.maps.LatLng(a.lat,a.lng);delete a.el;delete a.context;delete a.lat;delete a.lng;for(var c="closeclick links_changed pano_changed position_changed pov_changed resize visible_changed".split(" "),
e=d({visible:!0},a),f=0;f<c.length;f++)delete e[c[f]];b=new google.maps.StreetViewPanorama(b,e);for(f=0;f<c.length;f++)(function(b,c){a[c]&&google.maps.event.addListener(b,c,function(){a[c].apply(this)})})(b,c[f]);return b};q.Route=function(a){this.map=a.map;this.route=a.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}).getPath();
this.back=function(){if(0<this.step_count){this.step_count--;var a=this.route.legs[0].steps[this.step_count].path,b;for(b in a)a.hasOwnProperty(b)&&this.polyline.pop()}};this.forward=function(){if(this.step_count<this.steps_length){var a=this.route.legs[0].steps[this.step_count].path,b;for(b in a)a.hasOwnProperty(b)&&this.polyline.push(a[b]);this.step_count++}}};q.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){a.success(c);
b&&b()},function(c){a.error(c);b&&b()},a.options):(a.not_supported(),b&&b())};q.geocode=function(a){this.geocoder=new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng));delete a.lat;delete a.lng;delete a.callback;this.geocoder.geocode(a,function(a,c){b(a,c)})};q.staticMapURL=function(a){function b(a,c){if("#"===a[0]&&(a=a.replace("#","0x"),c)){c=parseFloat(c);c=Math.min(1,Math.max(c,0));if(0===c)return"0x00000000";
c=(255*c).toString(16);1===c.length&&(c+=c);a=a.slice(0,8)+c}return a}var c=[],d="http://maps.googleapis.com/maps/api/staticmap";a.url&&(d=a.url,delete a.url);var d=d+"?",e=a.markers;delete a.markers;!e&&a.marker&&(e=[a.marker],delete a.marker);var f=a.polyline;delete a.polyline;if(a.center)c.push("center="+a.center),delete a.center;else if(a.address)c.push("center="+a.address),delete a.address;else if(a.lat)c.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng;else if(a.visible){var g=
encodeURI(a.visible.join("|"));c.push("visible="+g)}(g=a.size)?(g.join&&(g=g.join("x")),delete a.size):g="630x300";c.push("size="+g);a.zoom||(a.zoom=15);g=a.hasOwnProperty("sensor")?!!a.sensor:!0;delete a.sensor;c.push("sensor="+g);for(var k in a)a.hasOwnProperty(k)&&c.push(k+"="+a[k]);if(e)for(g=0;a=e[g];g++)k=[],a.size&&"normal"!==a.size?k.push("size:"+a.size):a.icon&&k.push("icon:"+encodeURI(a.icon)),a.color&&k.push("color:"+a.color.replace("#","0x")),a.label&&k.push("label:"+a.label[0].toUpperCase()),
a=a.address?a.address:a.lat+","+a.lng,k.length||0===g?(k.push(a),k=k.join("|"),c.push("markers="+encodeURI(k))):(k=c.pop()+encodeURI("|"+a),c.push(k));if(f){a=f;f=[];a.strokeWeight&&f.push("weight:"+parseInt(a.strokeWeight,10));a.strokeColor&&(e=b(a.strokeColor,a.strokeOpacity),f.push("color:"+e));a.fillColor&&(e=b(a.fillColor,a.fillOpacity),f.push("fillcolor:"+e));e=a.path;if(e.join)for(a=0;k=e[a];a++)f.push(k.join(","));else f.push("enc:"+e);f=f.join("|");c.push("path="+encodeURI(f))}c=c.join("&");
return d+c};q.custom_events="marker_added marker_removed polyline_added polyline_removed polygon_added polygon_removed geolocated geolocation_failed".split(" ");q.on=function(a,b,c){if(-1==q.custom_events.indexOf(a))return google.maps.event.addListener(b,a,c);c={handler:c,eventName:a};b.registered_events[a]=b.registered_events[a]||[];b.registered_events[a].push(c);return c};q.off=function(a,b){-1==q.custom_events.indexOf(a)?google.maps.event.clearListeners(b,a):b.registered_events[a]=[]};q.fire=function(a,
b,c){if(-1==q.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));else if(a in c.registered_events)for(var d=c.registered_events[a],e=0;e<d.length;e++)d[e].handler.apply(c,[b])};google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(a){a=new google.maps.LatLngBounds;for(var b=this.getPaths(),c,d=0;d<b.getLength();d++){c=b.getAt(d);for(var e=0;e<c.getLength();e++)a.extend(c.getAt(e))}return a});google.maps.Polygon.prototype.containsLatLng||
(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;for(var b=!1,c=this.getPaths().getLength(),d=0;d<c;d++)for(var e=this.getPaths().getAt(d),f=e.getLength(),g=f-1,k=0;k<f;k++){var h=e.getAt(k),g=e.getAt(g);(h.lng()<a.lng()&&g.lng()>=a.lng()||g.lng()<a.lng()&&h.lng()>=a.lng())&&h.lat()+(a.lng()-h.lng())/(g.lng()-h.lng())*(g.lat()-h.lat())<a.lat()&&(b=!b);g=k}return b});google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)};
google.maps.Marker.prototype.setFences=function(a){this.fences=a};google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)};return q}(this),b=function(a,d){for(var e=0;e<a.length;e++)if(0<a[e].length&&"number"!=typeof a[e][0])a[e]=b(a[e],d);else{var f=a,g=e,k;k=a[e];var h=k[0],l=k[1];d&&(h=k[1],l=k[0]);k=new google.maps.LatLng(h,l);f[g]=k}return a},d=function(a,b){if(a===b)return a;for(var c in b)a[c]=b[c];return a},f=function(a,b){var c=Array.prototype.slice.call(arguments,2);if(Array.prototype.map&&
a.map===Array.prototype.map)return Array.prototype.map.call(a,function(a){callback_params=c;callback_params.splice(0,0,a);return b.apply(this,callback_params)});for(var d=[],e=a.length,f=0;f<e;f++)callback_params=c,callback_params=callback_params.splice(0,0,a[f]),d.push(b.apply(this,callback_params));return d},k=function(a){new_array=[];for(var b=0;b<a.length;b++)new_array=new_array.concat(a[b]);return new_array};e.GMaps=a;e.GMaps.mapEvents="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed".split(" ");
e.fn.gmaps=function(b){if(!(1>this.length)){var c=e(this[0]),d=c.data("gmaps"),f=void 0===d,g=void 0===b;e.isString(b)&&(b={address:b});if(f){var f=e.uid("gmaps-"),k={lat:0,lng:0};e.isPlainObject(b)&&(b=e.extend({},k,b));c.attr("id",f);b.div="#"+f;e.each(e.GMaps.mapEvents,function(a,f){var g=e.isFunction(b[f])?b[f]:e.noop;b[f]=function(){var a=e.makeArray(arguments);g.apply(d,arguments);c.trigger.apply(c,["map_"+f].concat(a))}});d=new a(b);c.data("gmaps",d);d.go=function(a,b){d.setCenter(a,b);d.addMarker({lat:a,
lng:b})};g&&a.geolocate({success:function(a){d.go(a.coords.latitude,a.coords.longitude)}})}else g=b.lat,f=b.lng,(e.isNumber(g)||e.isNumber(f))&&d.go(g,f);return d}};g.resolveWith(a)});e.require().script(e.uri(window.location).protocol()+"://maps.google.com/maps/api/js?sensor=true&callback="+b).done()})})();(function(){FD31.module("imgareaselect",function(e){var g=function(){(function(b){function a(){return b("<div/>")}var c=Math.abs,d=Math.max,e=Math.min,g=Math.round;b.imgAreaSelect=function(h,p){function s(a){return a+
Y.left-ga.left}function q(a){return a+Y.top-ga.top}function u(a){return a-Y.left+ga.left}function r(a){return a-Y.top+ga.top}function t(a){var b=a||va;a=a||jb;return{x1:g(C.x1*b),y1:g(C.y1*a),x2:g(C.x2*b),y2:g(C.y2*a),width:g(C.x2*b)-g(C.x1*b),height:g(C.y2*a)-g(C.y1*a)}}function l(a,b,c,d,e){var f=e||va;e=e||jb;C={x1:g(a/f||0),y1:g(b/e||0),x2:g(c/f||0),y2:g(d/e||0)};C.width=C.x2-C.x1;C.height=C.y2-C.y1}function v(){O.width()&&(Y={left:g(O.offset().left),top:g(O.offset().top)},M=O.innerWidth(),da=
O.innerHeight(),Y.top+=O.outerHeight()-da>>1,Y.left+=O.outerWidth()-M>>1,kb=g(p.minWidth/va)||0,lb=g(p.minHeight/jb)||0,mb=g(e(p.maxWidth/va||16777216,M)),Za=g(e(p.maxHeight/jb||16777216,da)),"1.3.2"!=b().jquery||"fixed"!=m||Da.getBoundingClientRect||(Y.top+=d(document.body.scrollTop,Da.scrollTop),Y.left+=d(document.body.scrollLeft,Da.scrollLeft)),ga=/absolute|relative/.test(ja.css("position"))?{left:g(ja.offset().left)-ja.scrollLeft(),top:g(ja.offset().top)-ja.scrollTop()}:"fixed"==m?{left:b(document).scrollLeft(),
top:b(document).scrollTop()}:{left:0,top:0},P=s(0),S=q(0),(C.x2>M||C.y2>da)&&N())}function z(a){if($a){F.css({left:s(C.x1),top:q(C.y1)}).add(X).width(xa=C.width).height(W=C.height);X.add(T).add(V).css({left:0,top:0});T.width(d(xa-T.outerWidth()+T.innerWidth(),0)).height(d(W-T.outerHeight()+T.innerHeight(),0));b(y[0]).css({left:P,top:S,width:C.x1,height:da});b(y[1]).css({left:P+C.x1,top:S,width:xa,height:C.y1});b(y[2]).css({left:P+C.x2,top:S,width:M-C.x2,height:da});b(y[3]).css({left:P+C.x1,top:S+
C.y2,width:xa,height:da-C.y2});xa-=V.outerWidth();W-=V.outerHeight();switch(V.length){case 8:b(V[4]).css({left:xa>>1}),b(V[5]).css({left:xa,top:W>>1}),b(V[6]).css({left:xa>>1,top:W}),b(V[7]).css({top:W>>1});case 4:V.slice(1,3).css({left:xa}),V.slice(2,4).css({top:W})}if(!1!==a&&(b.imgAreaSelect.keyPress!=Ea&&b(document).unbind(b.imgAreaSelect.keyPress,b.imgAreaSelect.onKeyPress),p.keys))b(document)[b.imgAreaSelect.keyPress](b.imgAreaSelect.onKeyPress=Ea);b.browser.msie&&2==T.outerWidth()-T.innerWidth()&&
(T.css("margin",0),setTimeout(function(){T.css("margin","auto")},0))}}function A(a){v();z(a);G=s(C.x1);E=q(C.y1);I=s(C.x2);K=q(C.y2)}function w(a,b){p.fadeSpeed?a.fadeOut(p.fadeSpeed,b):a.hide()}function B(a){var b=u(a.pageX-ga.left)-C.x1;a=r(a.pageY-ga.top)-C.y1;Ua||(v(),Ua=!0,F.one("mouseout",function(){Ua=!1}));ca="";p.resizable&&(a<=p.resizeMargin?ca="n":a>=C.height-p.resizeMargin&&(ca="s"),b<=p.resizeMargin?ca+="w":b>=C.width-p.resizeMargin&&(ca+="e"));F.css("cursor",ca?ca+"-resize":p.movable?
"move":"");oa&&oa.toggle()}function x(a){b("body").css("cursor","");(p.autoHide||0==C.width*C.height)&&w(F.add(y),function(){b(this).hide()});b(document).unbind("mousemove",$);F.mousemove(B);p.onSelectEnd(h,t())}function Q(a){if(1!=a.which)return!1;v();ca?(b("body").css("cursor",ca+"-resize"),G=s(C[/w/.test(ca)?"x2":"x1"]),E=q(C[/n/.test(ca)?"y2":"y1"]),b(document).mousemove($).one("mouseup",x),F.unbind("mousemove",B)):p.movable?(ba=P+C.x1-(a.pageX-ga.left),ma=S+C.y1-(a.pageY-ga.top),F.unbind("mousemove",
B),b(document).mousemove(L).one("mouseup",function(){p.onSelectEnd(h,t());b(document).unbind("mousemove",L);F.mousemove(B)})):O.mousedown(a);return!1}function R(a){wa&&(a?(I=d(P,e(P+M,G+c(K-E)*wa*(I>G||-1))),K=g(d(S,e(S+da,E+c(I-G)/wa*(K>E||-1)))),I=g(I)):(K=d(S,e(S+da,E+c(I-G)/wa*(K>E||-1))),I=g(d(P,e(P+M,G+c(K-E)*wa*(I>G||-1)))),K=g(K)))}function N(){G=e(G,P+M);E=e(E,S+da);c(I-G)<kb&&(I=G-kb*(I<G||-1),I<P?G=P+kb:I>P+M&&(G=P+M-kb));c(K-E)<lb&&(K=E-lb*(K<E||-1),K<S?E=S+lb:K>S+da&&(E=S+da-lb));I=d(P,
e(I,P+M));K=d(S,e(K,S+da));R(c(I-G)<c(K-E)*wa);c(I-G)>mb&&(I=G-mb*(I<G||-1),R());c(K-E)>Za&&(K=E-Za*(K<E||-1),R(!0));C={x1:u(e(G,I)),x2:u(d(G,I)),y1:r(e(E,K)),y2:r(d(E,K)),width:c(I-G),height:c(K-E)};z();p.onSelectChange(h,t())}function $(a){I=/w|e|^$/.test(ca)||wa?a.pageX-ga.left:s(C.x2);K=/n|s|^$/.test(ca)||wa?a.pageY-ga.top:q(C.y2);N();return!1}function J(a,c){I=(G=a)+C.width;K=(E=c)+C.height;b.extend(C,{x1:u(G),y1:r(E),x2:u(I),y2:r(K)});z();p.onSelectChange(h,t())}function L(a){G=d(P,e(ba+(a.pageX-
ga.left),P+M-C.width));E=d(S,e(ma+(a.pageY-ga.top),S+da-C.height));J(G,E);a.preventDefault();return!1}function U(){b(document).unbind("mousemove",U);v();I=G;K=E;N();ca="";y.is(":visible")||F.add(y).hide().fadeIn(p.fadeSpeed||0);$a=!0;b(document).unbind("mouseup",H).mousemove($).one("mouseup",x);F.unbind("mousemove",B);p.onSelectStart(h,t())}function H(){b(document).unbind("mousemove",U).unbind("mouseup",H);w(F.add(y));l(u(G),r(E),u(G),r(E));this instanceof b.imgAreaSelect||(p.onSelectChange(h,t()),
p.onSelectEnd(h,t()))}function ha(a){if(1!=a.which||y.is(":animated"))return!1;v();ba=G=a.pageX-ga.left;ma=E=a.pageY-ga.top;b(document).mousemove(U).mouseup(H);return!1}function Aa(){A(!1)}function aa(){na=!0;Sa(p=b.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},p));F.add(y).css({visibility:""});p.show&&($a=!0,v(),z(),F.add(y).hide().fadeIn(p.fadeSpeed||0));
setTimeout(function(){p.onInit(h,t())},0)}function ra(a,b){for(var c in b)void 0!==p[c]&&a.css(b[c],p[c])}function Sa(c){c.parent&&(ja=b(c.parent)).append(F.add(y));b.extend(p,c);v();if(null!=c.handles){V.remove();V=b([]);for(Ta=c.handles?"corners"==c.handles?4:8:0;Ta--;)V=V.add(a());V.addClass(p.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:pa+1||1});0<=!parseInt(V.css("width"))&&V.width(5).height(5);(sa=p.borderWidth)&&V.css({borderWidth:sa,borderStyle:"solid"});ra(V,{borderColor1:"border-color",
borderColor2:"background-color",borderOpacity:"opacity"})}va=p.imageWidth/M||1;jb=p.imageHeight/da||1;null!=c.x1&&(l(c.x1,c.y1,c.x2,c.y2),c.show=!c.hide);c.keys&&(p.keys=b.extend({shift:1,ctrl:"resize"},c.keys));y.addClass(p.classPrefix+"-outer");X.addClass(p.classPrefix+"-selection");for(Ta=0;4>Ta++;)b(T[Ta-1]).addClass(p.classPrefix+"-border"+Ta);ra(X,{selectionColor:"background-color",selectionOpacity:"opacity"});ra(T,{borderOpacity:"opacity",borderWidth:"border-width"});ra(y,{outerColor:"background-color",
outerOpacity:"opacity"});(sa=p.borderColor1)&&b(T[0]).css({borderStyle:"solid",borderColor:sa});(sa=p.borderColor2)&&b(T[1]).css({borderStyle:"dashed",borderColor:sa});F.append(X.add(T).add(oa).add(V));b.browser.msie&&((sa=(y.css("filter")||"").match(/opacity=(\d+)/))&&y.css("opacity",sa[1]/100),(sa=(T.css("filter")||"").match(/opacity=(\d+)/))&&T.css("opacity",sa[1]/100));c.hide?w(F.add(y)):c.show&&na&&($a=!0,F.add(y).fadeIn(p.fadeSpeed||0),A());wa=(ab=(p.aspectRatio||"").split(/:/))[0]/ab[1];O.add(y).unbind("mousedown",
ha);if(p.disable||!1===p.enable)F.unbind("mousemove",B).unbind("mousedown",Q),b(window).unbind("resize",Aa);else{if(p.enable||!1===p.disable)(p.resizable||p.movable)&&F.mousemove(B).mousedown(Q),b(window).resize(Aa);p.persistent||O.add(y).mousedown(ha)}p.enable=p.disable=void 0}var O=b(h),na,F=a(),X=a(),T=a().add(a()).add(a()).add(a()),y=a().add(a()).add(a()).add(a()),V=b([]),oa,P,S,Y={left:0,top:0},M,da,ja,ga={left:0,top:0},pa=0,m="absolute",ba,ma,va,jb,ca,kb,lb,mb,Za,wa,$a,G,E,I,K,C={x1:0,y1:0,
x2:0,y2:0,width:0,height:0},Da=document.documentElement,Ba,ab,Ta,sa,xa,W,Ua,Ea=function(a){var b=p.keys,c,g=a.keyCode;c=isNaN(b.alt)||!a.altKey&&!a.originalEvent.altKey?!isNaN(b.ctrl)&&a.ctrlKey?b.ctrl:!isNaN(b.shift)&&a.shiftKey?b.shift:isNaN(b.arrows)?10:b.arrows:b.alt;if("resize"==b.arrows||"resize"==b.shift&&a.shiftKey||"resize"==b.ctrl&&a.ctrlKey||"resize"==b.alt&&(a.altKey||a.originalEvent.altKey)){switch(g){case 37:c=-c;case 39:a=d(G,I);G=e(G,I);I=d(a+c,G);R();break;case 38:c=-c;case 40:a=
d(E,K);E=e(E,K);K=d(a+c,E);R(!0);break;default:return}N()}else switch(G=e(G,I),E=e(E,K),g){case 37:J(d(G-c,P),E);break;case 38:J(G,d(E-c,S));break;case 39:J(G+e(c,M-u(I)),E);break;case 40:J(G,E+e(c,da-r(K)));break;default:return}return!1};this.remove=function(){Sa({disable:!0});F.add(y).remove()};this.getOptions=function(){return p};this.setOptions=Sa;this.getSelection=t;this.setSelection=l;this.cancelSelection=H;this.update=A;for(Ba=O;Ba.length;)pa=d(pa,isNaN(Ba.css("z-index"))?pa:Ba.css("z-index")),
"fixed"==Ba.css("position")&&(m="fixed"),Ba=Ba.parent(":not(body)");pa=p.zIndex||pa;b.browser.msie&&O.attr("unselectable","on");b.imgAreaSelect.keyPress=b.browser.msie||b.browser.safari?"keydown":"keypress";b.browser.opera&&(oa=a().css({width:"100%",height:"100%",position:"absolute",zIndex:pa+2||2}));F.add(y).css({visibility:"hidden",position:m,overflow:"hidden",zIndex:pa||"0"});F.css({zIndex:pa+2||2});X.add(T).css({position:"absolute",fontSize:0});h.complete||"complete"==h.readyState||!O.is("img")?
aa():O.one("load",aa);!na&&b.browser.msie&&7<=b.browser.version&&(h.src=h.src)};b.fn.imgAreaSelect=function(a){a=a||{};this.each(function(){b(this).data("imgAreaSelect")?a.remove?(b(this).data("imgAreaSelect").remove(),b(this).removeData("imgAreaSelect")):b(this).data("imgAreaSelect").setOptions(a):a.remove||(void 0===a.enable&&void 0===a.disable&&(a.enable=!0),b(this).data("imgAreaSelect",new b.imgAreaSelect(this,a)))});return a.instance?b(this).data("imgAreaSelect"):this}})(e)};g();this.resolveWith(g)})})()});
FD31.installer("EasySocial","definitions",function(h){h.module("easysocial/admin easysocial/admin/sidebar/sidebar easysocial/admin/alerts/discover easysocial/progress/progress easysocial/admin/badges/discover easysocial/admin/grid/grid easysocial/admin/grid/sort easysocial/admin/grid/publishing easysocial/admin/grid/ordering easysocial/admin/indexer/indexer easysocial/admin/mailer/mailer easysocial/admin/migrators/migrator easysocial/admin/points/discover easysocial/admin/privacy/discover easysocial/admin/profiles/avatar easysocial/uploader/uploader easysocial/uploader/queue easysocial/admin/profiles/fields easysocial/field easysocial/admin/profiles/members easysocial/admin/profiles/profiles easysocial/admin/reports/reporters easysocial/admin/reports/reports easysocial/admin/users/form easysocial/admin/users/privacy easysocial/admin/users/users easysocial/admin/widgets/news easysocial/albums/album easysocial/albums/browser easysocial/albums/editor easysocial/albums/editor/sortable easysocial/albums/editor/uploader easysocial/albums/uploader easysocial/albums/uploader.item easysocial/albums/item easysocial/easysocial easysocial/site/likes/likes easysocial/site/reports/reports easysocial/site/repost/repost easysocial/site/share/share easysocial/site/layout/dialog easysocial/site/layout/responsive easysocial/site/layout/elements easysocial/site/photos/photos easysocial/photos easysocial/photos/viewer easysocial/site/users/login easysocial/site/profile/popbox easysocial/site/conversations/composer easysocial/site/friends/suggest easysocial/location easysocial/site/privacy/privacy easysocial/site/locations/popbox easysocial/site/sidebar/sidebar easysocial/locations easysocial/oauth/facebook easysocial/pagination easysocial/photos/avatar easysocial/photos/browser easysocial/photos/cover easysocial/photos/editor easysocial/photos/item easysocial/photos/tags easysocial/photos/tagger easysocial/photos/navigation easysocial/privacy easysocial/sharing easysocial/site/activities/activities easysocial/site/activities/sidebar easysocial/site/activities/sidebar.item easysocial/site/activities/apps easysocial/site/activities/item easysocial/site/activities/list easysocial/site/apps/apps easysocial/site/badges/badge easysocial/site/comments/control easysocial/site/comments/frame easysocial/site/comments/item easysocial/site/conversations/api easysocial/site/conversations/conversations easysocial/site/conversations/mailbox easysocial/site/conversations/item easysocial/site/conversations/filter easysocial/site/conversations/read easysocial/site/dashboard/apps easysocial/site/dashboard/dashboard easysocial/site/dashboard/feeds easysocial/site/dashboard/sidebar easysocial/site/followers/api easysocial/site/followers/followers easysocial/site/friends/api easysocial/site/friends/friends easysocial/site/friends/list easysocial/site/friends/item easysocial/site/notifications/list easysocial/site/points/history easysocial/site/profile/about easysocial/site/profile/avatar easysocial/site/profile/edit easysocial/validate easysocial/site/profile/friends easysocial/site/profile/header easysocial/site/profile/subscriptions easysocial/site/profile/miniheader easysocial/site/profile/notifications easysocial/site/profile/privacy easysocial/site/profile/profile easysocial/site/registrations/registrations easysocial/site/search/item easysocial/site/search/list easysocial/site/search/search easysocial/site/search/sidebar easysocial/site/search/toolbar easysocial/site/stream/item easysocial/site/stream/stream easysocial/site/subscriptions/follow easysocial/site/toolbar/conversations easysocial/site/toolbar/friends easysocial/site/toolbar/notifications easysocial/site/toolbar/story easysocial/site/toolbar/system easysocial/site/toolbar/profile easysocial/site/users/users easysocial/story easysocial/story/friends easysocial/story/links easysocial/story/locations easysocial/story/photos easysocial/albums/photo easysocial/stream easysocial/comment easysocial/tab easysocial/toggle easysocial/uploader/item easysocial/utilities/alias".split(" "));
h.require.template.loader("easysocial/site/loading/small easysocial/site/uploader/queue.item easysocial/admin/profiles/form.fields.editorItem easysocial/admin/profiles/form.fields.stepItem easysocial/admin/profiles/form.fields.editorPage easysocial/admin/profiles/form.fields.config easysocial/site/albums/browser.list.item easysocial/site/albums/upload.item easysocial/site/dialog/default easysocial/site/friends/suggest.item easysocial/site/location/delete.confirmation easysocial/apps/user/locations/suggestion easysocial/site/photos/tags.item easysocial/site/photos/tags.menu.item easysocial/admin/profiles/form.privacy.custom.item easysocial/site/friends/default.empty easysocial/site/friends/list.assign easysocial/site/registration/dialog.error easysocial/apps/user/links/story.attachment.item easysocial/site/likes/item easysocial/site/uploader/preview".split(" "));
h.require.language.loader("COM_EASYSOCIAL_SCAN_COMPLETED COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED COM_EASYSOCIAL_INDEXER_REINDEX_RESTART COM_EASYSOCIAL_PROFILES_FORM_FIELDS_REQUIRE_MANDATORY_FIELDS COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRM COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVING COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVED COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_PAGE COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_FIELD COM_EASYSOCIAL_PROFILES_FORM_FIELDS_UNSAVED_CHANGES COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES COM_EASYSOCIAL_CANCEL_BUTTON COM_EASYSOCIAL_ASSIGN_BUTTON COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE COM_EASYSOCIAL_CLOSE_BUTTON COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE COM_EASYSOCIAL_FRIENDS_REQUEST_SENT COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_PUBLIC COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_MEMBER COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIENDS_OF_FRIEND COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIEND COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_ONLY_ME COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_CUSTOM COM_EASYSOCIAL_AT_LOCATION COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR COM_EASYSOCIAL_COMMENTS_STATUS_LOADING COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR COM_EASYSOCIAL_COMMENTS_STATUS_DELETING COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR COM_EASYSOCIAL_LIKES_LIKE COM_EASYSOCIAL_LIKES_UNLIKE COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL COM_EASYSOCIAL_COMMENTS_STATUS_SAVING COM_EASYSOCIAL_COMMENTS_STATUS_SAVED COM_EASYSOCIAL_NO_BUTTON COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE COM_EASYSOCIAL_FRIENDS_CANCEL_REQUEST_DIALOG_CANCELLED COM_EASYSOCIAL_FRIENDS_DIALOG_CANCEL_REQUEST COM_EASYSOCIAL_YES_CANCEL_MY_REQUEST_BUTTON COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS COM_EASYSOCIAL_SUBSCRIPTION_INFO COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED COM_EASYSOCIAL_WITH_FRIENDS COM_EASYSOCIAL_AND_ONE_OTHER COM_EASYSOCIAL_AND_MANY_OTHERS COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR COM_EASYSOCIAL_STORY_SUBMIT_ERROR COM_EASYSOCIAL_STORY_CONTENT_EMPTY COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBSCRIBE COM_EASYSOCIAL_STREAM_DIALOG_FEED COM_EASYSOCIAL_STREAM_BUTTON_CLOSE".split(" "));
(function(){var e=h.stylesheet({content:""})?"resolve":"reject";h.each(["easysocial/imgareaselect/default"],function(g,b){h.require.stylesheet.loader(b)[e]()})})()});
FD31.installer("EasySocial","scripts",function(h){EasySocial.module("admin",function(e){var g=this;EasySocial.require().library("uniform","chosen","flot").script("admin/sidebar/sidebar").done(function(b){b(".uniform, .check :checkbox, .radio :radio, input:file[data-uniform], .usergroups :checkbox").uniform();b("[data-chosen]").chosen({disable_search:!0});b("[data-chosen-search]").chosen({disable_search:!1});b("[data-sidebar]").implement(EasySocial.Controller.Sidebar.Sidebar);b("[data-sidebar-menu-toggle]").on("click",
function(){var a=b(this).parent("li"),c=a.find("ul");b(this).parent("li").hasClass("active")?(a.removeClass("active"),c.removeClass("in")):(a.addClass("active"),c.addClass("in"))});g.resolve()})});EasySocial.module("admin/sidebar/sidebar",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Sidebar.Sidebar",{defaultOptions:{intervalPendingUsers:5E3,"{versionNotice}":"[data-easysocial-version]","{usersBadge}":".menu-user > a .badge","{pendingUsersBadge}":".menu-user .menu-ies-vcard > .badge"}},
function(a){return{init:function(){a.versionChecks();a.checkPendingUsers()},versionChecks:function(){EasySocial.ajax("admin/controllers/easysocial/versionChecks").done(function(c,d,e,g){d&&(b("[data-es-version-header]").removeClass("latest").addClass("outdated"),b("[data-es-version-header]").find("[data-es-outdated]").data("local-version",e).data("online-version",g));a.versionNotice().html(c).show()})},monitorPendingUsers:function(){EasySocial.debug&&console.info("Start monitoring pending users with interval of "+
a.options.intervalPendingUsers+" seconds.");a.options.state=setTimeout(a.checkPendingUsers,a.options.intervalPendingUsers)},checkPendingUsers:function(){a.stopMonitorPendingUsers();setTimeout(function(){EasySocial.ajax("admin/controllers/users/getTotalPending",{},{type:"jsonp"}).done(function(b){0<b?(a.usersBadge().html(b),a.pendingUsersBadge().html(b)):a.usersBadge().html("");a.monitorPendingUsers()})},a.options.intervalPendingUsers)},stopMonitorPendingUsers:function(){clearTimeout(a.options.state)}}});
g.resolve()})});EasySocial.module("admin/alerts/discover",function(e){var g=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(b){EasySocial.Controller("Alerts.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":"[data-alerts-discovery-start]","{progressBar}":"[data-alerts-discovery-progress]","{results}":"[data-alerts-discovery-result]"}},function(a){return{init:function(){a.initProgressBar()},reset:function(){a.results().html("");
a.options.progressController.reset()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<tr>").append(b("<td>").html(c)).appendTo(a.results())},startIterating:function(){var c=a.options.files.shift();EasySocial.ajax("admin/controllers/alerts/scan",{file:c}).always(function(c,e,g){0<a.options.files.length?(a.options.progressController.touch("..."),a.addLog(e),a.startIterating()):(a.options.progressController.touch("..."),
a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(b){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/alerts/discoverFiles",{}).done(function(b,c){a.reset();a.options.files=b;0<a.options.files.length&&(a.options.progressController.begin(a.options.files.length),a.addLog(c),a.startIterating())})}}});g.resolve()})});EasySocial.module("progress/progress",function(e){EasySocial.Controller("Progress",
{defaultOptions:{current:0,eachWidth:null,total:null,progressClass:"progress progress-info progress-striped","{progressBar}":".bar","{progressResult}":".progress-result",view:{}}},function(e){return{init:function(){},reset:function(){e.options.current=0;e.eachWidth=null;e.total=null;e.progressBar().css("width","0%").html("")},begin:function(b){e.options.total=b;e.options.eachWidth=100/b;0<b&&e.element.addClass(e.options.progressClass).show()},touch:function(b){e.options.current+=e.options.eachWidth;
100<e.options.current&&(e.options.current=100);e.progressBar().css("width",e.options.current+"%");e.progressResult().html(Math.round(e.options.current)+"%")}}});this.resolve()});EasySocial.module("admin/badges/discover",function(e){var g=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(b){EasySocial.Controller("Badges.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":"[data-badgesDiscover-start]","{progressBar}":"[data-badgesDiscover-progress]",
"{results}":"[data-badgesDiscover-result]","{viewLog}":"[data-badgesDiscover-viewLog]"}},function(a){return{init:function(){a.initProgressBar();a.initLogging()},reset:function(){a.results().html("");a.initLogging();a.options.progressController.reset()},initLogging:function(){a.viewLog().hide()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<tr>").append(b("<td>").html(c)).appendTo(a.results())},
startIterating:function(){var c=a.options.files.shift();EasySocial.ajax("admin/controllers/badges/scan",{file:c}).always(function(c,e){0<a.options.files.length?(a.options.progressController.touch("..."),a.addLog(e),a.startIterating()):(a.options.progressController.touch("..."),a.addLog(e),a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.viewLog().show(),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(b){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/badges/discoverFiles",
{}).done(function(b,c){a.options.files=b;0<a.options.files.length&&(a.options.progressController.begin(a.options.files.length),a.addLog(c),a.startIterating())})},"{viewLog} click":function(){a.results().toggle()}}});g.resolve()})});EasySocial.module("admin/grid/grid",function(e){var g=this;EasySocial.require().script("admin/grid/sort","admin/grid/publishing").done(function(b){EasySocial.Controller("Grid",{defaultOptions:{"{sortColumns}":"[data-table-grid-sort]","{ordering}":"[data-table-grid-ordering]",
"{direction}":"[data-table-grid-direction]","{task}":"[data-table-grid-task]","{searchInput}":"[data-table-grid-search-input]","{search}":"[data-table-grid-search]","{resetSearch}":"[data-table-grid-search-reset]","{checkAll}":"[data-table-grid-checkall]","{checkboxes}":"[data-table-grid-id]","{publishItems}":"[data-table-grid-publishing]","{itemRow}":"tr","{boxChecked}":"[data-table-grid-box-checked]","{filters}":"[data-table-grid-filter]"}},function(a){return{init:function(){a.implementSortable();
a.implementPublishing()},"{filters} change":function(){a.setTask("");a.submitForm()},"{search} click":function(){a.submitForm()},"{resetSearch} click":function(){a.searchInput().val("");a.submitForm()},submitForm:function(){a.element.submit()},setTask:function(b){a.task().val(b)},setOrdering:function(b){a.ordering().val(b)},setDirection:function(b){a.direction().val(b)},setTotalChecked:function(b){a.boxChecked().val(b)},toggleSelectRow:function(a){a=a.find("input[name=cid\\[\\]]");!0==b(a).prop("checked")?
b(a).prop("checked",!1):b(a).prop("checked",!0)},selectRow:function(a){a=a.find("input[name=cid\\[\\]]");b(a).prop("checked",!0)},implementSortable:function(){a.sortColumns().implement(EasySocial.Controller.Grid.Sort,{"{parent}":a})},implementPublishing:function(){a.publishItems().implement(EasySocial.Controller.Grid.Publishing,{"{parent}":a})},"{checkAll} change":function(c,d){a.checkboxes().prop("checked",b(c).is(":checked"));var e=b(c).is(":checked")?a.checkboxes().length:0;a.setTotalChecked(e)}}});
g.resolve()})});EasySocial.module("admin/grid/sort",function(e){EasySocial.Controller("Grid.Sort",{defaultOptions:{items:"[data-grid-sort-item]"}},function(e){return{init:function(){},"{self} click":function(){var b=e.element.data("direction"),a=e.element.data("sort");e.parent.setOrdering(a);e.parent.setDirection(b);e.parent.setTask("");e.parent.submitForm()}}});this.resolve()});EasySocial.module("admin/grid/publishing",function(e){EasySocial.Controller("Grid.Publishing",{defaultOptions:{}},function(e){return{init:function(){},
"{self} click":function(b){b=e.element.parents("tr");var a=e.element.data("task");e.parent.selectRow(b);e.parent.setTask(a);e.parent.submitForm()}}});this.resolve()});EasySocial.module("admin/grid/ordering",function(e){EasySocial.Controller("Grid.Ordering",{defaultOptions:{"{moveUp}":"[data-grid-order-up]","{moveDown}":"[data-grid-order-down]",row:null}},function(g){return{init:function(){g.options.row=g.element.parents("tr")},selectRow:function(){var b=g.options.row.find("input[name=cid\\[\\]]");
e(b).prop("checked",!0)},"{moveUp} click":function(){g.selectRow();e.Joomla("submitform",["moveUp"])},"{moveDown} click":function(){g.selectRow();e.Joomla("submitform",["moveDown"])}}});this.resolve()});EasySocial.module("admin/indexer/indexer",function(e){var g=this;EasySocial.require().language("COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING","COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED","COM_EASYSOCIAL_INDEXER_REINDEX_RESTART").view("site/loading/small").done(function(b){EasySocial.Controller("Indexer",
{defaultOptions:{"{startButton}":"[data-start-button]","{indexerBar}":"[data-indexer-bar]","{indexerResult}":"[data-indexer-result]","{indexerMessage}":"[data-indexer-message]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){},"{startButton} click":function(){a.runIndex(0);a.indexerMessage().html(b.language("COM_EASYSOCIAL_INDEXER_REINDEX_PROCESSING"));a.indexerMessage().show();a.startButton().hide()},runIndex:function(b){EasySocial.ajax("admin/controllers/indexer/indexing",
{max:b},{beforeSend:function(){}}).done(function(b,c){0>b&&(c="100");a.updateProgress(c);0<=b&&a.runIndex(b)}).fail(function(b){a.setMessage(b)}).always(function(){})},updateProgress:function(c){a.indexerBar().css("width",c+"%");a.indexerResult().html(c+"%");100==c&&(a.indexerMessage().html(b.language("COM_EASYSOCIAL_INDEXER_REINDEX_FINISHED")),a.startButton().html(b.language("COM_EASYSOCIAL_INDEXER_REINDEX_RESTART")),a.startButton().show())}}});g.resolve()})});EasySocial.module("admin/mailer/mailer",
function(e){EasySocial.Controller("Mailer",{defaultOptions:{"{item}":"[data-mailer-item]"}},function(e){return{init:function(){e.item().implement(EasySocial.Controller.Mailer.Item)}}});EasySocial.Controller("Mailer.Item",{defaultOptions:{"{preview}":"[data-mailer-item-preview]"}},function(e){return{init:function(){e.options.id=e.element.data("id")},"{preview} click":function(b,a){EasySocial.dialog({content:EasySocial.ajax("admin/views/mailer/preview",{id:e.options.id})});console.log(e.options.id)}}});
this.resolve()});EasySocial.module("admin/migrators/migrator",function(e){var g=this;EasySocial.require().script("progress/progress").done(function(b){EasySocial.Controller("Migrators.Migrator",{defaultOptions:{component:null,processState:0,progressController:null,mapping:null,"{initiateButton}":"[data-initiate-migration]","{progressBar}":".discoverProgress","{results}":".scannedResult","{viewLog}":".viewLog","{customFieldsMap}":"[data-custom-fields-map]","{resultForm}":"[data-migration-result]",
"{startWidget}":"[data-start-widget]","{fieldItem}":"[data-field-item]","{startMigrationButton}":"[data-start-migration]","{rows}":"[data-row-item]","{selection}":"[data-field-item]","{jomsocialBackButton}":"[data-jomsocial-back-button]"}},function(a){return{init:function(){a.initProgressBar();a.initLogging()},showCustomFields:function(){a.startWidget().slideUp();a.customFieldsMap().slideDown()},showResultForm:function(){a.customFieldsMap().slideUp();a.resultForm().slideDown()},startMigration:function(){a.showResultForm();
1!=a.options.processState&&(a.options.processState=1,a.reset(),EasySocial.ajax("admin/controllers/migrators/check",{component:a.options.component}).done(function(b){b.isvalid?(a.options.progressController.begin(b.count),a.startIterating("")):(a.results().show(),a.addLog("Error: "+b.message),a.options.processState=0)}))},reset:function(){a.results().html("");a.initLogging();a.options.progressController.reset()},initLogging:function(){a.viewLog().hide()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);
a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<li>").html(c).appendTo(a.results())},startIterating:function(c){null==a.options.mapping&&0<a.selection().length&&(a.options.mapping=b("#adminForm").serializeArray());EasySocial.ajax("admin/controllers/migrators/process",{component:a.options.component,item:c,mapping:a.options.mapping}).always(function(b){b["continue"]?(a.options.progressController.touch("Discovering..."),a.addLog(b.message),a.startIterating(b.item)):
(a.options.progressController.touch("Discover Completed"),a.addLog(b.message),a.addLog("migration process completed."),a.viewLog().show(),a.jomsocialBackButton().show(),a.options.processState=0)})},"{fieldItem} change":function(a){""==b(a).val()?b(a).parents("[data-row-item]").removeClass("success").addClass("error"):b(a).parents("[data-row-item]").removeClass("error").addClass("success")},"{startMigrationButton} click":function(){0<a.selection().length&&a.selection().each(function(a,d){""==b(d).val()?
b(d).parents("[data-row-item]").removeClass("success").addClass("error"):b(d).parents("[data-row-item]").removeClass("error").addClass("success")});a.rows().hasClass("error")?EasySocial.dialog({content:EasySocial.ajax("admin/views/migrators/confirmMigration"),bindings:{"{submitButton} click":function(){a.startMigration();EasySocial.dialog().close()}}}):a.startMigration()},"{initiateButton} click":function(b){a.showCustomFields()},"{viewLog} click":function(){a.results().toggle()}}});g.resolve()})});
EasySocial.module("admin/points/discover",function(e){var g=this;EasySocial.require().script("progress/progress").language("COM_EASYSOCIAL_SCAN_COMPLETED").done(function(b){EasySocial.Controller("Points.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":"[data-points-discovery-start]","{progressBar}":".discoverProgress","{results}":"[data-points-discovery-result]"}},function(a){return{init:function(){a.initProgressBar()},reset:function(){a.results().html("");a.options.progressController.reset()},
initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<tr>").append(b("<td>").html(c)).appendTo(a.results())},startIterating:function(){var c=a.options.files.shift();EasySocial.ajax("admin/controllers/points/scan",{file:c}).always(function(c,e,g){0<a.options.files.length?(a.options.progressController.touch("..."),a.addLog(e),a.startIterating()):(a.options.progressController.touch("..."),
a.addLog(b.language("COM_EASYSOCIAL_SCAN_COMPLETED")),a.viewLog().show(),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(b){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/points/discoverFiles",{}).done(function(b,c){a.reset();a.options.files=b;0<a.options.files.length&&(a.options.progressController.begin(a.options.files.length),a.addLog(c),a.startIterating())})}}});g.resolve()})});EasySocial.module("admin/privacy/discover",function(e){var g=
this;EasySocial.require().script("progress/progress").done(function(b){EasySocial.Controller("Privacy.Discover",{defaultOptions:{files:[],progressController:null,"{startButton}":".scanRules","{progressBar}":".discoverProgress","{results}":".scannedResult","{viewLog}":".viewLog",view:{}}},function(a){return{init:function(){a.initProgressBar();a.initLogging()},reset:function(){a.results().html("");a.initLogging();a.options.progressController.reset()},initLogging:function(){a.viewLog().hide()},initProgressBar:function(){a.progressBar().implement(EasySocial.Controller.Progress);
a.options.progressController=a.progressBar().controller()},addLog:function(c){b("<li>").html(c).appendTo(a.results())},startIterating:function(){var b=a.options.files.shift();EasySocial.ajax("admin/controllers/privacy/scan",{file:b}).always(function(b){0<a.options.files.length?(a.options.progressController.touch("Discovering..."),a.addLog("Scanned "+b.file+" : "+b.rules.length+" rules installed."),a.startIterating()):(a.options.progressController.touch("Discover Completed"),a.addLog("Scanned "+b.file+
" : "+b.rules.length+" rules installed."),a.addLog("Scanning completed."),a.viewLog().show(),a.startButton().removeAttr("disabled"))})},"{startButton} click":function(b){a.reset();a.startButton().attr("disabled","disabled");EasySocial.ajax("admin/controllers/privacy/discoverFiles",{}).done(function(b){a.options.files=b;0<a.options.files.length&&(a.options.progressController.begin(a.options.files.length),a.results().hide(),a.addLog("Found a total of "+b.length+" rules file in the site."),a.startIterating())})},
"{viewLog} click":function(){a.results().toggle()}}});g.resolve()})});EasySocial.module("admin/profiles/avatar",function(e){var g=this;EasySocial.require().script("uploader/uploader").done(function(){EasySocial.Controller("Profiles.Avatar",{defaultOptions:{token:null,"{fileUploader}":"[data-profile-avatars-uploader]","{startUploadButton}":"[data-profile-avatars-startupload]","{avatarList}":"[data-profile-avatars-list]","{avatarEmpty}":"[data-profile-avatars-empty]","{avatarItem}":"[data-profile-avatars-item]",
"{messagePlaceholder}":"[data-profile-avatars-message]","{removeFile}":".removeFile","{clearUploadedItems}":"[data-uploader-clear]"}},function(b){return{init:function(){b.options.id=b.element.data("id");b.initUploader();b.initAvatar()},initUploader:function(){b.fileUploader().implement(EasySocial.Controller.Uploader,{url:e.indexUrl+"?option=com_easysocial&namespace=admin/controllers/profiles/uploadDefaultAvatars&"+b.options.token+"=1&tmpl=component&format=ajax&uid="+b.options.id})},initAvatar:function(){b.avatarItem().implement("EasySocial.Controller.Profiles.Avatar.Item",
{"{parent}":b,items:b.avatarItem})},addMessage:function(a){b.clearMessage();b.setMessage(a)},"{removeFile} click":function(a,c){var d=e(a).parents("li").attr("id");b.fileUploader().controller().removeItem(d)},"{startUploadButton} click":function(){b.fileUploader().controller().startUpload()},"{fileUploader} UploadProgress":function(a,b,d){a=d.percent;d=e("#"+d.id).find(".progressBar");d.show();d.find(".bar").css("width",a+"%")},"{fileUploader} FileUploaded":function(a,c,d,e){void 0!=e[0]&&(a=e[0].data[0],
b.avatarEmpty().hide(),b.avatarList().prepend(a),b.clearUploadedItems().show(),b.initAvatar())},"{clearUploadedItems} click":function(){b.fileUploader().controller().reset();b.clearUploadedItems().hide()}}});EasySocial.Controller("Profiles.Avatar.Item",{defaultOptions:{id:null,"{deleteLink}":"[data-avatar-delete]","{setDefaultAvatar}":"[data-avatar-default]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},"{setDefaultAvatar} click":function(a,c){EasySocial.ajax("admin/controllers/avatars/setDefault",
{id:b.options.id}).done(function(a){b.parent.avatarItem().removeClass("default");b.element.addClass("default");b.parent.addMessage(a)})},"{deleteLink} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/confirmDeleteAvatar"),bindings:{"{deleteButton} click":function(a,c){e(a).addClass("btn-loading");EasySocial.ajax("admin/controllers/avatars/delete",{id:b.options.id}).done(function(a){b.element.remove();0==b.parent.avatarList().children().length&&b.parent.avatarEmpty().show();
b.parent.addMessage(a);EasySocial.dialog().close()})}}})}}});g.resolve()})});EasySocial.module("uploader/uploader",function(e){var g=this;EasySocial.require().library("plupload").view("site/uploader/queue.item").script("uploader/queue").done(function(){EasySocial.Controller("Uploader",{defaults:{url:e.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+EasySocial.getToken()+"=1",uploaded:[],query:"",plupload:"",dropArea:"uploaderDragDrop",extensionsAllowed:"jpg,jpeg,png,gif",
temporaryUpload:!1,files:[],"{uploaderForm}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]","{uploadArea}":".uploadArea","{queue}":"[data-uploaderQueue]","{queueItem}":"[data-uploaderQueue-item]","{emptyFiles}":"[data-uploader-empty]","{removeFile}":"[data-uploaderQueue-remove]","{uploadCounter}":".uploadCounter",view:{queueItem:"site/uploader/queue.item"}}},function(b){return{init:function(){b.queue().implement(EasySocial.Controller.Uploader.Queue);b.options.temporaryUpload&&(b.options.url=
e.indexUrl+"?option=com_easysocial&controller=uploader&task=uploadTemporary&format=json&tmpl=component&"+EasySocial.getToken()+"=1");""!=b.options.query&&(b.options.url=b.options.url+"&"+b.options.query);b.uploaderForm().implement("plupload",{settings:{url:b.options.url,drop_element:b.options.dropArea,filters:[{title:"Allowed File Type",extensions:b.options.extensionsAllowed}]},"{uploader}":"[data-uploader-form]","{uploadButton}":"[data-uploader-browse]"},function(){b.options.plupload=this.plupload})},
"{uploaderForm} FilesAdded":function(a,c,d,e){b.addFiles(e);b.options.temporaryUpload&&b.startUpload()},"{uploaderForm} UploadProgress":function(a,c,d,e){b.queueItem("#"+e.id).trigger("UploadProgress",e)},"{uploaderForm} FileUploaded":function(a,c,d,e,g){b.queueItem("#"+e.id).trigger("FileUploaded",[e,g])},"{uploaderForm} UploadComplete":function(a,c,d,e){b.options.uploading=!1},"{uploaderForm} Error":function(a,c,d,e){b.clearMessage();b.setMessage({message:e.message,type:"error"})},"{uploaderForm} FileError":function(a,
c,d,e,g){b.setMessage({message:g.message,type:"error"});b.queueItem("#"+e.id).trigger("FileError",[e,g])},addFiles:function(a){e.each(a,function(a,d){d.size=b.formatSize(d.size);var f=b.view.queueItem({file:d,temporaryUpload:b.options.temporaryUpload});e(f).implement(EasySocial.Controller.Uploader.Queue.Item,{"{uploader}":b});b.options.files.push(d);b.emptyFiles().hide();b.queue().append(f)})},formatSize:function(a){return parseInt(a/1024)},reset:function(){b.queueItem().remove()},removeItem:function(a){var c=
e("#"+a),c=e(c).find("input[name=upload-id\\[\\]]").val();EasySocial.ajax("site/controllers/uploader/delete",{id:c}).done(function(){e("#"+a).remove();b.options.plupload.removeFile(b.options.plupload.getFile(a))})},startUpload:function(){b.upload()},upload:function(){0<b.options.plupload.files.length&&(b.options.uploading=!0,b.options.plupload.start())},hasFiles:function(){return 0<b.options.files.length}}});g.resolve()})});EasySocial.module("uploader/queue",function(e){var g=this;EasySocial.require().view("site/uploader/queue.item").done(function(b){EasySocial.Controller("Uploader.Queue",
{defaults:{"{item}":"[data-uploaderQueue-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Uploader.Queue.Item)}}});EasySocial.Controller("Uploader.Queue.Item",{defaultOptions:{"{delete}":"[data-uploaderQueue-remove]","{progress}":"[data-uploaderQueue-progress]","{progressBar}":"[data-uploaderQueue-progressBar]","{status}":"[data-uploaderQueue-status]","{id}":"[data-uploaderQueue-id]"}},function(a){return{init:function(){a.uploader.options.temporaryUpload&&(a.idTemplate=
a.id().toHTML(),a.id().remove())},"{delete} click":function(){a.uploader.removeItem(a.element.attr("id"))},"{self} FileUploaded":function(c,d,e,g){a.uploader.options.temporaryUpload&&b.buildHTML(a.idTemplate).val(g.id).appendTo(a.element);5==e.status&&(a.element.addClass("is-done"),a.status().html("Done"))},"{self} UploadProgress":function(b,d,e){a.status().html(e.percent+"%");a.progressBar().css("width",e.percent+"%")},"{self} FileError":function(){a.element.removeClass("is-done is-queue").addClass("is-error");
a.progress().removeClass("progress-danger progress-success progress-info progress-warning").addClass("progress-danger");a.status().html("Error")}}});g.resolve()})});EasySocial.module("admin/profiles/fields",function(e){var g=this;EasySocial.require().library("ui/draggable","ui/sortable","ui/droppable").script("field").view("admin/profiles/form.fields.editorItem","admin/profiles/form.fields.stepItem","admin/profiles/form.fields.editorPage","admin/profiles/form.fields.config").language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_REQUIRE_MANDATORY_FIELDS",
"COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_TITLE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRMATION",
"COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CONFIRM","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_CANCEL","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVING","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVED","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_PAGE","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_FIELD","COM_EASYSOCIAL_PROFILES_FORM_FIELDS_UNSAVED_CHANGES",
"COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES").done(function(){var b,a,c,d,f,k={},h={},p={},s={},q={},u={pages:[],fields:[]};EasySocial.Controller("Fields",{defaultOptions:{id:0,"{wrap}":"[data-fields-wrap]","{browser}":"[data-fields-browser]","{editor}":"[data-fields-editor]","{steps}":"[data-fields-steps]","{config}":"[data-fields-config]","{saveForm}":"[data-fields-save]",view:{config:"admin/profiles/form.fields.config"}}},function(g){return{init:function(){b=g;g.options.id=g.element.data("id");
a=g.addPlugin("browser");c=g.addPlugin("editor");d=g.addPlugin("steps");e.when.apply(null,[a.state,c.state,d.state]).done(function(){b.trigger("controllersReady")})},changed:!1,change:function(){g.changed=!0},"{window} beforeunload":function(a,b){if(g.changed)return e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_UNSAVED_CHANGES")},"{saveForm} click":function(){g.save()},save:function(){var a=e.Deferred();EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVING"),width:400,
height:150});b.trigger("saving");if(f&&f.state&&!f.checkConfig())return a.reject(e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES")),a;p=e.extend(!0,{},h);var k=[];e.each(d.step(),function(a,b){b=e(b);var d=c.getPage(b.data("id"));k.push(d._export())});if(0<e._.keys(p).length)return b.trigger("saved",[!1]),a.reject(e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_REQUIRE_MANDATORY_FIELDS")),a;b.changed=!1;k=JSON.stringify(k);EasySocial.ajax("admin/controllers/profiles/saveFields",{id:g.options.id,
data:k,deleted:u}).done(function(c){b.trigger("saved");EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_SAVED"),width:400,height:150});setTimeout(EasySocial.dialog().close,2E3);a.resolve()});return a},updateResult:function(a){e.each(a,function(a,b){var e=d.step().eq(a).data("id"),f=c.getPage(e);d.updateResult(a,b.id);f.updateResult(e,b)})},"{self} doneConfiguring":function(){g.element.removeClass("editting")},loadConfiguration:function(a,b){g.element.addClass("editting");
var c=e(g.view.config());f=c.addController("EasySocial.Controller.Fields.Config",{controller:{item:a}});"page"===b?a.pageHeader().append(c):a.element.append(c);g.element.trigger("loadingConfig",[b])}}});EasySocial.Controller("Fields.Browser",{defaultOptions:{"{browser}":"[data-fields-browser]","{mandatory}":"[data-fields-browser-group-mandatory]","{standard}":"[data-fields-browser-group-standard]","{list}":"[data-fields-browser-list]","{item}":"[data-fields-browser-item]",affixClass:"es-browser-affix"}},
function(a){return{state:e.Deferred(),init:function(){a.registerApps();a.ready();a.affixHandler();a.initAffix()},ready:function(){a.state.resolve()},"{parent} controllersReady":function(){var b=d.getCurrentStep().data("id");a.initDraggable(b)},"{parent} pageChanged":function(b,c,d,e){a.item().draggable("destroy");a.initDraggable(e)},"{parent} pageAdded":function(b,c,d,e){a.item().draggable("destroy");a.initDraggable(e)},initDraggable:function(b){a.item().draggable({revert:"invalid",helper:"clone",
connectToSortable:"[data-fields-editor-page-items-"+b+"]"})},affixHandler:function(){var b=e(window),c=a.parent.wrap().offset().top,b=b.scrollTop();b>c&&!a.browser().hasClass(a.options.affixClass)&&a.browser().addClass(a.options.affixClass);b<=c&&a.browser().hasClass(a.options.affixClass)&&a.browser().removeClass(a.options.affixClass)},initAffix:function(){e(window).scroll(a.affixHandler)},registerApps:function(){e.each(a.item(),function(a,b){b=e(b);var c=b.data("id");k[c]={id:c,element:b.data("element"),
title:b.data("title"),params:b.data("params"),core:b.data("core"),unique:b.data("unique"),item:b};b.data("core")&&(h[c]=k[c])})},checkout:function(a){void 0!==p[a]&&delete p[a]},"{item} click":function(a){var b=c.currentPage();a=a.data("id");b.addNewField(a)},"{parent} fieldAdded":function(b,c,d){(b=k[d])&&b.core&&(b.item.hide(),c=a.mandatory().find(a.item.selector).filter(":visible"),a.mandatory().toggle(0<c.length));b&&b.unique&&b.item.hide()},"{parent} fieldDeleted":function(b,c,d,e){(b=k[d])&&
b.core?(b.item.show(),a.mandatory().show()):b&&b.unique&&b.item.show()}}});EasySocial.Controller("Fields.Config",{defaultOptions:{"{config}":"[data-fields-config]","{header}":"[data-fields-config-header]","{close}":"[data-fields-config-close]","{form}":"[data-fields-config-form]","{param}":"[data-fields-config-param]","{tabnav}":"[data-fields-config-tab-nav]","{tabcontent}":"[data-fields-config-tab-content]","{done}":"[data-fields-config-done]"}},function(a){return{init:function(){},state:!1,load:function(c){a.state=
!0;c.find("[data-fields-config-param-choices]").addController("EasySocial.Controller.Config.Choices",{controller:{item:a.item}});c.find("h4").hide();a.header().html(c.find("h4").html());a.form().html(c);a.item.options.newfield&&a.param("[data-fields-config-param-field-unique_key]").attr("disabled",!0).val(e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_PARAMS_CORE_UNIQUE_KEY_SAVE_FIRST"));0<a.tabnav().length&&a.tabnav().find("a:first").tab("show");a.populateConfig();c=a.element.height();b.wrap().css("padding-bottom",
c+"px");b.trigger("configLoaded")},"{close} click":function(b,c){a.closeConfig()},"{done} click":function(b,c){a.closeConfig()},closeConfig:function(){var c=a.populateConfig();a.checkConfig(c)?(a.item.updateHtml(a.form().html()),a.item.content().trigger("onConfigSave",[c]),a.element.remove(),f=null,b.trigger("doneConfiguring")):EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),width:400,height:100})},"{parent} loadingConfig":function(b,c,d){void 0!==d&&"field"!=
d&&(b=e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_CONFIGURE_"+d.toUpperCase()),a.header().html(b));a.config().show();a.close().hide();a.form().html(e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_ITEM_CONFIG_LOADING"))},"{parent} configLoaded":function(b,c){a.close().show()},"{param} change":function(b){a.paramChanged(b)},"{param} keyup":function(b){a.paramChanged(b)},paramChanged:function(c){c=c.data("name");var d=a.getConfigValue(c);"boolean"===a.item.appParams[c].type&&(d=!!d);a.item.content().trigger("onConfigChange",
[c,d]);b.change()},getConfigValue:function(b){var c=a.item.appParams[b],d=a.param().filterBy("name",b);if(0!==d.length){var f="";switch(c.type){case "choices":f=[];e.each(d.find("li"),function(a,b){b=e(b);var c=b.find("[data-fields-config-param-choice-title]"),d=b.find("[data-fields-config-param-choice-value]"),g=b.find("[data-fields-config-param-choice-default]");f.push({id:b.data("id"),title:c.val(),value:d.val(),"default":g.val()});c.attr("value",c.val());d.attr("value",d.val());g.attr("value",
g.val())});break;case "boolean":b=d.val();f="true"===b||"1"===b||1===b?1:0;d.attr("value",f);break;case "checkbox":f=[];e.each(c.option,function(a,b){var c=d.filter("[data-fields-config-param-option-"+b.name+"]");0<c.length&&c.is(":checked")?(f.push(b.name),c.attr("checked","checked")):c.removeAttr("checked")});break;case "list":case "select":case "dropdown":f=0<d.length?d.val():c["default"]||"";d.find("option").prop("selected",!1);d.find('option[value="'+f+'"]').prop("selected",!0);break;default:f=
0<d.length?d.val():c["default"]||"",d.attr("value",f)}return f}},populateConfig:function(){var b={};e.each(a.item.appParams,function(c,d){var e=a.getConfigValue(c);if(void 0===e)return!1;b[c]=e});a.item.trigger("onPopulateConfig",[b]);return b},checkConfig:function(b){void 0===b&&(b=a.populateConfig());var c=!0;e.each(b,function(b,d){switch(a.item.appParams[b].type){case "choices":var f=[];e.each(d,function(a,b){e.isEmpty(b.value)&&!e.isEmpty(b.title)&&(b.value=b.title.toLowerCase().replace(" ",""));
if(!e.isEmpty(b.value)&&-1<e.inArray(b.value,f))return c=!1;f.push(b.value)})}if(!1===c)return!1});return c},"{parent} fieldDeleted":function(){a.state&&b.trigger("doneConfiguring")},"{parent} pageDeleted":function(){a.state&&b.trigger("doneConfiguring")},"{parent} pageAdded":function(){a.state&&b.trigger("doneConfiguring")},"{parent} pageChanged":function(){a.state&&b.trigger("doneConfiguring")}}});EasySocial.Controller("Fields.Steps",{defaultOptions:{"{steps}":"[data-fields-step]","{step}":"[data-fields-step-item]",
"{stepLink}":"[data-fields-step-item-link]","{add}":"[data-fields-step-add]",view:{stepItem:"admin/profiles/form.fields.stepItem"}}},function(a){return{state:e.Deferred(),init:function(){a.ready()},ready:function(){a.state.resolve()},"{parent} controllersReady":function(){a.initSort()},initSort:function(){a.steps().sortable({items:a.step.selector,placeholder:"ui-state-highlight",cursor:"move",helper:"clone",forceHelperSize:!0,stop:function(){e(".tooltip-es").remove()}})},"{parent} pageDeleted":function(b,
c,e){a.deleteStep(e);0<d.step().length&&d.stepLink(":first").tab("show")},"{step} click":function(a,d){if(!a.hasClass("active")){var e=a.data("id");b.trigger("pageChanged",[c.getPage(e),e])}},"{add} click":function(){var b=e.uid("step");a.addStep(b);c.addPage(b);a.stepLink(":last").tab("show")},addStep:function(b){a.add().before(a.view.stepItem({uid:b}))},getStep:function(b){return a.step().filterBy("id",b)},getStepLink:function(b){return a.stepLink().filterBy("id",b)},deleteStep:function(b){a.getStep(b).remove()},
getCurrentStep:function(){return a.step(".active")},currentStepIndex:function(){return a.step().index(a.step(".active"))+1},updateResult:function(b,c){var d=a.step(":eq("+b+")");if(d.data("id")!=c){var e=d.data("id");d.removeAttr("data-fields-step-item-"+e);d.attr("data-fields-step-item-"+c,!0);d.data("id",c);d.attr("data-id",c);d=a.stepLink().eq(b);d.removeAttr("data-fields-step-item-link-"+e);d.attr("data-fields-step-item-link-"+c,!0);d.attr("href","#formStep_"+c)}},toObject:function(){}}});EasySocial.Controller("Fields.Editor",
{defaultOptions:{"{editor}":"[data-fields-editor]","{page}":"[data-fields-editor-page]","{items}":"[data-fields-editor-page-items]","{item}":"[data-fields-editor-page-item]",view:{editorPage:"admin/profiles/form.fields.editorPage"}}},function(a){return{state:e.Deferred(),init:function(){a.ready()},ready:function(){a.state.resolve()},"{parent} controllersReady":function(){a.page().addController("EasySocial.Controller.Fields.Editor.Page")},currentPage:function(){return a.page(".active").controller()},
addPage:function(c){var d=a.view.editorPage({uid:c});d.addController("EasySocial.Controller.Fields.Editor.Page",{uid:c,newpage:!0});a.editor().append(d);a.page().trigger("pageAdded",[d,c]);b.change()},getPage:function(b){return a.page().filterBy("id",b).controller()},"{parent} saving":function(b,c){a.element.addClass("saving")},"{parent} saved":function(b,c,d){a.element.removeClass("saving")}}});EasySocial.Controller("Fields.Editor.Page",{defaultOptions:{pageid:0,uid:0,newpage:!1,"{items}":"[data-fields-editor-page-items]",
"{item}":"[data-fields-editor-page-item]","{pageHeader}":"[data-fields-editor-page-header]","{content}":"[data-fields-editor-page-header]","{pageTitle}":"[data-fields-editor-page-title]","{pageDescription}":"[data-fields-editor-page-description]","{inputTitle}":"[data-fields-editor-page-title-input]","{inputDescription}":"[data-fields-editor-page-description-input]","{pageVisibleRegistration}":"[data-fields-editor-page-visible-registration]","{pageVisibleEdit}":"[data-fields-editor-page-visible-edit]",
"{pageVisibleView}":"[data-fields-editor-page-visible-view]","{pageDelete}":"[data-fields-editor-page-delete]","{pageEdit}":"[data-fields-editor-page-edit]","{pageInfo}":"[data-fields-editor-page-info]","{pageInfoDone}":"[data-fields-editor-page-done]",view:{editorItem:"admin/profiles/form.fields.editorItem"}}},function(g){return{init:function(){g.options.newpage||(g.options.uid=g.options.pageid=g.element.data("id"));g.registerPage();g.item().addController("EasySocial.Controller.Fields.Editor.Item",
{pageid:g.options.uid});g.checkPageDeleteButton();g.initSort()},fields:{},getStep:function(){return d.getStep(g.options.uid)},registerPage:function(){q[g.options.uid]=g},initSort:function(){g.items().sortable({items:g.item.selector,handle:"[data-fields-editor-page-item-handle]",placeholder:"ui-state-highlight",cursor:"move",helper:"clone",forceHelperSize:!0,stop:function(b,c){if(c.item.is(a.item.selector)){var d=c.item.data("id"),e=g.createPlaceholder();c.item.replaceWith(e);g.createNewField(d,e)}}})},
addNewField:function(a){var c=g.createPlaceholder();g.items().append(c);e.scrollTo(c,200);g.createNewField(a,c);b.change()},createPlaceholder:function(){var a=e.uid("newfield");return g.view.editorItem({uid:a})},createNewField:function(a,c){b.trigger("fieldAdded",[a]);g.getFieldHtml(a).done(function(b){b=e.parseHTML(b,document,!0);b=e(b);c.replaceWith(b);b.filter('[data-appid="'+a+'"]').addController("EasySocial.Controller.Fields.Editor.Item",{controller:{page:g},appid:a,pageid:g.options.uid,newfield:!0})}).fail(function(a){c.html(a)})},
getFieldHtml:function(a){var c=e.Deferred();void 0===k[a].html?EasySocial.ajax("admin/controllers/fields/renderSample",{appid:a,profileid:b.options.id}).done(function(b){k[a].html=b;c.resolve(b)}).fail(function(a){c.reject(a)}):c.resolve(k[a].html);return c},"{pageHeader} click":function(a,b){if(e(b.target).not("[data-fields-editor-page-delete]")&&!a.hasClass("editting")){if(f&&f.state)if(f.checkConfig())f.closeConfig();else{EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),
width:400,height:100});return}g.loadConfiguration()}},loadConfiguration:function(){b.loadConfiguration(g,"page");g.pageHeader().addClass("editting");g.getPageConfig().done(function(){var a=e(g.html);f.load(a)}).fail(function(a){f.load(a)})},updateHtml:function(a){g.html=a},getPageConfig:function(){var a=e.Deferred();e.isEmptyObject(g.params)?EasySocial.ajax("admin/controllers/profiles/getPageConfig",{pageid:g.options.pageid}).done(function(b,c,d){g.params=b;g.values=c;g.html=d;g.appParams=b;a.resolve()}).fail(function(b){a.reject(b)}):
a.resolve();return a},getConfigValues:function(){return g.values},"{content} onConfigChange":function(a,c,e,f){g.values[e]=f;a=d.getStepLink(g.options.uid);"title"===e&&(a.text(f),g.pageTitle().html(f));"description"===e&&(a.attr("data-original-title",f),g.pageDescription().html(f));b.change()},"{pageDelete} click":function(a){if(a.enabled()){a.disabled(!0);if(1==c.page().length)return a.enabled(!0),!1;EasySocial.dialog({width:400,height:150,title:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_TITLE"),
content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRMATION"),showOverlay:!1,buttons:[{name:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CANCEL"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}},{name:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_CONFIRM"),classNames:"btn btn-es-danger",click:function(){EasySocial.dialog().update({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_PAGE_DIALOG_DELETING")});
g.deletePage();EasySocial.dialog().close()}}]})}},deletePage:function(){g.item().trigger("pageDeleted");b.trigger("pageDeleted",[g.options.uid]);delete q[g.options.uid];g.options.newpage||u.pages.push(g.options.uid);g.element.remove();e.each(c.page(),function(a,b){e(b).controller().checkPageDeleteButton()});b.change()},_export:function(){var a=[];e.each(g.item(),function(b,c){c=e(c).controller();void 0!==c&&a.push(c._export())});var b={fields:a,newpage:g.options.newpage,id:g.options.uid};void 0!==
g.values&&(b=e.extend(b,g.values));return b},updateResult:function(a,b){g.options.newpage&&(g.element.attr("id","formStep_"+b.id),g.element.removeAttr("data-fields-editor-page-"+a),g.element.attr("data-fields-editor-page-"+b.id,!0),g.options.pageid=g.options.uid=b.id,q[b.id]=e.extend(!0,{},q[a]),delete q[a],g.options.newpage=!1);void 0!==b.fields&&e.each(b.fields,function(a,b){g.item().eq(a).controller().updateResult(b)})},"{self} pageAdded":function(a,c,d){g.checkPageDeleteButton();b.change()},checkPageDeleteButton:function(){1<
c.page().length?g.pageDelete().show():g.pageDelete().hide()},"{parent} loadingConfig":function(){g.pageHeader().removeClass("editting");g.item().removeClass("editting")},"{parent} doneConfiguring":function(){g.pageHeader().removeClass("editting");g.item().removeClass("editting")}}});EasySocial.Controller("Fields.Editor.Item",{defaultOptions:{appid:0,fieldid:0,pageid:0,newfield:!1,"{edit}":"[data-fields-editor-page-item-edit]","{deleteButton}":"[data-fields-editor-page-item-delete]","{moveButton}":"[data-fields-editor-page-item-move]",
"{content}":"[data-fields-editor-page-item-content]","{config}":"[data-fields-config]","{closeConfig}":"[data-fields-config-close]"}},function(c){return{app:{},field:{id:0,appid:0,params:{}},state:e.Deferred(),appParams:{},init:function(){0==c.options.appid&&void 0!==c.element.data("appid")&&(c.options.appid=c.element.data("appid"));void 0!==k[c.options.appid]&&(c.app=k[c.options.appid]);0==c.options.fieldid&&void 0!==c.element.data("id")&&(c.options.fieldid=c.element.data("id"));c.registerFields();
c.uniqueid=e.uid(c.app.id+"_");c.loadedInit()},registerFields:function(){0!=c.options.fieldid&&(s[c.options.fieldid]={id:c.options.fieldid,appid:c.options.appid,params:c.field.params||{}},c.field=s[c.options.fieldid])},loadedInit:function(){c.element.addController("EasySocial.Controller.Field.Base",{mode:"sample",element:c.app.element,"{field}":c.content.selector});c.content().addController("EasySocial.Controller.Fields.Editor.Item.Config")},_export:function(){a.checkout(c.options.appid);var b={fieldid:c.options.fieldid,
appid:c.options.appid,newfield:c.options.newfield};return b=e.extend(b,c.expandConfig(c.field.params))},"{self} click":function(a,b){var d=e(b.target);if(!(d.is(c.deleteButton.selector)||d.is(c.moveButton.selector)||d.is(c.config.selector)||d.is(c.closeConfig.selector)||a.hasClass("editting"))){if(f&&f.state)if(f.checkConfig())f.closeConfig();else{EasySocial.dialog({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_INVALID_VALUES"),width:400,height:100});return}c.loadConfiguration()}},loadConfiguration:function(){b.loadConfiguration(c,
"field");c.element.addClass("editting");c.getAppParams().done(function(){var a=e(c.field.html);f.load(a)}).fail(function(){})},updateHtml:function(a){c.field.html=a},getAppParams:function(){var a=e.Deferred();c.field.html?a.resolve():EasySocial.ajax("admin/controllers/fields/renderConfiguration",{appid:c.options.appid,fieldid:c.options.fieldid}).done(function(b,d,e){c.app.params=b;c.field.params=d;c.field.html=e;c.populateAppParams();a.resolve()}).fail(function(b){a.reject(b)});return a},populateAppParams:function(){e.each(c.app.params,
function(a,b){e.each(b.fields,function(a,b){b.subfields?e.each(b.subfields,function(b,d){c.appParams[a+"_"+b]=d}):c.appParams[a]=b})})},getConfigValues:function(){return c.field.params},expandConfig:function(){var a={params:{},choices:{}};e.each(c.field.params,function(b,d){var e=c.appParams[b];if(!e)return!1;a["choices"==e.type?"choices":"params"][b]=d});c.options.newfield&&(a.params.unique_key="");return a},"{deleteButton} click":function(a){a.enabled()&&(a.disabled(!0),EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/confirmDeleteField",
{}),bindings:{"{cancelButton} click":function(){EasySocial.dialog().close();a.enabled(!0)},"{deleteButton} click":function(){EasySocial.dialog().update({content:e.language("COM_EASYSOCIAL_PROFILES_FORM_FIELDS_DELETE_ITEM_DIALOG_DELETING")});c.deleteField();EasySocial.dialog().close()}}}))},deleteField:function(){b.trigger("fieldDeleted",[c.options.appid,c.options.fieldid]);c.options.newfield||(delete s[c.options.fieldid],u.fields.push(c.options.fieldid));c.element.remove();b.change()},"{self} pageDeleted":function(){c.deleteField()},
"{content} onConfigChange":function(a,b,d,e){c.field.params[d]=e},"{self} onPopulateConfig":function(a,b,d){c.field.params=d},updateResult:function(a){c.field.params.unique_key=a.unique_key;c.itemParam("[data-fields-config-param-field-unique_key]").val(a.unique_key);c.options.newfield&&(c.options.newfield=!1,c.options.fieldid=a.fieldid,c.element.data("id",a.fieldid),c.itemParam("[data-fields-editor-page-item-param-field-unique_key]").removeAttr("disabled"),c.registerFields());void 0!==a.choices&&
e.each(a.choices,function(a,b){var d=c.itemParam("[data-fields-config-param-field-"+a+"]");e.each(b,function(a,b){var c=d.find("li").eq(a);c.data("id")||(c.attr("data-id",b.id),c.data("id",b.id))})})}}});EasySocial.Controller("Config.Choices",{defaultOptions:{"{choiceItems}":"[data-fields-config-param-choice]",unique:1}},function(a){return{init:function(){a.options.unique=void 0!==a.element.data("unique")?a.element.data("unique"):1;a.choiceItems().implement(EasySocial.Controller.Config.Choices.Choice,
{controller:{item:a.item,choices:a}});a.initSortable()},initSortable:function(){a.element.sortable({items:a.choiceItems.selector,placeholder:"ui-state-highlight",cursor:"move",forceHelperSize:!0,handle:"[data-fields-config-param-choice-drag]",stop:function(){e(".tooltip-es").remove()}})}}});EasySocial.Controller("Config.Choices.Choice",{defaultOptions:{"{choiceValue}":"[data-fields-config-param-choice-value]","{choiceTitle}":"[data-fields-config-param-choice-title]","{choiceDefault}":"[data-fields-config-param-choice-default]",
"{addChoice}":"[data-fields-config-param-choice-add]","{removeChoice}":"[data-fields-config-param-choice-remove]","{setDefault}":"[data-fields-config-param-choice-setdefault]","{defaultIcon}":"[data-fields-config-param-choice-defaulticon]"}},function(a){return{init:function(){},"{choiceTitle} keyup":e._.debounce(function(c,d){var e=a.element.index();a.item.content().trigger("onChoiceTitleChanged",[e,c.val()]);b.change()},500),"{choiceValue} keyup":e._.debounce(function(c,d){var e=a.element.index();
a.item.content().trigger("onChoiceValueChanged",[e,c.val()]);b.change()},500),"{addChoice} click":function(){var c=a.element.clone(),d=c.find('input[type="text"]');d.attr("value","");d.val("");d=c.find('input[type="hidden"]');d.attr("value",0);d.val(0);c.find("[data-fields-config-param-choice-defaulticon]").removeClass("es-state-featured").addClass("es-state-default");c.attr("data-id",0);c.data("id",0);c.implement(EasySocial.Controller.Config.Choices.Choice,{controller:{item:a.item,choices:a.choices}});
a.element.after(c);c=c.index();a.item.content().trigger("onChoiceAdded",[c]);b.change()},"{removeChoice} click":function(){if(1<=a.choices.choiceItems().length-1){var c=a.element.index();a.item.content().trigger("onChoiceRemoved",[c]);a.element.remove();e(".tooltip-es").remove()}b.change()},"{setDefault} click":function(){var c=a.element.index();a.choiceTitle().val();a.choiceValue().val();a.choices.choiceItems().trigger("toggleDefault",[c]);a.item.content().trigger("onChoiceToggleDefault",[c,parseInt(a.choiceDefault().val())]);
b.change()},"{self} toggleDefault":function(b,c,d){b=a.element.index();c=parseInt(a.choiceDefault().val());b===d?c?(a.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),a.choiceDefault().val(0)):(a.defaultIcon().removeClass("es-state-default").addClass("es-state-featured"),a.choiceDefault().val(1)):a.choices.options.unique&&(a.defaultIcon().removeClass("es-state-featured").addClass("es-state-default"),a.choiceDefault().val(0))}}});EasySocial.Controller("Fields.Editor.Item.Config",
{defaultOptions:{"{required}":"[data-required]","{title}":"[data-title]","{description}":"[data-description]","{displayTitle}":"[data-display-title]","{displayDescription}":"[data-display-description]"}},function(a){return{init:function(){},"{self} onConfigChange":function(b,c,d,e){switch(d){case "display_title":a.displayTitle().toggle(!!e);break;case "title":a.title().text(e);break;case "display_description":a.displayDescription().toggle(!!e);break;case "description":a.description().text(e);break;
case "required":a.required().toggle(!!e)}}}});g.resolve()})});EasySocial.module("field",function(e){EasySocial.Controller("Field.Base",{defaultOptions:{regPrefix:"easysocial/",modPrefix:"field.",ctrlPrefix:"EasySocial.Controller.Field.",fieldname:"",element:null,id:null,userid:null,required:!1,mode:"edit","{field}":"[data-field]","{notice}":"[data-check-notice]"}},function(g){return{init:function(){g.options.fieldname=g.element.data("fieldname");g.options.element=g.options.element||g.element.data("element");
g.options.id=g.element.data("id");g.options.required=!!g.element.data("required");g.initHandler();g.initMode()},initHandler:function(){var b=g.options.modPrefix+g.options.element,a=g.options.regPrefix+b,c=g.options.ctrlPrefix+e.String.capitalize(g.options.element);void 0!==e.module.registry[a]&&EasySocial.module(b).done(function(a){a=a||{};if(e.isController(c))g.field().addController(c,{required:g.options.required,fieldname:g.options.fieldname,id:g.options.id,userid:g.options.userid,mode:g.options.mode});
else if(e.isFunction(a))a(g.field());else if(e.isPlainObject(a))g.field().on(a)})},initMode:function(){switch(g.options.mode){case "register":g.field().trigger("onRegister");break;case "edit":g.field().trigger("onEdit");break;case "adminedit":g.field().trigger("onAdminEdit");break;case "sample":g.field().trigger("onSample");break;case "display":g.field().trigger("onDisplay")}},"{field} error":function(b,a,c,d){c=void 0!==c?c:!0;e.isString(c)&&(d=c,c=!0);e.isBoolean(c)&&g.field().toggleClass("error",
c);void 0!==d&&g.notice().html(d)},"{field} clear":function(b,a){g.field().removeClass("error")},"{self} show":function(){g.field().trigger("onShow")}}});this.resolve()});EasySocial.module("admin/profiles/members",function(e){var g=this;EasySocial.require().language("COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_ASSIGN_BUTTON","COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE").done(function(b){EasySocial.Controller("Profiles.Members",{defaultOptions:{"{addUser}":"[data-profiles-addUser]","{row}":"[data-profiles-members-row]"}},
function(a){return{init:function(){a.options.id=a.element.data("id")},"{memberList} userSelected":function(b,d,e,g){EasySocial.ajax("admin/controllers/profiles/insertMember",{id:e,profile_id:a.options.id}).done(function(b){a.row().append(b);EasySocial.dialog().close()})},"{addUser} click":function(){var c=b.callback(function(b){a.addPlugin("memberList",b)}),c=b.indexUrl+"?option=com_easysocial&view=users&tmpl=component&callback="+c;EasySocial.dialog({title:b.language("COM_EASYSOCIAL_PROFILES_ASSIGN_USER_DIALOG_TITLE"),
content:c,showOverlay:!1,width:700,height:600,buttons:[{name:b.language("COM_EASYSOCIAL_CANCEL_BUTTON"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("admin/profiles/profiles",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Profiles",{defaultOptions:{"{updateOrdering}":"[data-profiles-update-ordering]","{item}":"[data-profiles-item]",view:{deleteConfirmation:"admin/profiles/dialog.delete.confirm"}}},
function(a){return{init:function(){a.item().implement(EasySocial.Controller.Profiles.Item)},"{updateOrdering} click":function(){b("[data-table-checkall]").prop("checked",!0).trigger("change");b.Joomla("submitform",["updateOrdering"])}}});EasySocial.Controller("Profiles.Item",{defaultOptions:{"{insertLink}":"[data-profile-insert]"}},function(a){return{init:function(){a.options.title=a.element.data("title");a.options.id=a.element.data("id")},"{insertLink} click":function(){a.trigger("profileSelected",
[a.options.id,a.options.title])}}});g.resolve()})});EasySocial.module("admin/reports/reporters",function(e){EasySocial.Controller("Reports.Reporters",{defaultOptions:{"{item}":"[data-reporters-item]"}},function(e){return{init:function(){e.item().implement(EasySocial.Controller.Reports.Reporters.Item,{"{parent}":e})}}});EasySocial.Controller("Reports.Reporters.Item",{defaultOptions:{"{removeItem}":"[data-remove-item]"}},function(e){return{init:function(){e.options.id=e.element.data("id")},"{removeItem} click":function(){e.parent.clearMessage();
EasySocial.ajax("admin/controllers/reports/removeItem",{id:e.options.id}).done(function(b){e.parent.setMessage(b.message,b.type);e.element.remove()})}}});this.resolve()});EasySocial.module("admin/reports/reports",function(e){var g=this;EasySocial.require().language("COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_CLOSE_BUTTON","COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE","COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE").done(function(b){EasySocial.Controller("Reports",{defaultOptions:{"{item}":"[data-reports-item]"}},
function(a){return{init:function(){a.item().implement(EasySocial.Controller.Reports.Item)}}});EasySocial.Controller("Reports.Item",{defaultOptions:{"{action}":"[data-reports-item-view-actions]","{viewReports}":"[data-reports-item-view-reports]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.extension=a.element.data("extension");a.options.uid=a.element.data("uid");a.options.type=a.element.data("type")},"{viewReports} click":function(){EasySocial.dialog({title:b.language("COM_EASYSOCIAL_REPORTS_VIEW_REPORTS_DIALOG_TITLE"),
content:EasySocial.ajax("admin/controllers/reports/getReporters",{id:a.options.id}),width:600,height:450})},"{action} click":function(){EasySocial.dialog({title:b.language("COM_EASYSOCIAL_REPORTS_ACTIONS_DIALOG_TITLE"),content:"<div>Perform some actions on the item</div>",width:500,height:250,buttons:[{name:b.language("COM_EASYSOCIAL_CLOSE_BUTTON"),classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("admin/users/form",function(e){var g=this;
EasySocial.require().script("field").done(function(b){EasySocial.Controller("Users.Form",{defaultOptions:{userid:null,mode:"adminedit","{selectProfile}":"[data-user-select-profile]","{content}":"[data-user-new-content]","{profileTitle}":"[data-profile-title]","{fieldItem}":"[data-profile-adminedit-fields-item]","{tabnav}":"[data-tabnav]","{tabcontent}":"[data-tabcontent]","{stepnav}":"[data-stepnav]","{stepcontent}":"[data-stepcontent]",view:{loading:"site/loading/large"}}},function(a){return{init:function(){window.selectedProfile=
a.selectedProfile;a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:a.options.userid,mode:a.options.mode})},selectedProfile:function(a){EasySocial.dialog().close();window.location.href="index.php?option=com_easysocial&view=users&layout=form&profileId="+a},"{selectProfile} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/profiles/browse")})},errorFields:[],"{fieldItem} error":function(c,d){var e=c.data("id");0>b.inArray(e,a.errorFields)&&a.errorFields.push(e);
e=c.parents(a.stepcontent.selector).data("for");a.stepnav().filterBy("for",e).trigger("error");e=c.parents(a.tabcontent.selector).data("for");a.tabnav().filterBy("for",e).trigger("error")},"{fieldItem} clear":function(c,d){var e=c.data("id");a.errorFields=b.without(a.errorFields,e);e=c.parents(a.stepcontent.selector).data("for");a.stepnav().filterBy("for",e).trigger("clear");e=c.parents(a.tabcontent.selector).data("for");a.tabnav().filterBy("for",e).trigger("clear")},"{stepnav} error":function(a){a.addClass("error")},
"{tabnav} error":function(a){a.addClass("error")},"{stepnav} clear":function(b){1>a.errorFields.length&&b.removeClass("error")},"{tabnav} clear":function(b){1>a.errorFields.length&&b.removeClass("error")}}});g.resolve()})});EasySocial.module("admin/users/privacy",function(e){var g=this;EasySocial.require().library("textboxlist").view("site/loading/small").done(function(b){EasySocial.Controller("Profile.Privacy",{defaultOptions:{userId:"","{privacyItem}":"[data-privacy-item]","{privacyForm}":"[data-profile-privacy-form]",
view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.privacyItem().implement(EasySocial.Controller.Profile.Privacy.Item,{"{parent}":a})}}});EasySocial.Controller("Profile.Privacy.Item",{defaultOptions:{"{selection}":"[data-privacy-select]","{hiddenCustom}":"[data-hidden-custom]","{customForm}":"[data-privacy-custom-form]","{customTextInput}":"[data-textfield]","{customItems}":"input[]","{customHideBtn}":"[data-privacy-custom-hide-button]","{customInputItem}":"[data-textboxlist-item]",
"{customEditBtn}":"[data-privacy-custom-edit-button]"}},function(a){return{init:function(){a.customTextInput().textboxlist({unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:2,cache:!1,query:function(b){var d=a.getTaggedUsers();return EasySocial.ajax("site/views/privacy/getfriends",{q:b,userid:a.parent.options.userId,exclude:d})}}}});a.textboxlistLib=a.customTextInput().textboxlist("controller")},getTaggedUsers:function(){var c=[],d=a.customInputItem();0<d.length&&b.each(d,function(a,d){c.push(b(d).data("id"))});
return c},"{customTextInput} addItem":function(b,d,e){b=a.hiddenCustom().val();d="";""==b?d=e.id:(b=b.split(","),b.push(e.id),d=b.join(","));a.hiddenCustom().val(d)},"{customTextInput} removeItem":function(b,d,e){b="";b=[];d=a.hiddenCustom().val().split(",");for(var g=0;g<d.length;g++)d[g]!=e.id&&b.push(d[g]);b=0>=b.length?"":b.join(",");a.hiddenCustom().val(b)},"{customEditBtn} click":function(b){a.customForm().toggle()},"{selection} change":function(b){"custom"==b.val()?(a.customForm().show(),a.customEditBtn().show()):
(a.customForm().hide(),a.customEditBtn().hide())},"{customHideBtn} click":function(){a.customForm().hide();a.customEditBtn().show();a.textboxlistLib.autocomplete.hide()}}});g.resolve()})});EasySocial.module("admin/users/users",function(e){var g=this;EasySocial.require().library("expanding").done(function(b){EasySocial.Controller("Users",{defaultOptions:{"{item}":"[data-user-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Item)}}});EasySocial.Controller("Users.Item",
{defaultOptions:{"{insertLink}":"[data-user-item-insertLink]"}},function(a){return{init:function(){a.options.name=a.element.data("name");a.options.avatar=a.element.data("avatar");a.options.email=a.element.data("email");a.options.id=a.element.data("id")},"{insertLink} click":function(){a.trigger("userSelected",[a.options.id,a.options.name,a.options.avatar,a.options.email])}}});EasySocial.Controller("Users.Pending",{defaultOptions:{"{item}":"[data-pending-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Users.Pending.Item)}}});
EasySocial.Controller("Users.Pending.Item",{defaultOptions:{"{approve}":"[data-pending-approve]","{reject}":"[data-pending-reject]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{approve} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmApprove",{id:a.options.id}),bindings:{"{approveButton} click":function(){b("[data-users-approve-form]").submit()}}})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("admin/views/users/confirmReject",
{id:a.options.id})})}}});g.resolve()})});EasySocial.module("admin/widgets/news",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("News",{defaultOptions:{loadOnInit:!0,"{items}":"[widget-news-items]","{placeholder}":"[widget-news-placeholder]"}},function(a){return{init:function(){a.options.loadOnInit&&a.getNews()},getNews:function(){EasySocial.ajax("admin/controllers/news/getnews").done(function(b){a.items().append(b);a.placeholder().remove()})}}});g.resolve()})});
EasySocial.module("albums/album",function(e){var g=this;EasySocial.require().library("tinyscrollbar").done(function(){EasySocial.Controller("Albums.Album",{defaultOptions:{"{title}":"[data-album-title]","{count}":"[data-album-count]","{privacy}":"[data-album-privacy]","{cover}":"[data-album-cover]","{coverImage}":"[data-album-cover-image]","{link}":"[data-album-link]","{menu}":"[data-album-menu]","{menuActions}":"[data-album-menu-actions]","{shareButton}":"[data-album-share-button]","{shareContent}":"[data-sharing]",
"{followButton}":"[data-album-follow-button]","{reportButton}":"[data-album-report-button]","{deleteButton}":"[data-album-delete-button]","{likeButton}":"[data-album-like-button]","{commentButton}":"[data-album-comment-button]","{countsButton}":"[data-album-counts-button]","{commentCount}":"[data-album-comment-count]","{likeCount}":"[data-album-like-count]","{actions}":"[data-item-actions]","{actionContent}":"[data-item-action-content]","{actionCloseButton}":"[data-item-action-close-button]","{actionsMenu}":"[data-item-actions-menu]",
"{likesHolder}":"[data-album-likes-holder]","{commentsHolder}":"[data-album-comments-holder]","{responseHolder}":"[data-album-response-holder]","{comments}":"[data-comments]"}},function(b){return{init:function(){b.id=b.element.data("album-id");b.actionContent().tinyscrollbar();b.actions().hasClass("open")&&(b.loadResponse(),b.element.addClass("show-all"))},remove:function(){b.element.remove()},"{coverImage} click":function(){window.location=b.link().attr("href")},"{shareButton} click":function(){b.shareContent().show()},
"{deleteButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/albums/confirmDelete",{id:b.id})})},like:function(){EasySocial.ajax("site/controllers/albums/like",{id:b.id}).done(function(a){b.likeCount().html(a.count);a.state?b.likeButton().addClass("liked"):b.likeButton().removeClass("liked");b.likesHolder().html(a.html)})},loadResponse:function(){var a=b.loadResponse.loader;a&&"rejected"!=a.state()||(b.loadResponse.loader=EasySocial.ajax("site/views/albums/response",{id:b.id}).done(function(a){b.responseHolder().html(a);
b.actionContent().removeClass("loading").tinyscrollbar_update()}))},getButton:function(a){a=e(a);var c=b.countsButton(),d=b.commentButton();return a.is(c)||0<a.parents().filter(c).length?c:a.is(d)||0<a.parents().filter(d).length?d:e()},lastButton:e(),"{actions} dropdownOpen":function(a,c,d){b.loadResponse();b.element.addClass("show-all");a=b.actionContent();d=b.lastButton=b.getButton(d);d=d.position().left+d.width()/2-a.width()/2;a.css("margin-left",d).tinyscrollbar_update()},"{actions} dropdownClose":function(a,
c,d){b.element.removeClass("show-all");var e=b.getButton(d);e.is(b.lastButton)||setTimeout(function(){e.trigger("click")},0)},"{actionCloseButton} click":function(a){b.hideActionContent()},"{likeButton} click":function(){b.like()},"{comments} newCommentSaved":function(){var a=b.comments().controller("EasySocial.Controller.Comments.Stat");b.commentCount().html(a.total());b.actionContent().tinyscrollbar_update("bottom")},"{comments} commentDeleted":function(){var a=b.comments().controller("EasySocial.Controller.Comments.Stat");
b.commentCount().html(a.total());b.actionContent().tinyscrollbar_update()},"{actionsMenu} dropdownOpen":function(){b.element.addClass("show-all")},"{actionsMenu} dropdownClose":function(){b.element.removeClass("show-all")}}});g.resolve()})});EasySocial.module("albums/browser",function(e){var g=this;EasySocial.require().library("history").view("site/albums/browser.list.item").done(function(){EasySocial.Controller("Albums.Browser",{hostname:"browser",defaultOptions:{view:{listItem:"site/albums/browser.list.item"},
itemRenderOptions:{},"{sidebar}":"[data-album-browser-sidebar]","{content}":"[data-album-browser-content]","{createAlbumButton}":"[data-album-create-button]","{createAlbumButtonLink}":"[data-album-create-button] > a","{listItemGroup}":"[data-album-list-item-group]","{listItemRegularGroup}":"[data-album-list-item-group=regular]","{listItemCoreGroup}":"[data-album-list-item-group=core]","{listItem}":"[data-album-list-item]","{listItemLink}":"[data-album-list-item] > a","{listItemTitle}":"[data-album-list-item-title]",
"{listItemCover}":"[data-album-list-item-cover]","{listItemCount}":"[data-album-list-item-count]","{albumItem}":"[data-album-item]","{photoBrowser}":"[data-photo-browser]"}},function(b){return{init:function(){b.albumItem().each(function(){b.addSubscriber(e(this).controller("EasySocial.Controller.Albums.Item"))})},setLayout:function(a){b.element.hasClass("layout-dialog")||b.element.data("layout",a).switchClass("layout-"+a)},open:function(a){var c=e.makeArray(arguments);b.trigger("contentload",c);var d=
"view"+e.String.capitalize(a),d=b[d].apply(b,c.slice(1));d.done(b.displayContent(function(){b.trigger("contentdisplay",c);return arguments})).fail(function(){b.trigger("contentfail",c)}).always(function(){b.trigger("contentcomplete",c)});return d},"{self} contentdisplay":function(a,c,d){/album|albumform/gi.test(d)&&b.setLayout("album");/photo/gi.test(d)&&b.setLayout("photo")},displayContent:e.Enqueue(function(a){var c=[];a=e(e.buildFragment([a],document,c));b.content().html(a);e(c).remove()}),viewAlbum:function(a){b.listItem().removeClass("active loading");
var c=b.getListItem(a).addClass("active loading");"dialog"!==b.element.data("layout")&&c.find("> a").route();return EasySocial.ajax("site/views/albums/item",{id:a,renderOptions:b.options.itemRenderOptions}).fail(function(){}).always(function(){c.removeClass("loading")})},viewAlbumForm:function(){b.listItem().removeClass("active loading");var a=b.view.listItem({}).addClass("active loading new").prependTo(b.listItemRegularGroup());return EasySocial.ajax("site/views/albums/form").fail(function(){}).always(function(){a.removeClass("loading")})},
viewPhoto:function(a){return EasySocial.ajax("site/views/photos/item",{id:a,browser:1}).fail(function(){}).always(function(){})},"{listItem} click":function(a){a.hasClass("new")||(a=a.data("albumId"),b.open("Album",a))},"{listItemLink} click":function(a,b){b.preventDefault();a.blur()},"{createAlbumButton} click":function(){b.open("AlbumForm");"dialog"!==b.element.data("layout")&&b.createAlbumButtonLink().route()},"{createAlbumButtonLink} click":function(a,b){b.preventDefault()},"{albumItem} init.albums.item":function(a,
c,d){b.addSubscriber(d)},getListItem:function(a,c){var d=a?b.listItem().filterBy("albumId",a):b.listItem(".new");return c?d.find(b["listItem"+e.String.capitalize(c)].selector):d},updateListItemCount:function(a,c,d){a=b.getListItem(a,"count");0>a.length||(c=d?(parseInt(a.text())||0)+(parseInt(c)||0):c,0>c&&(c=0),a.text(c))},"{albumItem} albumSave":function(a,c,d){d.done(function(a){b.getListItem().attr("data-album-id",a.id).removeClass("new");b.getListItem(a.id).find("> a").attr({href:a.permalink,
title:a.title}).route();b.getListItem(a.id,"title").html(a.title)})},"{albumItem} titleChange":function(a,c,d,f){b.getListItem(f.id,"title").html(e.trim(d)||"&nbsp;")},"{albumItem} coverChange":function(a,c,d,f){b.getListItem(f.id,"cover").css("backgroundImage",e.cssUrl(d.sizes.thumbnail.url))},"{albumItem} coverRemove":function(a,c,d){b.getListItem(d.id,"cover").css("backgroundImage","")},"{albumItem} photoAdd":function(a,c,d,e,g){b.updateListItemCount(g.id,1,!0)},"{albumItem} photoMove":function(a,
c,d,e){d.done(function(){b.updateListItemCount(e.album.id,-1,!0)})},"{albumItem} photoDelete":function(a,c,d,e){d.done(function(){b.updateListItemCount(e.album.id,-1,!0)})},"{photoBrowser} init.photos.browser":function(a,c,d){b.addSubscriber(d)},"{self} contentload":function(){b.listItem(".new").remove()}}});g.resolve()})});EasySocial.module("albums/editor",function(e){EasySocial.require().script("albums/editor/sortable","albums/editor/uploader").done();var g=EasySocial.Controller("Albums.Editor",
{hostname:"editor",defaultOptions:{view:{uploadItem:"site/albums/upload.item"},canReorder:!1,canUpload:!0,"{titleField}":"[data-album-title-field]","{captionField}":"[data-album-caption-field]","{coverField}":"[data-album-cover-field]","{location}":"[data-album-location]","{locationCaption}":"[data-album-location-caption]","{addLocationButton}":"[data-album-addLocation-button]","{date}":"[data-album-date]","{dateCaption}":"[data-album-date-caption]","{addDateCaption}":"[data-album-addDate-button]",
"{privacy}":"[data-album-privacy]","{uploadButton}":"[data-album-upload-button]","{deleteButton}":"[data-album-delete-button]","{moreButton}":"[data-album-more-button]","{privacy}":"[data-privacy-hidden]","{privacycustom}":"[data-privacy-custom-hidden]","{uploadItem}":"[data-photo-upload-item]","{dateDay}":"[data-date-day]","{dateMonth}":"[data-date-month]","{dateYear}":"[data-date-year]","{editButton}":"[data-album-edit-button]","{editButtonLink}":"[data-album-edit-button] > a","{doneButton}":"[data-album-done-button]",
"{doneButtonLink}":"[data-album-done-button] > a","{locationWidget}":".es-album-location-form .es-location","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]"}},function(b){return{init:function(){b.id=b.element.data("album-id");var a=b.options;a.canReorder&&EasySocial.module("albums/sortable").done(function(a){b.addPlugin("sortable",a)});a.canUpload&&EasySocial.module("albums/editor/uploader").done(function(a){b.uploader=b.addPlugin("uploader",a)});b.id?(b.createAlbum.task=e.Deferred().resolve(),
b.createStream=0):b.createStream=1},data:function(){var a=b.titleField().val(),c=b.captionField().val(),d=b.formatDate(),e=b.locationCaption().html(),g=b.latitude().val(),h=b.longitude().val(),p=b.privacy().val(),s=b.privacycustom().val();return{id:b.id,title:a,caption:c,date:d,address:e,latitude:g,longitude:h,privacy:p,privacycustom:s,createStream:b.createStream}},createAlbum:function(){var a=b.createAlbum.task;a||(a=b.createAlbum.task=b.save({createStream:0}).done(function(a){b.deleteButton().disabled(!1);
b.element.attr("data-album-id",b.id=a.id)}).fail(function(a,d){b.setMessage(a,d)}));return a},save:function(a){b.trigger("beforeAlbumSave",[b]);a=e.extend(b.data(),a);a.photos=e.map(b.album.photoItem(),function(a,b){var f=e(a).controller("EasySocial.Controller.Photos.Editor");return f?f.data():null});b.clearMessage();a=EasySocial.ajax("site/controllers/albums/store",a);b.trigger("albumSave",[a,b]);return a},"{self} photoAdd":function(a,c,d,e){1>=b.album.photoItem().length&&b.changeCover(e)},setCover:function(a){return EasySocial.ajax("site/controllers/albums/setCover",
{albumId:b.id,coverId:a}).done(function(a){b.changeCover(a)}).fail(function(){})},removeCover:function(){b.trigger("coverRemove",[b.album])},changeCover:function(a){b.trigger("coverChange",[a,b])},"{self} coverChange":function(a,c,d){b.coverField().removeClass("no-cover").css("backgroundImage",e.cssUrl(d.sizes.thumbnail.url))},"{self} coverRemove":function(){b.coverField().addClass("no-cover").css("backgroundImage","")},"{editButton} click":function(){b.album.setLayout("form");b.editButtonLink().route()},
"{editButtonLink} click":function(a,b){b.preventDefault()},"{doneButton} click":function(){b.save().done(function(a,c){e.buildHTML(c).replaceAll(b.element)}).progress(function(a,c){b.setMessage(a,c)})},"{doneButtonLink} click":function(a,b){b.preventDefault()},"{deleteButton} click":function(a){a.disabled()||EasySocial.dialog({content:EasySocial.ajax("site/views/albums/confirmDelete",{id:b.id})})},formatDate:function(){var a=b.dateDay().val()||b.dateDay().data("date-default"),c=b.dateMonth().val()||
b.dateMonth().data("date-default");return(b.dateYear().val()||b.dateYear().data("date-default"))+"-"+c+"-"+a},updateDate:function(){b.date().addClass("has-data");var a=b.dateDay().val()+" "+e.trim(b.dateMonth().find(":selected").html())+" "+b.dateYear().val();b.dateCaption().html(a)},"{dateDay} keyup":function(){b.updateDate()},"{dateMonth} change":function(){b.updateDate()},"{dateYear} keyup":function(){b.updateDate()},"{titleField} keyup":function(a){b.trigger("titleChange",[a.val(),b])},"{locationWidget} locationChange":function(a,
c,d){a=d.formatted_address;b.locationCaption().html(a);b.location().addClass("has-data")}}});this.resolve(g)});EasySocial.module("albums/editor/sortable",function(e){var g=this;EasySocial.require().library("ui/sortable").done(function(){var b=EasySocial.Controller("Albums.Editor.Sortable",{defaultOptions:{}},function(a){return{init:function(){},getPhotoOrdering:function(){var b={};a.photoItem().each(function(a){var f=e(this).data("photoId");b[f]=a});return b},"{parent.photoItemGroup} sortstart":function(b,
d,e){e.item.addClass("dragging");b.addClass("ordering");a.setLayout()},"{parent.photoItemGroup} sortchange":function(b,d,e){a.setLayout()},"{parent.photoItemGroup} sortstop":function(b,d,e){e.item.removeClass("dragging");b.removeClass("ordering");a.setLayout();EasySocial.ajax("site/controllers/photos/reorder",{id:e.item.controller().id,order:e.item.index()})}}});g.resolve(b)})});EasySocial.module("albums/editor/uploader",function(e){var g=this;EasySocial.require().script("albums/uploader").view("site/albums/upload.item").done(function(){var b=
EasySocial.Controller("Albums.Editor.Uploader",{defaultOptions:{}},function(a){return{init:function(){a.album=a.editor.album;a.uploader=a.addPlugin("uploader",EasySocial.Controller.Albums.Uploader,{settings:a.album.options.uploader,"{uploadButton}":a.editor.uploadButton.selector,"{uploadItemGroup}":a.album.photoItemGroup.selector,"{uploadDropsite}":a.album.content.selector})},setLayout:function(){a.album.setLayout_()},"{self} beforeAlbumSave":function(){a.uploader.stop()},"{self} albumSave":function(b,
d,f){f.done(function(b){b=e.uri(a.uploader.settings("url")).replaceQueryParam("albumId",b.id).toString();a.uploader.settings("url",b)})},"{self} layoutChange":function(b,d,f){a.uploader.stop();a.uploader.clear();b=e.uri(a.uploader.settings("url")).replaceQueryParam("createStream","form"==f?0:1).replaceQueryParam("layout",f).toString();a.uploader.settings("url",b)},"{self} QueueCreated":function(b,d,e){"form"==a.album.currentLayout()&&e.element.addClass("layout-form");a.setLayout()},startUpload:e.Enqueue(),
"{uploader} FilesAdded":function(b,d,e,g){a.id?a.uploader.start():a.editor.createAlbum().done(a.startUpload(function(){a.uploader.start()}));a.setLayout()},"{uploader} FilesRemoved":function(){a.setLayout()},"{uploader} FileUploaded":function(b,d,f,g,h){b=a.uploader.getItem(g);var p=e.buildHTML(h.html);h=h.data;p.addClass("new-item").insertAfter(b.element);setTimeout(function(){p.removeClass("new-item")},1);a.uploader.removeItem(g.id);a.trigger("photoAdd",[p,h,a.album]);a.setLayout()}}});g.resolve(b)})});
EasySocial.module("albums/uploader",function(e){var g=this;EasySocial.require().library("plupload").script("albums/uploader.item").view("site/albums/upload.item").done(function(){EasySocial.Controller("Albums.Uploader",{defaultOptions:{view:{uploadItem:"site/albums/upload.item"},"{uploadButton}":"[data-upload-button]","{uploadItemGroup}":"[data-upload-item-group]","{uploadItem}":"[data-upload-item]","{uploadDropsite}":"[data-upload-dropsite]"}},function(b){return{init:function(){var a=b.element;b.pluploadController=
b.element.addController("plupload",e.extend({"{uploadButton}":b.uploadButton.selector,"{uploadDropsite}":b.uploadDropsite.selector},b.options.settings));b.plupload=b.pluploadController.plupload;e.IE||"html5"!=b.plupload.runtime||a.addClass("can-drop-file");a.addClass("can-upload")},setLayout:function(){b.uploadItemGroup().toggleClass("no-upload-items",1>b.uploadItem().length)},items:{},getItem:function(a){var c;e.isString(a)&&(c=a);a&&a.id&&(c=a.id);return b.items[c]},createItem:function(a){var c=
b.view.uploadItem({file:a}).addController("EasySocial.Controller.Albums.Uploader.Item",{"{uploader}":b,file:a});c.element.prependTo(b.uploadItemGroup());b.items[a.id]=c;b.setLayout();b.trigger("QueueCreated",[c]);return c},settings:function(a,c){var d=b.plupload.settings;void 0!==c&&(d[a]=c);return a?d[a]:d},start:function(){return b.plupload.start()},stop:function(){return b.plupload.stop()},"{self} FilesAdded":function(a,c,d,f){try{f.reverse(),e.each(f,function(a,c){b.getItem(c)||b.createItem(c)})}catch(g){console.error(g)}},
"{self} BeforeUpload":function(a,c,d,e){(a=b.getItem(e))&&a.setState("preparing")},"{self} UploadFile":function(a,c,d,e){(a=b.getItem(e))&&a.setState("uploading")},"{self} UploadProgress":function(a,c,d,e){if(a=b.getItem(e))a.setState("uploading"),a.setProgress()},"{self} FileUploaded":function(a,c,d,f,g){(a=b.getItem(f))&&(e.isPlainObject(g)?a.setState("done"):a.setState("failed"))},"{self} FileError":function(a,c,d,e,g){(a=b.getItem(e))||(a=b.createItem(e));a.setState("failed");a.setMessage(g.message)},
"{self} Error":function(a,c,d,e){e.file&&(a=e.file,(c=b.getItem(a))||(c=b.createItem(a)),c.setState("failed"),c.setMessage(e.message))},removeItem:function(a){var c=b.getItem(a);c&&(b.plupload.removeFile(c.file()),c.element.remove(),delete b.items[a],b.setLayout())},clear:function(a){e.each(b.items,function(a,d){b.plupload.removeFile(d.file());d.element.remove();delete b.items[a]});b.items={}}}});g.resolve()})});EasySocial.module("albums/uploader.item",function(e){EasySocial.Controller("Albums.Uploader.Item",
{defaultOptions:{"{status}":".upload-status","{filename}":".upload-filename","{progressBar}":".upload-progress-bar","{percentage}":".upload-percentage","{filesizeTotal}":".upload-filesize-total","{filesizeLeft}":".upload-filesize-left","{details}":".upload-details","{detailsButton}":".upload-details-button","{removeButton}":".upload-remove-button","{message}":".upload-message"}},function(g){return{init:function(){g.id=g.element.attr("id");var b=g.file();g.filename().html(b.name);g.setState("pending");
g.setProgress();b="html4"==g.uploader.plupload.runtime;(10>e.IE||b)&&g.element.addClass("indefinite-progress");b&&g.element.addClass("no-filesize")},file:function(){var b=g.uploader.plupload.getFile(g.id)||g.options.file;if(b){var a=void 0===b.size||"N/A"==b.size;b.percentage=b.percent+"%";b.filesize=a?"":e.plupload.formatSize(b.size);b.remaining=a?"":e.plupload.formatSize(b.size-(b.loaded||0))}return b},setProgress:function(){var b=g.file();g.progressBar().width(b.percentage);g.percentage().html(b.percentage);
g.filesizeTotal().html(b.filesize);g.filesizeLeft().html(b.remaining)},setState:function(b){g.element.removeClass("pending preparing uploading failed done").addClass(b);g.state=b},setMessage:function(b){g.detailsButton().attr("data-popbox",b)},"{removeButton} click":function(b,a){g.uploader.removeItem(g.id)}}});this.resolve()});EasySocial.module("albums/item",function(e){var g=this;EasySocial.require().script("albums/editor").done();EasySocial.require().library("masonry").done(function(){EasySocial.Controller("Albums.Item",
{hostname:"album",defaultOptions:{tilesPerRow:4,editable:!1,multipleSelection:!1,"{header}":"[data-album-header]","{content}":"[data-album-content]","{footer}":"[data-album-footer]","{info}":"[data-album-info]","{title}":"[data-album-title]","{caption}":"[data-album-caption]","{location}":"[data-album-location]","{date}":"[data-album-date]","{cover}":"[data-album-cover]","{photoItemGroup}":"[data-photo-item-group]","{photoItem}":"[data-photo-item]","{photoImage}":"[data-photo-image]","{featuredItem}":"[data-photo-item].featured",
"{featuredImage}":"[data-photo-item].featured [data-photo-image]","{uploadItem}":"[data-photo-upload-item]","{moreButton}":"[data-album-more-button]","{viewButton}":"[data-album-view-button]","{share}":"[data-repost-action]","{likes}":"[data-likes-action]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{counterBar}":"[data-stream-counter]"}},function(b){return{init:function(){b.id=b.element.data("album-id");b.nextStart=b.element.data("album-nextstart")||-1;b.options.editable&&
EasySocial.module("albums/editor").done(function(a){b.editor=b.addPlugin("editor",a)});b.setLayout();setTimeout(function(){b.content().addClass("ready")},1);b.addSubscriber(b.photoItem().controllers("EasySocial.Controller.Photos.Item"))},"{window} resize":e.debounce(function(){b.setLayout()},250),currentLayout:function(){return b.element.data("albumLayout")},setLayout_:e.debounce(function(){b.setLayout()},100),setLayout:function(a){var c=b.photoItemGroup(),d=b.currentLayout();a=a||d;var f=b.setLayout.seed,
g=f==c.width()&&d==a;hasPhotoItem=0<b.photoItem().length;hasUploadItem=0<b.uploadItem().length;hasItem=hasPhotoItem||hasUploadItem;masonry=c.data("masonry");layout={currentLayout:d,seed:f,intact:g,hasPhotoItem:hasPhotoItem,hasUploadItem:hasUploadItem,hasItem:hasItem,masonry:masonry};g||(b.element.data("albumLayout",a).switchClass("layout-"+a),b.photoItem().switchClass("layout-"+a),b.setLayout.seed=layout.seed=null,b.trigger("layoutChange",[a,layout]));b.element.toggleClass("has-photos",hasItem);hasItem||
c.css("opacity",1);a="set"+e.String.capitalize(a)+"Layout";b[a](layout);b.setLayout.seed=c.width()},setItemLayout:function(a){if(a.intact)a.masonry&&a.masonry.reload();else{var c=4;e("#es-wrap").hasClass("w600")&&(c=2);e("#es-wrap").hasClass("w320")&&(c=1);var d=b.photoItemGroup(),f=b.photoItem();a=d.width();a=Math.floor(a/c)*c/c;var g=f.outerWidth(!0)-f.width(),h=f.outerHeight(!0)-f.height(),f=a-g,p=a-h;4<=c?(c=2*a-g,g=2*a-h):(c=f,g=p);var h=c,s=g;b.photoItem.css({width:f,height:p});b.photoImage.css({width:f,
height:p});b.featuredItem.css({width:c,height:g});b.featuredImage.css({width:h,height:s});b.uploadItem.css({width:f,height:p});d.masonry({columnWidth:a});setTimeout(function(){d.addTransitionClass("no-transition").masonry("reload")},1)}},setFormLayout:function(a){a.masonry&&a.masonry.destroy();b.clearLayout()},setDialogLayout:function(){layout.masonry&&layout.masonry.destroy();b.clearLayout()},setThumbnailLayout:function(){},setRowLayout:function(){b.clearLayout()},clearLayout:function(){b.photoItemGroup().addClass("no-transition");
b.photoItem.css().remove();b.photoImage.css().remove();b.featuredItem.css().remove();b.featuredImage.css().remove();b.uploadItem.css().remove();b.setLayout.seed=null},getSelectedItems:function(){var a=[];b.photoItem(".selected").each(function(b,d){a.push(e(d).controller("EasySocial.Controller.Photos.Item").data())});return a},"{photoItem} init.photos.item":function(a,c,d){b.addSubscriber(d)},"{photoItem} destroyed":function(){b.setLayout()},"{photoItem} activate":function(a,c,d){if(d)switch(b.currentLayout()){case "item":case "row":a.addClass("loading");
b.browser?(b.browser.open("photo",d.id).always(function(){a.removeClass("loading")}),d.imageLink().route()):window.location=d.imageLink().attr("href");break;case "dialog":c=b.photoItem(".selected"),b.options.multipleSelection?a.toggleClass("selected"):(d=a.hasClass("selected"),c.removeClass("selected"),a.toggleClass("selected",!d))}},"{photoItem} photoFeature":function(a,c,d,e,g){b.setLayout();d.fail(function(){b.setLayout()})},"{photoItem} photoMove":function(a,c,d,e,g){b.clearMessage();d.done(function(){e.element.remove();
b.setLayout();1>b.photoItem().length&&b.trigger("coverRemove",[b])}).fail(function(a,c){b.setMessage(a,c)})},"{photoItem} photoDelete":function(a,c,d,e){b.clearMessage();d.done(function(){e.element.remove();b.setLayout();1>b.photoItem().length&&b.trigger("coverRemove",[b])}).fail(function(a,c){b.setMessage(a,c)})},"{self} albumSave":function(a,c,d){d.done(function(a){b.id=a.id})},"{self} coverChange":function(a,c,d,f){b.cover().css("backgroundImage",e.cssUrl(d.sizes.thumbnail.url))},"{self} coverRemove":function(){b.cover().css("backgroundImage",
"")},"{viewButton} click":function(a,c){b.browser&&(c.preventDefault(),b.element.addClass("loading"),b.browser.open("Album",b.id))},"{moreButton} click":function(a){-1==b.nextStart||a.disabled()||(a.disabled(!0),EasySocial.ajax("site/controllers/albums/loadMore",{albumId:b.id,start:b.nextStart,layout:b.currentLayout()}).done(function(c,d){b.nextStart=d;var f=b.photoItemGroup();e.each(c,function(a,b){e.buildHTML(b).appendTo(f)});0>d&&a.hide();b.setLayout()}).always(function(){a.disabled(!1)}))},"{share} create":function(a,
c,d){b.counterBar().removeClass("hide")},"{likes} onLiked":function(a,c,d){b.counterBar().removeClass("hide")},"{likes} onUnliked":function(a,c,d){a=b.likeContent().hasClass("hide");c=b.repostContent().hasClass("hide");a&&c&&b.counterBar().addClass("hide")}}});g.resolve()})});EasySocial.require().script("site/likes/likes","site/reports/reports","site/repost/repost","site/share/share","site/layout/dialog","site/layout/responsive","site/layout/elements","site/photos/photos","site/users/login","site/profile/popbox",
"site/privacy/privacy","site/locations/popbox","site/sidebar/sidebar","site/friends/api","site/conversations/api","site/followers/api").done();EasySocial.module("site/likes/likes",function(e){e(document).on("click.es.likes.action","[data-likes-action]",function(){var g=e(this),b={id:g.data("id"),type:g.data("type"),group:g.data("group")},a=b.type+"-"+b.group+"-"+b.id;EasySocial.ajax("site/controllers/likes/toggle",b).done(function(c,d,f,h,n){g.text(d);e("[data-likes-"+a+"]").html(c).toggleClass("hide",
f).toggle(!f);b.uid=b.id;b.count=n;g.trigger("like"==h?"onLiked":"onUnliked",[b])}).fail(function(a){console.log(a)})}).on("click.es.likes.others","[data-likes-others]",function(){var g=e(this),b=g.parents("[data-likes-content]"),g={uid:b.data("id"),type:b.data("type"),exclude:g.data("authors")};EasySocial.dialog({content:EasySocial.ajax("site/controllers/likes/showOthers",g)})});this.resolve()});EasySocial.module("site/reports/reports",function(e){e(document).on("click.es.reports.link","[data-reports-link]",
function(){var g=e(this),b={};e.each("url extension uid type object title description".split(" "),function(a,c){b[c]=g.data(c)});EasySocial.dialog({content:EasySocial.ajax("site/views/reports/confirmReport",{title:b.title,description:b.description}),selectors:{"{message}":"[data-reports-message]","{reportButton}":"[data-report-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{reportButton} click":function(){var a=this.message().val();EasySocial.dialog({content:EasySocial.ajax("site/controllers/reports/store",
{url:b.url,extension:b.extension,uid:b.uid,type:b.type,title:b.object,message:a})})},"{cancelButton} click":function(){EasySocial.dialog().close()}}})});this.resolve()});EasySocial.module("site/repost/repost",function(e){e(document).on("click.es.repost.action","[data-repost-action]",function(){var g=e(this),b={id:g.data("id"),element:g.data("element"),group:g.data("group")},a=b.element+"-"+b.group+"-"+b.id;EasySocial.dialog({content:EasySocial.ajax("site/views/repost/form",b),bindings:{"{sendButton} click":function(c){var d=
this.parent;c=e.trim(this.repostContent().val());b.content=c;d.loading(!0);EasySocial.ajax("site/controllers/repost/share",b).done(function(b,c,d,h){b=e.buildHTML(b);actionContent=e("[data-repost-"+a+"]").toggleClass("hide",c).toggle(!c);actionContent.find("span.repost-counter").html(b);g.trigger("create",[h])}).fail(function(a){d.clearMessage();d.setMessage(a)}).always(function(){d.loading(!1);d.close()})}}})});EasySocial.module("repost/authors",function(){this.resolve(function(e){e=e.button.parents("[data-repost-content]");
data={id:e.data("id"),element:e.data("element")};return{content:EasySocial.ajax("site/controllers/repost/getSharers",data),id:"es-wrap",type:"repost",position:"bottom-right"}})});this.resolve()});EasySocial.module("site/share/share",function(e){e(document).on("click.es.share.button","[data-es-share-button]",function(){var g=e(this);EasySocial.dialog({title:g.text(),content:EasySocial.ajax("site/views/sharing/shareDialog",{url:g.data("url"),title:g.data("title")})})});this.resolve()});EasySocial.module("site/layout/dialog",
function(e){var g=this;EasySocial.require().library("dialog").view("site/dialog/default").done(function(b){EasySocial.dialog=function(a,c){if(window.parentDialog)return window.parentDialog.update(a);if("string"===typeof a||b.isDeferred(a))a={content:a,afterShow:b.isFunction(c)?c:b.noop};var d=b("#es-wrap.es-dialog.global");1>d.length&&(d=b(EasySocial.View("site/dialog/default")).addClass("global").appendTo("body"));a=b.extend({showOverlay:!1},a);var e=d.controller("Dialog");e?e.update(a):e=d.addController("Dialog",
a);return e};g.resolve()})});EasySocial.module("site/layout/responsive",function(e){e(function(){e("#es-wrap.es-main").responsive([{at:1200,switchTo:"wide"},{at:960,switchTo:"wide w960"},{at:818,switchTo:"wide w960 w768"},{at:600,switchTo:"wide w960 w768 w600"},{at:560,switchTo:"wide w960 w768 w600 w480"},{at:480,switchTo:"wide w960 w768 w600 w480 w320"}])});this.resolve()});EasySocial.module("site/layout/elements",function(e){e(document).on("click.button.data-fd-api","[data-fd-toggle-value]",function(){var g=
e(this).parents('[data-foundry-toggle="buttons-radio"]');if(!g.hasClass("disabled")&&0<g.length){var b=e(this).data("fd-toggle-value");g.find("input[type=hidden]").val(b).trigger("change")}});e(document).on("mouseover.tooltip.data-es-api","[data-es-provide=tooltip]",function(){e(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div class="tooltip tooltip-es"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")});e(document).on("mouseover.popover.data-es-api",
"[data-es-provide=popover]",function(){e(this).popover({delay:{show:200,hide:100},animation:!1,trigger:"hover",container:"body"}).popover("show")});e(document).on("keyup","[data-date-form] [data-date-day]",function(){if(e.trim(e(this).val())){var g=parseInt(e(this).siblings("[data-date-year]").val()||e(this).siblings("[data-date-year]").data("dateDefault")),b=parseInt(e(this).siblings("[data-date-month]").val()||e(this).siblings("[data-date-month]").data("dateDefault")),a=parseInt(e(this).val()||
e(this).data("dateDefault")),c=/1|3|5|7|8|10|12/.test(b)?31:30;2==b&&(c=(g%400?g%100&&!(g%4):1)?29:28);1>a&&(a=1);a>c&&(a=c);e.isNumeric(a)?e(this).val(a):e(this).val("")}});e(document).on("keyup","[data-date-form] [data-date-year]",function(){if(e.trim(e(this).val())){var g=parseInt(e(this).val());1>g&&(g=1);e.isNumeric(g)?e(this).val(g):e(this).val("")}});this.resolve()});EasySocial.module("site/photos/photos",function(e){var g=this;EasySocial.require().script("photos").done(function(){EasySocial.photos=
e("body").addController("EasySocial.Controller.Photos");g.resolve()})});EasySocial.module("photos",function(e){var g=this;EasySocial.require().script("photos/viewer").done(function(){EasySocial.Controller("Photos",{defaultOptions:{view:{popup:"site/photos/popup",viewer:"site/photos/popup.viewer"},"{photo}":"[data-es-photo]","{popup}":"[data-photo-popup]","{viewer}":"[data-photo-viewer]","{closeButton}":"[data-popup-close-button]"},photo:{data:{},image:{},content:null,tags:[]}},function(b){return{init:function(){},
createAvatar:function(a,b){if(void 0!==a){b||(b={});var d={id:a};b.redirect&&(d.redirect=b.redirect,delete b.redirect);b.uid&&(d.uid=b.uid,delete b.uid);EasySocial.dialog(e.extend({content:EasySocial.ajax("site/views/photos/avatar",d)},b))}},selectPhoto:function(a){var b=e.Deferred(),d=EasySocial.ajax("site/views/albums/dialog"),f=EasySocial.require().script("albums/browser").done();EasySocial.dialog(e.extend({content:b},a));e.when(f,d).done(function(){d.done(function(a){b.resolve(a)})})},display:function(a,
c,d){a+="";var f=b.popup();b.viewer().remove();b.show();b.currentViewer=b.view.viewer().appendTo(f).addController("EasySocial.Controller.Photos.Viewer",e.extend({mode:"popup",initialPhoto:a,playlist:c},d))},albums:{},albumLoaders:{},getAlbum:function(a,c){a+="";var d=b.albumLoaders,e=d[a];if(c||!e||"failed"==e.state())e=d[a]=EasySocial.ajax("site/controllers/albums/getAlbum",{id:a}).done(function(c){b.albums[a]=c});return e.promise()},photos:{},photoLoaders:{},getPhoto:function(a,c){a+="";var d=b.photoLoaders,
f=d[a];if(c||!f||"failed"==f.state())f=d[a]=EasySocial.ajax("site/controllers/photos/getPhoto",{id:a,attr:["content","tags"]}).done(function(c){b.photos[a]=c;var d=c.content;c.content={};e.each(d,function(a,d){c.content[a]=e(e.trim(d)).appendTo(b.element).detach()})});return f.promise()},images:{},imageLoaders:{},getImage:function(a,c,d){a+="";var f=b.imageLoaders,f=f[a]||(f[a]={}),g=f[c];if(d||!g||"failed"==g.state())g=f[c]=e.Deferred(),b.getPhoto(a).done(function(d){e.Image.get(d.sizes[c].url).done(function(d){var e=
b.images;(e[a]||(e[a]={}))[c]=d;g.resolve(d)}).fail(g.reject)}).fail(g.reject);return g.promise()},show:function(){b.popupElement.appendTo("body").addClass("active").trigger("show")},hide:function(){b.popupElement.removeClass("active").trigger("hide").detach()},"{self} click":function(a,c){c.target===b.popup()[0]&&b.hide()},"{photo} click":function(a,c){var d=a.data("es-photo"),f=a.parents("[data-es-album]");if(0<f.length)return f=f.data("es-album"),b.display(d,f),c.preventDefault();f=a.parents("[data-es-photos]");
if(0<f.length){var g=f.data("es-photos");if(""!==g&&void 0!==g)return g=g.split(","),b.display(d,g),c.preventDefault();g=[];f.find("[data-es-photo]").each(function(a,b){g.push(e(this).data("es-photo"))});b.display(d,g);return c.preventDefault()}},"{closeButton} click":function(){b.hide()},like:function(a){return EasySocial.ajax("site/controllers/photos/like",{id:a})}}});g.resolve()})});EasySocial.module("photos/viewer",function(e){var g=this;EasySocial.require().script("photos/tagger","photos/avatar");
EasySocial.require().library("image","tinyscrollbar").done(function(){EasySocial.Controller("Photos.Viewer",{defaultOptions:{view:{},"{title}":"[data-photo-title]","{caption}":"[data-photo-caption]","{date}":"[data-photo-date]","{viewport}":"[data-photo-viewport]","{image}":"[data-photo-image]","{photoItem}":"[data-photo-item]","{nextButton}":"[data-photo-next-button]","{prevButton}":"[data-photo-prev-button]","{thumbnailsHolder}":"[data-photo-thumbnails-holder]","{contentHolder}":"[data-photo-content-holder]",
"{content}":"[data-photo-content]","{contentViewport}":"[data-photo-content-viewport]","{comments}":"[data-comments]","{commentInput}":"[data-comments-form-input]","{likeButton}":"[data-photo-like-button]","{commentButton}":"[data-photo-comment-button]","{likesHolder}":"[data-photo-likes-holder]","{commentsHolder}":"[data-photo-comments-holder]",size:"large",throttle:250,mode:"inline"}},function(b){return{init:function(){"inline"==b.options.mode&&(b.initial=!0);b.update();EasySocial.module("photos/tagger").done(function(){b.tagger=
b.addPlugin("tagger",EasySocial.Controller.Photos.Tagger)});EasySocial.module("photos/avatar").done(function(){b.avatar=b.addPlugin("avatar",EasySocial.Controller.Photos.Avatar)})},update:function(){var a=b.playlist=b.options.playlist,c=b.options.initialPhoto;e.isArray(a)?(a=e._.indexOf(a,c),0>a&&(a=0),b.displayItem(a)):(EasySocial.photos.getAlbum(a).done(function(a){b.options.playlist=e.map(a.photos,function(a){return a.id+""});b.update()}),EasySocial.ajax("site/views/photos/thumbnails",{albumId:a}).done(function(a){b.thumbnailsHolder().html(a)}))},
"{window} resize":e._.debounce(function(){b.setLayout()},100),setLayout:function(){b.setContentLayout();b.setImageLayout()},setImageLayout:function(){var a=b.viewport(),c=b.image();c.css(e.Image.resizeWithin(c.data("width"),c.data("height"),a.width(),a.height()))},setContentLayout:function(){"popup"===b.options.mode&&(b.contentViewport().height(b.content().height()),b.content().tinyscrollbar_update())},getPhoto:function(a){return EasySocial.photos.photos[b.playlist[a]]},getImage:function(a){return(EasySocial.photos.images[b.playlist[a]]||
{})[b.options.size]},currentItem:0,currentId:null,gotoItem:function(a){var c=b.playlist.length-1;a=b.currentItem+a;0>a&&(a=c);a>c&&(a=0);return a},displayItem:e._.debounce(function(a){b.currentItem=a;b.currentId=b.playlist[a];b.trigger("displayItem",[a])},25),"{self} displayItem":function(a,c,d){b.viewport().addClass("loading");b.renderContent(d);b.renderImage(d)},renderContent:function(a){if(!b.initial){b.content().detach();var c=b.getPhoto(a),d=b.playlist[a];if(c){var e=b.options.mode;b.contentHolder().append(c.content[e]);
"popup"==e&&b.content().tinyscrollbar();b.setContentLayout();b.trigger("renderContent",[a])}else setTimeout(function(){b.currentId===d&&EasySocial.photos.getPhoto(d).done(function(c){b.renderContent(a)}).fail(function(){})},b.options.throttle)}},renderImage:function(a){b.image().detach();var c=b.getPhoto(a),d=b.playlist[a],e=b.getImage(a),g=b.options.size,h=b.viewport();e?(e.addClass("es-photo-image").removeClass("active").attr("data-photo-image","").prependTo(h),b.initial&&e.removeClass("initial"),
b.setImageLayout(),h.removeClass("loading"),setTimeout(function(){e.addClass("active").removeClass("initial");b.trigger("renderImage",[a,c,e]);b.reset()},1)):setTimeout(function(){b.currentId===d&&EasySocial.photos.getImage(d,g).done(function(c){c.addClass("initial");b.renderImage(a)}).fail(function(){}).always(function(){h.removeClass("loading")})},b.options.throttle)},reset:function(){b.viewport().removeAttr("style").removeClass("no-transition");b.initial=!1},"{nextButton} click":function(){b.reset();
b.displayItem(b.gotoItem(1))},"{prevButton} click":function(){b.reset();b.displayItem(b.gotoItem(-1))},"{comments} newCommentSaved":function(){"popup"===b.options.mode&&b.content().tinyscrollbar_update("bottom")},"{comments} commentDeleted":function(){"popup"===b.options.mode&&b.content().tinyscrollbar_update()},"{comments} oldCommentsLoaded":function(){"popup"===b.options.mode&&b.content().tinyscrollbar_update()},"{commentButton} click":function(){"popup"==b.options.mode&&b.content().tinyscrollbar_update("bottom");
b.commentInput().focus()},"{likeButton} click":function(){EasySocial.photos.like(b.currentId).done(function(a){b.likeButton().toggleClass("liked",a.state);b.likesHolder().html(a.html)})}}});g.resolve()})});EasySocial.module("site/users/login",function(e){var g=this;EasySocial.require().library("dialog").done(function(){EasySocial.login=function(){EasySocial.dialog({content:EasySocial.ajax("site/views/login/form",{})})};g.resolve()})});EasySocial.module("site/profile/popbox",function(e){EasySocial.require().library("popbox").done(function(){EasySocial.module("profile/popbox",
function(e){this.resolve(function(b){var a=b.button.data("userId");b=b.button.attr("data-popbox-position")||"top-left";return{content:EasySocial.ajax("site/views/profile/popbox",{id:a}),id:"es-wrap",type:"profile",position:b}})})});EasySocial.require().script("site/conversations/composer").done();EasySocial.Controller("Profile.Popbox",{defaultOptions:{id:null,"{addButton}":"[data-popbox-friends-add]","{friendsButton}":"[data-popbox-friends-friends]","{respondButton}":"[data-popbox-friends-respond]",
"{requestedButton}":"[data-popbox-friends-requested]","{messageButton}":"[data-popbox-message]","{friendsSubmenu}":"[data-friends-submenu]","{cancelFriend}":"[data-popbox-friends-friends-cancel]","{cancelFriendRequest}":"[data-popbox-friends-requested-cancel]","{approveFriend}":"[data-popbox-friends-respond-approve]","{rejectFriend}":"[data-popbox-friends-respond-reject]"}},function(g){return{init:function(){g.options.id=g.element.find("[data-user-id]").data("userId");EasySocial.module("site/conversations/composer").done(function(){g.messageButton().implement(EasySocial.Controller.Conversations.Composer.Dialog,
{recipient:{id:g.options.id}})})},"{self} popboxActivate":function(){g.friendsSubmenu().parent().removeClass("open")},"{addButton} click":function(){EasySocial.ajax("site/controllers/friends/request",{id:g.options.id}).done(function(){EasySocial.ajax("site/views/profile/getButton",{button:"button.requested",id:g.options.id}).done(function(b){g.addButton().replaceWith(b)})})},"{cancelFriend} click":function(b,a){var c=e(b).data("friendid");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmRemoveFriend",
{id:g.options.id}),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:c}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/friendRemoved",{id:g.options.id})});EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){g.friendsSubmenu().remove();g.friendsButton().replaceWith(a)})})}}})},"{cancelFriendRequest} click":function(b,a){var c=e(b).data("friendid");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmCancelRequest",
{id:c}),bindings:{"{confirmButton} click":function(){EasySocial.dialog().close();EasySocial.ajax("site/controllers/friends/cancelRequest",{id:c}).done(function(){EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){g.friendsSubmenu().remove();g.requestedButton().replaceWith(a)})})}}})},"{approveFriend} click":function(b,a){var c=e(b).data("friendid");EasySocial.ajax("site/controllers/friends/approve",{id:c}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmFriends",
{id:g.options.id})});EasySocial.ajax("site/views/profile/getButton",{button:"button.friends"}).done(function(a){g.friendsSubmenu().remove();g.respondButton().replaceWith(a)})})},"{rejectFriend} click":function(b,a){var c=e(b).data("friendid");EasySocial.ajax("site/controllers/friends/reject",{id:c}).done(function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/rejected",{id:g.options.id})});EasySocial.ajax("site/views/profile/getButton",{button:"button.add"}).done(function(a){g.friendsSubmenu().remove();
g.respondButton().replaceWith(a)})})}}});e(document).on("mouseover.es.profile.popbox","[data-popbox-tooltip=profile]",function(){e(this).addController("EasySocial.Controller.Profile.Popbox")});this.resolve()});EasySocial.module("site/conversations/composer",function(e){var g=this;EasySocial.require().library("expanding").script("site/friends/suggest","uploader/uploader","location").language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS","COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE").done(function(b){EasySocial.Controller("Conversations.Composer",
{defaultOptions:{attachments:!0,location:!0,extensionsAllowed:"","{uploader}":"[data-composer-attachment]","{location}":"[data-composer-location]","{editor}":"[data-composer-editor]","{friendSuggest}":"[data-friends-suggest]","{recipients}":"input[name=uid\\[\\]]","{recipientRow}":"[data-composer-recipients]","{messageRow}":"[data-composer-message]","{submit}":"[data-composer-submit]"}},function(a){return{init:function(){a.initSuggest();a.initEditor();a.options.attachments&&a.initUploader();a.options.location&&
a.initLocation()},initLocation:function(){a.location().implement(EasySocial.Controller.Location.Form)},resetForm:function(){a.editor().val("")},initUploader:function(){a.uploader().implement(EasySocial.Controller.Uploader,{temporaryUpload:!0,query:"type=conversations",type:"conversations",extensionsAllowed:a.options.extensionsAllowed});"development"==EasySocial.environment&&(console.log("Extensions Allowed: "+a.options.extensionsAllowed),console.log("Maximum individual file size: "+a.options.maxSize))},
initSuggest:function(){a.friendSuggest().addController(EasySocial.Controller.Friends.Suggest)},initEditor:function(){a.editor().expandingTextarea()},checkErrors:function(){if(0>=a.recipients().length)return a.recipientRow().addClass("error"),a.clearMessage(),a.setMessage(b.language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_RECIPIENTS"),"error"),!0;a.recipientRow().removeClass("error");if(""==a.editor().val())return a.messageRow().addClass("error"),a.clearMessage(),a.setMessage(b.language("COM_EASYSOCIAL_CONVERSATIONS_ERROR_EMPTY_MESSAGE"),
"error"),!0;a.messageRow().removeClass("error");return!1},"{submit} click":function(b,d){d.preventDefault();if(a.checkErrors())return!1;if(a.options.attachments){var e=a.uploader().controller();if(e.options.uploading&&e.hasFiles())return!1}a.element.submit()}}});EasySocial.Controller("Conversations.Composer.Dialog",{defaultOptions:{recipient:{}}},function(a){return{init:function(){},"{self} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/composer",{id:a.options.recipient.id}),
bindings:{"{sendButton} click":function(){var c=b("[data-composer-recipient]").val(),d=b("[data-composer-message]").val();EasySocial.ajax("site/controllers/conversations/store",{uid:c,message:d}).done(function(b){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sent",{id:a.options.recipient.id}),bindings:{"{viewButton} click":function(){document.location=b}}})}).fail(function(b){a.setMessage(b)})}}})}}});g.resolve()})});EasySocial.module("site/friends/suggest",function(e){var g=
this;EasySocial.require().view("site/friends/suggest.item").library("textboxlist").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT").done(function(b){EasySocial.Controller("Friends.Suggest.User",{defaultOptions:{"{addButton}":"[data-friend-suggest-add]","{button}":"[data-friend-suggest-button]"}},function(a){return{init:function(){},"{addButton} click":function(c){EasySocial.ajax("site/controllers/friends/request",{id:a.element.data("uid")}).done(function(c){a.button().html(b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT"))}).fail(function(b){a.button().html(b)})}}});
EasySocial.Controller("Friends.Suggest",{defaultOptions:{max:null,exclusive:!0,exclusion:[],minLength:1,highlight:!0,name:"uid[]",view:{suggestItem:"site/friends/suggest.item"}}},function(a){return{init:function(){var b=a.options;a.element.textboxlist({name:b.name,max:b.max,plugin:{autocomplete:{exclusive:b.exclusive,minLength:b.minLength,highlight:b.highlight,showLoadingHint:!0,showEmptyHint:!0,query:function(a){return EasySocial.ajax("site/controllers/friends/suggest",{search:a})}}}}).textboxlist("enable")},
"{self} filterItem":function(b,d,e){b=a.view.suggestItem(!0,{item:e,name:a.options.name});e.title=e.screenName;e.menuHtml=b;e.html=b;return e},"{self} filterMenu":function(c,d,e,g,h,p){c=p.getAddedItems();var s=b.pluck(c,"id"),s=s.concat(a.options.exclusion);g.each(function(){var a=b(this),c=a.data("item");a.toggleClass("hidden",-1<b.inArray(c.id.toString(),s))})}}});g.resolve()})});EasySocial.module("location",function(e){var g=this;EasySocial.require().library("ui/autocomplete").view("site/location/delete.confirmation").done(function(){EasySocial.Controller("Location.Form",
{defaultOptions:{language:"en",initialLocation:null,mapType:"ROADMAP",staticMap:"https://www.google.com/maps?q=",showTip:!0,"{locationInput}":"[data-locationForm-input]","{locationCoordinates}":"[data-locationForm-coordinates]","{locationLatitude}":"[data-locationForm-latitude]","{locationLongitude}":"[data-locationForm-longitude]","{latitudeDisplay}":"[data-locationForm-latitudeDisplay]","{longitudeDisplay}":"[data-locationForm-longitudeDisplay]","{locationMap}":"[data-locationForm-map]","{locationMapWrapper}":".locationMapWrapper",
"{viewStaticMap}":".viewStaticMap","{editGeographic}":"[data-locationForm-edit]","{updateGeographic}":"[data-locationForm-update]","{cancelUpdateGeographic}":"[data-locationForm-cancel]","{searchButton}":"[data-locationForm-searchAddress]","{autoDetectButton}":"[data-locationForm-autodetect]","{clearLocation}":"[data-locationForm-clear]"}},function(b){return{init:function(){var a=e.uid("ext");window[a]=function(){e.___GoogleMaps.resolve()};e.___GoogleMaps||(e.___GoogleMaps=e.Deferred(),EasySocial.require().script({prefetch:!1},
"http://maps.googleapis.com/maps/api/js?sensor=true&language="+b.options.language+"&callback="+a));e.___GoogleMaps.done(function(){b._init()})},_init:function(){b.geocoder=new google.maps.Geocoder;b.hasGeolocation=void 0!==navigator.geolocation;b.hasGeolocation?b.autoDetectButton().show():b.autoDetectButton().remove();b.locationInput().autocomplete({delay:300,minLength:0,source:b.retrieveSuggestions,select:function(a,d){b.locationInput().autocomplete("close");b.setLocation(d.item.location)}}).prop("disabled",
!1);b.autocomplete=b.locationInput().autocomplete("widget");b.autocomplete.addClass("location-suggestion");var a=e.trim(b.options.initialLocation);a&&b.getLocationByAddress(a,function(a){b.setLocation(a[0])});b.busy(!1)},busy:function(a){b.locationInput().toggleClass("loading",a)},getUserLocations:function(a){b.getLocationAutomatically(function(c){b.userLocations=b.buildDataset(c);a&&a(c)})},getLocationByAddress:function(a,c){b.geocoder.geocode({address:a},c)},getLocationByCoords:function(a,c,d){b.geocoder.geocode({location:new google.maps.LatLng(a,
c)},d)},getLocationAutomatically:function(a,c){if(!navigator.geolocation)return c("ERRCODE","Browser does not support geolocation or do not have permission to retrieve location data.");navigator.geolocation.getCurrentPosition(function(c){b.getLocationByCoords(c.coords.latitude,c.coords.longitude,a)},c)},renderMap:function(a,c){b.busy(!0);b.locationMapWrapper().show();var d=new google.maps.Map(b.locationMap()[0],{zoom:15,center:a.geometry.location,mapTypeId:google.maps.MapTypeId[b.options.mapType],
disableDefaultUI:!0}),e=new google.maps.Marker({draggable:!0,position:a.geometry.location,center:a.geometry.location,title:a.formatted_address,map:d});if(b.showTip){var g=new google.maps.InfoWindow({content:c});google.maps.event.addListener(d,"tilesloaded",function(){g.open(d,e);b.busy(!1)})}google.maps.event.addListener(e,"dragend",function(a){b.getLocationByCoords(this.getPosition().lat(),this.getPosition().lng(),function(a){b.userLocations=b.buildDataset(a);b.suggestUserLocations()});b.locationLatitude().val(this.getPosition().lat());
b.locationLongitude().val(this.getPosition().lng());b.latitudeDisplay().html(this.getPosition().lat());b.longitudeDisplay().html(this.getPosition().lng())})},setLocation:function(a){a&&(b.locationResolved=!0,b.lastResolvedLocation=a,b.locationInput().val(a.formatted_address),b.locationLatitude().val(a.geometry.location.lat()),b.locationLongitude().val(a.geometry.location.lng()),b.latitudeDisplay().html(a.geometry.location.lat()),b.longitudeDisplay().html(a.geometry.location.lng()),b.renderMap(a,a.formatted_address),
b.trigger("locationSelected",[a]))},removeLocation:function(){b.locationResolved=!1;b.locationInput().val("");b.locationLatitude().val("");b.locationLongitude().val("");b.latitudeDisplay().html("");b.longitudeDisplay().html("");b.locationMapWrapper().hide();b.locationCoordinates().hide()},buildDataset:function(a){return e.map(a,function(a){return{label:a.formatted_address,value:a.formatted_address,location:a}})},retrieveSuggestions:function(a,c){b.busy(!0);var d=a.term,e=function(a){c(a);b.busy(!1)};
""==d?e(b.userLocations||[]):b.getLocationByAddress(d,function(a){e(b.buildDataset(a))})},suggestUserLocations:function(){b.hasGeolocation&&b.userLocations&&b.locationInput().autocomplete("search","");b.busy(!1)},"{locationInput} blur":function(){setTimeout(function(){var a=e.trim(b.locationInput().val());""==a?b.removeLocation():b.locationResolved?a!=b.lastResolvedLocation.formatted_address&&b.setLocation(b.lastResolvedLocation):b.removeLocation()},250)},"{self} locationSelected":function(a,c,d){b.locationCoordinates().show();
b.options.onLocationSelected&&b.options.onLocationSelected(d);b.viewStaticMap().attr("href",b.options.staticMap+encodeURIComponent(d.formatted_address))},"{cancelUpdateGeographic} click":function(){b.editGeographic().click()},"{editGeographic} click":function(){b.locationCoordinates().toggleClass("editMode")},"{updateGeographic} click":function(){b.editGeographic().click()},"{clearLocation} click":function(){b.removeLocation()},"{autoDetectButton} click":function(){b.busy(!0);b.hasGeolocation&&!b.userLocations?
b.getUserLocations(b.suggestUserLocations):b.suggestUserLocations()}}});EasySocial.Controller("Location.Map",{defaultOptions:{animation:"drop",language:"en",useStaticMap:!1,disableMapsUI:!0,showTip:!0,zoom:5,fitBounds:null,minZoom:null,maxZoom:null,center:null,locations:[],mapType:"ROADMAP",width:500,height:400,"{locationMap}":".locationMap","{locationMapWrapper}":".locationMapWrapper","{removeUserLocation}":".removeUserLocation",view:{deleteConfirmation:"site/location/delete.confirmation"}}},function(b){return{init:function(){b.mapLoaded=
!1;var a=e.uid("ext");window[a]=function(){e.___GoogleMaps.resolve()};if(!0==b.options.useStaticMap){var c="&language="+String(b.options.language),d="&size="+String(b.options.width)+"x"+String(b.options.height),a="&zoom="+String(b.options.zoom),f="&center="+String(parseFloat(b.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(b.options.locations[0].longitude).toFixed(6)),g="&maptype="+google.maps.MapTypeId[b.options.mapType],h="&markers=",c="http://maps.googleapis.com/maps/api/staticmap?sensor=false"+
c+d;if(1==b.options.locations.length)h+=String(parseFloat(b.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(b.options.locations[0].longitude).toFixed(6)),c+=a+f+g+h;else{var p=[];e.each(b.options.locations,function(a,b){p.push(String(parseFloat(b.latitude).toFixed(6))+","+String(parseFloat(b.longitude).toFixed(6)))});h+=p.join("|");c+=h+g}b.locationMap().html('<img src="'+c+'" />');b.locationMapWrapper().show();b.busy(!1)}else a=e.uid("ext"),window[a]=function(){e.___GoogleMaps.resolve()},
e.___GoogleMaps||(e.___GoogleMaps=e.Deferred(),EasySocial.require().script({prefetch:!1},"http://maps.googleapis.com/maps/api/js?sensor=true&language="+b.options.language+"&callback="+a)),e.___GoogleMaps.done(function(){b._init()})},_init:function(){null===b.options.fitBounds&&(b.options.fitBounds=1==b.options.locations.length?!1:!0);b.options.disableMapsUI=Boolean(b.options.disableMapsUI);b.locations=[];e.each(b.options.locations,function(a,c){"null"!=c.latitude&&"null"!=c.longitude&&b.locations.push(new google.maps.LatLng(c.latitude,
c.longitude))});0<b.locations.length&&b.renderMap();b.busy(!1)},busy:function(a){b.locationMap().toggleClass("loading",a)},renderMap:function(){b.busy(!0);b.locationMapWrapper().show();var a;a=b.options.center?new google.maps.LatLng(center.latitude,center.longitude):b.locations[0];b.map=new google.maps.Map(b.locationMap()[0],{zoom:parseInt(b.options.zoom),minZoom:parseInt(b.options.minZoom),maxZoom:parseInt(b.options.maxZoom),center:a,mapTypeId:google.maps.MapTypeId[b.options.mapType],disableDefaultUI:b.options.disableMapsUI});
google.maps.event.addListener(b.map,"tilesloaded",function(){!1==b.mapLoaded&&(b.mapLoaded=!0,b.loadLocations())})},loadLocations:function(){b.bounds=new google.maps.LatLngBounds;b.infoWindow=[];setTimeout(function(){e.each(b.locations,function(a,c){b.bounds.extend(c);setTimeout(function(){b.addMarker(c,b.options.locations[a])},100*(a+1))});b.options.fitBounds&&b.map.fitBounds(b.bounds)},500)},addMarker:function(a,c){if(a){var d=new google.maps.Marker({position:a,map:b.map});d.setAnimation(google.maps.Animation.DROP);
b.addInfoWindow(d,c)}},addInfoWindow:function(a,c){if(b.showTip){var d=c.content;d||(d=c.address);var f=new google.maps.InfoWindow;f.setContent(d);b.infoWindow.push(f);1<b.options.locations.length?google.maps.event.addListener(a,"click",function(){e.each(b.infoWindow,function(a,b){b.close()});f.open(b.map,a)}):(google.maps.event.addListener(a,"click",function(){f.open(b.map,a)}),f.open(b.map,a))}},"{removeUserLocation} click":function(){var a=b.element.data("id");content=b.view.deleteConfirmation({});
e.dialog({content:content,buttons:[{name:e.language("COM_EASYSOCIAL_YES_BUTTON"),click:function(){EasySocial.ajax("site/controllers/location/delete",{id:a},function(){e.dialog().close();b.element.remove()})}},{name:e.language("COM_EASYSOCIAL_CANCEL_BUTTON"),click:function(){e.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("site/privacy/privacy",function(e){var g=this;EasySocial.require().library("textboxlist").language("COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_PUBLIC","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_MEMBER",
"COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIENDS_OF_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_FRIEND","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_ONLY_ME","COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_CUSTOM").done(function(b){EasySocial.Controller("Privacy",{defaultOptions:{"{menu}":"[data-privacy-menu]","{item}":"[data-privacy-item]","{icon}":"[data-privacy-icon]","{button}":"[data-privacy-toggle]","{tooltip}":"[data-original-title]","{key}":"[data-privacy-hidden]"}},function(a){return{init:function(){a.instanceId=
b.uid();a.addPlugin("custom")},getData:function(a){return b._.pick(a.data(),"uid","utype","value","pid","icon")},"{self} click":function(c,d){var e=b(d.target),g=a.button();0<e.parents().andSelf().filter(g).length&&a.toggle()},"{item} click":function(b){b=a.getData(b);a.trigger("privacyChange",[b]);b.preventSave||(a.save(b),a.deactivate())},"{self} privacyChange":function(b,d,e){a.item().removeClass("active").filter("[data-value="+e.value+"]").addClass("active")},toggle:function(){var b=a.element.hasClass("active");
a[b?"deactivate":"activate"]()},activate:function(){a.element.addClass("active");a.trigger("activate",[a]);b(window).trigger("activatePrivacy",[a]);var c="click.privacy."+a.instanceId;b(document).on(c,function(d){d=b(d.target);0<d.parents().andSelf().filter(a.element).length||0<d.parents("[data-textboxlist-autocomplete]").length||0<d.parents("[data-textboxlist-item]").length||(b(document).off(c),a.deactivate())})},deactivate:function(){a.element.removeClass("active");a.trigger("deactivate",[a]);b(window).trigger("deactivatePrivacy",
[a])},"{window} activatePrivacy":function(b,d,e){e!==a&&a.deactivate()},save:function(c){a.key().val(c.value);a.icon().attr("class",c.icon);a.trigger("privacySave",[c]);a.element.attr("data-original-title",b.language("COM_EASYSOCIAL_PRIVACY_TOOLTIPS_SHARED_WITH_"+c.value.toUpperCase()));"ajax"==a.element.data("privacyMode")&&EasySocial.ajax("site/controllers/privacy/update",{uid:c.uid,utype:c.utype,value:c.value,pid:c.pid,custom:c.custom}).done(function(){}).fail(function(){})}}});EasySocial.Controller("Privacy.Custom",
{defaultOptions:{"{textField}":"[data-textfield]","{saveButton}":"[data-save-button]","{cancelButton}":"[data-cancel-button]","{customItem}":"[data-privacy-item][data-value=custom]","{customKey}":"[data-privacy-custom-hidden]"}},function(a){return{init:function(){a.textField().textboxlist({unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:1,cache:!1,query:function(b){var d=a.getIds();return EasySocial.ajax("site/views/privacy/getfriends",{q:b,exclude:d})}}}});a.textboxlist=a.textField().controller("TextboxList")},
getIds:function(){var c=a.textField().textboxlist("controller").getAddedItems();return b.map(c,function(a,b){return a.id})},updateIds:function(){var b=a.getIds();a.customKey().val(b.join(","))},"{parent} privacyChange":function(b,d,e){b="custom"==e.value;a.element.toggleClass("custom-privacy",b);b?e.preventSave=!0:a.textField().textboxlist("controller").clearItems()},"{parent} privacySave":function(a,b,e){},"{parent} deactivate":function(){a.textboxlist.autocomplete.hide()},"{cancelButton} click":function(){a.element.removeClass("custom-privacy");
a.textboxlist.autocomplete.hide()},"{saveButton} click":function(){var b=a.parent,d=a.customItem(),b=b.getData(d);b.custom=a.customKey().val();a.parent.save(b);a.parent.deactivate()},"{textField} addItem":function(){a.updateIds()},"{textField} removeItem":function(){a.updateIds()}}});b(document).on("click.es.privacy","[data-es-privacy-container]",function(){var a=b(this);a.hasController("EasySocial.Controller.Privacy")||a.addController("EasySocial.Controller.Privacy").toggle()});g.resolve()})});EasySocial.module("site/locations/popbox",
function(e){EasySocial.module("locations/popbox",function(e){this.resolve(function(b){var a=b.button;b=a.data("lat");a=a.data("lng");return{id:"es-wrap",type:"location",position:"bottom",content:'<img src="'+("//maps.googleapis.com/maps/api/staticmap?size=400x200&sensor=true&zoom=15&center="+b+","+a+"&markers="+b+","+a)+'" width="400" height="200" />'}})});this.resolve()});EasySocial.module("site/sidebar/sidebar",function(e){e(function(){e("[data-sidebar-toggle]").on("click",function(){var g=e("[data-sidebar]");
g.toggleClass("sidebar-open");g.trigger("sidebarToggle")})});this.resolve()});EasySocial.module("locations",function(e){var g=this;EasySocial.require().library("gmaps").done();EasySocial.require().library("scrollTo").view("apps/user/locations/suggestion").language("COM_EASYSOCIAL_AT_LOCATION").done(function(){EasySocial.Controller("Locations",{defaultOptions:{view:{suggestion:"apps/user/locations/suggestion"},map:{lat:0,lng:0},"{textField}":"[data-location-textField]","{detectLocationButton}":"[data-detect-location-button]",
"{suggestions}":"[data-location-suggestions]","{suggestion}":"[data-story-location-suggestion]","{mapPreview}":"[data-location-map]","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]"}},function(b){return{init:function(){navigator.geolocation&&b.detectLocationButton().show();EasySocial.require().library("gmaps").done(function(){b.textField().removeAttr("disabled")})},navigate:function(a,c){var d=b.mapPreview(),e=b.map;void 0===e&&(e=b.map=d.show().gmaps(b.options.map));e.setCenter(a,
c);e.removeMarkers();e.addMarker({lat:a,lng:c})},locations:{},lastQueryAddress:null,"{textField} keypress":function(a,c){switch(c.keyCode){case 38:var d=e(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);b.suggestion().removeClass("active");d.addClass("active").trigger("activate");b.suggestions().scrollTo(d,{offset:-1*d.height()});c.preventDefault();break;case 40:d=e(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active");
d.addClass("active").trigger("activate");b.suggestions().scrollTo(d,{offset:-1*d.height()});c.preventDefault();break;case 13:d=b.suggestion(".active").data("location"),b.set(d),b.suggestions().hide()}},"{textField} keyup":function(a,c){switch(c.keyCode){case 38:case 40:case 13:case 27:break;default:var d=e.trim(a.val());""===d&&b.suggestions().hide();if(d==b.lastQueryAddress)break;var f=b.locations[d];f?(b.suggest(f),b.lastQueryAddress=d):b.lookup(d)}},lookup:e._.debounce(function(a){e.GMaps.geocode({address:a,
callback:function(c,d){"OK"==d&&(b.locations[a]=c,b.suggest(c),b.lastQueryAddress=a)}})},250),suggest:function(a){var c=b.suggestions();c.hide().empty();e.each(a,function(a,e){b.view.suggestion({location:e}).data("location",e).appendTo(c)});c.show()},"{suggestion} activate":function(a,c){var d=a.data("location");b.navigate(d.geometry.location.lat(),d.geometry.location.lng())},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active");a.addClass("active").trigger("activate")},"{suggestion} click":function(a,
c){var d=a.data("location");b.set(d);b.suggestions().hide()},set:function(a){b.currentLocation=a;var c=a.formatted_address;b.textField().val(c);b.latitude().val(a.geometry.location.lat());b.longitude().val(a.geometry.location.lng());b.trigger("locationChange",[a])},"{detectLocationButton} click":function(){e.GMaps.geolocate({success:function(a){e.GMaps.geocode({lat:a.coords.latitude,lng:a.coords.longitude,callback:function(a,d){"OK"==d&&(b.suggest(a),b.textField().focus())}})},error:function(a){},
always:function(){}})},"{story} save":function(a,c,d){(a=b.currentLocation)&&d.addData(b,{short_address:a.address_components[0].long_name,formatted_address:a.formatted_address,lat:a.geometry.location.lat(),lng:a.geometry.location.lng()})},"{story} clear":function(){b.unset()}}});g.resolve()})});EasySocial.module("oauth/facebook",function(e){var g=this;EasySocial.require().done(function(){EasySocial.Controller("OAuth.Facebook",{defaultOptions:{"{login}":"[data-oauth-facebook-login]","{revoke}":"[data-oauth-facebook-revoke]",
"{pushInput}":"[data-oauth-facebook-push]"}},function(b){return{init:function(){},openDialog:function(a){window.open(a,"","scrollbars=no,resizable=no,width=300,height=300,left="+(screen.width/2-150)+",top="+(screen.height/2-150))},"{pushInput} change":function(a){a=e(a).val();1==a&&b.options.requestPush&&b.openDialog(b.options.addPublishURL);0==a&&b.openDialog(b.options.revokePublishURL)},"{login} click":function(){b.openDialog(b.options.url)},"{revoke} click":function(){var a=b.element.data("callback");
EasySocial.dialog({content:EasySocial.ajax("site/views/oauth/confirmRevoke",{client:"facebook",callbackUrl:a})})}}});g.resolve()})});EasySocial.module("pagination",function(){var e=this;EasySocial.require().done(function(g){EasySocial.Controller("Pagination",{defaultOptions:{"{pages}":".pageItem","{limitstart}":"#limitstart","{previousItem}":".previousItem","{nextItem}":".nextItem"}},function(b){return{init:function(){b.pages().implement(EasySocial.Controller.Pagination.Page,{pagination:b})},"{previousItem} click":function(a){var c=
g(a).data("limitstart");g(a).hasClass("disabled")||b.submitForm(c)},"{nextItem} click":function(a){var c=g(a).data("limitstart");g(a).hasClass("disabled")||b.submitForm(c)},submitForm:function(a){b.limitstart().val(a);Joomla.submitform()}}});EasySocial.Controller("Pagination.Page",{defaultOptions:{pagination:null,limitstart:0}},function(b){return{init:function(){b.options.limitstart=b.element.data("limitstart")},"{self} click":function(){if(b.element.hasClass("active"))return!1;b.options.pagination.submitForm(b.options.limitstart)}}});
e.resolve()})});EasySocial.module("photos/avatar",function(e){var g=this;EasySocial.require().library("imgareaselect").stylesheet("imgareaselect/default").done(function(){EasySocial.Controller("Photos.Avatar",{defaultOptions:{view:{selection:"site/photos/avatar.selection"},redirect:!0,"{image}":"[data-photo-image]","{viewport}":"[data-photo-avatar-viewport]","{photoId}":"[data-photo-id]","{userId}":"[data-user-id]","{createButton}":"[data-create-button]","{selection}":"[data-selection-box]","{loadingIndicator}":"[data-photos-avatar-loading]"}},
function(b){return{init:function(){b.setLayout()},data:function(){var a=b.viewport(),c=a.width(),d=a.height(),a=a.imgAreaSelect({instance:!0}).getSelection();return{id:b.photoId().val(),uid:b.userId().val(),top:a.y1/d,left:a.x1/c,width:a.width/c,height:a.height/d}},imageLoaders:{},setLayout:function(){var a=b.image(),c=e.uri(a.css("backgroundImage")).extract(0);(b.imageLoaders[c]||(b.imageLoaders[c]=e.Image.get(c))).done(function(c,f){var g=e.Image.resizeWithin(f.width,f.height,a.width(),a.height()),
h=Math.min(g.width,g.height),p=Math.floor((g.width-h)/2),s=Math.floor((g.height-h)/2),q=p+h,h=s+h;b.viewport().css(g).imgAreaSelect({handles:!0,aspectRatio:"1:1",parent:b.image(),x1:p,y1:s,x2:q,y2:h,onSelectEnd:function(a,c){var d=!("0"==c.width&&"0"==c.height);b.createButton().enabled(d)}})})},"{createButton} click":function(a){a=b.data();var c=EasySocial.ajax("site/controllers/photos/createAvatar",a).done(function(a,c,e){b.options.redirect&&(window.location=e)}).fail(function(a,c){b.setMessage(a,
c)});b.trigger("avatarCreate",[c,a,b])}}});g.resolve()})});EasySocial.module("photos/browser",function(e){var g=this;EasySocial.require().library("masonry").done();EasySocial.require().library("history").done(function(){EasySocial.Controller("Photos.Browser",{defaultOptions:{tilesPerRow:4,"{sidebar}":"[data-photo-browser-sidebar]","{content}":"[data-photo-browser-content]","{backButton}":"[data-photo-back-button]","{backButtonLink}":"[data-photo-back-button-link]","{listItemGroup}":"[data-photo-list-item-group]",
"{listItem}":"[data-photo-list-item]","{listItemLink}":"[data-photo-list-item] > a","{listItemTitle}":"[data-photo-list-item-title]","{listItemCover}":"[data-photo-list-item-cover]","{listItemImage}":"[data-photo-list-item-image]","{featuredListItem}":"[data-photo-list-item].featured","{featuredListItemImage}":"[data-photo-list-item].featured [data-photo-list-item-image]","{photoItem}":"[data-photo-item]"}},function(b){return{init:function(){e.module("masonry").done(function(){b.setLayout()})},setLayout:function(){var a=
b.listItemGroup().addClass("masonry"),c=b.setLayout.seed==a.width();hasPhotoItem=0<b.listItem().length;masonry=a.data("masonry");if(c)masonry&&masonry.reload();else{var a=b.listItemGroup(),d=b.listItem(),c=b.options.tilesPerRow,e=a.width(),c=Math.floor(e/c)*c/c,g=d.outerWidth(!0)-d.width(),h=d.outerHeight(!0)-d.height(),d=c-g,e=c-h,g=2*c-g,h=2*c-h;b.listItem.css({width:d,height:e});b.listItemImage.css({width:d,height:e});b.featuredListItem.css({width:g,height:h});b.featuredListItemImage.css({width:g,
height:h});a.masonry({columnWidth:c}).masonry("reload")}b.setLayout.seed=a.width()},open:function(a){var c=e.makeArray(arguments);b.trigger("contentLoad",c);var d="view"+e.String.capitalize(a),d=b[d].apply(b,c.slice(1));d.done(b.displayContent(function(){b.trigger("contentDisplay",c);return arguments})).fail(function(){b.trigger("contentFail",c)}).always(function(){b.trigger("contentComplete",c)});return d},displayContent:e.Enqueue(function(a){var c=[];a=e(e.buildFragment([a],document,c));b.content().html(a);
e(c).remove()}),viewPhoto:function(a){var c=b.listItem().removeClass("active loading").filterBy("photoId",a).addClass("active loading");return EasySocial.ajax("site/views/photos/item",{id:a,browser:!1}).fail(function(){}).always(function(){c.removeClass("loading")})},"{listItem} click":function(a){var c=a.data("photoId");b.open("Photo",c);a.find("> a").route()},"{listItemLink} click":function(a,b){b.preventDefault();a.blur()},"{backButtonLink} click":function(a,c){var d=b.browser;if(d){var e=b.element.data("albumId");
d.open("album",e);c.preventDefault();a.route()}},getListItem:function(a,c){var d=a?b.listItem().filterBy("photoId",a):b.listItem(".new");return c?d.find(b["listItem"+e.String.capitalize(c)].selector):d},getNextListItem:function(a){a=b.getListItem(a).next(b.listItem.selector);1>a.length&&(a=b.listItem(":first"));return a},getPrevListItem:function(a){a=b.getListItem(a).prev(b.listItem.selector);1>a.length&&(a=b.listItem(":last"));return a},removeListItem:function(a,c){var d=b.getListItem(a),e=b.getPrevListItem(a);
d.remove();b.setLayout();if(1>b.listItem().length)return b.element.addClass("loading"),window.location=b.backButtonLink().attr("href");c&&e.click()},"{photoItem} init.photos.item":function(a,c,d){b.addSubscriber(d)},"{photoItem} photoSave":function(a,c,d){d.done(function(a,c){b.getListItem(a.id,"title").html(a.title)})},"{photoItem} photoNext":function(a,c,d){b.getNextListItem(d.id).click()},"{photoItem} photoPrev":function(a,c,d){b.getPrevListItem(d.id).click()},"{photoItem} photoMove":function(a,
c,d,e,g){d.done(function(){b.removeListItem(e.id,!0)})},"{photoItem} photoDelete":function(a,c,d,e){d.done(function(){b.removeListItem(e.id,!0)})},"{photoItem} photoFeature":function(a,c,d,e,g){var h=b.getListItem(e.id);h.toggleClass("featured",g);b.setLayout();d.fail(function(){h.toggleClass("featured",!g);b.setLayout()})}}});g.resolve()})});EasySocial.module("photos/cover",function(e){var g=this;EasySocial.require().library("image").done(function(){EasySocial.Controller("Photos.Cover",{defaultOptions:{"{image}":"[data-cover-image]",
"{editButton}":"[data-cover-edit-button]","{doneButton}":"[data-cover-done-button]","{cancelButton}":"[data-cover-cancel-button]","{uploadButton}":"[data-cover-upload-button]","{selectButton}":"[data-cover-select-button]","{removeButton}":"[data-cover-remove-button]","{menu}":"[data-cover-menu]"}},function(b){return{init:function(){b.setLayout();b.element.hasClass("editing")&&b.enable()},"{window} resize":e.debounce(function(){b.setLayout()},250),"{editButton} click":function(){b.enable()},"{cancelButton} click":function(){b.disable()},
ready:!1,disabled:!0,toggle:function(){b[b.disabled?"enable":"disable"]()},enable:function(){b.setLayout();b.disabled=!1;b.element.addClass("editing")},disable:function(){b.disabled=!0;b.element.removeClass("editing");var a=e.uri(window.location.href).deleteQueryParam("cover_id").toString();History.pushState({state:0},window.title,a)},imageLoaders:{},setLayout:function(){var a=b.image(),c=b.setLayout.image,d=b.element.width()/3;b.element.height(d);if(c){var d=c.data("width"),f=c.data("height"),c=
a.width(),a=a.height(),d=e.Image.resizeProportionate(d,f,c,a,"outer");b.availableWidth=c-d.width;b.availableHeight=a-d.height}else if(a=e.uri(a.css("backgroundImage")).extract(0))d=b.imageLoaders,(d[a]||(d[a]=e.Image.get(a))).done(function(a){b.setLayout.image=a;b.setLayout()})},setCover:function(a,c){b.element.addClass("loading");e.Image.get(c).done(function(){b.image().data("photoId",a).css({backgroundImage:e.cssUrl(c),backgroundPosition:"50% 50%"});b.x=0.5;b.y=0.5;b.enable()}).fail(function(){b.disable()}).always(function(){b.element.removeClass("loading")})},
drawing:!1,moveCover:function(a,c,d){d||(d=b.image());var e=b.availableWidth,g=b.availableHeight;a=0==e?0:b.x+(a/e||0);c=0==g?0:b.y+(c/g||0);0>a&&(a=0);1<a&&(a=1);0>c&&(c=0);1<c&&(c=1);d.css("backgroundPosition",100*(b.x=a)+"% "+100*(b.y=c)+"% ")},x:0.5,y:0.5,"{image} mousedown":function(a,c){if(!b.disabled){c.target===b.image()[0]&&c.preventDefault();b.drawing=!0;b.element.addClass("active");var d=b.image(),f=b.image().css("backgroundPosition").split(" ");b.x=parseInt(f[0])/100;b.y=parseInt(f[1])/
100;var g=c.pageX,h=c.pageY;e(document).on("mousemove.movingCover mouseup.movingCover",function(a){b.drawing&&b.moveCover(-1*(g-(g=a.pageX)),-1*(h-(h=a.pageY)),d)}).on("mouseup.movingCover",function(){e(document).off("mousemove.movingCover mouseup.movingCover");b.element.removeClass("active")})}},save:function(){var a=b.image().data("photoId");return EasySocial.ajax("site/controllers/photos/createCover",{id:a,x:b.x,y:b.y}).done(function(a){b.element.css({backgroundImage:e.cssUrl(a.url),backgroundPosition:a.position}).removeClass("no-cover");
b.disable()})},"{doneButton} click":function(){b.save()},"{menu} dropdownOpen":function(){b.element.addClass("show-all")},"{menu} dropdownClose":function(){b.element.removeClass("show-all")},"{selectButton} click":function(){EasySocial.photos.selectPhoto({bindings:{"{self} photoSelected":function(a,c,d){if(a=d[0])b.setCover(a.id,a.sizes.large),this.parent.close()}}})},"{uploadButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/uploadCover"),bindings:{"{self} upload":function(a,
c,d,e){d.done(function(a){b.setCover(a.id,a.sizes.large.url)})}}})},"{removeButton} click":function(){EasySocial.ajax("site/controllers/photos/removeCover").done(function(a){b.element.css({backgroundImage:e.cssUrl(a),backgroundPosition:"50% 50%"}).addClass("no-cover");b.disable()})}}});g.resolve()})});EasySocial.module("photos/editor",function(e){var g=this;EasySocial.require().done(function(){var b=EasySocial.Controller("Photos.Editor",{defaultOptions:{view:{uploadItem:"upload.item",photoForm:"site/albums/photo.form"},
"{titleField}":"[data-photo-title-field]","{captionField}":"[data-photo-caption-field]","{location}":"[data-photo-location]","{locationCaption}":"[data-photo-location-caption]","{addLocationButton}":"[data-photo-addLocation-button]","{date}":"[data-photo-date]","{dateCaption}":"[data-photo-date-caption]","{addDateCaption}":"[data-photo-adddate-button]","{locationWidget}":".es-photo-location-form .es-location","{latitude}":"[data-location-lat]","{longitude}":"[data-location-lng]","{dateDay}":"[name=date-day]",
"{dateMonth}":"[name=date-month]","{dateYear}":"[name=date-year]","{actionsMenu}":"[data-item-actions-menu]","{featureButton}":"[data-photo-feature-button]","{coverButton}":"[data-photo-cover-button]","{editButton}":"[data-photo-edit-button]","{editButtonLink}":"[data-photo-edit-button] > a","{doneButton}":"[data-photo-done-button]","{doneButtonLink}":"[data-photo-done-button] > a","{moveButton}":"[data-photo-move-button]","{deleteButton}":"[data-photo-delete-button]","{rotateLeftButton}":"[data-photo-rotateLeft-button]",
"{rotateRightButton}":"[data-photo-rotateRight-button]","{profileAvatarButton}":"[data-photo-profileAvatar-button]","{profileCoverButton}":"[data-photo-profileCover-button]"}},function(a){return{init:function(){},data:function(){return{id:a.photo.id,title:a.titleField().val(),caption:a.captionField().val(),date:a.formatDate(),address:a.locationCaption().html(),latitude:a.latitude().val(),longitude:a.longitude().val()}},save:function(){var b=a.data();a.clearMessage();b=EasySocial.ajax("site/controllers/photos/update",
b).done(function(b){a.photo.setLayout("item")}).fail(function(){a.setMessage(message,"error")}).progress(function(b,c){"success"==c&&a.setMessage(b)});a.trigger("photoSave",[b,a]);return b},enable:function(){a.photo.setLayout("form");a.photo.album&&a.element.addClass("active");a.trigger("enabled",[a])},disable:function(){a.photo.setLayout("item");a.photo.album&&a.element.removeClass("active");a.trigger("disabled",[a])},setImage:function(b){var d=a.photo.image();b=a.photo[b+"Image"]();var f=b.data("src"),
g=b.data("loader");g||(g=e.Image.get(f),b.data("loader",g));g.done(function(){d.css("backgroundImage","url("+f+")")});return g},"{featureButton} click":function(b,d){d.stopPropagation();var e=a.element.hasClass("featured");a.element.addTransitionClass("featuring",800).toggleClass("featured",!e);setTimeout(function(){a.setImage(e?"thumbnail":"featured")},1E3);var g=EasySocial.ajax("site/controllers/photos/feature",{id:a.photo.id}).done(function(a,d){b.toggleClass("btn-es-primary",d)}).fail(function(){a.element.addTransitionClass("featuring",
800).toggleClass("featured",e);setTimeout(function(){a.setImage(e?"featured":"thumbnail")},1E3)});a.trigger("photoFeature",[g,a.photo,!e])},"{coverButton} click":function(){var b=a.photo.album;b&&b.editor&&b.editor.setCover(a.photo.id)},"{dateDay} keyup":function(){a.updateDate()},"{dateMonth} change":function(){a.updateDate()},"{dateYear} keyup":function(){a.updateDate()},updateDate:function(){setTimeout(function(){a.date().addClass("has-data");var b=a.dateDay().val()+" "+e.trim(a.dateMonth().find(":selected").text()+
" "+a.dateYear().val());a.dateCaption().html(b)},1)},formatDate:function(){var b=a.dateDay().val()||a.dateDay().data("date-default"),d=a.dateMonth().val()||a.dateMonth().data("date-default");return(a.dateYear().val()||a.dateYear().data("date-default"))+"-"+d+"-"+b},"{locationWidget} locationChange":function(b,d,e){b=e.formatted_address;a.locationCaption().html(b);a.location().addClass("has-data")},rotate:function(b){var d=a.photo;d.content().addClass("loading");var f=EasySocial.ajax("site/controllers/photos/rotate",
{id:d.id,angle:b}).done(function(b){b=a.photo.album?b.sizes.thumbnail.url:b.sizes.large.url;d.image().css({backgroundImage:e.cssUrl(b)});a.element.addTransitionClass("rotating-ready",150).removeClass("rotating-right rotating-left")}).fail(function(b,c){a.setMessage(b,c)}).always(function(){d.content().removeClass("loading")});a.trigger("photoRotate",[f,b,d])},"{rotateRightButton} click":function(){a.element.addClass("rotating-right");a.rotate(90)},"{rotateLeftButton} click":function(){a.element.addClass("rotating-left");
a.rotate(-90)},"{moveButton} click":function(){var b=a.photo,d=EasySocial.dialog({content:EasySocial.ajax("site/views/photos/moveToAnotherAlbum",{id:b.id}),bindings:{"{moveButton} click":function(){var e=this.albumSelection().val(),g=EasySocial.ajax("site/controllers/photos/move",{id:b.id,albumId:e}).always(function(){d.close()});a.trigger("photoMove",[g,b,e])}}})},"{deleteButton} click":function(){var b=a.photo;EasySocial.dialog({content:EasySocial.ajax("site/views/photos/confirmDelete",{id:b.id}),
bindings:{"{deleteButton} click":function(d){var e=this.parent;d.disabled(!0);d=EasySocial.ajax("site/controllers/photos/delete",{id:b.id}).always(function(){e.close()});a.trigger("photoDelete",[d,b])}}})},"{editButton} click":function(){a.photo.setLayout("form");a.editButtonLink().route()},"{editButtonLink} click":function(a,b){b.preventDefault()},"{doneButton} click":function(){a.save().done(function(){a.photo.setLayout("item");a.doneButtonLink().route()}).fail(function(){})},"{doneButtonLink} click":function(a,
b){b.preventDefault()},"{profileAvatarButton} click":function(){EasySocial.photos.createAvatar(a.photo.id)}}});g.resolve(b)})});EasySocial.module("photos/item",function(e){var g=this;EasySocial.require().script("photos/tags","photos/editor","photos/tagger","photos/navigation").done();EasySocial.require().library("image").done(function(){var b=EasySocial.Controller("Photos.Item",{hostname:"photo",defaultOptions:{editable:!1,taggable:!1,navigation:!1,"{header}":"[data-photo-header]","{content}":"[data-photo-content]",
"{footer}":"[data-photo-footer]","{info}":"[data-photo-info]","{title}":"[data-photo-title]","{titleLink}":"[data-photo-title-link]","{caption}":"[data-photo-caption]","{image}":"[data-photo-image]","{imageLink}":"[data-photo-image-link]","{thumbnailImage}":"[data-photo-image-thumbnail]","{featuredImage}":"[data-photo-image-featured]","{largeImage}":"[data-photo-image-large]","{menu}":"[data-photo-menu]","{actions}":"[data-item-actions]","{actionsMenu}":"[data-item-actions-menu]","{comments}":"[data-comments]",
"{share}":"[data-repost-action]","{likes}":"[data-likes-action]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{counterBar}":"[data-stream-counter]","{privacy}":"[data-es-privacy-container]","{likeCount}":"[data-photo-like-count]","{commentCount}":"[data-photo-comment-count]","{tagCount}":"[data-photo-tag-count]"}},function(a){return{init:function(){a.id=a.element.data("photoId");EasySocial.module("photos/tags").done(function(b){a.tags=a.addPlugin("tags",b)});a.options.editable&&
EasySocial.module("photos/editor").done(function(b){a.editor=a.addPlugin("editor",b)});a.options.taggable&&EasySocial.module("photos/tagger").done(function(b){a.tagger=a.addPlugin("tagger",b)});a.options.navigation&&EasySocial.module("photos/navigation").done(function(b){a.navigation=a.addPlugin("navigation",b)})},data:function(){return{id:a.id,title:e.trim(a.title().text()),caption:e.trim(a.caption().text()),sizes:{thumbnail:a.thumbnailImage().data("src"),featured:a.featuredImage().data("src"),large:a.largeImage().data("src")}}},
setLayout:function(b){a.element.data("photoLayout",b).switchClass("layout-"+b);a.trigger("layoutChange",[b,a])},"{self} click":function(b,d){var f=e(d.target),g=a.menu();0<f.parents().andSelf().filter(g).length||a.trigger("activate",[a])},"{self} photoSave":function(b,d,e){e.done(function(b,c){a.info().replaceWith(c)})},"{self} photoDelete":function(b,d,e){e.done(function(){}).fail(function(b,c){a.setMessage(b,c)})},"{imageLink} click":function(a,b){b.preventDefault()},"{titleLink} click":function(a,
b){},"{self} dropdownOpen":function(){a.element.addClass("show-all")},"{self} dropdownClose":function(){a.element.removeClass("show-all")},"{share} create":function(b,d,e){a.counterBar().removeClass("hide")},"{likes} onLiked":function(b,d,e){a.counterBar().removeClass("hide");a.count("like",1,!0)},"{likes} onUnliked":function(b,d,e){b=a.likeContent().hasClass("hide");d=a.repostContent().hasClass("hide");b&&d&&a.counterBar().addClass("hide");a.count("like",-1,!0)},"{self} tagAdd":function(){a.count("tag",
1,!0)},"{self} tagRemove":function(){a.count("tag",-1,!0)},"{comments} newCommentSaved":function(){a.count("comment",1,!0)},"{comments} commentDeleted":function(){a.count("comment",-1,!0)},"{privacy} activate":function(){setTimeout(function(){a.element.addClass("show-all")},0)},"{privacy} deactivate":function(){a.element.removeClass("show-all")},count:function(b,d,f){b=a[b+"Count"];e.isFunction(b)&&(b=b(),0>b.length||(d=f?(parseInt(b.text())||0)+(parseInt(d)||0):d,0>d&&(d=0),b.text(d)))}}});g.resolve(b)})});
EasySocial.module("photos/tags",function(e){var g=this;EasySocial.require().library("scrollTo").done();EasySocial.require().done(function(){var b=EasySocial.Controller("Photos.Tags",{hostname:"tags",defaultOptions:{"{viewport}":"[data-photo-tag-viewport]","{tagItem}":"[data-photo-tag-item]","{tagButton}":"[data-photo-tag-button]","{tagListItemGroup}":"[data-photo-tag-list-item-group]","{tagListItem}":"[data-photo-tag-list-item]"}},function(a){return{init:function(){a.setLayout()},imageLoaders:{},
setLayout:function(b){var d=a.photo.image(),f=e.uri(d.css("backgroundImage")).extract(0);(a.imageLoaders[f]||(a.imageLoaders[f]=e.Image.get(f))).done(function(f,g){a.viewport().css(e.Image.resizeWithin(g.width,g.height,d.width(),d.height()));b&&b()})},getTagItem:function(b){return a.tagItem().filterBy("photoTagId",b)},getTagListItem:function(b){return a.tagListItem().filterBy("photoTagId",b)},getTaggedUsers:function(){var b=[];a.tagListItem("[data-photo-tag-uid]").each(function(){b.push(e(this).data("photoTagUid"))});
return e.uniq(b)},activateTag:function(b){a.getTagItem(b).addClass("active");a.getTagListItem(b).addClass("active")},deactivateTag:function(b){a.getTagItem(b).removeClass("active");a.getTagListItem(b).removeClass("active")},"{tagListItem} click":function(b){var d=(b.hasClass("active")?"deactivate":"activate")+"Tag";b=b.data("photoTagId");a[d](b)},"{tagListItem} mouseover":function(b){a.getTagItem(b.data("photoTagId")).addClass("focus")},"{tagListItem} mouseout":function(b){a.getTagItem(b.data("photoTagId")).removeClass("focus")},
"{self} tagRemove":function(b,d,e,g){e.done(function(){a.getTagItem(g).remove();a.getTagListItem(g).remove()})},"{self} photoRotate":function(b,d,f,g,h){f.done(function(b,c){setTimeout(function(){a.setLayout(function(){var b=a.tagItem();e.each(c,function(a,c){b.filterBy("photoTagId",c.id).css({width:100*c.width+"%",height:100*c.height+"%",top:100*c.top+"%",left:100*c.left+"%"})})})},1)})}}});g.resolve(b)})});EasySocial.module("photos/tagger",function(e){var g=this;EasySocial.require().library("scrollTo").done();
EasySocial.require().view("site/photos/tags.item","site/photos/tags.menu.item").done(function(){var b=EasySocial.Controller("Photos.Tagger",{hostname:"tagger",defaultOptions:{view:{tagItem:"site/photos/tags.item"},width:100,height:100,drawTolerance:30,"{viewport}":"[data-photo-tag-viewport]","{tagItem}":"[data-photo-tag-item]","{tagSelection}":"[data-photo-tag-item].new","{tagButton}":"[data-photo-tag-button]","{tagListItemGroup}":"[data-photo-tag-list-item-group]","{tagListItem}":"[data-photo-tag-list-item]",
"{tagRemoveButton}":"[data-photo-tag-remove-button]"}},function(a){return{init:function(){},newTagItem:function(){var b=a.viewport(),d=a.tagItem(".new");1>d.length&&(d=a.view.tagItem().addClass("new").appendTo(b),a.addSubscriber(d.addController("EasySocial.Controller.Photos.Tag")));return d},"{tagButton} click":function(b){a[b.data("photoTagButton")||"toggle"]()},disabled:!0,enable:function(){a.disabled=!1;a.element.addClass("tagging");e.scrollTo&&e.scrollTo(a.photo.content(),250,{offset:{top:-100}});
a.trigger("tagEnter")},disable:function(){a.tagSelection().remove();a.tagItem(".focus").removeClass("focus");a.disabled=!0;a.element.removeClass("tagging");a.trigger("tagLeave")},toggle:function(){a[a.disabled?"enable":"disable"]()},area:{},calculateArea:function(b,d){b||(b="clip");d||(d={x:0,y:0});var e=a.viewport(),g=e.offset();g.width=e.width();g.height=e.height();g.right=g.width+g.left;g.bottom=g.height+g.top;e=a.area;e.top=(e.startY<=e.endY?e.startY:e.endY)+d.y;e.left=(e.startX<=e.endX?e.startX:
e.endX)+d.x;e.width=Math.abs(e.endX-e.startX);e.height=Math.abs(e.endY-e.startY);e.right=e.width+e.left;e.bottom=e.height+e.top;"clip"==b&&(e.top<=g.top&&(e.top=g.top),e.bottom>=g.bottom&&(e.bottom=g.bottom),e.left<=g.left&&(e.left=g.left),e.right>=g.right&&(e.right=g.right),e.width=e.right-e.left,e.height=e.bottom-e.top);"flip"==b&&(e.top<=g.top&&(e.top=g.top),e.left<=g.left&&(e.left=g.left),e.right>=g.right&&(e.right=g.right,e.left=e.right-e.width),e.bottom>=g.bottom&&(e.bottom=g.bottom,e.top=e.bottom-
e.height));e.pixel={top:e.top-g.top,left:e.left-g.left,width:e.width,height:e.height};e.decimal={top:e.pixel.top/g.height,left:e.pixel.left/g.width,width:e.width/g.width,height:e.height/g.height};e.percentage={top:100*e.decimal.top+"%",left:100*e.decimal.left+"%",width:100*e.decimal.width+"%",height:100*e.decimal.height+"%"};g=a.options.drawTolerance;a.autodraw=e.width<g&&e.height<g;return e},setPivot:function(b,d,e){var g=a.area;g[b+"X"]=d;g[b+"Y"]=e},drawing:!1,autodraw:!1,drawTag:function(){var b=
a.calculateArea();options=a.options;a.autodraw&&(b.endX=b.startX+options.width,b.endY=b.startY+options.height,a.calculateArea("flip",{x:options.width/-2,y:options.height/-2}));a.newTagItem().css(b.percentage).trigger("focusInput")},"{viewport} mousedown":function(b,d){a.disabled||d.target!==b[0]||(d.preventDefault(),a.tagItem(".focus").removeClass("focus"),a.drawing=!0,a.setPivot("start",d.pageX,d.pageY),e(document).on("mousemove.tagger",function(b){a.drawing&&(a.setPivot("end",b.pageX,b.pageY),a.drawTag())}).on("mouseup.tagger",
function(b){a.setPivot("end",b.pageX,b.pageY);a.drawTag();e(document).off("mousemove.tagger mouseup.tagger")}))},createTag:function(b){b=e.extend({photo_id:a.photo.id},b,a.area.decimal);var d=EasySocial.ajax("site/controllers/photos/createTag",b);a.trigger("tagCreate",[d,b,a]);return d},removeTag:function(b){var d=EasySocial.ajax("site/controllers/photos/removeTag",{id:b});a.trigger("tagRemove",[d,b,a]);return d},addTag:function(b,d,f){d=e.buildHTML(d).addClass("focus").appendTo(a.viewport());f=e.buildHTML(f).appendTo(a.tagListItemGroup());
a.trigger("tagAdd",[b,d,f,a])},"{self} avatarEnter":function(){a.tagItem().hide();a.disable()},"{self} avatarLeave":function(){a.tagItem().show()},"{tagRemoveButton} click":function(b,d){var e=b.data("photoTagId");a.removeTag(e);d.stopPropagation()},"{tagRemoveButton} mouseover":function(){a.viewport().addClass("active")},"{tagRemoveButton} mouseout":function(){a.viewport().removeClass("active")}}});EasySocial.Controller("Photos.Tag",{defaultOptions:{view:{menuItem:"site/photos/tags.menu.item"},"{form}":"[data-photo-tag-form]",
"{title}":"[data-photo-tag-title]","{removeButton}":"[data-photo-tag-remove-button]","{textField}":"[data-photo-tag-input]","{menu}":"[data-photo-tag-menu]","{menuItem}":"[data-photo-tag-menu-item]"}},function(a){return{init:function(){a.data=a.options.data},"{self} focusInput":function(){a.textField().focus()},"{textField} keyup":e._.debounce(function(b,d){var f=e.trim(a.textField().val());switch(d.keyCode){case 38:case 40:case 13:case 27:break;default:var g=a.tagger.photo.tags.getTaggedUsers();
EasySocial.ajax("site/controllers/friends/suggestPhotoTagging",{search:f,exclude:g,includeme:"1"}).done(a.render())}},250),"{textField} keypress":function(b,d){var f=e.trim(a.textField().val()),g=a.menuItem(".active");switch(d.keyCode){case 38:a.menuItem().removeClass("active");1>g.length?a.menuItem(":last").addClass("active"):g.prev(a.menuItem.selector).addClass("active");d.preventDefault();break;case 40:a.menuItem().removeClass("active");1>g.length?a.menuItem(":first").addClass("active"):g.next(a.menuItem.selector).addClass("active");
d.preventDefault();break;case 13:0<g.length?g.trigger("click"):a.create({type:"label",label:f});a.menu().hide();break;case 27:a.menu().hide()}},"{menuItem} mouseover":function(b){a.menuItem().removeClass("active");b.addClass("active")},"{menuItem} mouseout":function(b){a.menuItem().removeClass("active")},render:e.Enqueue(function(b){var d=a.menu();!b||1>b.length?d.hide():(d.empty(),e.each(b,function(b,c){a.view.menuItem({item:c}).data("item",c).appendTo(d);d.show()}))}),create:function(b){var d=a.element;
a.data=b;a.title().html(b.label);""!==e.trim(b.label)&&a.tagger.createTag(b).done(function(b,c,d){a.tagger.addTag(b,c,d);a.element.remove()}).fail(function(){d.remove()})},remove:function(){var b=a.element,d=(a.data||{}).id;if(!d)return b.remove();a.tagger.removeTag(d).done(function(){b.remove()})},"{menuItem} click":function(b){b=b.data("item");a.create({uid:b.id,type:"person",label:b.screenName})},"{removeButton} click":function(){a.remove()}}});g.resolve(b)})});EasySocial.module("photos/navigation",
function(e){e.fn.intersectsWith=function(b,a,c,d){var e=this.offset(),e={top:e.top,left:e.left,bottom:e.top+(sourceHeight=this.height()),right:e.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight};b={top:b,left:a,bottom:b+(d||(d=0)),right:a+(c||(c=0)),width:c,height:d};return e.left<=b.right&&b.left<=e.right&&e.top<=b.bottom&&b.top<=e.bottom?{reference:e,subject:b}:!1};var g=EasySocial.Controller("Photos.Navigation",{hostname:"navigation",defaultOptions:{"{navButton}":".es-photo-nav-button",
"{nextButton}":"[data-photo-next-button]","{prevButton}":"[data-photo-prev-button]"}},function(b){return{init:function(){},disabled:!1,disable:function(){b.disabled=!0},enable:function(){b.disabled=!1},"{window} mousemove":function(a,c){if(!(b.disabled||(b.currentDirection=null,b.navButton().removeClass("active"),1>e(c.target).parents().filter(b.photo.content.selector).length))){var d=b.photo.content().intersectsWith(c.pageY,c.pageX);d&&(d=d.subject.left<d.reference.right-d.reference.width/2?"prev":
"next",b[d+"Button"]().addClass("active"),b.currentDirection=d)}},"{self} tagEnter":function(){b.disable()},"{self} tagLeave":function(){b.enable()},"{self} click":function(a,c){if(!(b.disabled||1>e(c.target).parents().filter(b.photo.content.selector).length)){var d=b.currentDirection;d&&b.trigger("photo"+e.String.capitalize(d),[b.photo])}},"{self} photoNext":function(){},"{self} photoPrev":function(){}}});this.resolve(g)});EasySocial.module("privacy",function(e){var g=this;EasySocial.require().library("dialog").view("admin/profiles/form.privacy.custom.item").done(function(b){EasySocial.Controller("Profiles.Form.Privacy",
{defaultOptions:{path:"admin","{selection}":".privacySelection","{browseButton}":".browseButton","{userDeleteButton}":".userDeleteButton","{customContainer}":".customContainer",view:{customItem:"admin/profiles/form.privacy.custom.item"}}},function(a){return{init:function(){},"{selection} change":function(c,d){var e=b(c).val();b(c).attr("name");"custom"==e?a.customContainer().show():a.customContainer().hide()},"{userDeleteButton} click":function(a,d){b(a).parents("li").remove()},"{browseButton} click":function(c,
d){var e=b(c).attr("id"),g=b(c).data("index"),h=b.rootPath+"administrator/index.php?option=com_easysocial&view=users&layout=listing&show=iframe";"site"==a.options.path&&(h=b.rootPath+"index.php?option=com_easysocial&view=friends&layout=listing&show=iframe");b.dialog({title:"Browse Users & Groups",content:h,body:{css:{width:400,height:300}},buttons:[{name:"Assign",click:function(){var c=b(".foundryDialog").find("iframe").contents().find("input:checked");if(0<c.length)for(var d=0;d<c.length;d++)if("toggle"!=
b(c[d]).attr("name")){var h=b(c[d]).val(),n=b(".foundryDialog").find("iframe").contents().find('input[name="user_'+h+'"]').val(),r=b("ul#privacy_ul"+g+" input:hidden"),t=!0;if(0<r.length)for(var l=0;l<r.length;l++)if(b(r[l]).val()==h){t=!1;break}t&&(html=a.view.customItem({userName:n,eleName:e,userId:h}),b("ul#privacy_ul"+g).append(html))}b.dialog().close()}},{name:"Close",click:function(){b.dialog().close()}}]})}}});g.resolve()})});EasySocial.module("sharing",function(e){var g=this;EasySocial.require().library("textboxlist").done(function(){EasySocial.Controller("Sharing",
{defaultOptions:{"{vendors}":"[data-sharing-vendor]","{emailForm}":"[data-sharing-email]"}},function(b){return{init:function(){b.initLinks();b.initEmail()},initLinks:function(){e.each(b.vendors(),function(a,b){b=e(b);if(!b.data("loaded")){var d=b.attr("href");b.data("href",d);b.attr("href","javascript:void(0);");b.attr("loaded",!0)}})},initEmail:function(){e.each(b.emailForm(),function(a,c){c=e(c);c.data("loaded")||(b.addPlugin("email"),c.attr("loaded",!0))})},"{vendors} click":function(a,b){var d=
a.data("options")||"";window.open(a.data("href"),"",d)}}});e.template("sharing/recipientContent",'[%= title %]<input type="hidden" name="items" value="[%= title %]" />');EasySocial.Controller("Sharing.Email",{defaultOptions:{token:"","{container}":"[data-sharing-email]","{frames}":"[data-sharing-email-frame]","{recipients}":"[data-sharing-email-recipients]","{input}":"[data-sharing-email-input]","{content}":"[data-sharing-email-content]","{send}":"[data-sharing-email-send]","{frames}":"[data-sharing-email-frame]",
"{frameForm}":"[data-sharing-email-form]","{frameSending}":"[data-sharing-email-sending]","{frameDone}":"[data-sharing-email-done]","{frameFail}":"[data-sharing-email-fail]","{failMsg}":"[data-sharing-email-fail-msg]"}},function(b){return{init:function(){b.options.token=b.container().data("token");b.recipients().textboxlist({view:{itemContent:"sharing/recipientContent"}});b.originalPosition=b.container().css("position")},getRecipients:function(){var a=b.recipients().controller("textboxlist").getAddedItems(),
c=[];e.each(a,function(a,b){c.push(b.title)});a=b.input().val();1>c.length&&!e.isEmpty(a)&&c.push(a);return c},getContent:function(){return b.content().val()},"{send} click":function(a,c){if(a.enabled()){a.disabled(!0);b.frames().hide();b.frameSending().show();var d=b.options.token,e=b.getRecipients(),g=b.getContent();b.submitForm(d,e,g).done(function(){b.frames().hide();b.frameDone().show();setTimeout(function(){b.recipients().controller("textboxlist").clearItems();b.content().val("");b.frameDone().hide();
b.frameForm().show()},1E3)}).fail(function(a){b.frames().hide();b.frameFail().show();b.frameForm().show();void 0!==a&&b.failMsg().html(a)}).always(function(){a.enabled(!0)})}},"{input} keypress":function(a,c){if(44===c.which)return b.recipients().controller("textboxlist").addItem(a.val()),a.val(""),!1},submitForm:function(a,b,d){return EasySocial.ajax("site/controllers/sharing/send",{token:a,recipients:b,content:d})}}});g.resolve()})});EasySocial.module("site/activities/activities",function(e){var g=
this;EasySocial.require().script("site/activities/sidebar","site/activities/sidebar.item").view("site/loading/small").done(function(b){EasySocial.Controller("Activities",{defaultOptions:{items:null,"{container}":"[data-activities]","{contentTitle}":"[data-activities-content-title]","{content}":"[data-activities-content]","{sidebar}":"[data-activities-sidebar]","{sidebarItem}":"[data-sidebar-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Activities.Sidebar,
{"{parent}":a});a.sidebarItem().implement(EasySocial.Controller.Activities.Sidebar.Item,{"{parent}":a})},updatingContents:function(){a.content().html(a.view.loadingContent())},updateContent:function(b,d){a.content().html(b);a.contentTitle().html(d)}}});g.resolve()})});EasySocial.module("site/activities/sidebar",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Activities.Sidebar",{defaultOptions:{"{menuItem}":"[data-sidebar-menu]"}},function(a){return{init:function(){},
"{menuItem} click":function(c,d){a.menuItem().removeClass("active");b(c).addClass("active")}}});g.resolve()})});EasySocial.module("site/activities/sidebar.item",function(e){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Activities.Sidebar.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(b,d){var e=a.element.data("type"),g=a.element.data("url"),h=a.element.data("title");a.element.data("description");History.pushState({state:1},
h,g);a.parent.updatingContents();EasySocial.ajax("site/controllers/activities/getActivities",{type:e}).done(function(b){a.parent.updateContent(b,h)}).fail(function(a){console.log(a)});a.parent.updateContent()}}});g.resolve()})});EasySocial.module("site/activities/apps",function(e){var g=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY").done(function(b){EasySocial.Controller("Activities.Apps.List",{defaultOptions:{"{item}":"[data-hidden-app-item]",
view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Activities.Apps.Item)}}});EasySocial.Controller("Activities.Apps.Item",{defaultOptions:{id:"",context:"","{unhideLink}":"[data-hidden-app-unhide]","{content}":"[data-hidden-app-content]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.context=a.element.data("context")},"{unhideLink} click":function(){EasySocial.ajax("site/controllers/activities/unhideapp",
{context:a.options.context,id:a.options.id}).done(function(){a.content().html(b.language("COM_EASYSOCIAL_ACTIVITY_APPS_UNHIDE_SUCCESSFULLY"))}).fail(function(a){console.log(a)})}}});g.resolve()})});EasySocial.module("site/activities/item",function(e){var g=this;EasySocial.require().script().done(function(b){EasySocial.Controller("Activities.Item",{defaultOptions:{"{toggle}":"[data-activity-toggle]","{deleteBtn}":"[data-activity-delete]"}},function(a){return{init:function(){},"{toggle} click":function(c,
d){EasySocial.ajax("site/controllers/activities/toggle",{id:a.element.data("id"),curState:a.element.data("current-state")}).done(function(d,e){b(c).text(d);a.element.data("current-state",e);e?a.element.children("div.es-stream").addClass("isHidden"):a.element.children("div.es-stream").removeClass("isHidden")}).fail(function(a){console.log(a)})},"{deleteBtn} click":function(){var b=a.element.data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/activities/confirmDelete"),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/activities/delete",
{id:b}).done(function(b){a.element.fadeOut();EasySocial.dialog().close()})}}})}}});g.resolve()})});EasySocial.module("site/activities/list",function(e){var g=this;EasySocial.require().view("site/loading/small").script("site/activities/item").done(function(b){b.fn.visible=function(a){var c=b(this),d=b(window),e=d.scrollTop(),d=e+d.height(),g=c.offset().top,c=g+c.height();return(!0===a?g:c)<=d&&(!0===a?c:g)>=e};EasySocial.Controller("Activities.List",{defaultOptions:{"{item}":"[data-activity-item]",
"{pagination}":"[data-activity-pagination]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Activities.Item);a.on("scroll.activities",window,b._.debounce(function(){a.loading||a.pagination().visible()&&a.loadMore()},250))},loadMore:function(){var c=b("[data-sidebar-menu].active").data("type"),d=a.pagination().data("startlimit");""!=d&&(a.loading=!0,EasySocial.ajax("site/controllers/activities/getActivities",{limitstart:d,loadmore:"1",
type:c},{beforeSend:function(){a.pagination().html(a.view.loadingContent())}}).done(function(b,c){a.pagination().data("startlimit",c);a.pagination().before(b);a.item().implement(EasySocial.Controller.Activities.Item)}).fail(function(a){return a}).always(function(){a.loading=!1;a.pagination().html("")}))}}});g.resolve()})});EasySocial.module("site/apps/apps",function(e){var g=this;EasySocial.require().library("history").view("site/loading/small").done(function(b){EasySocial.Controller("Apps",{defaultOptions:{requireTerms:!0,
"{content}":"[data-apps-listing]","{sort}":"[data-apps-sort]","{filter}":"[data-apps-filter]","{item}":"[data-apps-item]","{sorting}":"[data-apps-sorting]","{title}":"[data-page-apps-title]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.initAppItem()},initAppItem:function(){a.item().implement(EasySocial.Controller.Apps.Item,{requireTerms:a.options.requireTerms})},"{filter} click":function(c,d){a.sort().removeClass("active");a.filter().removeClass("active");b(c).addClass("active");
var e=b(c).data("apps-filter-type"),g=b(c).data("apps-filter-url"),h=b(c).data("apps-title");a.title().html(h);a.options.filter=e;History.pushState({state:1},"",g);"mine"==e?a.sorting().hide():a.sorting().show();EasySocial.ajax("site/controllers/apps/getApps",{filter:e},{beforeSend:function(){a.sort(".alphabetical").addClass("active");a.content().html(a.view.loading())}}).done(function(b){a.content().html(b);a.initAppItem()})},"{sort} click":function(c,d){var e=b(c).data("apps-sort-type"),g=b(c).data("apps-sort-url");
History.pushState({state:1},"",g);a.sort().removeClass("active");b(c).addClass("active");EasySocial.ajax("site/controllers/apps/getApps",{sort:e,filter:a.options.filter},{beforeSend:function(){a.content().html(a.view.loading())}}).done(function(b){a.content().html(b);a.initAppItem()})}}});EasySocial.Controller("Apps.Item",{defaultOptions:{id:null,requireTerms:!0,"{install}":"[data-apps-item-install]","{installed}":"[data-apps-item-installed]","{settings}":"[data-apps-item-settings]",view:{installAppForm:"site/apps/dialog.install",
uninstallAppForm:"site/apps/dialog.uninstall"}}},function(a){return{init:function(){a.element.data("id")&&(a.options.id=a.element.data("id"))},"{install} click":function(b){EasySocial.dialog({content:EasySocial.ajax("site/views/apps/getTnc"),bindings:{"{cancelButton} click":function(){EasySocial.dialog().close()},"{installButton} click":function(){!a.options.requireTerms||this.agreeCheckbox().is(":checked")?(this.termsError().hide(),a.installApp()):this.termsError().show()}}})},installApp:function(){var b=
EasySocial.ajax("site/controllers/apps/installApp",{id:a.options.id});EasySocial.dialog({content:b,bindings:{"{closeButton} click":function(){EasySocial.dialog().close()}}});b.done(function(){a.install().enabled(!0);a.install().hide();a.installed().show();a.settings().hide()})},"{settings} click":function(b,d){EasySocial.dialog({content:EasySocial.ajax("site/views/apps/settings",{id:a.options.id}),bindings:{}})},"{installed} click":function(b){b.enabled()&&(b.disabled(!0),EasySocial.dialog({content:EasySocial.ajax("site/views/apps/confirmUninstall"),
bindings:{"{parent.closeButton} click":function(){a.installed().enabled(!0)},"{cancelButton} click":function(){a.installed().enabled(!0);EasySocial.dialog().close()},"{uninstallButton} click":function(){a.uninstallApp()}}}))},uninstallApp:function(){var b=EasySocial.ajax("site/controllers/apps/uninstallApp",{id:a.options.id});EasySocial.dialog({content:b,bindings:{"{closeButton} click":function(){EasySocial.dialog().close()}}});b.done(function(){a.installed().enabled(!0);a.installed().hide();a.settings().hide();
a.install().show()})}}});g.resolve()})});EasySocial.module("site/badges/badge",function(e){EasySocial.Controller("Badges.Badge",{defaultOptions:{id:0,total:0,"{achieversList}":"[data-badge-achievers-list]","{achiever}":"[data-badge-achievers-achiever]","{loadIndicator}":"[data-badge-achievers-loading]","{loadButton}":"[data-badge-achievers-load]"}},function(e){return{init:function(){e.options.id=e.element.data("id");e.options.total=e.element.data("total-achievers")},"{loadButton} click":function(b){var a=
e.achiever().length;b.enabled()&&a<e.options.total&&(b.disabled(!0),b.hide(),e.loadIndicator().show(),EasySocial.ajax("site/controllers/badges/loadAchievers",{id:e.options.id,start:a}).done(function(a){e.achieversList().append(a);b.enabled(!0);e.loadIndicator().hide();e.achiever().length<e.options.total&&b.show()}).fail(function(a){}))},loadAchievers:function(){}}});this.resolve()});EasySocial.module("site/comments/control",function(e){var g=this;EasySocial.Controller("CommentsControl",{defaultOptions:{interval:30}},
function(b){return{init:function(){b.startUpdate()},$Blocks:{},startUpdate:function(){b.options.monitoring=!0;b.updateBlocks()},stopUpdate:function(){b.options.monitoring=!1},updateBlocks:function(){(b.updateBlocks=e._.debounce(function(){var a=b.populate();if(!b.options.monitoring)return!1;EasySocial.ajax("site/controllers/comments/getUpdates",{data:a}).done(function(a){e.each(a,function(a,c){e.each(c,function(c,e){var f=b.$Blocks[a][c];f._destroyed||f.updateComment(e)})})}).always(function(){b.updateBlocks()})},
1E3*b.options.interval))()},register:function(a){var c=a.options.uid,d=a.options.element+"."+a.options.group;void 0===b.$Blocks[d]&&(b.$Blocks[d]={});b.$Blocks[d][c]=a;a.trigger("commentBlockRegistered")},populate:function(){var a={};e.each(b.$Blocks,function(b,d){a[b]={};e.each(d,function(d,e){a[b][d]=e._export()})});return a}}});EasySocial.ready(function(){EasySocial.Comments=e("body").addController("EasySocial.Controller.CommentsControl");g.resolve()})});EasySocial.module("site/comments/frame",
function(e){var g=this;EasySocial.require().library("expanding").script("site/comments/item").language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL","COM_EASYSOCIAL_COMMENTS_STATUS_SAVING","COM_EASYSOCIAL_COMMENTS_STATUS_SAVED").done(function(){EasySocial.Controller("Comments",{defaultOptions:{group:"user",element:"stream",uid:0,url:"","{actionContent}":"[data-action-contents-comments]","{actionLink}":"[data-stream-action-comments]","{stat}":"[data-comments-stat]","{load}":"[data-comments-load]","{list}":"[data-comments-list]",
"{item}":"[data-comments-item]","{form}":"[data-comments-form]"}},function(b){return{init:function(){b.options.uid=b.element.data("uid")||b.options.uid;b.options.element=b.element.data("element")||b.options.element;b.options.group=b.element.data("group")||b.options.group;b.options.url=b.element.data("url")||b.options.url;b.$Stat=b.addPlugin("stat");b.$Load=b.addPlugin("load");b.$List=b.addPlugin("list");b.$Form=b.addPlugin("form");EasySocial.require().script("site/comments/control").done(function(){EasySocial.Comments.register(b)});
b.trigger("commentInit",[b])},$Comments:{},registerComment:function(a){b.$Comments[a.options.id]=a},"{actionLink} click":function(){b.actionContent().toggle()},_export:function(){return{total:b.$Stat.total(),count:b.$Stat.count(),ids:e._.keys(b.$Comments)}},updateComment:function(a){var c=[];e.each(a.ids,function(a,f){if(!0!==f)if(!1===f)b.trigger("commentDeleted",[a]);else{var g=!1;e.each(b.$Comments,function(c,e){if(c>a)return b.$List.addToList(f,c,!1),g=!0,!1});g||b.$List.addToList(f,"append",
!1);c.push(f)}});b.$Stat.total(a.total);b.trigger("oldCommentsLoaded",[c])}}});EasySocial.Controller("Comments.List",{defaultOptions:{"{list}":"[data-comments-list]","{item}":"[data-comments-item]"}},function(b){return{init:function(){b.initItemController(b.item(),!1)},initItemController:function(a,c){a.addController("EasySocial.Controller.Comments.Item",{controller:{parent:b.parent},isNew:c});return a},"{parent} newCommentSaved":function(a,c,d){b.addToList(d)},addToList:function(a,c,d){c=void 0===
c?"append":c;d=void 0===d?!0:d;a=e(a);b.initItemController(a,d);if("append"==c||"prepend"==c)if(d="append"==c?":last":":first",c="append"==c?"after":"before",0===b.item().length)b.list().html(a);else b.item(d)[c](a);else c=b.parent.$Comments[c],void 0!==c&&c.element.before(a);b.parent.actionContent().show()},"{parent} commentDeleted":function(a,c,d){void 0!==b.parent.$Comments[d]&&(b.parent.$Comments[d].element.remove(),delete b.parent.$Comments[d])}}});EasySocial.Controller("Comments.Stat",{defaultOptions:{"{stats}":"[data-comments-stats]",
count:0,total:0,limit:10}},function(b){return{init:function(){b.options.count=b.element.data("count");b.options.total=b.element.data("total")},total:function(a){void 0!==a&&(b.options.total=parseInt(a),b.stats().text(e.language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL",b.count(),b.total())));return b.options.total},count:function(a){void 0!==a&&(b.options.count=parseInt(a),b.stats().text(e.language("COM_EASYSOCIAL_COMMENTS_LOADED_OF_TOTAL",b.count(),b.total())));return b.options.count},getNextCycle:function(){var a=
Math.max(b.total()-b.count()-b.options.limit,0),c=b.total()-b.count()-a;return{start:a,limit:c}},"{parent} oldCommentsLoaded":function(a,c,d){a=d.length;b.count(b.count()+a)},"{parent} newCommentSaved":function(){b.total(b.total()+1);b.count(b.count()+1)},"{parent} commentDeleted":function(){b.total(b.total()-1);b.count(b.count()-1)}}});EasySocial.Controller("Comments.Load",{defaultOptions:{"{load}":"[data-comments-load]","{loadMore}":"[data-comments-load-loadMore]"}},function(b){return{init:function(){},
"{loadMore} click":function(a,c){if(a.enabled()){a.disabled(!0);var d=b.parent.$Stat.getNextCycle();if(0==d.limit)return!1;b.loadComments(d.start,d.limit).done(function(c){var g=c.slice().reverse();e.each(g,function(a,c){b.parent.$List.addToList(c,"prepend",!1)});b.parent.trigger("oldCommentsLoaded",[c]);a.enabled(!0);0==d.start&&b.load().hide()}).fail(function(a){b.parent.trigger("oldCommentsLoadError",[a])})}},loadComments:function(a,c){return EasySocial.ajax("site/controllers/comments/load",{uid:b.parent.options.uid,
element:b.parent.options.element,group:b.parent.options.group,start:a,length:c||10})}}});EasySocial.Controller("Comments.Form",{defaultOptions:{"{input}":"[data-comments-form-input]","{submit}":"[data-comments-form-submit]","{status}":"[data-comments-form-status]"}},function(b){return{init:function(){var a=b.input();a.one("click",function(){a.expandingTextarea()})},"{input} keypress":function(a,c){13!=c.keyCode||c.shiftKey||c.altKey||c.ctrlKey||c.metaKey||b.submitComment()},"{submit} click":function(a,
c){a.enabled()&&b.submitComment()},submitComment:function(){var a=b.input().val();if(""==e.trim(a))return!1;b.parent.trigger("newCommentSaving");b.save().done(function(a){b.parent.trigger("newCommentSaved",[a]);b.submit().enabled(!0)}).fail(function(a){b.parent.trigger("newCommentSaveError",[a.message])})},save:function(){var a={url:b.parent.options.url};return EasySocial.ajax("site/controllers/comments/save",{uid:b.parent.options.uid,element:b.parent.options.element,group:b.parent.options.group,
input:b.input().val(),data:a})},disableForm:function(){b.input().attr("disabled",!0);b.submit().disabled(!0)},enableForm:function(){b.input().removeAttr("disabled");b.submit().enabled(!0)},"{parent} newCommentSaving":function(){b.status().show();b.status().removeClass("label-important label-success label-info");b.status().addClass("label-info");b.status().text(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVING"));b.disableForm()},"{parent} newCommentSaved":function(){b.status().show();b.status().text(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVED"));
b.status().removeClass("label-important label-success label-info");b.status().addClass("label-success");setTimeout(function(){b.status().fadeOut("fast")},2E3);b.enableForm();b.input().val("");b.input().expandingTextarea("resize")},"{parent} newCommentSaveError":function(a,c,d){b.status().show();b.status().removeClass("label-important label-success label-info");b.status().addClass("label-important");b.status().text(d);b.enableForm()}}});g.resolve()})});EasySocial.module("site/comments/item",function(e){var g=
this;EasySocial.require().language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_LOADING","COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR","COM_EASYSOCIAL_COMMENTS_STATUS_DELETING","COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR","COM_EASYSOCIAL_LIKES_LIKE","COM_EASYSOCIAL_LIKES_UNLIKE").done(function(){EasySocial.Controller("Comments.Item",{defaultOptions:{id:0,isNew:!1,"{frame}":"[data-comments-item-frame]","{avatar}":"[data-comments-item-avatar]","{commentFrame}":"[data-comments-item-commentFrame]",
"{author}":"[data-comments-item-author]","{action}":"[data-comments-item-actions]","{edit}":"[data-comments-item-actions-edit]","{delete}":"[data-comments-item-actions-delete]","{spam}":"[data-comments-item-actions-spam]","{comment}":"[data-comments-item-comment]","{meta}":"[data-comments-item-meta]","{date}":"[data-comments-item-date] a","{like}":"[data-comments-item-like]","{likeCount}":"[data-comments-item-likeCount]","{editFrame}":"[data-comments-item-editFrame]","{editInput}":"[data-comments-item-edit-input]",
"{editSubmit}":"[data-comments-item-edit-submit]","{editStatus}":"[data-comments-item-edit-status]","{statusFrame}":"[data-comments-item-statusFrame]"}},function(b){return{init:function(){b.options.id=b.element.data("id");b.parent.registerComment(b);b.status=b.element.addController("EasySocial.Controller.Comments.Item.Status",{controller:{parent:b.parent,item:b}})},"{like} click":function(a){a.enabled()&&(a.disabled(!0),b.likeComment().done(function(c,d,f){a.enabled(!0);b.likeCount().text(d);f=e("<div></div>").html(f).text();
b.likeCount().attr("data-original-title",f);b.like().find("a").text(e.language(c?"COM_EASYSOCIAL_LIKES_UNLIKE":"COM_EASYSOCIAL_LIKES_LIKE"))}).fail(function(){}))},likeComment:function(){return EasySocial.ajax("site/controllers/comments/like",{id:b.options.id})},"{likeCount} click":function(){EasySocial.dialog({content:b.getLikedUsers()})},getLikedUsers:function(){return EasySocial.ajax("site/controllers/comments/likedUsers",{id:b.options.id})},"{edit} click":function(a){a.enabled()&&(a.disabled(!0),
b.trigger("commentEditLoading",[b.options.id]),b.getRawComment().done(function(a){b.trigger("commentEditLoaded",[b.options.id],a);b.editInput().val(a);b.editInput().focus();b.editInput().expandingTextarea()}).fail(function(a){b.trigger("commentEditLoadError",[b.options.id,a])}))},getRawComment:function(){return EasySocial.ajax("site/controllers/comments/getRawComment",{id:b.options.id})},"{editInput} keyup":function(a,c){if(13==c.which||27==c.which){switch(c.which){case 13:c.shiftKey||c.ctrlKey||
c.altKey||c.metaKey||b.submitEdit();break;case 27:b.trigger("commentEditCancel",[b.options.id])}b.edit().enabled(!0)}},"{editSubmit} click":function(){b.submitEdit()},submitEdit:function(){var a=e.trim(b.editInput().val());if(""==a)return!1;b.trigger("commentEditSaving",[b.options.id,a]);b.saveEdit(a).done(function(a){b.trigger("commentEditSaved",[b.options.id,a]);b.comment().html(a);b.edit().enabled(!0)}).fail(function(a){b.trigger("commentEditSaveError",[b.options.id,a])})},saveEdit:function(a){return EasySocial.ajax("site/controllers/comments/update",
{id:b.options.id,input:a})},"{delete} click":function(a){a.enabled()&&(a.disabled(!0),b.frame().hide(),b.commentFrame().show(),b.element.clone(),EasySocial.dialog({content:EasySocial.ajax("site/views/comments/confirmDelete",{id:b.options.id}),selectors:{"{deleteButton}":"[data-delete-button]","{cancelButton}":"[data-cancel-button]"},bindings:{"{deleteButton} click":function(){EasySocial.dialog().close();b.parent.trigger("commentDeleting",[b.options.id]);b.trigger("commentDeleting");b.deleteComment().done(function(){b.parent.trigger("commentDeleted",
[b.options.id]);a.enabled(!0)}).fail(function(a){b.parent.trigger("commentDeleteError",[b.options.id,a]);b.trigger("commentDeleteError",[b.options.id,a])})},"{cancelButton} click":function(){EasySocial.dialog().close();a.enabled(!0)}}}))},deleteComment:function(){return EasySocial.ajax("site/controllers/comments/delete",{id:b.options.id})}}});EasySocial.Controller("Comments.Item.Status",{defaultOptions:{"{frame}":"[data-comments-item-frame]","{statusFrame}":"[data-comments-item-statusFrame] div",
"{commentFrame}":"[data-comments-item-commentFrame]","{editFrame}":"[data-comments-item-editFrame]"}},function(b){return{init:function(){},setStatus:function(a){b.frame().hide();b.statusFrame().html(a);b.statusFrame().show()},"{self} commentEditLoading":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_LOADING"))},"{self} commentEditLoaded":function(){b.frame().hide();b.editFrame().show()},"{self} commentEditLoadError":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_LOAD_ERROR"))},
"{self} commentEditCancel":function(){b.frame().hide();b.commentFrame().show()},"{self} commentEditSaving":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVING"))},"{self} commentEditSaved":function(){b.frame().hide();b.commentFrame().show()},"{self} commentEditSaveError":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_SAVE_ERROR"))},"{self} commentDeleting":function(){b.setStatus(e.language("COM_EASYSOCIAL_COMMENTS_STATUS_DELETING"))},"{self} commentDeleteError":function(a,
c,d,f){f=f||e.language("COM_EASYSOCIAL_COMMENTS_STATUS_DELETE_ERROR");b.setStatus(f)}}});g.resolve()})});EasySocial.module("site/conversations/api",function(e){var g=this;EasySocial.require().library("dialog").done(function(){e(document).on("click.es.conversations.compose","[data-es-conversations-compose]",function(){var b=e(this).data("es-conversations-id");EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/composer",{id:b}),bindings:{"{sendButton} click":function(){var a=e("[data-composer-recipient]").val(),
c=e("[data-composer-message]").val();EasySocial.ajax("site/controllers/conversations/store",{uid:a,message:c}).done(function(a){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/sent",{id:b}),bindings:{"{viewButton} click":function(){document.location=a}}})}).fail(function(a){self.setMessage(a)})}}})});g.resolve()})});EasySocial.module("site/conversations/conversations",function(e){var g=this;EasySocial.require().script("site/conversations/mailbox","site/conversations/item","site/conversations/filter").language("COM_EASYSOCIAL_NO_BUTTON").done(function(b){EasySocial.Controller("Conversations",
{defaultOptions:{"{mailbox}":"[data-conversations-mailbox]","{list}":"[data-conversations-list]","{content}":"[data-conversations-content]","{item}":"[data-conversations-item]","{actions}":"[data-conversations-actions]","{filterItem}":"[data-conversations-filter]","{checkAll}":"[data-conversations-checkAll]","{checkbox}":"[data-conversationItem-checkbox]","{delete}":"[data-conversations-delete]","{archive}":"[data-conversations-archive]","{unarchive}":"[data-conversations-unarchive]","{unread}":"[data-conversations-unread]",
"{read}":"[data-conversations-read]"}},function(a){return{init:function(){a.mailbox().implement(EasySocial.Controller.Conversations.Mailbox,{"{parent}":a});a.item().implement(EasySocial.Controller.Conversations.Item,{"{parent}":a});a.filterItem().implement(EasySocial.Controller.Conversations.Filter,{"{parent}":a})},"{filterItem} click":function(c){a.filterItem().removeClass("active");b(c).addClass("active")},"{checkbox} change":function(b){if(0>=a.checkbox(":checked").length&&!b.is(":checked"))return a.actions().removeClass("is-checked");
a.actions().addClass("is-checked")},"{checkAll} click":function(c){if(0>=a.checkbox().length)return b(c).prop("checked",!1),!1;c.is(":checked")?a.checkbox(":not(:checked)").click():a.checkbox(":checked").click()},showEmpty:function(){a.content().addClass("is-empty")},hideEmpty:function(){a.content().removeClass("is-empty")},toggleLoading:function(){a.content().removeClass("is-empty").toggleClass("is-loading")},updateContent:function(b,d){void 0!=d?a.content().addClass("layout-"+d):a.content().removeClass("layout-archives");
a.actions().removeClass("is-checked");a.checkAll().removeAttr("checked");a.list().html(b)},getSelectedConversations:function(){if(0>=a.checkbox(":checked").length)return!1;var c=[];a.checkbox(":checked").each(function(a,e){c.push(b(e).val())});return c},"{archive} click":function(){var c=a.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmArchive",{ids:c}),bindings:{"{confirmButton} click":function(){b("[data-conversation-archive-form]").submit()}}})},
"{unarchive} click":function(){var c=a.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmUnarchive",{ids:c}),bindings:{"{confirmButton} click":function(){b("[data-conversation-archive-form]").submit()}}})},"{delete} click":function(){var c=a.getSelectedConversations();EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDelete",{ids:c}),bindings:{"{deleteButton} click":function(){b("[data-conversation-delete-form]").submit()}}})},
"{read} click":function(){if(0>=a.checkbox(":checked").length)return!1;var c=[];a.checkbox(":checked").each(function(a,e){c.push(b(e).val())});EasySocial.ajax("site/controllers/conversations/markRead",{ids:c}).done(function(){a.checkbox().parents("[data-conversations-item]").removeClass("unread").addClass("read");a.mailbox().controller().updateCounters()}).fail(function(b){a.setMessage(b)})},"{unread} click":function(){if(0>=a.checkbox(":checked").length)return!1;var c=[];a.checkbox(":checked").each(function(a,
e){c.push(b(e).val())});EasySocial.ajax("site/controllers/conversations/markUnread",{ids:c}).done(function(){a.checkbox().parents("[data-conversations-item]").removeClass("read").addClass("unread");a.mailbox().controller().updateCounters()}).fail(function(a){console.log(a)})}}});g.resolve()})});EasySocial.module("site/conversations/mailbox",function(e){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Conversations.Mailbox",{defaultOptions:{"{item}":"[data-mailboxItem]"}},
function(a){return{init:function(){a.item().implement(EasySocial.Controller.Conversations.Mailbox.Item,{"{parent}":a})},updateCounters:function(){a.item(".active").controller().updateCounter()},updateContent:function(b,d){a.parent.updateContent(b,d)},showEmpty:function(){a.parent.showEmpty()},hideEmpty:function(){a.parent.hideEmpty()},toggleLoading:function(){a.parent.toggleLoading()}}});EasySocial.Controller("Conversations.Mailbox.Item",{defaultOptions:{"{counter}":"[data-mailboxItem-counter]",view:{emptyTemplate:"site/conversations/default.item.empty"}}},
function(a){return{init:function(){},updateCounter:function(){EasySocial.ajax("site/controllers/conversations/getCount",{mailbox:a.element.data("mailbox")}).done(function(b){0>=b?a.counter().html(""):a.counter().html("("+b+")")})},toggleLoading:function(){a.element.toggleClass("loading")},"{self} click":function(){var b=a.element.data("url"),d=a.element.data("title"),e=a.element.data("mailbox");a.parent.item().removeClass("active");a.element.addClass("active");History.pushState({state:1},d,b);EasySocial.ajax("site/views/conversations/getItems",
{mailbox:e,limitstart:0},{beforeSend:function(){a.toggleLoading();a.parent.toggleLoading()}}).done(function(b,c){a.toggleLoading();a.parent.toggleLoading();if(0>=b.length)return a.parent.updateContent(""),a.parent.showEmpty();a.parent.hideEmpty();a.parent.updateContent(b,a.element.data("mailbox"))})}}});g.resolve()})});EasySocial.module("site/conversations/item",function(e){var g=this;EasySocial.require().script("site/conversations/mailbox").done(function(b){EasySocial.Controller("Conversations.Item",
{defaultOptions:{"{checkbox}":"[data-conversationItem-checkbox]"}},function(a){return{init:function(){},"{checkbox} change":function(c){return b(c).is(":checked")?a.element.addClass("selected"):a.element.removeClass("selected")}}});g.resolve()})});EasySocial.module("site/conversations/filter",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Conversations.Filter",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(){var c=a.element.data("filter");
a.parent.item("."+c);if(1==b("[data-mailboxitem]").filter(".active").length){var d=b("[data-mailboxitem]").filter(".active"),e=d.data("url"),g=d.data("title"),h=d.data("mailbox");History.pushState({state:1},g,e);EasySocial.ajax("site/views/conversations/getItems",{mailbox:h,filter:c,limitstart:0},{beforeSend:function(){a.parent.toggleLoading()}}).done(function(b,c){a.parent.toggleLoading();if(0>=b.length)return a.parent.updateContent(""),a.parent.showEmpty();a.parent.hideEmpty();a.parent.updateContent(b,
h)})}}}});g.resolve()})});EasySocial.module("site/conversations/read",function(e){var g=this;EasySocial.require().library("dialog").script("site/conversations/composer","site/friends/suggest").language("COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY","COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY").done(function(b){EasySocial.Controller("Conversations.Read",{defaultOptions:{id:"",attachments:!0,location:!1,maxSize:"3mb",extensionsAllowed:"",attachmentController:null,composerController:null,
"{item}":"[data-readConversation-item]","{items}":"[data-readConversation-items]","{composer}":"[data-readConversation-composer]","{replyButton}":"[data-readConversation-replyButton]","{addParticipant}":"[data-readConversation-addParticipant]","{leaveConversation}":"[data-readConversation-leaveConversation]","{delete}":"[data-readConversation-delete]","{attachments}":"[data-uploaderQueue-id]","{replyNotice}":"[data-readConversation-replyNotice]",view:{messageItem:"site/conversations/read.message"}}},
function(a){return{init:function(){a.composer().implement(EasySocial.Controller.Conversations.Composer,{"{uploader}":"[data-readConversation-attachment]","{location}":"[data-readConversation-location]",maxSize:a.options.maxSize,extensionsAllowed:a.options.extensionsAllowed});a.options.composerController=a.composer().controller();a.options.attachments&&(a.options.attachmentController=a.options.composerController.uploader().controller());a.options.location&&(a.options.locationController=a.options.composerController.location().controller());
a.item().implement(EasySocial.Controller.Conversations.Read.Item);a.options.id=a.element.data("id")},resetForm:function(){a.options.composerController.resetForm();a.options.location&&a.options.locationController.removeLocation();a.options.attachments&&a.options.attachmentController.reset()},"{replyButton} click":function(c,d){d.preventDefault();var e=a.options.composerController.editor().val(),g=[];if(0>=e.length)return a.replyNotice().html(b.language("COM_EASYSOCIAL_CONVERSATION_REPLY_FORM_EMPTY")).addClass("alert alert-error").removeClass("alert-success"),
!1;a.options.attachments&&a.attachments().each(function(a,c){g.push(b(c).val())});e={id:a.options.id,message:e};a.options.attachments&&(e["upload-id"]=g);a.options.location&&(e.address=a.options.locationController.locationInput().val(),e.latitude=a.options.locationController.locationLatitude().val(),e.longitude=a.options.locationController.locationLongitude().val());a.replyButton().attr("disabled",!0);EasySocial.ajax("site/controllers/conversations/reply",e).done(function(c){a.replyNotice().html(b.language("COM_EASYSOCIAL_CONVERSATION_REPLY_POSTED_SUCCESSFULLY")).addClass("alert alert-success").removeClass("alert-error");
c=b(c);c.implement(EasySocial.Controller.Conversations.Read.Item);a.items().append(c);a.resetForm()}).always(function(){a.replyButton().attr("disabled",!1)});return!1},"{leaveConversation} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmLeave",{id:a.options.id})})},"{addParticipant} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/addParticipantsForm",{id:a.options.id})})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDelete",
{ids:[a.options.id]}),bindings:{"{deleteButton} click":function(){b("[data-conversation-delete-form]").submit()}}})},addItem:function(b){a.messageList().append(a.view.messageItem({item:b}));a.textMessage().val("").focus()}}});EasySocial.Controller("Conversations.Read.Item",{defaultOptions:{id:null,"{attachmentsWrapper}":"[data-conversation-attachment-wrapper]","{attachments}":"[data-conversation-attachment]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.attachments().implement(EasySocial.Controller.Conversations.Read.Item.Attachment,
{"{parent}":a})},removeAttachment:function(c,d){b(c).remove();0==a.attachments().length&&a.attachmentsWrapper().hide()}}});EasySocial.Controller("Conversations.Read.Item.Attachment",{defaultOptions:{"{deleteAttachment}":"[data-attachment-delete]"}},function(a){return{init:function(){},"{deleteAttachment} click":function(c,d){var e=b(c).data("id");EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/confirmDeleteAttachment",{id:e}),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/conversations/deleteAttachment",
{id:e}).done(function(){a.parent.removeAttachment(a.element);EasySocial.dialog({content:EasySocial.ajax("site/views/conversations/attachmentDeleted",{})})}).fail(function(b){a.setMessage(b)})}}})}}});g.resolve()})});EasySocial.module("site/dashboard/apps",function(e){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Dashboard.Apps",{defaultOptions:{parent:null,pageTitle:null,"{item}":"[data-dashboardApps-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Dashboard.Apps.Item,
{"{parent}":a,"{dashboard}":a.parent,pageTitle:a.options.pageTitle})}}});EasySocial.Controller("Dashboard.Apps.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(c,d){d.preventDefault();var e=a.element.data("layout"),g=a.element.data(e+"-url"),h=a.element.data("title"),p=a.element.data("description"),s=a.element.data("id");"canvas"==e?window.location=g:(h=b._.isEmpty(a.options.pageTitle)?h:a.options.pageTitle,History.pushState({state:1},h,g),a.dashboard.content().html(""),
a.dashboard.updatingContents(),a.element.addClass("loading"),EasySocial.ajax("site/controllers/dashboard/getAppContents",{appId:s}).done(function(b){a.dashboard.updateHeading(h,p);a.dashboard.updateContents(b)}).fail(function(a){return a}).always(function(){a.element.removeClass("loading")}))}}});g.resolve()})});EasySocial.module("site/dashboard/dashboard",function(e){var g=this;EasySocial.require().script("site/dashboard/apps","site/dashboard/feeds","site/dashboard/sidebar").done(function(b){EasySocial.Controller("Dashboard",
{defaultOptions:{"{heading}":"[data-dashboard-heading]","{sidebar}":"[data-dashboard-sidebar]","{content}":"[data-dashboard-real-content]","{feeds}":"[data-dashboard-feeds]","{apps}":"[data-dashboard-apps]"}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Dashboard.Sidebar,{"{parent}":a});a.feeds().implement(EasySocial.Controller.Dashboard.Feeds,{"{parent}":a});a.apps().implement(EasySocial.Controller.Dashboard.Apps,{"{parent}":a,pageTitle:a.options.pageTitle})},updateHeading:function(b,
d){a.heading().find("[data-heading-title]").html(b);a.heading().find("[data-heading-desc]").html(d)},updatingContents:function(){a.element.addClass("loading")},updateContents:function(b){a.element.removeClass("loading");a.content().html(b)}}});g.resolve()})});EasySocial.module("site/dashboard/feeds",function(e){var g=this;EasySocial.require().library("history").done(function(b){EasySocial.Controller("Dashboard.Feeds",{defaultOptions:{"{item}":"[data-dashboardFeeds-item]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Dashboard.Feeds.Item,
{"{parent}":a,"{dashboard}":a.parent})}}});EasySocial.Controller("Dashboard.Feeds.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(){b(".es-streams").removeClass("no-stream");var c=a.element.data("type"),d=a.element.data("id"),e=a.element.data("url"),g=a.element.data("title"),h=a.element.data("description");a.element.removeClass("has-notice");History.pushState({state:1},g,e);a.dashboard.content().html("");a.dashboard.updatingContents();a.element.addClass("loading");
EasySocial.ajax("site/controllers/dashboard/getStream",{type:c,id:d,view:"dashboard"}).done(function(c,d){a.dashboard.updateHeading(g,h);0==d&&b(".es-streams").addClass("no-stream");a.dashboard.updateContents(c)}).fail(function(a){return a}).always(function(){a.element.removeClass("loading")})}}});g.resolve()})});EasySocial.module("site/dashboard/sidebar",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Dashboard.Sidebar",{defaultOptions:{"{menuItem}":"[data-dashboardSidebar-menu]"}},
function(a){return{init:function(){},"{menuItem} click":function(c,d){a.menuItem().removeClass("active");b(c).addClass("active")}}});g.resolve()})});EasySocial.module("site/followers/api",function(e){var g=this;EasySocial.require().library("dialog","popbox").done(function(){e(document).on("click.es.followers.follow","[data-es-followers-follow]",function(){var b=e(this),a=b.data("es-followers-id"),c=e.Deferred();b.popbox({content:c,id:"es-wrap",type:"followers",toggle:"click"});b.popbox("show");EasySocial.ajax("site/controllers/profile/follow",
{id:a,type:"user"}).done(function(b){EasySocial.ajax("site/views/profile/popboxFollow",{id:a}).done(function(a){c.resolve(a)})})});e(document).on("click.es.followers.unfollow","[data-es-followers-unfollow]",function(){var b=e(this),a=b.data("es-followers-id"),c=e.Deferred();b.popbox({content:c,id:"es-wrap",type:"followers",toggle:"click"});b.popbox("show");EasySocial.ajax("site/controllers/profile/unfollow",{id:a,type:"user"}).done(function(b){EasySocial.ajax("site/views/profile/popboxUnfollow",{id:a}).done(function(a){c.resolve(a)})})});
g.resolve()})});EasySocial.module("site/followers/followers",function(e){var g=this;EasySocial.require().view("site/loading/small").script("site/conversations/composer").done(function(b){EasySocial.Controller("Followers",{defaultOptions:{"{content}":"[data-followers-content]","{filter}":"[data-followers-filter]","{items}":"[data-followers-item]","{followingCounter}":"[data-following-count]",view:{loader:"site/loading/small"}}},function(a){return{init:function(){a.initItemController()},initItemController:function(){a.items().implement(EasySocial.Controller.Followers.Item,
{"{parent}":a})},updateFollowingCounter:function(b){var d=a.followingCounter().html();b=parseInt(d)+b;a.followingCounter().html(b)},updateContents:function(b){a.content().html(b)},"{filter} click":function(b,d){var e=b.data("followers-filter-type"),g=b.data("followers-filter-title"),h=b.data("followers-filter-id"),p=b.data("followers-filter-url");a.filter().removeClass("active");b.addClass("active");History.pushState({state:1},g,p);EasySocial.ajax("site/controllers/followers/filter",{id:h,type:e}).done(function(b){a.updateContents(b);
a.initItemController()})}}});EasySocial.Controller("Followers.Item",{defaultOptions:{"{unfollowButton}":"[data-followers-item-unfollow]","{composer}":"[data-followers-item-compose]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.initComposer()},initComposer:function(){a.composer().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id}})},"{unfollowButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/followers/confirmUnfollow",
{id:a.options.id}),bindings:{"{unfollowButton} click":function(){EasySocial.ajax("site/controllers/followers/unfollow",{id:a.options.id}).done(function(){a.parent.updateFollowingCounter(-1);a.element.remove();EasySocial.dialog().close()})}}})}}});g.resolve()})});EasySocial.module("site/friends/api",function(e){var g=this;EasySocial.require().library("dialog","popbox").done(function(){e(document).on("click.es.friends.cancel","[data-es-friends-cancel]",function(){var b=e(this).data("es-friends-id");
EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancel"),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:b}).done(function(){EasySocial.dialog().close()})}}})});e(document).on("click.es.friends.add","[data-es-friends-add]",function(){var b=e(this),a=b.data("es-friends-id"),c=e.Deferred();b.popbox({content:c,id:"es-wrap",type:"friends",toggle:"click"});b.popbox("show");EasySocial.ajax("site/controllers/friends/request",
{viewCallback:"popboxRequest",id:a}).done(function(a){c.resolve(a)})});g.resolve()})});EasySocial.module("site/friends/friends",function(e){var g=this;EasySocial.require().script("site/friends/list","site/friends/item","site/friends/suggest","site/conversations/composer").view("site/loading/small","site/friends/default.empty","site/friends/list.assign").done(function(b){EasySocial.Controller("Friends.Birthday",{defaultOptions:{"{messageButton}":"[data-upcoming-birthday-message-button]"}},function(a){return{init:function(){a.options.id=
a.element.data("id");a.options.name=a.element.data("name");a.options.avatar=a.element.data("avatar");a.messageButton().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id,name:a.options.name,avatar:a.options.avatar}})}}});EasySocial.Controller("Friends",{defaultOptions:{activeList:null,"{friendList}":"[data-friends-list]","{content}":"[data-friends-content]","{friendItems}":"[data-friends-items]","{friendItem}":"[data-friends-item]","{emptyList}":"[data-friends-emptyItems]",
"{activeTitle}":"[data-friends-activeTitle]","{filterItem}":"[data-friends-filter]","{friendListActions}":"[data-friendList-actions]","{addFriendToList}":"[data-friends-add]","{friendsCounter}":"[data-total-friends]","{pendingCounter}":"[data-total-friends-pending]","{suggestionCounter}":"[data-total-friends-suggestion]","{requestCount}":"[data-frields-request-sent-count]",view:{loader:"site/loading/small",emptyFriendItems:"site/friends/default.empty",addUserForm:"site/friends/list.assign"}}},function(a){return{init:function(){a.friendList().implement(EasySocial.Controller.Friends.List,
{"{parent}":a});a.initFriendItems()},initFriendItems:function(){a.friendListActions().implement(EasySocial.Controller.Friends.List.Actions,{"{parent}":a});a.friendItem().implement(EasySocial.Controller.Friends.Item,{"{parent}":a})},updateFriendsCounter:function(){EasySocial.ajax("site/controllers/friends/getCounters").done(function(b,d,e,g){a.friendsCounter().html(b);a.pendingCounter().html(d);a.requestCount().html(e);a.suggestionCounter().html(g)})},updateListCounters:function(){EasySocial.ajax("site/controllers/friends/getListCounts",
{}).done(function(a){b(a).each(function(a,c){b("[data-list-"+c.id+"]").controller().updateCounter(c.count)})})},insertItem:function(c){a.emptyList().hide();a.updateListCounters();b(c).implement(EasySocial.Controller.Friends.Item,{"{parent}":a}).prependTo(a.friendItems())},removeItem:function(b){a.friendItem("[data-friendItem-"+b+"]").remove();0>=a.friendItem().length&&a.emptyList().show();a.updateListCounters()},updateFriendRequestCount:function(b){curCount=parseInt(a.requestCount().text(),10);NaN!=
curCount&&(curCount+=b,a.requestCount().text(curCount))},updateContent:function(b){a.content().html(b);a.initFriendItems()},removeActiveFilter:function(){a.filterItem().removeClass("active")},"{filterItem} click":function(b,d){var e=b.data("filter"),g=b.data("title"),h=b.data("userid"),p=b.data("url");0<a.friendList().length&&a.friendList().controller().removeActiveList();a.filterItem().removeClass("active");b.addClass("active");History.pushState({state:1},g,p);b.addClass("loading");EasySocial.ajax("site/controllers/friends/filter",
{filter:e,userid:h}).done(function(b){a.updateContent(b)}).always(function(){b.removeClass("loading")})}}});g.resolve()})});EasySocial.module("site/friends/list",function(e){var g=this;EasySocial.require().view("site/loading/small").library("history").script("site/friends/suggest").done(function(b){EasySocial.Controller("Friends.List",{defaultOptions:{parent:null,"{item}":"[data-friends-listItem]","{items}":"[data-friends-listItems]","{loadMoreButton}":".loadMoreButton","{loadMore}":".loadMore",view:{loader:"site/loading/small",
items:"site/friends/default.lists"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Friends.List.Item,{"{parent}":a})},removeActiveList:function(){a.item().removeClass("active")},setDefault:function(b){a.item().removeClass("default");a.item(".item-"+b).addClass("default")},"{item} click":function(c){var d=b(c).data("title"),e=b(c).data("url");History.pushState({state:1},d,e);a.parent.removeActiveFilter();a.item().removeClass("active");a.item(c).addClass("active");d=b(c).data("id");
a.parent.options.activeList=d;EasySocial.ajax("site/controllers/friends/getListFriends",{id:d},{beforeSend:function(){b(c).addClass("loading")}}).done(function(d){b(c).removeClass("loading");a.parent.updateContent(d)})},"{loadMoreButton} click":function(){var b=a.loadMoreButton().data("limitstart");a.loadMore().html(a.view.loader());EasySocial.ajax("site/controllers/friends/getLists",{limitstart:b}).done(function(b){a.loadMore().hide();a.view.items({items:b}).appendTo(a.items())})}}});EasySocial.Controller("Friends.List.Item",
{defaultOptions:{id:null,"{counter}":"[data-list-counter]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},updateCounter:function(b){a.counter().html(b)}}});EasySocial.Controller("Friends.List.Actions",{defaultOptions:{"{delete}":"[data-friendListActions-delete]","{add}":"[data-friendListActions-add]","{default}":"[data-friendListActions-default]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.title=a.element.data("title");a.options.userId=
a.element.data("userid")},"{default} click":function(){EasySocial.ajax("site/controllers/friends/setDefault",{id:a.options.id}).done(function(){a.parent.friendList().controller().setDefault(a.options.id)})},"{add} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/assignList",{id:a.options.id}),bindings:{"{insertButton} click":function(){var c=this.suggest().textboxlist("controller").getAddedItems();EasySocial.ajax("site/controllers/friends/assign",{uid:b.pluck(c,"id"),
userId:a.options.userId,listId:a.options.id}).done(function(c){b("[data-assignFriends-notice]").hide();b(c).each(function(b,c){a.parent.insertItem(c);EasySocial.dialog().close()})}).fail(function(a){b("[data-assignFriends-notice]").addClass("alert alert-error").html(a.message)})}}})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmDeleteList",{id:a.options.id}),bindings:{"{deleteButton} click":function(){b("[data-friends-list-delete-form]").submit()}}})}}});
g.resolve()})});EasySocial.module("site/friends/item",function(e){var g=this;EasySocial.require().script("site/conversations/composer").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL","COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE","COM_EASYSOCIAL_FRIENDS_CANCEL_REQUEST_DIALOG_CANCELLED").done(function(b){EasySocial.Controller("Friends.Item",{defaultOptions:{id:null,name:null,friendId:null,"{removeFromList}":"[data-lists-removeFriend]","{unfriend}":"[data-friends-unfriend]","{addfriend}":"[data-friends-addfriend]",
"{block}":"[data-friends-block]","{message}":"[data-friendItem-message]","{reject}":"[data-friendItem-reject]","{approve}":"[data-friendItem-approve]","{cancelRequest}":"[data-friendItem-cancel-request]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.name=a.element.data("name");a.options.friendId=a.element.data("friendid");a.options.avatar=a.element.data("avatar");a.initConversation()},initConversation:function(){a.message().implement(EasySocial.Controller.Conversations.Composer.Dialog,
{recipient:{name:a.options.name,id:a.options.id,avatar:a.options.avatar}})},"{removeFromList} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmRemoveFromList",{id:a.options.id}),bindings:{"{removeButton} click":function(){EasySocial.ajax("site/controllers/friends/removeFromList",{listId:a.parent.options.activeList,userId:a.options.id}).done(function(){a.parent.removeItem(a.options.id);EasySocial.dialog({title:"User removed from list",content:"The user has been removed from the list.",
buttons:[{name:"Done",classNames:"btn btn-es",click:function(){EasySocial.dialog().close()}}]})}).fail(function(a){console.log(a)})}}})},"{reject} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmReject",{id:a.options.id}),bindings:{"{rejectButton} click":function(){EasySocial.ajax("site/controllers/friends/reject",{id:a.options.friendId}).done(function(){a.parent.removeItem(a.options.id);a.parent.updateFriendsCounter();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRejected")})})}}})},
"{unfriend} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmUnfriend",{id:a.options.id}),bindings:{"{unfriendButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",{id:a.options.friendId}).done(function(){a.parent.removeItem(a.options.id);a.parent.updateFriendsCounter();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRemoved",{id:a.options.id})})})}}})},"{cancelRequest} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancelRequest",
{id:a.options.id}),bindings:{"{cancelRequestButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:a.options.friendId}).done(function(){a.parent.removeItem(a.options.id);a.parent.updateFriendRequestCount(-1);EasySocial.dialog({content:EasySocial.ajax("site/views/friends/requestCancelled",{id:a.options.id})})})}}})},"{approve} click":function(b){EasySocial.ajax("site/controllers/friends/approve",{id:a.options.friendId}).done(function(){a.parent.updateFriendsCounter();
a.element.remove()})},"{addfriend} click":function(c){EasySocial.ajax("site/controllers/friends/request",{id:a.options.id}).done(function(c){a.parent.updateFriendRequestCount(1);EasySocial.dialog({title:b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_DIALOG_TITLE"),content:b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_PENDING_APPROVAL",a.options.name)});a.parent.removeItem(a.options.id)}).fail(function(a){EasySocial.dialog({title:"Info",content:a})})},"{block} click":function(){console.log("block")}}});
g.resolve()})});EasySocial.module("site/notifications/list",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("NotificationsList",{defaultOptions:{"{item}":"[data-notifications-list-item]","{list}":"[data-notifications-list]","{allread}":"[data-notification-all-read]","{allclear}":"[data-notification-all-clear]","{notiLoadMoreBtn}":"[data-notification-loadmore-btn]"}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.NotificationsList.Item,
{"{parent}":a})},"{allread} click":function(){EasySocial.ajax("site/controllers/notifications/setAllState",{state:"read"}).done(function(){a.item().removeClass("is-read is-hidden is-unread").addClass("is-read")})},"{allclear} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/notifications/clearAllConfirm"),bindings:{"{clearButton} click":function(){EasySocial.ajax("site/controllers/notifications/setAllState",{state:"clear"}).done(function(){a.item().removeClass("is-read is-hidden is-unread is-read").addClass("is-remove");
EasySocial.dialog().close()})}}})},"{notiLoadMoreBtn} click":function(c,d){var e=b(c).data("startlimit");0>e||EasySocial.ajax("site/controllers/notifications/loadmore",{startlimit:e}).done(function(d,e){b(c).data("startlimit",e);console.log(e);0<d.length&&(b.buildHTML(d).insertBefore(a.notiLoadMoreBtn()),a.item().implement(EasySocial.Controller.NotificationsList.Item));0>e&&a.notiLoadMoreBtn().hide()}).fail(function(a){return a}).always(function(){})}}});EasySocial.Controller("NotificationsList.Item",
{defaultOptions:{"{unread}":"[data-notifications-list-item-unread]","{read}":"[data-notifications-list-item-read]","{delete}":"[data-notifications-list-item-delete]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{unread} click":function(){EasySocial.ajax("site/controllers/notifications/setState",{id:a.options.id,state:"unread"}).done(function(){a.element.removeClass("is-read is-hidden is-unread").addClass("is-unread\t")})},"{read} click":function(){EasySocial.ajax("site/controllers/notifications/setState",
{id:a.options.id,state:"read"}).done(function(){a.element.removeClass("is-read is-hidden is-unread").addClass("is-read")})},"{delete} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/notifications/clearConfirm"),bindings:{"{clearButton} click":function(){EasySocial.ajax("site/controllers/notifications/setState",{id:a.options.id,state:"clear"}).done(function(){a.element.removeClass("is-read is-hidden is-unread is-read").addClass("is-remove");EasySocial.dialog().close()}).fail(function(a){EasySocial.dialog({content:a.message})})}}})}}});
g.resolve()})});EasySocial.module("site/points/history",function(){var e=this;EasySocial.require().done(function(g){EasySocial.Controller("Points.History",{defaultOptions:{"{loadMore}":"[data-points-history-pagination]","{timeline}":"[data-points-history-timeline]"}},function(b){return{init:function(){},"{loadMore} click":function(a,c){var d=g(a).data("current");EasySocial.ajax("site/views/points/getHistory",{limitstart:d,id:b.options.id}).done(function(c,d,e){b.timeline().append(c);g(a).data("current",
d);e&&g(a).hide()})}}});e.resolve()})});EasySocial.module("site/profile/about",function(e){var g=this;EasySocial.require().script("field").done(function(b){EasySocial.Controller("Profile.About",{defaultOptions:{userid:null,"{stepItem}":"[data-profile-about-step-item]","{stepContent}":"[data-profile-about-step-content]","{fieldItem}":"[data-profile-about-fields-item]"}},function(a){return{init:function(){a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:a.options.userid,mode:"display"})},
"{stepItem} click":function(b,d){var e=b.data("for");a.stepItem().removeClass("active");b.addClass("active");a.stepContent().trigger("activateTab",[e])},"{stepContent} activateTab":function(a,b,e){b=a.data("id");a.toggleClass("active",e==b)}}});g.resolve()})});EasySocial.module("site/profile/avatar",function(e){EasySocial.Controller("Profile.Avatar",{defaultOptions:{"{menu}":"[data-avatar-menu]","{uploadButton}":"[data-avatar-upload-button]","{selectButton}":"[data-avatar-select-button]","{removeButton}":"[data-avatar-remove-button]"}},
function(e){return{init:function(){},"{uploadButton} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/uploadAvatar")})},"{selectButton} click":function(){EasySocial.photos.selectPhoto({bindings:{"{self} photoSelected":function(b,a,c){(b=c[0])&&EasySocial.photos.createAvatar(b.id)}}})},"{menu} dropdownOpen":function(){e.element.addClass("show-all")},"{menu} dropdownClose":function(){e.element.removeClass("show-all")},"{removeButton} click":function(){}}});this.resolve()});
EasySocial.module("site/profile/edit",function(e){var g=this;EasySocial.require().script("validate","field","oauth/facebook").done(function(b){EasySocial.Controller("Profile.Edit",{defaultOptions:{userid:null,"{stepContent}":"[data-profile-edit-fields-content]","{stepItem}":"[data-profile-edit-fields-step]","{profileForm}":"[data-profile-fields-form]","{profileContent}":"[data-profile-edit-fields]","{fieldItem}":"[data-profile-edit-fields-item]","{save}":"[data-profile-fields-save]","{deleteProfile}":"[data-profile-edit-delete]"}},
function(a){return{init:function(){a.fieldItem().addController("EasySocial.Controller.Field.Base",{userid:a.options.userid,mode:"edit"})},errorFields:[],"{fieldItem} error":function(b,d){a.triggerStepError(b)},"{fieldItem} clear":function(b,d){a.clearStepError(b)},"{fieldItem} onError":function(b,d){a.triggerStepError(b)},triggerStepError:function(c){var d=c.data("id");c=c.parents(a.stepContent.selector).data("id");0>b.inArray(d,a.errorFields)&&a.errorFields.push(d);a.stepItem().filterBy("for",c).trigger("error")},
clearStepError:function(c){var d=c.data("id");c=c.parents(a.stepContent.selector).data("id");a.errorFields=b.without(a.errorFields,d);a.stepItem().filterBy("for",c).trigger("clear")},"{stepItem} click":function(c,d){var e=b(c).data("for");a.profileContent().show();a.stepContent().hide();a.stepItem().removeClass("active");a.stepItem(c).addClass("active");e=a.stepContent(".step-"+e);e.show();e.find(a.fieldItem.selector).trigger("show")},"{stepItem} error":function(a){a.addClass("error")},"{stepItem} clear":function(b){1>
a.errorFields.length&&b.removeClass("error")},"{tabItem} click":function(c,d){var e=b(c).data("for");a.tabHeaderItem().hide();a.tabHeaderItem("."+e+"Header").show().addClass("active")},"{save} click":function(c,d){d.preventDefault();b(c).addClass("btn-loading");a.profileForm().validate().fail(function(){b(c).removeClass("btn-loading");EasySocial.dialog({content:EasySocial.ajax("site/views/profile/showFormError")})}).done(function(){a.profileForm().submit()});return!1},"{deleteProfile} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/profile/confirmDelete")})}}});
g.resolve()})});EasySocial.module("validate",function(e){e.isController("EasySocial.Controller.Validator")||EasySocial.Controller("Validator",{defaultOptions:{checks:["required","validate"],typeAttr:"data-check-type",formatAttr:"data-check-format",modifierAttr:"data-check-modifier",errorTrigger:"onError",submitTrigger:"onSubmit","{container}":"[data-check]","{notice}":"[data-check-notice]","{required}":"[data-check-required]","{validate}":"[data-check-validate]"}},function(g){return{vars:{},register:[],
deferreds:[],errors:[],state:e.Deferred(),init:function(){},reset:function(){g.vars={};g.register=[];g.deferreds=[];g.errors=[];g.state=e.Deferred();g.container().removeClass("error")},start:function(){g.reset();e.each(g.container(),function(b,a){g.vars.container=a=e(a);a.trigger(g.options.submitTrigger,[g.register]);e.each(g.getFields(),function(a,b){g.vars.field=b=e(b);e.each(g.options.checks,function(a,b){g.vars.check=b;g[b+"Check"]()})})});e.each(g.register,function(b,a){if(e.isDeferred(a))g.deferreds.push(a);
else if(!a)return g.errors.push(b),!0});0<g.errors.length?g.state.reject():0<g.deferreds.length?e.when.apply(null,g.deferreds).done(function(){g.state.resolve()}).fail(function(){g.state.reject()}):g.state.resolve();return g.state},getFields:function(){return e.merge(g.vars.container.find(g.required.selector),g.vars.container.find(g.validate.selector))},requiredCheck:function(){if(g.vars.field.is(g.required.selector)){var b=g.vars.field.attr(g.options.typeAttr)||g.vars.field.attr("type")||"text";
"text"===b&&""==e.trim(g.vars.field.val())&&g.raiseError();"checkbox"===b&&1>g.vars.field.find('input[type="checkbox"]').filter(":checked").length&&g.raiseError()}},validateCheck:function(){if(void 0!==g.vars.field.attr(g.options.formatAttr)){var b=g.vars.field.attr(g.options.formatAttr)||"",a=g.vars.field.attr(g.options.modifierAttr)||"";RegExp(b,a).test(g.vars.field.val())||g.raiseError()}},raiseError:function(){g.vars.container.addClass("error");g.vars.container.trigger(g.options.errorTrigger,
[g.vars.check,g.vars.field]);g.register.push(!1)}}});e.fn.validate=function(e){return 0<this.length?this.addController("EasySocial.Controller.Validator",e).start():!1};this.resolve()});EasySocial.module("site/profile/friends",function(e){var g=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_FRIENDS_DIALOG_CANCEL_REQUEST","COM_EASYSOCIAL_CANCEL_BUTTON","COM_EASYSOCIAL_YES_CANCEL_MY_REQUEST_BUTTON").done(function(b){EasySocial.Controller("Profile.Friends.Request",{defaultOptions:{id:null,
callback:null,"{addButton}":"[data-profileFriends-add]","{manageButton}":"[data-profileFriends-manage]","{pendingButton}":"[data-profileFriends-pending]","{respondButton}":"[data-profileFriends-respond]","{cancelRequest}":"[data-profileFriends-cancelRequest]","{unfriend}":"[data-friends-unfriend]","{approve}":"[data-friends-response-approve]","{reject}":"[data-friends-response-reject]","{button}":"[data-profileFriends-button]","{dropdown}":"[data-profileFriends-dropdown]",view:{loader:"site/loading/small"}}},
function(a){return{init:function(){a.options.id=a.element.data("friend");a.options.target=a.element.data("id");a.options.callback=a.element.data("callback")},showDropDown:function(){a.element.addClass("open")},hideDropDown:function(){a.element.removeClass("open")},"{addButton} click":function(b){var d=a.button();d.addClass("loading");EasySocial.ajax("site/controllers/friends/request",{id:a.options.target}).done(function(b,c){a.dropdown().remove();a.options.id=b;a.button().replaceWith(c)}).fail(function(){d.removeClass("loading")})},
"{cancelRequest} click":function(b,d){a.hideDropDown();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmCancel"),bindings:{"{confirmButton} click":function(){EasySocial.ajax("site/controllers/friends/cancelRequest",{id:a.options.id}).done(function(b){a.dropdown().remove();a.button().replaceWith(b);EasySocial.dialog().close()})}}})},"{unfriend} click":function(){EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmUnfriend",{id:a.options.id}),bindings:{"{unfriendButton} click":function(){EasySocial.ajax("site/controllers/friends/unfriend",
{id:a.options.id}).done(function(b){a.dropdown().remove();a.button().replaceWith(b);EasySocial.dialog().close()})}}})},"{approve} click":function(b,d){var e=a.options.id;a.dropdown().remove();EasySocial.ajax("site/controllers/friends/approve",{id:e}).done(function(b){a.button().replaceWith(b)})},"{reject} click":function(b,d){var e=a.options.id;a.dropdown().remove();EasySocial.dialog({content:EasySocial.ajax("site/views/friends/confirmReject"),bindings:{"{rejectButton} click":function(){EasySocial.ajax("site/controllers/friends/reject",
{id:e}).done(function(b){a.button().replaceWith(b);EasySocial.dialog({content:EasySocial.ajax("site/views/friends/friendRejected")})})}}})},"{dropdown} click":function(a,b){b.stopPropagation()},"{approveRequest} click":function(){a.respondForm().find("input[name=task]").val("approve");a.respondForm().find("input[name=id]").val(a.options.friendId);a.respondForm().find("input[name=return]").val(a.options.callback);a.respondForm().submit()}}});g.resolve()})});EasySocial.module("site/profile/header",
function(e){var g=this;EasySocial.require().script("site/profile/friends","site/profile/subscriptions","site/conversations/composer").done(function(b){EasySocial.Controller("Profile.Header",{defaultOptions:{id:null,"{friendRequest}":"[data-profile-friends]","{subscribe}":"[data-profile-followers]","{conversation}":"[data-profile-conversation]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.options.name=a.element.data("name");a.options.avatar=a.element.data("avatar");a.friendRequest().implement(EasySocial.Controller.Profile.Friends.Request,
{"{parent}":a});a.subscribe().implement(EasySocial.Controller.Profile.Subscriptions,{"{parent}":a});a.conversation().implement(EasySocial.Controller.Conversations.Composer.Dialog,{recipient:{id:a.options.id,name:a.options.name,avatar:a.options.avatar}})}}});g.resolve()})});EasySocial.module("site/profile/subscriptions",function(e){EasySocial.Controller("Profile.Subscriptions",{defaultOptions:{id:null,"{follow}":"[data-subscription-follow]","{unfollow}":"[data-subscription-unfollow]","{message}":"[data-subscription-message]",
"{button}":"[data-subscription-button]"}},function(e){return{init:function(){e.options.id=e.element.data("id")},toggleDropDown:function(){e.element.toggleClass("open")},"{unfollow} click":function(){e.toggleDropDown();EasySocial.ajax("site/controllers/profile/unfollow",{id:e.options.id,type:"user"}).done(function(b){e.button().replaceWith(b)})},"{follow} click":function(){e.toggleDropDown();EasySocial.ajax("site/controllers/profile/follow",{id:e.options.id,type:"user"}).done(function(b){e.button().replaceWith(b)})}}});
this.resolve()});EasySocial.module("site/profile/miniheader",function(e){var g=this;EasySocial.require().library("scrollTo").done(function(b){EasySocial.Controller("Profile.MiniHeader",{defaultOptions:{"{viewport}":"[data-appscroll-viewport]","{content}":"[data-appscroll-content]","{apps}":"[data-appscroll-content] li","{buttons}":"[data-appscroll-buttons]","{nextButton}":"[data-appscroll-next-button]","{prevButton}":"[data-appscroll-prev-button]"}},function(a){return{init:function(){a.setLayout();
a.viewport().scrollTo(0)},"{window} resize":b.debounce(function(){a.setLayout()},300),setLayout:function(){var c=a.viewport(),d=5;b("#es-wrap.es-main").hasClass("w480")?(a.content().css({width:"auto"}),a.enabled=!1):(a.apps().each(function(){d+=b(this).outerWidth(!0)}),d>c.width()&&(a.content().css({width:d,float:"none"}),a.buttons().css("opacity",1),a.enabled=!0))},enabled:!1,"{nextButton} click":function(){if(a.enabled){var b=a.viewport(),d=b.width()-80;b.scrollTo("+="+d+"px",800,{axis:"x",easing:"easeInOutCubic"})}},
"{prevButton} click":function(){if(a.enabled){var b=a.viewport(),d=b.width()-80;b.scrollTo("-="+d+"px",800,{axis:"x",easing:"easeInOutCubic"})}}}});g.resolve()})});EasySocial.module("site/profile/notifications",function(e){var g=this;EasySocial.require().script("site/profile/header").done(function(){EasySocial.Controller("Profile.Notifications",{defaultOptions:{"{sidebarItem}":"[data-notification-item]","{contentItem}":"[data-notification-content]","{notificationForm}":"[data-notifications-form]"}},
function(b){return{init:function(){},"{sidebarItem} click":function(a,c){b.sidebarItem().removeClass("active");a.addClass("active");b.contentItem().hide();var d=a.data("alert-element");b.contentItem('[data-alert-element="'+d+'"]').show()}}});g.resolve()})});EasySocial.module("site/profile/privacy",function(e){var g=this;EasySocial.require().script("site/profile/header").library("history","textboxlist").view("site/loading/small").done(function(b){EasySocial.Controller("Profile.Privacy",{defaultOptions:{"{sidebarItem}":"[data-profile-privacy-item]",
"{contentItem}":"[data-privacy-content]","{privacyItem}":"[data-privacy-item]","{privacyForm}":"[data-profile-privacy-form]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.sidebarItem().implement(EasySocial.Controller.Profile.Privacy.Sidebar,{"{parent}":a});a.privacyItem().implement(EasySocial.Controller.Profile.Privacy.Item,{"{parent}":a})},updateContent:function(c){a.contentItem().hide();b(".privacy-content-"+c).show()}}});EasySocial.Controller("Profile.Privacy.Sidebar",
{defaultOptions:{"{sidebarItem}":"[data-profile-privacy-item]"}},function(a){return{init:function(){},"{self} click":function(c){b("[data-profile-privacy-item]").removeClass("active");b(c).addClass("active");c=a.element.data("group");a.parent.updateContent(c)}}});EasySocial.Controller("Profile.Privacy.Item",{defaultOptions:{"{selection}":"[data-privacy-select]","{hiddenCustom}":"[data-hidden-custom]","{customForm}":"[data-privacy-custom-form]","{customTextInput}":"[data-textfield]","{customItems}":"input[]",
"{customHideBtn}":"[data-privacy-custom-hide-button]","{customInputItem}":"[data-textboxlist-item]","{customEditBtn}":"[data-privacy-custom-edit-button]"}},function(a){return{init:function(){a.customTextInput().textboxlist({unique:!0,plugin:{autocomplete:{exclusive:!0,minLength:2,cache:!1,query:function(b){var d=a.getTaggedUsers();return EasySocial.ajax("site/views/privacy/getfriends",{q:b,exclude:d})}}}});a.textboxlistLib=a.customTextInput().textboxlist("controller")},getTaggedUsers:function(){var c=
[],d=a.customInputItem();0<d.length&&b.each(d,function(a,d){c.push(b(d).data("id"))});return c},"{customTextInput} addItem":function(b,d,e){b=a.hiddenCustom().val();d="";""==b?d=e.id:(b=b.split(","),b.push(e.id),d=b.join(","));a.hiddenCustom().val(d)},"{customTextInput} removeItem":function(b,d,e){b="";b=[];d=a.hiddenCustom().val().split(",");for(var g=0;g<d.length;g++)d[g]!=e.id&&b.push(d[g]);b=0>=b.length?"":b.join(",");a.hiddenCustom().val(b)},"{customEditBtn} click":function(b){a.customForm().toggle()},
"{selection} change":function(b){"custom"==b.val()?(a.customForm().show(),a.customEditBtn().show()):(a.customForm().hide(),a.customEditBtn().hide())},"{customHideBtn} click":function(){a.customForm().hide();a.customEditBtn().show();a.textboxlistLib.autocomplete.hide()}}});g.resolve()})});EasySocial.module("site/profile/profile",function(e){var g=this;EasySocial.require().script("site/profile/header").library("history").done(function(b){EasySocial.Controller("Profile",{defaultOptions:{id:null,"{header}":"[data-profile-header]",
"{app}":"[data-profile-apps-item]","{action}":"[data-profile-apps-menu]","{contents}":"[data-profile-real-content]"}},function(a){return{init:function(){a.options.id=a.element.data("id");a.header().implement(EasySocial.Controller.Profile.Header,{"{parent}":a});a.app().implement(EasySocial.Controller.Profile.Apps.Item,{"{parent}":a})},"{app} click":function(c){a.app().removeClass("active");b(c).addClass("active")},updateContent:function(b){a.element.removeClass("loading");a.contents().html(b)},loading:function(){a.contents().html("");
a.element.addClass("loading")}}});EasySocial.Controller("Profile.Apps.Item",{defaultOptions:{}},function(a){return{init:function(){a.options.layout=a.element.data("layout");a.options.id=a.element.data("id");a.options.url=a.element.data(a.options.layout+"-url");a.options.namespace=a.element.data("namespace");a.options.title=a.element.data("title");a.options.description=a.element.data("description");a.options.appId=a.element.data("app-id")},"{self} click":function(b,d){d.preventDefault();"canvas"==
a.options.layout?window.location=a.options.url:(History.pushState({state:1},a.options.title,a.options.url),EasySocial.ajax(a.options.namespace,{id:a.options.id,view:"profile",appId:a.options.appId},{beforeSend:function(){a.parent.loading()}}).done(function(b){a.parent.updateContent(b)}).fail(function(a){return a}))}}});g.resolve()})});EasySocial.module("site/registrations/registrations",function(e){var g=this;EasySocial.require().script("validate","field").view("site/registration/dialog.error").language("COM_EASYSOCIAL_CLOSE_BUTTON",
"COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE").done(function(b){EasySocial.Controller("Registrations.Form",{defaultOptions:{previousLink:null,"{submit}":"[data-registration-submit]","{field}":"[data-registration-fields-item ]","{previous}":"[data-registration-previous]",view:{formError:"site/registration/dialog.error"}}},function(a){return{init:function(){a.field().addController("EasySocial.Controller.Field.Base",{mode:"register"})},"{previous} click":function(b,d){d.preventDefault();window.location.href=
a.options.previousLink;return!1},"{submit} click":function(c,d){d.preventDefault();b(c).addClass("btn-loading");b(a.element).validate().fail(function(){b(c).removeClass("btn-loading");EasySocial.dialog({title:b.language("COM_EASYSOCIAL_REGISTRATION_ERROR_DIALOG_TITLE"),content:a.view.formError({}),width:400,height:150,buttons:[{name:b.language("COM_EASYSOCIAL_CLOSE_BUTTON"),classNames:"btn btn-es-primary",click:function(){EasySocial.dialog().close()}}]})}).done(function(){a.element.submit()});return!1}}});
g.resolve()})});EasySocial.module("site/search/item",function(e){var g=this;EasySocial.require().view("site/loading/small").language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE").done(function(b){EasySocial.Controller("Search.Item",{defaultOptions:{"{toggle}":"[data-activity-toggle]","{deleteBtn}":"[data-activity-delete]","{addFriendButton}":"[data-search-friend-button]","{pendingFriendButton}":"[data-search-friend-pending-button]","{dropdown}":"[data-profileFriends-dropdown]",view:{loader:"site/loading/small"}}},
function(a){return{init:function(){null},"{pendingFriendButton} click":function(c){a.dropdown().html(b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_SENT_NOTICE"))},"{addFriendButton} click":function(c){var d=a.element.data("friend-uid");b(c).addClass("btn-loading");EasySocial.ajax("site/controllers/friends/request",{viewCallback:"usersRequest",id:d}).done(function(d){b(c).replaceWith(d);a.dropdown().remove();b(c).removeClass("btn-loading")}).fail(function(b){a.dropdown().html(b)})}}});g.resolve()})});
EasySocial.module("site/search/list",function(e){var g=this;EasySocial.require().view("site/loading/small").script("site/search/item").language("COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS").done(function(b){EasySocial.Controller("Search.List",{defaultOptions:{"{item}":"[data-search-item]","{pagination}":"[data-search-pagination]","{loadmorebutton}":"[data-search-loadmore-button]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.item().implement(EasySocial.Controller.Search.Item);
a.on("scroll.search",window,b._.debounce(function(){a.loading||a.pagination().visible()&&a.loadMore()},250))},"{loadmorebutton} click":function(){a.loadMore()},loadMore:function(){var c=b("[data-search-query]").val(),d=b("[data-sidebar-menu].active").data("type"),e=a.pagination().data("last-limit"),g=a.pagination().data("last-type");"-1"==e?a.loadmorebutton.hide():(a.loading=!0,EasySocial.ajax("site/controllers/search/getItems",{next_limit:e,last_type:g,type:d,q:c,loadmore:"1"},{beforeSend:function(){a.pagination().html(a.view.loadingContent())}}).done(function(c,
d,e){a.pagination().data("last-limit",e);a.pagination().data("last-type",d);a.pagination().before(c);a.item().implement(EasySocial.Controller.Search.Item);"-1"==e?a.pagination().html(""):(link='<a class="btn btn-es-primary btn-stream-updates" href="javascript:void(0);" data-search-loadmore-button><i class="ies-refresh"></i>\t'+b.language("COM_EASYSOCIAL_SEARCH_LOAD_MORE_ITEMS")+"</a>",a.pagination().html(link))}).fail(function(a){return a}).always(function(){a.loading=!1}))}}});g.resolve()})});EasySocial.module("site/search/search",
function(e){var g=this;EasySocial.require().library("history").script("site/search/sidebar","site/profile/friends").view("site/loading/small").done(function(b){EasySocial.Controller("Search",{defaultOptions:{items:null,"{container}":"[data-search]","{contentTitle}":"[data-search-content-title]","{content}":"[data-search-content]","{sidebar}":"[data-search-sidebar]","{sidebarItem}":"[data-sidebar-item]",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){a.sidebar().implement(EasySocial.Controller.Search.Sidebar,
{"{parent}":a});a.sidebarItem().implement(EasySocial.Controller.Search.Sidebar.Item,{"{parent}":a})},updatingContents:function(){a.content().html(a.view.loadingContent())},updateContent:function(b){a.content().html(b)}}});g.resolve()})});EasySocial.module("site/search/sidebar",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Search.Sidebar",{defaultOptions:{"{menuItem}":"[data-sidebar-menu]"}},function(a){return{init:function(){},"{menuItem} click":function(c,d){a.menuItem().removeClass("active");
b(c).addClass("active")}}});EasySocial.Controller("Search.Sidebar.Item",{defaultOptions:{}},function(a){return{init:function(){},"{self} click":function(c,d){var e=a.element.data("type"),g=a.element.data("url"),h=b("[data-search-query]").val();History.pushState({state:1},"",g);a.parent.updatingContents();EasySocial.ajax("site/controllers/search/getItems",{type:e,q:h}).done(function(b){a.parent.updateContent(b)}).fail(function(a){console.log(a)});a.parent.updateContent()}}});g.resolve()})});EasySocial.module("site/search/toolbar",
function(e){var g=this;EasySocial.require().library("history").view("site/loading/small").done(function(b){EasySocial.Controller("Search.Toolbar",{defaultOptions:{items:null,"{searchInput}":"[data-nav-search-input]","{seachDropdown}":"[data-nav-search-dropdown]","{searchResult}":"li.navSearchItem",view:{loadingContent:"site/loading/small"}}},function(a){return{init:function(){b(document).on("click.toolbar.search",function(c){c=c.target;c==a.element[0]||0<b(c).parents(a.element.data("directSelector")).length||
a.seachDropdown().hide()})},"{self} destroy":function(){b(document).off("click.toolbar.search")},"{searchInput} keyup":b._.debounce(function(b,d){if(!a.loading){var e=b.val();3<=e.length&&(a.loading=!0,EasySocial.ajax("site/controllers/search/getItems",{q:e,mini:"1"},{beforeSend:function(){a.seachDropdown().show();a.seachDropdown().html(a.view.loadingContent())}}).done(function(b){a.seachDropdown().html(b)}).fail(function(a){console.log(a)}).always(function(){a.loading=!1}))}},250),"{searchInput} focus":function(){cnt=
a.searchResult().length;0<cnt&&a.seachDropdown().show()}}});g.resolve()})});EasySocial.module("site/stream/item",function(){var e=this;EasySocial.require().library("dialog").done(function(g){EasySocial.Controller("Stream.Item",{defaultOptions:{id:"",context:"","{deleteFeed}":"[data-stream-delete]","{hideLink}":"[data-stream-hide]","{unHideLink}":"[data-stream-show]","{hideAppLink}":"[data-stream-hide-app]","{unHideAppLink}":"[data-stream-show-app]","{hideNotice}":"[data-stream-hide-notice]","{actions}":"[data-streamItem-actions]",
"{contents}":"[data-streamItem-contents]","{streamData}":"[data-stream-item]","{likes}":"[data-likes-action]","{counterBar}":"[data-stream-counter]","{likeContent}":"[data-likes-content]","{repostContent}":"[data-repost-content]","{share}":"[data-repost-action]","{streamCommentLink}":"[data-stream-action-comments]","{streamCommentBlock}":"[data-comments]"}},function(b){return{init:function(){b.options.id=b.element.data("id");b.options.context=b.element.data("context");b.options.ishidden=b.element.data("ishidden")},
plugins:{},"{likes} onLiked":function(a,c,d){b.counterBar().removeClass("hide")},"{likes} onUnliked":function(a,c,d){a=b.likeContent().hasClass("hide");c=b.repostContent().hasClass("hide");a&&c&&b.counterBar().addClass("hide")},"{share} create":function(a,c,d){b.counterBar().removeClass("hide")},"{streamCommentLink} click":function(){b.streamCommentBlock().toggle()},"{actions} click":function(a,c){b.actions().removeClass("active");g(a).addClass("active")},"{deleteFeed} click":function(){var a=b.options.id;
EasySocial.dialog({content:EasySocial.ajax("site/views/stream/confirmDelete"),bindings:{"{deleteButton} click":function(){EasySocial.ajax("site/controllers/stream/delete",{id:a}).done(function(a){EasySocial.dialog({content:a});b.element.fadeOut()}).fail(function(a){EasySocial.dialog({content:a})})}}})},"{hideLink} click":function(){b.streamData().addClass("es-feed-loading");EasySocial.ajax("site/controllers/stream/hide",{id:b.options.id}).done(function(a){b.streamData().removeClass("es-feed-loading");
b.streamData().hide();b.element.append(a)}).fail(function(a){})},"{hideAppLink} click":function(){EasySocial.ajax("site/controllers/stream/hideapp",{context:b.options.context}).done(function(a){b.streamData().hide();g(".stream-context-"+b.options.context).addClass("hide-stream");b.element.append(a)}).fail(function(a){console.log(a)})},"{unHideLink} click":function(){EasySocial.ajax("site/controllers/stream/unhide",{id:b.options.id}).done(function(){b.hideNotice().remove();b.streamData().show()}).fail(function(a){console.log(a)})},
"{unHideAppLink} click":function(){EasySocial.ajax("site/controllers/stream/unhideapp",{context:b.options.context}).done(function(){b.hideNotice().remove();b.streamData().show();g(".stream-context-"+b.options.context).removeClass("hide-stream")}).fail(function(a){console.log(a)})}}});e.resolve()})});EasySocial.module("site/stream/stream",function(){var e=this;EasySocial.require().script("site/stream/item").view("site/loading/small").language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS").done(function(g){EasySocial.Controller("Stream",
{defaultOptions:{interval:30,checknew:null,source:null,sourceId:null,autoload:!0,"{story}":"[data-story]","{share}":"[data-repost-action]","{list}":"[data-stream-list]","{newNotiBar}":"[data-stream-notification-bar]","{newNotiButton}":"[data-stream-notification-button]","{item}":"[data-streamItem]","{pagination}":"[data-stream-pagination]","{paginationGuest}":"[data-stream-pagination-guest]",view:{loadingContent:"site/loading/small"}}},function(b){return{init:function(){b.item().addController(EasySocial.Controller.Stream.Item);
"stream"!=b.options.source&&"unity"!=b.options.source&&!0==b.options.checknew&&b.startMonitoring();if(!0==b.options.autoload)b.on("scroll.stream",window,g._.debounce(function(){b.loading||("unity"==b.options.source?b.paginationGuest().visible()&&b.loadMoreGuest():b.pagination().visible()&&b.loadMore())},250));b.setLayout()},setLayout:function(){b.element.find("[data-es-cover]").each(function(){var a=g(this);a.height(a.width()/3)})},"{window} resize":g.debounce(function(){b.setLayout()},500),"{story} create":function(a,
c,d,e){g.buildHTML(d).prependTo(b.list()).addController("EasySocial.Controller.Stream.Item");b.list().children("li.empty").remove();b.updateCurrentDate();""!=e&&b.updateExcludeIds(e)},"{share} create":function(a,c,d){g.buildHTML(d).prependTo(b.list()).addController("EasySocial.Controller.Stream.Item");b.list().children("li.empty").remove();b.updateCurrentDate()},updateCurrentDate:function(){EasySocial.ajax("site/controllers/stream/getCurrentDate",{}).done(function(a){b.element.data("currentdate",
a)}).fail(function(a){})},updateExcludeIds:function(a){ids=b.element.data("excludeids");newIds="";newIds=""!=ids&&void 0!=ids?ids+","+a:a;b.element.data("excludeids",newIds)},clearExcludeIds:function(){b.element.data("excludeids","")},startMonitoring:function(){if(b._destroyed)return b.stopMonitoring();b.options.state=setTimeout(b.check,1E3*b.options.interval)},stopMonitoring:function(){clearTimeout(b.options.state)},"{self} destroyed":function(){b.stopMonitoring()},check:function(){b.stopMonitoring();
var a=g("[data-dashboardsidebar-menu].active").data("type"),c=g("[data-dashboardsidebar-menu].active").data("id"),d=b.element.data("currentdate"),e=b.element.data("excludeids");g.trim(b.newNotiBar().html());void 0==a&&void 0==c&&"profile"==b.options.source&&(a="me",c=b.options.sourceId);EasySocial.ajax("site/controllers/stream/checkUpdates",{type:a,id:c,currentdate:d,exclude:e,source:b.options.source,view:b.options.source},{type:"jsonp"}).done(function(a,c,d){if(b._destroyed)return b.stopMonitoring();
if(0<a.length){for(d=0;d<a.length;d++)if(item=a[d],0<item.cnt){var e="[data-stream-counter-"+item.type+"]";g(e).html(item.cnt);g(e).parents("li").addClass("has-notice")}c=g.trim(c);0<c.length&&b.newNotiBar().html(c)}b.startMonitoring()})},"{newNotiButton} click":function(a,c){var d=g(a).data("type"),e=g(a).data("uid"),h=g(a).data("since");EasySocial.ajax("site/controllers/stream/getUpdates",{type:d,id:e,currentdate:h,source:b.options.source,view:b.options.source}).done(function(a,c){var h="[data-stream-counter-",
h="list"==d?h+d+"-"+e:h+d;g(h+"]").parents("li").removeClass("has-notice");b.newNotiBar().html("");g.buildHTML(a).prependTo(b.list()).addController("EasySocial.Controller.Stream.Item");b.clearExcludeIds();b.element.data("currentdate",c)})},"{paginationGuest} click":function(){b.loadMoreGuest()},loadMoreGuest:function(){var a=b.paginationGuest(),c=a.data("nextlimit"),d=b.options.source;c&&(b.loading=!0,a.html(b.view.loadingContent({content:""})),EasySocial.ajax("site/controllers/stream/loadmoreGuest",
{startlimit:c,view:d}).done(function(c,d){a.data({nextlimit:d});c=g.buildHTML(c);c.insertBefore(a).filter(b.item.selector).addController("EasySocial.Controller.Stream.Item");""==d?a.html(""):(link='<a class="btn btn-es-primary btn-stream-updates" href="javascript:void(0);"><i class="ies-refresh"></i> '+g.language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS")+"</a>",a.html(link))}).fail(function(a){return a}).always(function(){b.loading=!1}))},"{pagination} click":function(){b.loadMore()},loadMore:function(){var a=
g("[data-dashboardsidebar-menu].active"),c=a.data("type"),a=a.data("id"),d=b.pagination(),e=d.data("startdate"),h=d.data("enddate"),n=b.options.source;e&&(void 0==c&&void 0==a&&"profile"==b.options.source&&(c="me",a=b.options.sourceId),b.loading=!0,d.html(b.view.loadingContent({content:""})),EasySocial.ajax("site/controllers/stream/loadmore",{id:a,type:c,startdate:e,enddate:h,view:n}).done(function(a,c,e){d.data({startdate:c,enddate:e});a=g.buildHTML(a);a.insertBefore(d).filter(b.item.selector).addController("EasySocial.Controller.Stream.Item");
b.setLayout();""==c?d.html(""):(link='<a class="btn btn-es-primary btn-stream-updates" href="javascript:void(0);"><i class="ies-refresh"></i> '+g.language("COM_EASYSOCIAL_STREAM_LOAD_PREVIOUS_STREAM_ITEMS")+"</a>",d.html(link))}).fail(function(a){return a}).always(function(){b.loading=!1}))}}});e.resolve()})});EasySocial.module("site/subscriptions/follow",function(){var e=this;EasySocial.require().language("COM_EASYSOCIAL_SUBSCRIPTION_INFO").done(function(g){EasySocial.Controller("Follow",{defaultOptions:{}},
function(b){return{init:function(){},"{self} click":function(){EasySocial.ajax("site/controllers/subscriptions/toggle",{uid:b.element.data("id"),type:b.element.data("type"),notify:"1"}).done(function(a,c){b.element.text(c);EasySocial.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_INFO"),content:a})}).fail(function(a){b.setMessage(a,"error")})}}});e.resolve()})});EasySocial.module("site/toolbar/conversations",function(e){var g=this;EasySocial.require().view("site/loading/small").library("tinyscrollbar").done(function(b){EasySocial.Controller("Notifications.Conversations",
{defaultOptions:{interval:30,view:{loadingIcon:"site/loading/small"},"{counter}":"[data-notificationConversation-counter]","{dropdown}":"[data-notificationConversation-dropdown]","{loader}":"[data-notificationConversation-loader]","{items}":"[data-notificationConversation-items]","{scrollBar}":"[data-notificationConversation-scrollbar]"}},function(a){return{init:function(){a.startMonitoring()},startMonitoring:function(){a.options.state=setTimeout(a.check,1E3*a.options.interval)},stopMonitoring:function(){clearTimeout(a.options.state)},
"{self} showDropdown":function(){EasySocial.ajax("site/controllers/notifications/getConversationItems",{usemax:1,beforeSend:function(){a.loader().show();a.items().hide()}}).done(function(b){a.loader().hide();a.items().html(b);a.items().show();a.scrollBar().tinyscrollbar()})},check:function(){a.stopMonitoring();setTimeout(function(){EasySocial.ajax("site/controllers/notifications/getConversationCounter",{},{type:"jsonp"}).done(function(b){0<b?(a.element.addClass("has-notice"),a.counter().html(b)):
a.element.removeClass("has-notice");a.startMonitoring()})},1E3*a.options.interval)},"{dropdown} click":function(a,b){b.stopPropagation()}}});g.resolve()})});EasySocial.module("site/toolbar/friends",function(e){var g=this;EasySocial.require().view("site/loading/small").library("tinyscrollbar").language("COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED").done(function(b){EasySocial.Controller("Notifications.Friends",{defaultOptions:{interval:3,returnURL:"",view:{loadingIcon:"site/loading/small"},"{counter}":"[data-notificationFriends-counter]",
"{dropdown}":"[data-notificationFriends-dropdown]","{loader}":"[data-notificationFriends-loader]","{loadRequestsButton}":".loadRequestsButton","{itemList}":"[data-notificationFriends-list]","{items}":".requestItem","{scrollBar}":"[data-notificationFriends-scrollbar]"}},function(a){return{init:function(){a.startMonitoring()},startMonitoring:function(){a.options.state=setTimeout(a.check,1E3*a.options.interval)},stopMonitoring:function(){clearTimeout(a.options.state)},"{self} showDropdown":function(){a.items().remove();
EasySocial.ajax("site/controllers/notifications/friendsRequests",{beforeSend:function(){a.itemList().hide();a.loader().show()}}).done(function(b){a.loader().hide();a.itemList().html(b);a.itemList().find("[data-notification-friend-item]").implement(EasySocial.Controller.Notifications.Friends.Item);a.itemList().show();a.scrollBar().tinyscrollbar()})},check:function(){a.stopMonitoring();setTimeout(function(){EasySocial.ajax("site/controllers/notifications/friendsCounter",{},{type:"jsonp"}).done(function(b){0<
b?(a.element.addClass("has-notice"),a.counter().html(b)):a.element.removeClass("has-notice");a.startMonitoring()})},1E3*a.options.interval)},"{dropdown} click":function(a,b){b.stopPropagation()}}});EasySocial.Controller("Notifications.Friends.Item",{defaultOptions:{"{actionsWrapper}":"[data-friend-item-actions]","{acceptFriend}":"[data-friend-item-accept]","{rejectFriend}":"[data-friend-item-reject]","{actions}":"[data-friend-item-action]","{title}":"[data-friend-item-title]","{mutual}":"[data-friend-item-mutual]",
view:{loader:"site/loading/small"}}},function(a){return{init:function(){},"{acceptFriend} click":function(c,d){d.stopPropagation();a.actionsWrapper().addClass("friend-adding");EasySocial.ajax("site/controllers/friends/approve",{viewCallback:"notificationsApprove",id:b(c).data("id")}).done(function(b,c){a.actionsWrapper().removeClass("friend-adding").addClass("friend-added");a.title().html(b);a.mutual().html(c)}).fail(function(b){a.element.html(b.message)})},"{rejectFriend} click":function(c,d){d.stopPropagation();
EasySocial.ajax("site/controllers/friends/reject",{id:b(c).data("id")}).done(function(c){a.actionsWrapper().html(b.language("COM_EASYSOCIAL_FRIENDS_REQUEST_REJECTED"))}).fail(function(b){a.element.html(b.message)})}}});g.resolve()})});EasySocial.module("site/toolbar/notifications",function(e){var g=this;EasySocial.require().script("site/toolbar/friends","site/toolbar/story","site/toolbar/system","site/toolbar/profile","site/toolbar/conversations").done(function(b){EasySocial.Controller("Notifications",
{defaultOptions:{friendsInterval:30,systemInterval:30,"{friendNotifications}":"[data-notifications-friends]","{conversationNotifications}":"[data-notifications-conversations]","{systemNotifications}":"[data-notifications-system]","{profileItem}":"[data-toolbar-profile]","{storyForm}":"[data-toolbar-story]","{item}":"[data-toolbar-item]"}},function(a){return{init:function(){a.profileItem().addController(EasySocial.Controller.Toolbar.Profile,{interval:a.options.systemInterval});a.systemNotifications().addController(EasySocial.Controller.Notifications.System,
{interval:a.options.systemInterval});a.friendNotifications().addController(EasySocial.Controller.Notifications.Friends,{interval:a.options.friendsInterval});a.conversationNotifications().addController(EasySocial.Controller.Notifications.Conversations,{interval:a.options.friendsInterval});a.storyForm().addController(EasySocial.Controller.Notifications.Story);a.setLayout();b("body").on("click.out-of-dropdown",function(){a.item().removeClass("open")})},"{window} resize":b.debounce(function(){a.setLayout()},
250),setLayout:function(){var c=a.element,d=c.outerWidth(!0)-80,e=0;a.item().each(function(){e+=b(this).outerWidth(!0)});d=e>d;c.toggleClass("narrow",d).toggleClass("wide",!d)},"{item} click":function(b,d){d.stopPropagation();b.hasClass("open")?(a.item().removeClass("open"),b.trigger("hideDropdown"),a.item().trigger("hideDropdown")):(a.item().removeClass("open"),b.addClass("open"),b.trigger("showDropdown"))}}});g.resolve()})});EasySocial.module("site/toolbar/story",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Notifications.Story",
{defaultOptions:{"{loadFormButton}":".loadFormButton","{dropdown}":".dropdown-menu"}},function(a){return{init:function(){},"{dropdown} click":function(a,b){},"{self} hideDropdown":function(){},"{dropdown} click":function(a,b){b.stopPropagation()}}});g.resolve()})});EasySocial.module("site/toolbar/system",function(e){var g=this;EasySocial.require().view("site/loading/small").library("tinyscrollbar").done(function(b){EasySocial.Controller("Notifications.System",{defaultOptions:{interval:30,view:{loadingIcon:"site/loading/small"},
"{counter}":"[data-notificationSystem-counter]","{dropdown}":"[data-notificationSystem-dropdown]","{loader}":"[data-notificationSystem-loader]","{items}":"[data-notificationSystem-items]","{scrollBar}":"[data-notificationSystem-scrollbar]"}},function(a){return{init:function(){a.startMonitoring()},startMonitoring:function(){a.options.state=setTimeout(a.check,1E3*a.options.interval)},stopMonitoring:function(){clearTimeout(a.options.state)},"{self} showDropdown":function(){EasySocial.ajax("site/controllers/notifications/getSystemItems",
{beforeSend:function(){a.loader().show();a.items().hide()}}).done(function(b){a.loader().hide();a.items().html(b);a.items().show();a.scrollBar().tinyscrollbar()})},check:function(){a.stopMonitoring();setTimeout(function(){EasySocial.ajax("site/controllers/notifications/getSystemCounter",{},{type:"jsonp"}).done(function(b){0<b?(a.element.addClass("has-notice"),a.counter().html(b)):a.element.removeClass("has-notice");a.startMonitoring()})},1E3*a.options.interval)},"{dropdown} click":function(a,b){b.stopPropagation()}}});
g.resolve()})});EasySocial.module("site/toolbar/profile",function(e){var g=this;EasySocial.require().done(function(b){EasySocial.Controller("Toolbar.Profile",{defaultOptions:{"{dropdown}":".dropdown-menu","{logoutForm}":"[data-toolbar-logout-form]","{logoutButton}":"[data-toolbar-logout-button]"}},function(a){return{init:function(){},logout:function(){a.logoutForm().submit()},"{logoutButton} click":function(){a.logout()},"{dropdown} click":function(a,b){b.stopPropagation()}}});g.resolve()})});EasySocial.module("site/users/users",
function(e){var g=this;EasySocial.require().library("history").view("site/loading/small").done(function(b){EasySocial.Controller("Users",{defaultOptions:{"{content}":"[data-users-content]","{listing}":"[data-users-listing]","{sort}":"[data-users-sort]","{filter}":"[data-users-filter]","{items}":"[data-users-item]",view:{loading:"site/loading/small"}}},function(a){return{init:function(){a.initUserController()},initUserController:function(){a.items().implement(EasySocial.Controller.Users.Item,{"{parent}":a})},
"{filter} click":function(c,d){d.preventDefault();a.sort().removeClass("active");a.filter().each(function(){b(this).parent().removeClass("active")});b(c).parent().addClass("active");var e=b(c).data("filter");a.options.filter=e;b(c).route();a.listing().html(a.view.loading());a.sort(":first").addClass("active");EasySocial.ajax("site/controllers/users/getUsers",{filter:e,showpagination:1}).done(function(b){a.content().html(b);a.initUserController()})},"{sort} click":function(c,d){d.preventDefault();
var e=b(c).data("type");b(c).route();a.sort().removeClass("active");b(c).addClass("active");a.listing().html(a.view.loading());EasySocial.ajax("site/controllers/users/getUsers",{sort:e,filter:a.options.filter,isSort:!0,showpagination:0}).done(function(b){a.listing().html(b);a.initUserController()})}}});EasySocial.Controller("Users.Item",{defaultOptions:{id:null,"{addFriend}":"[data-users-add-friend]","{friendsButton}":"[data-users-friends-button]","{compose}":"[data-users-friends-compose]","{unfriend}":"[data-users-friends-unfriend]"}},
function(a){return{init:function(){a.options.id=a.element.data("id")},"{addFriend} click":function(c,d){b(c).addClass("btn-loading");EasySocial.ajax("site/controllers/friends/request",{viewCallback:"usersRequest",id:a.options.id}).done(function(a){b(c).replaceWith(a);b(c).removeClass("btn-loading")})}}});g.resolve()})});EasySocial.module("story",function(e){var g=this;EasySocial.require().language("COM_EASYSOCIAL_WITH_FRIENDS","COM_EASYSOCIAL_AND_ONE_OTHER","COM_EASYSOCIAL_AND_MANY_OTHERS","COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR").view("apps/user/links/story.attachment.item",
"apps/user/locations/suggestion","site/albums/upload.item").done();EasySocial.require().library("expanding").script("site/stream/item").language("COM_EASYSOCIAL_STORY_SUBMIT_ERROR","COM_EASYSOCIAL_STORY_CONTENT_EMPTY").done(function(){EasySocial.Controller("Story",{defaultOptions:{plugin:{},attachment:{limit:1,lifo:!0},"{header}":"[data-story-header]","{body}":"[data-story-body]","{footer}":"[data-story-footer]","{form}":"[data-story-form]","{textField}":"[data-story-textField]:not(.shadow)","{target}":"[data-story-target]",
"{submitButton}":"[data-story-submit]","{privacyButton}":"[data-story-privacy]","{panelContents}":"[data-story-panel-contents]","{panelContent}":"[data-story-panel-content]","{panelButton}":"[data-story-panel-button]","{attachmentContainer}":"[data-story-attachment-container]","{attachmentIcon}":"[data-story-attachment-icon]","{attachmentButtons}":"[data-story-attachment-buttons]","{attachmentButton}":"[data-story-attachment-button]","{attachmentItems}":"[data-story-attachment-items]","{attachmentItem}":"[data-story-attachment-item]",
"{attachmentContent}":"[data-story-attachment-content]","{attachmentToolbar}":"[data-story-attachment-toolbar]","{attachmentDragHandle}":"[data-story-attachment-drag-handle]","{attachmentRemoveButton}":"[data-story-attachment-remove-button]","{attachmentClearButton}":"[data-story-attachment-clear-button]","{streamContainer}":"[data-streams]","{streamItem}":"[data-streamItem]"},hostname:"story"},function(b){return{init:function(){window.___story=b;b.id=b.element.data("story");e.each(b.options.plugin,
function(a,c){var d=b.plugins[a]=c;"attachment"==d.type&&b.attachments.max++;d.selector=b.getPluginSelector(a)});e.module("story-"+b.id).resolve(b)},"{textField} click":function(a){var c=b.element;c.hasClass("active")||(c.addClass("active"),a.expandingTextarea().focus(),setTimeout(function(){c.addTransitionClass("no-transition").addClass("expanded")},500))},plugins:{},getPluginName:function(a){return e(a).data("story-plugin-name")},getPluginSelector:function(a){return"[data-story-plugin-name="+a+
"]"},hasPlugin:function(a,c){var d=b.plugins[a];return d?c?d.type===c:!0:!1},buildPluginSelectors:function(a,c,d){var f={};e.each(a,function(a,e){var g=b[e].selector+c.selector;"function"==d?f[e]=function(){return b.find(g)}:f["{"+e+"}"]=g});return f},"{self} addPlugin":function(a,c,d,f,g,h){if(b.hasPlugin(d)){a=b.plugins[d];c={};switch(a.type){case "attachment":c=b.buildPluginSelectors("attachmentIcon attachmentButton attachmentItem attachmentContent attachmentToolbar attachmentDragHandle attachmentRemoveButton".split(" "),
a,h);break;case "panel":c=b.buildPluginSelectors(["panelButton","panelContent"],a,h)}e.extend(g,c)}},"{self} registerPlugin":function(a,c,d,e){b.hasPlugin(d)&&(b.plugins[d].instance=e)},panels:{},currentPanel:null,getPanel:function(a){if(b.hasPlugin(a,"panel"))return a=b.plugins[a],b.panels[a.name]||(b.panels[a.name]={plugin:a,button:b.panelButton(a.selector),content:b.panelContent(a.selector)})},togglePanel:function(a){var c=b.currentPanel;c&&b.deactivatePanel(c);c!==a&&b.activatePanel(a)},activatePanel:function(a){var c=
b.getPanel(a);if(c){b.deactivatePanel(b.currentPanel);var d=b.panelContents();d.addClass("active");c.button.addClass("active");c.content.appendTo(d).addClass("active");b.invokePlugin(a,"activatePanel",[c]);b.trigger("activatePanel",[a])}},deactivatePanel:function(a){var c=b.getPanel(a);c&&(c.button.removeClass("active"),c.content.removeClass("active"),b.panelContents().removeClass("active"),b.invokePlugin(a,"deactivatePanel",[c]),b.trigger("deactivatePanel",[a]))},addPanelCaption:function(a,c){var d=
b.getPanel(a);d&&d.button.addClass("has-data").find(".with-data").html(c)},removePanelCaption:function(a){(a=b.getPanel(a))&&a.button.removeClass("has-data").find(".with-data").empty()},"{self} activatePanel":function(a,c,d){b.currentPanel=d},"{self} deactivatePanel":function(a,c,d){b.currentPanel===d&&(b.currentPanel=null)},"{panelButton} click":function(a,c){var d=b.getPluginName(a);b.togglePanel(d)},attachments:{length:0,max:0},currentAttachment:null,getAttachment:function(a){if(b.hasPlugin(a,
"attachment"))return b.attachments[a]},addAttachment:function(a){if(!b.hasPlugin(a,"attachment"))return!1;var c=b.plugins[a],d=b.attachments,e=d[a];if(e)return e;var g=function(){var e={plugin:c,button:b.attachmentButton(c.selector),icon:b.attachmentIcon(c.selector)};e.item=b.attachmentItem(c.selector).prependTo(b.attachmentItems());d[c.name]=e;d.length++;b.invokePlugin(a,"addAttachment",[e]);b.trigger("addAttachment",[e])},h=b.options.attachment,p=h.lifo;if(0<h.limit&&d.length>=h.limit)return p?
(g(),g=b.getPluginName(b.attachmentItem(":last")),b.removeAttachment(g),e):!1;g();return e},removeAttachment:function(a){var c=b.getAttachment(a);if(c)return b.invokePlugin(a,"removeAttachment",[c]),b.trigger("removeAttachment",[c]),c.icon.removeClass("active"),c.button.removeClass("active"),setTimeout(function(){c.item.removeClass("active")},0),delete b.attachments[a],b.attachments.length--,b.invokePlugin(a,"destroyAttachment",[c]),b.trigger("destroyAttachment",[c]),c},clearAttachment:function(){var a=
e.map(b.attachments,function(a,d){if(!/length|max/.test(d))return b.removeAttachment(d),d});b.trigger("clearAttachment",[a])},activateAttachment:function(a){var c=b.getAttachment(a);c&&(b.deactivateAttachment(b.currentAttachment),c.icon.addClass("active"),c.button.addClass("active"),setTimeout(function(){c.item.addClass("active")},0),b.invokePlugin(a,"activateAttachment",[c]),b.trigger("activateAttachment",[c]))},deactivateAttachment:function(a){var c=b.attachments[a];c&&(c.icon.removeClass("active"),
c.button.removeClass("active"),setTimeout(function(){c.item.removeClass("active")},0),b.invokePlugin(a,"deactivateAttachment",[c]),b.trigger("deactivateAttachment",[c]))},"{self} activateAttachment":function(a,c,d){a=d.plugin.name;b.currentAttachment=a;b.body().addClass("active");b.element.addClass("attaching-"+a)},"{self} deactivateAttachment":function(a,c,d){a=d.plugin.name;b.currentAttachment===a&&(b.currentAttachment=null);b.body().removeClass("active");b.element.removeClass("attaching-"+a)},
"{attachmentButton} click":function(a,c){var d=b.getPluginName(a);"text"==d?(a.addClass("active"),b.textField().focus()):(b.getAttachment(d)||b.addAttachment(d))&&b.activateAttachment(d)},"{attachmentClearButton} click":function(){b.clearAttachment()},"{self} addAttachment":function(a,c,d){a=d.plugin.name;b.attachmentButton(".for-text").removeClass("active");b.activateAttachment(a)},"{self} removeAttachment":function(a,c,d){b.element.removeClass("attaching-"+d.plugin.name)},"{self} destroyAttachment":function(a,
c,d){1>b.attachments.length&&(b.body().removeClass("active"),b.attachmentButton(".for-text").addClass("active"))},"{attachmentRemoveButton} click":function(a,c){var d=b.getPluginName(a);b.removeAttachment(d)},saving:!1,save:function(){if(!b.saving){b.saving=!0;var a=e.Deferred();a.data={};a.tasks=[];a.addData=function(c,d){var f=c.options.name;if("attachment"==c.options.type){if(f!==b.currentAttachment)return;a.data.attachment=b.currentAttachment}e.isPlainObject(d)?e.each(d,function(b,c){a.data[f+
"_"+b]=c}):a.data[f]=d};a.addTask=function(b){var d=e.Deferred();d.name=b;d.save=a;a.tasks.push(d);return d};a.process=function(){"pending"===a.state()&&e.when.apply(e,a.tasks).done(function(){a.data.content||a.data.attachment?a.resolve():a.reject(e.language("COM_EASYSOCIAL_STORY_CONTENT_EMPTY"),"warning")}).fail(a.reject);return a};b.clearMessage();b.trigger("save",[a]);b.element.addClass("saving");a.process().done(function(){EasySocial.ajax("site/controllers/story/create",a.data).done(function(){b.trigger("create",
arguments);b.clear()}).fail(function(a){b.trigger("fail",arguments);a&&b.setMessage(a.message,a.type)}).always(function(){b.element.removeClass("saving");b.saving=!1})}).fail(function(a,d){a||(a=e.language("COM_EASYSOCIAL_STORY_SUBMIT_ERROR"),d="error");b.setMessage(a,d);b.element.removeClass("saving");b.saving=!1})}},clear:function(){b.textField().val("");b.trigger("clear");b.deactivateAttachment(b.currentAttachment);b.deactivatePanel(b.currentPanel);b.attachmentButton(".for-text").addClass("active");
b.clearMessage();b.textField().focus().expandingTextarea("resize")},"{self} save":function(a,c,d){a=e.trim(b.textField().val());d.data.content=a;d.data.target=b.target().val();d.data.privacy=b.find("[data-privacy-hidden]").val();d.data.privacyCustom=b.find("[data-privacy-custom-hidden]").val()},"{submitButton} click":function(a,c){b.save()},"{privacyButton} click":function(a){setTimeout(function(){var c=a.find("[data-es-privacy-container]").hasClass("active");b.footer().toggleClass("allow-overflow",
c)},1)}}});g.resolve()})});EasySocial.module("story/friends",function(e){var g=this;EasySocial.require().library("textboxlist").language("COM_EASYSOCIAL_WITH_FRIENDS","COM_EASYSOCIAL_AND_ONE_OTHER","COM_EASYSOCIAL_AND_MANY_OTHERS").done(function(){EasySocial.Controller("Story.Friends",{defaultOptions:{"{friendList}":".es-story-friends-textbox",showSummary:!1,summarizeNamesAfter:2,concatNamesWith:", "}},function(b){return{init:function(){b.friendList().textboxlist({plugin:{autocomplete:{exclusive:!0,
cache:!1,query:b.search,filterItem:b.createMenuItem}}})},search:function(a){var c=b.getTaggedUsers();return EasySocial.ajax("site/controllers/friends/suggest",{search:a,exclude:c})},getTaggedUsers:function(){var a=[],b=e("[data-textboxlist-item]");0<b.length&&e.each(b,function(b,c){a.push(e(c).data("id"))});return a},createMenuItem:function(a,b){a.title=a.screenName;var d=e(new Image).addClass("textboxlist-menu-avatar").attr({src:a.avatar}).toHTML();a.html=d+" "+a.title;a.menuHtml=d+" "+a.title;return a},
updatePanelCaption:function(){var a=b.options,c=b.friendList().controller("textboxlist").getAddedItems(),d=c.length,f=a.summarizeNamesAfter,g=Math.max(f-1,d-1),f=d-f;a.showFriendSummary&&(d=e.language("COM_EASYSOCIAL_WITH_FRIENDS",e.map(c.slice(0,g),function(a){return a.screenName}).join(a.concatNamesWith)),1==f&&(d+=e.language("COM_EASYSOCIAL_AND_ONE_OTHER")),1<f&&(d+=e.language("COM_EASYSOCIAL_AND_MANY_OTHERS",f)));b.story.addPanelCaption("friends",d)},"{friendList} addItem":function(){b.updatePanelCaption()},
"{friendList} removeItem":function(){b.updatePanelCaption()},mention:function(a,c,d){b.search(c).done(function(a){var b=[];e.each(a,function(a,c){b.push({id:c.id,name:c.screenName,avatar:c.avatar,type:"contact"})});d(b)})},"{story} save":function(a,c,d){a=b.friendList().controller("textboxlist").getAddedItems().map(function(a){return a.id});d.addData(b,{tags:a})},"{story} clear":function(){b.friendList().controller("textboxlist").clearItems()}}});g.resolve()})});EasySocial.module("story/links",function(e){var g=
this;EasySocial.require().view("apps/user/links/story.attachment.item").done(function(){EasySocial.Controller("Story.Links",{defaultOptions:{view:{linkItem:"apps/user/links/story.attachment.item"},urlParser:/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi,"{linkForm}":"[data-story-link-form]","{linkInput}":"[data-story-link-input]","{linkContent}":"[data-story-link-content]","{linkItem}":"[data-story-link-item]","{linkTitle}":"[data-story-link-title]","{linkDescription}":"[data-story-link-description]",
"{linkImages}":"[data-story-link-images]","{linkImage}":"[data-story-link-image]","{titleTextfield}":"[data-story-link-title-textfield]","{descriptionTextfield}":"[data-story-link-description-textfield]","{attachButton}":"[data-story-link-attach-button]","{removeButton}":"[data-story-link-remove-button]","{removeThumbnail}":"[data-story-link-remove-image]"}},function(b){return{init:function(){},activateAttachment:function(){b.doNotFocus||setTimeout(function(){b.linkInput().focus();b.doNotFocus=!1},
500)},links:{},currentLink:null,crawling:!1,extractUrls:function(a){a=a.match(b.options.urlParser);return e.isArray(a)?e.map(a,function(a,b){return e.trim(a)}):[]},getLink:function(a){e.isString(a)&&(a=b.extractUrls(a));if(!(0>a.length))return a=a[0],link=b.links[a]||b.createLink(a)},createLink:function(a){var c=b.links[a]=e.Deferred();c.url=a;b.crawling=!0;EasySocial.ajax("site/controllers/crawler/fetch",{urls:[a]}).done(function(d){(d=d[a])||c.reject();c.info=d;var e=d.opengraph||{};c.data={title:e.title||
d.title,desc:e.desc||d.description,url:a,images:e.image?[e.image]:d.images};c.item=b.view.linkItem(c.data).data("link",c);c.item.addController("EasySocial.Controller.Story.Links.Item");c.resolve(c)}).fail(function(){c.reject()}).always(function(){b.crawling=!1});return c},addLink:function(a){b.linkContent().empty().append(a.item);b.linkForm().hide();b.currentLink=a},removeLink:function(){b.linkItem().detach();b.linkForm().show();b.currentLink=null},"{attachButton} click":function(){b.linkInput();
var a=b.linkForm(),c=e.trim(b.linkInput().val());""!==c&&(c=e.uri(c),/http|https/.test(c.protocol())||c.setProtocol("http"),c=c.toString(),b.linkInput().val(c),a.addClass("busy"),b.getLink(c).done(function(a){b.addLink(a)}).always(function(){a.removeClass("busy")}))},"{removeButton} click":function(a){b.currentLink.disabled=!0;b.removeLink()},"{story.textField} keypress":e._.debounce(function(a,c){if(!b.currentLink&&!b.crawling){var d=a.val();if(d=b.extractUrls(d)[0]){var e=b.links[d];e&&e.disabled||
(b.linkInput().val(d),b.doNotFocus=!0,b.attachmentButton().click(),b.attachButton().click())}}},750),"{story} save":function(a,c,d){b.currentLink&&(a={title:b.titleTextfield().val(),description:b.descriptionTextfield().val(),url:b.currentLink.url},b.removeThumbnail().is(":checked")||(a.image=b.linkImage(".active").attr("src")),d.addData(b,a))},"{story} clear":function(){b.linkInput().val("");b.removeLink()}}});EasySocial.Controller("Story.Links.Item",{defaultOptions:{"{previousImage}":"[data-story-link-image-prev]",
"{nextImage}":"[data-story-link-image-next]","{image}":"[data-story-link-image]","{imagesWrapper}":"[data-story-link-images]","{imageIndex}":"[data-story-link-image-index]","{removeThumbnail}":"[data-story-link-remove-image]","{title}":"[data-story-link-title]","{description}":"[data-story-link-description]","{titleTextfield}":"[data-story-link-title-textfield]","{descriptionTextfield}":"[data-story-link-description-textfield]"}},function(b){return{init:function(){},"{removeThumbnail} click":function(){var a=
b.removeThumbnail().is(":checked");a?b.imagesWrapper().hide():b.imagesWrapper().show();b.element.toggleClass("has-images",!a)},"{previousImage} click":function(){var a=b.image(".active").prev(),c=b.image(".active"),d=parseInt(b.imageIndex().html())-1;0<a.length&&(e(c).removeClass("active"),e(a).addClass("active"),b.imageIndex().html(d))},"{nextImage} click":function(){var a=b.image(".active").next(),c=b.image(".active"),d=parseInt(b.imageIndex().html())+1;0<a.length&&(e(c).removeClass("active"),e(a).addClass("active"),
b.imageIndex().html(d))},"{title} click":function(){var a=b.element.hasClass("editing-title");b.element.toggleClass("editing-title",!a);a||b.editTitle()},editTitleEvent:"click.es.story.editLinkTitle",editTitle:function(){b.element.addClass("editing-title");setTimeout(function(){b.titleTextfield().val(b.title().text()).focus()[0].select();e(document).on(b.editTitleEvent,function(a){a.target!==b.titleTextfield()[0]&&b.saveTitle("save")})},1)},saveTitle:function(a){a||(a=save);var c=b.titleTextfield().val();
switch(a){case "save":""===c&&(c=b.title().data("default")),b.title().html(c)}b.element.removeClass("editing-title");e(document).off(b.editTitleEvent)},"{titleTextfield} keyup":function(a,c){27==c.keyCode&&b.saveTitle("revert")},"{description} click":function(){var a=b.element.hasClass("editing-description");b.element.toggleClass("editing-description",!a);a||b.editDescription()},editDescriptionEvent:"click.es.story.editLinkDescription",editDescription:function(){b.element.addClass("editing-description");
setTimeout(function(){var a=b.description().clone(),c=a.hasClass("no-description");a.wrapInner(b.descriptionTextfield());c&&b.descriptionTextfield().val("");b.descriptionTextfield().expandingTextarea();b.descriptionTextfield().focus()[0].select();e(document).on(b.editDescriptionEvent,function(a){a.target!==b.descriptionTextfield()[0]&&b.saveDescription("save")})},1)},saveDescription:function(a){a||(a=save);var c=b.descriptionTextfield().val().replace(/\n/g,"<br//>");switch(a){case "save":a=""===c,
b.description().toggleClass("no-description",a),a&&(c=b.descriptionTextfield().attr("placeholder")),b.description().html(c)}b.descriptionTextfield().expandingTextarea("destroy");b.element.find(".textareaClone").remove();b.element.removeClass("editing-description");e(document).off(b.editDescriptionEvent)},"{descriptionTextfield} keyup":function(a,c){27==c.keyCode&&b.saveDescription("revert")}}});g.resolve()})});EasySocial.module("story/locations",function(e){var g=this;EasySocial.require().library("gmaps",
"scrollTo").view("apps/user/locations/suggestion").language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR").done(function(){EasySocial.Controller("Story.Locations",{defaultOptions:{view:{suggestion:"apps/user/locations/suggestion"},map:{lat:0,lng:0},"{form}":"[data-story-location-form]","{textField}":"[data-story-location-textField]","{detectButton}":"[data-story-location-detect-button]","{autocomplete}":"[data-story-location-autocomplete]","{suggestions}":"[data-story-location-suggestions]","{suggestion}":"[data-story-location-suggestion]",
"{viewport}":"[data-story-location-viewport]","{textbox}":"[data-story-location-textbox]","{removeButton}":"[data-story-location-remove-button]"}},function(b){return{init:function(){navigator.geolocation&&b.detectButton().show();b.textField().removeAttr("disabled")},"{window} resize":e.debounce(function(){var a=b.currentLocation;if(a){var c=b.viewport();c.data("width")!==c.width()&&(c=a.geometry.location,a=c.lat(),c=c.lng(),b.navigate(a,c))}},250),navigate:function(a,c){var d=b.viewport(),f=d.width(),
d=d.height(),g=e.GMaps.staticMapURL({size:[f,d],lat:a,lng:c,markers:[{lat:a,lng:c}]});b.viewport().css({backgroundImage:e.cssUrl(g)}).data({width:f,height:d});b.form().addClass("has-location")},locations:{},lastQueryAddress:null,"{textField} keypress":function(a,c){switch(c.keyCode){case 38:var d=e(b.suggestion(".active").prev(b.suggestion.selector)[0]||b.suggestion(":last")[0]);b.suggestion().removeClass("active");d.addClass("active").trigger("activate");b.suggestions().scrollTo(d,{offset:-1*d.height()});
c.preventDefault();break;case 40:d=e(b.suggestion(".active").next(b.suggestion.selector)[0]||b.suggestion(":first")[0]);b.suggestion().removeClass("active");d.addClass("active").trigger("activate");b.suggestions().scrollTo(d,{offset:-1*d.height()});c.preventDefault();break;case 13:d=b.suggestion(".active").data("location");b.set(d);b.hideSuggestions();break;case 27:b.hideSuggestions()}},"{textField} keyup":function(a,c){switch(c.keyCode){case 38:case 40:case 37:case 39:case 13:case 27:break;default:var d=
e.trim(a.val());""===d&&(b.form().removeClass("has-location"),b.hideSuggestions());var f=b.locations[d];f?(b.lastQueryAddress=d,b.suggest(f)):b.lookup(d)}},lookup:e._.debounce(function(a){b.textbox().addClass("busy");e.GMaps.geocode({address:a,callback:function(c,d){b.textbox().removeClass("busy");"OK"==d&&(b.locations[a]=c,b.suggest(c),b.lastQueryAddress=a)}})},250),suggest:function(a){var c=b.suggestions();c.empty();0>a.length||(e.each(a,function(a,e){b.view.suggestion({location:e}).data("location",
e).appendTo(c)}),b.showSuggestions())},showSuggestions:function(){b.focusSuggestion=!0;b.element.find(".es-story-footer").addClass("swap-zindex");setTimeout(function(){b.autocomplete().addClass("active")},500)},hideSuggestions:function(){b.focusSuggestion=!1;b.autocomplete().removeClass("active");setTimeout(function(){b.focusSuggestion||b.element.find(".es-story-footer").removeClass("swap-zindex")},500)},"{suggestion} activate":function(a,c){var d=a.data("location");b.navigate(d.geometry.location.lat(),
d.geometry.location.lng())},"{suggestion} mouseover":function(a){b.suggestion().removeClass("active");a.addClass("active").trigger("activate")},"{suggestion} click":function(a,c){var d=a.data("location");b.set(d);b.hideSuggestions()},set:function(a){b.currentLocation=a;b.navigate(a.geometry.location.lat(),a.geometry.location.lng());var c=a.formatted_address;b.textField().val(c);b.lastQueryAddress=c;b.story.addPanelCaption("locations",a.formatted_address);b.form().addClass("has-location")},unset:function(){b.currentLocation=
null;b.textField().val("");b.story.removePanelCaption("locations");b.viewport().css("backgroundImage","");b.form().removeClass("has-location")},activatePanel:function(){setTimeout(function(){b.textField().focus()},500)},deactivatePanel:function(){var a=b.currentLocation;a&&b.set(a)},detectTimer:null,"{detectButton} click":function(){var a=b.story,c=b.textbox();c.addClass("busy");clearTimeout(b.detectTimer);b.detectTimer=setTimeout(function(){a.setMessage(e.language("COM_EASYSOCIAL_LOCATION_PERMISSION_ERROR"));
c.removeClass("busy")},8E3);e.GMaps.geolocate({success:function(c){a.clearMessage();e.GMaps.geocode({lat:c.coords.latitude,lng:c.coords.longitude,callback:function(a,c){"OK"==c&&(b.suggest(a),b.textField().focus())}})},error:function(b){a.setMessage(b.message,"error")},always:function(){clearTimeout(b.detectTimer);c.removeClass("busy")}})},"{removeButton} click":function(){b.unset();b.hideSuggestions()},"{story} save":function(a,c,d){(a=b.currentLocation)&&d.addData(b,{short_address:a.address_components[0].long_name,
formatted_address:a.formatted_address,lat:a.geometry.location.lat(),lng:a.geometry.location.lng()})},"{story} clear":function(){b.unset();b.hideSuggestions()}}});g.resolve()})});EasySocial.module("story/photos",function(e){var g=this;EasySocial.require().script("albums/uploader").done(function(){EasySocial.Controller("Story.Photos",{defaultOptions:{"{albumView}":"[data-album-view]","{albumContent}":"[data-album-content]","{uploadButton}":"[data-album-upload-button]","{photoItemGroup}":"[data-photo-item-group]",
"{photoItem}":"[data-photo-item]","{photoImage}":"[data-photo-image]","{photoRemoveButton}":"[data-photo-remove-button]","{uploadItem}":"[data-photo-upload-item]"}},function(b){return{init:function(){b.uploader=b.albumView().addController(EasySocial.Controller.Albums.Uploader,e.extend({"{uploadButton}":b.uploadButton.selector,"{uploadItemGroup}":b.photoItemGroup.selector,"{uploadDropsite}":b.albumContent.selector},{settings:b.options.uploader}));b.photoItemGroup().css("opacity",1);b.addPlugin("uploader",
b.uploader);b.setLayout()},hasItems:function(){var a=0<b.photoItem().length,c=0<b.uploadItem().length;return a||c},setLayout:function(){b.albumView().toggleClass("has-photos",b.hasItems())},activateAttachment:function(){},removePhoto:function(a){b.photoItem().filterBy("photoId",a).remove();b.setLayout()},clearPhoto:function(){b.photoItem().remove();b.setLayout()},"{uploader} FilesAdded":function(){b.setLayout();b.uploader.start()},"{uploader} FileUploaded":function(a,c,d,f,g){a=b.uploader.getItem(f);
var h=e(e.parseHTML(e.trim(g.html)));photoData=g.data;h.data("photo",photoData).addClass("new-item").insertAfter(a.element);b.uploader.removeItem(f.id);b.setLayout();setTimeout(function(){h.removeClass("new-item")},1);b.save()},"{uploader} FileError":function(a,c,d,e,g){b.story.setMessage(g.message,"error");if(a=b.uploadingPhoto)a.reject(),delete b.uploadingPhoto},"{uploader} Error":function(a,c,d,e){b.story.setMessage(e.message,"error");if(a=b.uploadingPhoto)a.reject(),delete b.uploadingPhoto},"{photoRemoveButton} click":function(a){a=
a.parent(b.photoItem.selector).data("photoId");b.removePhoto(a)},"{story} save":function(a,c,d){b.hasItems()&&(b.uploadingPhoto=d.addTask("uploadingPhoto"),b.save())},save:function(){var a=b.uploadingPhoto;if(a&&1>b.uploadItem().length){var c=[],d=a.save;b.photoItem().each(function(){c.push(e(this).data("photoId"))});d.addData(b,c);a.resolve();delete b.uploadingPhoto}},"{story} clear":function(){b.clearPhoto()}}});g.resolve()})});EasySocial.module("stream",function(){var e=this;EasySocial.require().library("dialog").script("comment").view("site/likes/item").language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE",
"COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE","COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBSCRIBE","COM_EASYSOCIAL_STREAM_DIALOG_FEED","COM_EASYSOCIAL_STREAM_BUTTON_CLOSE").done(function(g){EasySocial.Controller("Stream.Item",{defaultOptions:{id:"","{streamItem}":".streamItem",
"{streamData}":".streamData","{streamResponds}":".stream-responds","{likeItem}":".likeItem","{likeItemList}":".likeItemList","{commentLink}":".commentLink","{commentFrame}":".commentFrame","{commentInput}":".commentInput","{followItem}":".followItem","{unfollowItem}":".unfollowItem","{hideItem}":".hideItem","{unhideItem}":".unhideItem"}},function(b){return{init:function(){b.commentFrame().implement("EasySocial.Controller.Comments",{uid:b.element.data("id"),pagination:new CommentPagination({total:b.commentFrame().data("total")}),
commentlist:new Comment.List})},"{likeItem} click":function(){EasySocial.ajax("site:/controllers/likes/toggle",{id:b.element.data("id"),type:"stream"},{success:function(a){var c="";0<a.likeCount&&(c=b.view.likeitem({likeCount:a.likeCount}),c.find(".likeText").html(a.message));b.likeItemList().html(c);b.likeItem().text(a.label)},fail:function(){}})},"{unfollowItem} click":function(){var a=b.element.data("sid");a&&g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE"),content:g.language("COM_EASYSOCIAL_SUBSCRIPTION_ARE_YOU_SURE_UNSUBSCRIBE"),
buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_UNSUBSCRIBE"),click:function(){EasySocial.ajax("site:/controllers/subscriptions/remove",{id:a},{success:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_UNSUBSCRIBE"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK"),click:function(){b.unfollowItem().removeClass("unfollowItem");g.dialog().close()}}]})},fail:function(){}})}},{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),
click:function(){g.dialog().close()}}]})},"{followItem} click":function(){EasySocial.ajax("site:/controllers/subscriptions/form",{contentId:b.element.data("id"),contentType:"stream"},{success:function(a){""!=a.message?g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),click:function(){g.dialog().close()}}]}):g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:a.htmlform,
buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_SUBMIT"),click:function(){var a=g("#esfullname").val(),d=g("#email").val();EasySocial.ajax("site:/controllers/subscriptions/add",{contentId:b.element.data("id"),contentType:"stream",esfullname:a,email:d},{success:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_SUBSCRIPTION_DIALOG_SUBSCRIBE"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_OK"),click:function(){b.followItem().removeClass("followItem");
g.dialog().close()}}]})},fail:function(){}})}},{name:g.language("COM_EASYSOCIAL_SUBSCRIPTION_BUTTON_CANCEL"),click:function(){g.dialog().close()}}]})},fail:function(){}})},"{hideItem} click":function(){EasySocial.ajax("site:/controllers/stream/hide",{id:b.element.data("id")},{success:function(a){a="<div>"+a.message+"</div>";b.streamData().hide();b.element.append(a)},fail:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_STREAM_DIALOG_FEED"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_STREAM_BUTTON_CLOSE"),
click:function(){g.dialog().close()}}]})}})},"{unhideItem} click":function(){EasySocial.ajax("site:/controllers/stream/unhide",{id:b.element.data("id")},{success:function(a){b.streamData().show();b.element.children().last().remove()},fail:function(a){g.dialog({title:g.language("COM_EASYSOCIAL_STREAM_DIALOG_FEED"),content:a.message,buttons:[{name:g.language("COM_EASYSOCIAL_STREAM_BUTTON_CLOSE"),click:function(){g.dialog().close()}}]})}})},"{commentLink} click":function(){b.commentInput().focus()}}});
e.resolve()})});EasySocial.module("tab",function(e){EasySocial.Controller("Tab",{defaultOptions:{view:{},"{tabs}":"","{tabsContent}":"","{defaultActive}":""}},function(g){return{init:function(){console.log("Tabs loaded");g.defaultActive().click()},"{tabs} click":function(b){if(e(b).hasClass("inactive"))return!1;g.tabs(".active").removeClass("active");e(b).addClass("active");g.tabsContent().hide();b=".tab-"+e(b).attr("id");g.tabsContent(b).show()}}});this.resolve()});EasySocial.module("toggle",function(e){EasySocial.Controller("Toggle",
{defaultOptions:{view:{},"{selector}":""}},function(g){return{init:function(){console.log("Toggle loaded")},"{selector} click":function(b){e(b).next().toggle();e(b).toggleClass("this-closed")}}});this.resolve()});EasySocial.module("uploader/item",function(e){EasySocial.require().view("site/uploader/preview").done(function(e){EasySocial.Controller("Uploader.Item",{defaults:{"{uploadItem}":".uploadItem","{uploadItemPreview}":".uploadItem.preview a.itemLink","{itemLink}":".itemLink","{itemDelete}":".itemDelete",
view:{preview:"site/uploader/preview"}}},function(b){return{init:function(){},"{itemDelete} click":function(a){var b=e(a).data("id");EasySocial.ajax("site:/controllers/uploader/delete",{id:b},function(){e(a).parents("li.uploadItem").remove()})},"{uploadItemPreview} click":function(a){var b=e(a).data("uri");a=e(a).data("title");e.dialog({title:a,content:e.Image.get(b)})}}})});this.resolve()});EasySocial.module("utilities/alias",function(e){EasySocial.Controller("Utilities.Alias",{defaultOptions:{"{target}":"",
"{source}":""}},function(e){return{init:function(){},convertToPermalink:function(b){return b.replace(/\s/g,"-").replace(/[^\w/-]/g,"").toLowerCase()},"{source} keyup":function(){e.target().val(e.convertToPermalink(e.source().val()))},"{target} keyup":function(){e.target().val(e.convertToPermalink(e.target().val()))}}});this.resolve()})});